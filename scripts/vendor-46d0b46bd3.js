!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){function e(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function t(e){var t=typeof e;return null===e||"undefined"===t||"boolean"===t||"number"===t||"string"===t}function n(e){var n,r,i;if(t(e))return e;if(r=e.valueOf,h(r)&&(n=r.call(e),t(n)))return n;if(i=e.toString,h(i)&&(n=i.call(e),t(n)))return n;throw new TypeError}var r=Array.prototype,i=Object.prototype,o=Function.prototype,a=String.prototype,s=Number.prototype,l=r.slice,c=r.splice,u=r.push,d=r.unshift,f=o.call,p=i.toString,h=function(e){return"[object Function]"===p.call(e)},m=function(e){return"[object RegExp]"===p.call(e)},g=function(e){return"[object Array]"===p.call(e)},v=function(e){return"[object String]"===p.call(e)},b=function(e){var t=p.call(e),n="[object Arguments]"===t;return n||(n=!g(e)&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&h(e.callee)),n},y=function(e){var t,n=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();return t=n?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)},function(n,r,i){for(var o in r)e.call(r,o)&&t(n,o,r[o],i)}}(i.hasOwnProperty),E={ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)},ToUint32:function(e){return e>>>0}},w=function(){};y(o,{bind:function(e){var t=this;if(!h(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=l.call(arguments,1),i=function(){if(this instanceof n){var i=t.apply(this,r.concat(l.call(arguments)));return Object(i)===i?i:this}return t.apply(e,r.concat(l.call(arguments)))},o=Math.max(0,t.length-r.length),a=[],s=0;s<o;s++)a.push("$"+s);return n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(i),t.prototype&&(w.prototype=t.prototype,n.prototype=new w,w.prototype=null),n}});var C=f.bind(i.hasOwnProperty),T=function(){var e=[1,2],t=e.splice();return 2===e.length&&g(t)&&0===t.length}();y(r,{splice:function(e,t){return 0===arguments.length?[]:c.apply(this,arguments)}},!T);var $=function(){var e={};return r.splice.call(e,0,0,1),1===e.length}();y(r,{splice:function(t,n){if(0===arguments.length)return[];var r=arguments;return this.length=Math.max(e(this.length),0),arguments.length>0&&"number"!=typeof n&&(r=l.call(arguments),r.length<2?r.push(this.length-t):r[1]=e(n)),c.apply(this,r)}},!$);var S=1!==[].unshift(0);y(r,{unshift:function(){return d.apply(this,arguments),this.length}},S),y(Array,{isArray:g});var x=Object("a"),A="a"!==x[0]||!(0 in x),_=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")),!!e&&t&&n};y(r,{forEach:function(e){var t=E.ToObject(this),n=A&&v(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if(!h(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}},!_(r.forEach)),y(r,{map:function(e){var t=E.ToObject(this),n=A&&v(this)?this.split(""):t,r=n.length>>>0,i=Array(r),o=arguments[1];if(!h(e))throw new TypeError(e+" is not a function");for(var a=0;a<r;a++)a in n&&(i[a]=e.call(o,n[a],a,t));return i}},!_(r.map)),y(r,{filter:function(e){var t,n=E.ToObject(this),r=A&&v(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if(!h(e))throw new TypeError(e+" is not a function");for(var s=0;s<i;s++)s in r&&(t=r[s],e.call(a,t,s,n)&&o.push(t));return o}},!_(r.filter)),y(r,{every:function(e){var t=E.ToObject(this),n=A&&v(this)?this.split(""):t,r=n.length>>>0,i=arguments[1];if(!h(e))throw new TypeError(e+" is not a function");for(var o=0;o<r;o++)if(o in n&&!e.call(i,n[o],o,t))return!1;return!0}},!_(r.every)),y(r,{some:function(e){var t=E.ToObject(this),n=A&&v(this)?this.split(""):t,r=n.length>>>0,i=arguments[1];if(!h(e))throw new TypeError(e+" is not a function");for(var o=0;o<r;o++)if(o in n&&e.call(i,n[o],o,t))return!0;return!1}},!_(r.some));var k=!1;r.reduce&&(k="object"==typeof r.reduce.call("es5",function(e,t,n,r){return r})),y(r,{reduce:function(e){var t=E.ToObject(this),n=A&&v(this)?this.split(""):t,r=n.length>>>0;if(!h(e))throw new TypeError(e+" is not a function");if(!r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;o<r;o++)o in n&&(i=e.call(void 0,i,n[o],o,t));return i}},!k);var O=!1;r.reduceRight&&(O="object"==typeof r.reduceRight.call("es5",function(e,t,n,r){return r})),y(r,{reduceRight:function(e){var t=E.ToObject(this),n=A&&v(this)?this.split(""):t,r=n.length>>>0;if(!h(e))throw new TypeError(e+" is not a function");if(!r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(o<0)return i;do o in n&&(i=e.call(void 0,i,n[o],o,t));while(o--);return i}},!O);var R=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;y(r,{indexOf:function(t){var n=A&&v(this)?this.split(""):E.ToObject(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=e(arguments[1])),i=i>=0?i:Math.max(0,r+i);i<r;i++)if(i in n&&n[i]===t)return i;return-1}},R);var N=Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;y(r,{lastIndexOf:function(t){var n=A&&v(this)?this.split(""):E.ToObject(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,e(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}},N);var D=!{toString:null}.propertyIsEnumerable("toString"),I=function(){}.propertyIsEnumerable("prototype"),L=!C("x","0"),F=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=F.length;y(Object,{keys:function(e){var t=h(e),n=b(e),r=null!==e&&"object"==typeof e,i=r&&v(e);if(!r&&!t&&!n)throw new TypeError("Object.keys called on a non-object");var o=[],a=I&&t;if(i&&L||n)for(var s=0;s<e.length;++s)o.push(String(s));if(!n)for(var l in e)a&&"prototype"===l||!C(e,l)||o.push(String(l));if(D)for(var c=e.constructor,u=c&&c.prototype===e,d=0;d<M;d++){var f=F[d];u&&"constructor"===f||!C(e,f)||o.push(f)}return o}});var P=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),B=Object.keys;y(Object,{keys:function(e){return B(b(e)?r.slice.call(e):e)}},!P);var U=-621987552e5,j="-000001",H=Date.prototype.toISOString&&new Date(U).toISOString().indexOf(j)===-1;y(Date.prototype,{toISOString:function(){var e,t,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,e=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(r<0?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(0<=r&&r<=9999?-4:-6),t=e.length;t--;)n=e[t],n<10&&(e[t]="0"+n);return r+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},H);var K=!1;try{K=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(U).toJSON().indexOf(j)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(W){}K||(Date.prototype.toJSON=function(e){var t,r=Object(this),i=n(r);if("number"==typeof i&&!isFinite(i))return null;if(t=r.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(r)});var z=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),q=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),Y=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));Date.parse&&!Y&&!q&&z||(Date=function(e){function t(n,r,i,o,a,s,l){var c=arguments.length;if(this instanceof e){var u=1===c&&String(n)===n?new e(t.parse(n)):c>=7?new e(n,r,i,o,a,s,l):c>=6?new e(n,r,i,o,a,s):c>=5?new e(n,r,i,o,a):c>=4?new e(n,r,i,o):c>=3?new e(n,r,i):c>=2?new e(n,r):c>=1?new e(n):new e;return u.constructor=t,u}return e.apply(this,arguments)}function n(e,t){var n=t>1?1:0;return o[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)}function r(t){return Number(new e(1970,0,1,0,0,0,t))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in e)t[a]=e[a];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var o=i.exec(t);if(o){var a,s=Number(o[1]),l=Number(o[2]||1)-1,c=Number(o[3]||1)-1,u=Number(o[4]||0),d=Number(o[5]||0),f=Number(o[6]||0),p=Math.floor(1e3*Number(o[7]||0)),h=Boolean(o[4]&&!o[8]),m="-"===o[9]?1:-1,g=Number(o[10]||0),v=Number(o[11]||0);return u<(d>0||f>0||p>0?24:25)&&d<60&&f<60&&p<1e3&&l>-1&&l<12&&g<24&&v<60&&c>-1&&c<n(s,l+1)-n(s,l)&&(a=60*(24*(n(s,l)+c)+u+g*m),a=1e3*(60*(a+d+v*m)+f)+p,h&&(a=r(a)),-864e13<=a&&a<=864e13)?a:NaN}return e.parse.apply(this,arguments)},t}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var V=s.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),G={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1;++n<G.size;)t+=e*G.data[n],G.data[n]=t%G.base,t=Math.floor(t/G.base)},divide:function(e){for(var t=G.size,n=0;--t>=0;)n+=G.data[t],G.data[t]=Math.floor(n/e),n=n%e*G.base},numToString:function(){for(var e=G.size,t="";--e>=0;)if(""!==t||0===e||0!==G.data[e]){var n=String(G.data[e]);""===t?t=n:t+="0000000".slice(0,7-n.length)+n}return t},pow:function se(e,t,n){return 0===t?n:t%2===1?se(e,t-1,n*e):se(e*e,t/2,n)},log:function(e){for(var t=0;e>=4096;)t+=12,e/=4096;for(;e>=2;)t+=1,e/=2;return t}};y(s,{toFixed:function(e){var t,n,r,i,o,a,s,l;if(t=Number(e),t=t!==t?0:Math.floor(t),t<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=Number(this),n!==n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(r="",n<0&&(r="-",n=-n),i="0",n>1e-21)if(o=G.log(n*G.pow(2,69,1))-69,a=o<0?n*G.pow(2,-o,1):n/G.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(G.multiply(0,a),s=t;s>=7;)G.multiply(1e7,0),s-=7;for(G.multiply(G.pow(10,s,1),0),s=o-1;s>=23;)G.divide(1<<23),s-=23;G.divide(1<<s),G.multiply(1,1),G.divide(2),i=G.numToString()}else G.multiply(0,a),G.multiply(1<<-o,0),i=G.numToString()+"0.00000000000000000000".slice(2,2+t);return t>0?(l=i.length,i=l<=t?r+"0.0000000000000000000".slice(0,t-l+2)+i:r+i.slice(0,l-t)+"."+i.slice(l-t)):i=r+i,i}},V);var X=a.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1];a.split=function(t,n){var r=this;if("undefined"==typeof t&&0===n)return[];if("[object RegExp]"!==p.call(t))return X.call(this,t,n);var i,o,a,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),d=0;for(t=new RegExp(t.source,c+"g"),r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",c)),n="undefined"==typeof n?-1>>>0:E.ToUint32(n),o=t.exec(r);o&&(a=o.index+o[0].length,!(a>d&&(l.push(r.slice(d,o.index)),!e&&o.length>1&&o[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<r.length&&u.apply(l,o.slice(1)),s=o[0].length,d=a,l.length>=n)));)t.lastIndex===o.index&&t.lastIndex++,o=t.exec(r);return d===r.length?!s&&t.test("")||l.push(""):l.push(r.slice(d)),l.length>n?l.slice(0,n):l}}():"0".split(void 0,0).length&&(a.split=function(e,t){return"undefined"==typeof e&&0===t?[]:X.call(this,e,t)});var Q=a.replace,Z=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){e.push(n)}),1===e.length&&"undefined"==typeof e[0]}();Z||(a.replace=function(e,t){var n=h(t),r=m(e)&&/\)[*?]/.test(e.source);if(n&&r){var i=function(n){var r=arguments.length,i=e.lastIndex;e.lastIndex=0;var o=e.exec(n)||[];return e.lastIndex=i,o.push(arguments[r-2],arguments[r-1]),t.apply(this,o)};return Q.call(this,e,i)}return Q.call(this,e,t)});var J=a.substr,ee="".substr&&"b"!=="0b".substr(-1);y(a,{substr:function(e,t){return J.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},ee);var te="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",ne="​",re="["+te+"]",ie=new RegExp("^"+re+re+"*"),oe=new RegExp(re+re+"*$"),ae=a.trim&&(te.trim()||!ne.trim());y(a,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(ie,"").replace(oe,"")}},ae),8===parseInt(te+"08")&&22===parseInt(te+"0x16")||(parseInt=function(e){var t=/^0[xX]/;return function(n,r){return n=String(n).trim(),Number(r)||(r=t.test(n)?16:10),e(n,r)}}(parseInt))}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=J.type(e);return"function"!==n&&!J.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e,t,n){if(J.isFunction(t))return J.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return J.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return J.filter(t,e,n);t=J.filter(t,e)}return J.grep(e,function(e){return q.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return J.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function a(){Q.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),J.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+s.uid++}function l(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ee,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ye.test(n)?J.parseJSON(n):n)}catch(i){}be.set(e,t,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function d(){try{return Q.activeElement}catch(e){}}function f(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,r=e.length;n<r;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function g(e,t){var n,r,i,o,a,s,l,c;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),a=ve.set(t,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(n=0,r=c[i].length;n<r;n++)J.event.add(t,i,c[i][n])}be.hasData(e)&&(s=be.access(e),l=J.extend({},s),be.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],n):n}function b(e,t){var n=t.nodeName.toLowerCase();"input"===n&&$e.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function y(t,n){var r,i=J(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:J.css(i[0],"display");return i.detach(),o}function E(e){var t=Q,n=Ue[e];return n||(n=y(e,t),"none"!==n&&n||(Be=(Be||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Be[0].contentDocument,t.write(),t.close(),n=y(e,t),Be.detach()),Ue[e]=n),n}function w(e,t,n){var r,i,o,a,s=e.style;return n=n||Ke(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||J.contains(e.ownerDocument,e)||(a=J.style(e,t)),He.test(a)&&je.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function C(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ge.length;i--;)if(t=Ge[i]+n,t in e)return t;return r}function $(e,t,n){var r=ze.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function S(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=J.css(e,n+Ce[o],!0,i)),r?("content"===n&&(a-=J.css(e,"padding"+Ce[o],!0,i)),"margin"!==n&&(a-=J.css(e,"border"+Ce[o]+"Width",!0,i))):(a+=J.css(e,"padding"+Ce[o],!0,i),"padding"!==n&&(a+=J.css(e,"border"+Ce[o]+"Width",!0,i)));return a}function x(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ke(e),a="border-box"===J.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=w(e,t,o),(i<0||null==i)&&(i=e.style[t]),He.test(i))return i;r=a&&(X.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(a?"border":"content"),r,o)+"px"}function A(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)r=e[a],r.style&&(o[a]=ve.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Te(r)&&(o[a]=ve.access(r,"olddisplay",E(r.nodeName)))):(i=Te(r),"none"===n&&i||ve.set(r,"olddisplay",i?n:J.css(r,"display"))));for(a=0;a<s;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function _(e,t,n,r,i){return new _.prototype.init(e,t,n,r,i)}function k(){return setTimeout(function(){Xe=void 0}),Xe=J.now()}function O(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Ce[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function R(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function N(e,t,n){var r,i,o,a,s,l,c,u,d=this,f={},p=e.style,h=e.nodeType&&Te(e),m=ve.get(e,"fxshow");n.queue||(s=J._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,J.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=J.css(e,"display"),u="none"===c?ve.get(e,"olddisplay")||E(e.nodeName):c,"inline"===u&&"none"===J.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ze.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||J.style(e,r)}else c=void 0;if(J.isEmptyObject(f))"inline"===("none"===c?E(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(h=m.hidden):m=ve.access(e,"fxshow",{}),o&&(m.hidden=!h),h?J(e).show():d.done(function(){J(e).hide()}),d.done(function(){var t;ve.remove(e,"fxshow");for(t in f)J.style(e,t,f[t])});for(r in f)a=R(h?m[r]:0,r,d),r in m||(m[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function D(e,t){var n,r,i,o,a;for(n in e)if(r=J.camelCase(n),i=t[r],o=e[n],J.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=J.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function I(e,t,n){var r,i,o=0,a=tt.length,s=J.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Xe||k(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,l=c.tweens.length;a<l;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),o<1&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xe||k(),duration:n.duration,tweens:[],createTween:function(t,n){var r=J.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),u=c.props;for(D(u,c.opts.specialEasing);o<a;o++)if(r=tt[o].call(c,e,u,c.opts))return r;return J.map(u,R,c),J.isFunction(c.opts.start)&&c.opts.start.call(e,c),J.fx.timer(J.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function L(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(pe)||[];if(J.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function F(e,t,n,r){function i(s){var l;return o[s]=!0,J.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),l}var o={},a=e===yt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function M(e,t){var n,r,i=J.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&J.extend(!0,e,r),e}function P(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function B(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(e,t,n,r){var i;if(J.isArray(t))J.each(t,function(t,i){n||$t.test(e)?r(e,i):U(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==J.type(t))r(e,t);else for(i in t)U(e+"["+i+"]",t[i],n,r)}function j(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var H=[],K=H.slice,W=H.concat,z=H.push,q=H.indexOf,Y={},V=Y.toString,G=Y.hasOwnProperty,X={},Q=e.document,Z="2.1.4",J=function(e,t){return new J.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};J.fn=J.prototype={jquery:Z,constructor:J,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:z,sort:H.sort,splice:H.splice},J.extend=J.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||J.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(c&&r&&(J.isPlainObject(r)||(i=J.isArray(r)))?(i?(i=!1,o=n&&J.isArray(n)?n:[]):o=n&&J.isPlainObject(n)?n:{},a[t]=J.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},J.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===J.type(e)&&!e.nodeType&&!J.isWindow(e)&&!(e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[V.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=J.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;o<a&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;o<a&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?J.merge(r,"string"==typeof e?[e]:e):z.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),l=[];if(s)for(;o<a;o++)i=t(e[o],o,r),null!=i&&l.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&l.push(i);return W.apply([],l)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),J.isFunction(e))return r=K.call(arguments,2),i=function(){return e.apply(t||this,r.concat(K.call(arguments)))},i.guid=e.guid=e.guid||J.guid++,i},now:Date.now,support:X}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,a,s,l,c,d,p,h,m;if((t?t.ownerDocument||t:U)!==N&&R(t),t=t||N,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&I){if(11!==s&&(i=be.exec(e)))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&P(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!L||!L.test(e))){if(p=d=B,h=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=S(e),(d=t.getAttribute("id"))?p=d.replace(Ee,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+f(c[l]);h=ye.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return A(e.replace(le,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[B]=!0,e}function i(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=H++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,c=[j,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[B]||(t[B]={}),(s=l[r])&&s[0]===j&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function v(e,t,n,i,o,a){return i&&!i[B]&&(i=v(i)),o&&!o[B]&&(o=v(o,a)),r(function(r,a,s,l){var c,u,d,f=[],p=[],h=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),b=!e||!r&&t?v:g(v,f,e,s,l),y=n?o||(r?e:h||i)?[]:a:b;if(n&&n(b,y,s,l),i)for(c=g(y,p),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(b[p[u]]=d));if(r){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?ee(r,d):f[u])>-1&&(r[c]=!(a[c]=d))}}else y=g(y===a?y.splice(h,y.length):y),o?o(null,a,y,l):Z.apply(a,y)})}function b(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return ee(t,e)>-1},a,!0),u=[function(e,n,r){var i=!o&&(r||n!==_)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s<i;s++)if(n=C.relative[e[s].type])u=[p(h(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[B]){for(r=++s;r<i&&!C.relative[e[r].type];r++);return v(s>1&&h(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,s<r&&b(e.slice(s,r)),r<i&&b(e=e.slice(r)),r<i&&f(e))}u.push(n)}return h(u)}function y(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,c){var u,d,f,p=0,h="0",m=r&&[],v=[],b=_,y=r||o&&C.find.TAG("*",c),E=j+=null==b?1:Math.random()||.1,w=y.length;for(c&&(_=a!==N&&a);h!==w&&null!=(u=y[h]);h++){if(o&&u){for(d=0;f=e[d++];)if(f(u,a,s)){l.push(u);break}c&&(j=E)}i&&((u=!f&&u)&&p--,r&&m.push(u))}if(p+=h,i&&h!==p){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(p>0)for(;h--;)m[h]||v[h]||(v[h]=X.call(l));v=g(v)}Z.apply(l,v),c&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(j=E,_=b),m};return i?r(a):a}var E,w,C,T,$,S,x,A,_,k,O,R,N,D,I,L,F,M,P,B="sizzle"+1*new Date,U=e.document,j=0,H=0,K=n(),W=n(),z=n(),q=function(e,t){return e===t&&(O=!0),0},Y=1<<31,V={}.hasOwnProperty,G=[],X=G.pop,Q=G.push,Z=G.push,J=G.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),pe=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),
bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,Ee=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Te=function(){R()};try{Z.apply(G=J.call(U.childNodes),U.childNodes),G[U.childNodes.length].nodeType}catch($e){Z={apply:G.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},$=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==N&&9===r.nodeType&&r.documentElement?(N=r,D=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),I=!$(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(e){return D.appendChild(e).id=B,!r.getElementsByName||!r.getElementsByName(B).length}),w.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(we,Ce);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(we,Ce);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=w.getElementsByClassName&&function(e,t){if(I)return t.getElementsByClassName(e)},F=[],L=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(e){D.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||L.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=ve.test(M=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&i(function(e){w.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),F.push("!=",ae)}),L=L.length&&new RegExp(L.join("|")),F=F.length&&new RegExp(F.join("|")),t=ve.test(D.compareDocumentPosition),P=t||ve.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===U&&P(U,e)?-1:t===r||t.ownerDocument===U&&P(U,t)?1:k?ee(k,e)-ee(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:k?ee(k,e)-ee(k,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[i]===c[i];)i++;return i?a(l[i],c[i]):l[i]===U?-1:c[i]===U?1:0},r):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&R(e),n=n.replace(de,"='$1']"),w.matchesSelector&&I&&(!F||!F.test(n))&&(!L||!L.test(n)))try{var r=M.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&R(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&R(e);var n=C.attrHandle[t.toLowerCase()],r=n&&V.call(C.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==r?r:w.attributes||!I?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(O=!w.detectDuplicates,k=!w.sortStable&&e.slice(0),e.sort(q),O){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return k=null,e},T=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=T(t);return n},C=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ce),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=K[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&K(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&b){for(u=g[B]||(g[B]={}),c=u[e]||[],p=c[0]===j&&c[1],f=c[0]===j&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[j,p,f];break}}else if(b&&(c=(t[B]||(t[B]={}))[e])&&c[0]===j)f=c[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(b&&((d[B]||(d[B]={}))[e]=[j,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(i=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=x(e.replace(le,"$1"));return i[B]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Ce),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ce).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})C.pseudos[E]=l(E);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,S=t.tokenize=function(e,n){var r,i,o,a,s,l,c,u=W[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=C.preFilter;s;){r&&!(i=ce.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ue.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(le," ")}),s=s.slice(r.length));for(a in C.filter)!(i=he[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):W(e,l).slice(0)},x=t.compile=function(e,t){var n,r=[],i=[],o=z[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=b(t[n]),o[B]?r.push(o):i.push(o);o=z(e,y(i,r)),o.selector=e}return o},A=t.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,d=!r&&S(e=c.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&I&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(we,Ce),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((l=C.find[s])&&(r=l(a.matches[0].replace(we,Ce),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return Z.apply(n,r),n;break}}return(c||x(e,d))(r,t,!I,n,ye.test(e)&&u(t.parentNode)||t),n},w.sortStable=B.split("").sort(q).join("")===B,w.detectDuplicates=!!O,R(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);J.find=ie,J.expr=ie.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ie.uniqueSort,J.text=ie.getText,J.isXMLDoc=ie.isXML,J.contains=ie.contains;var oe=J.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;J.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?J.find.matchesSelector(r,e)?[r]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;t<n;t++)if(J.contains(i[t],this))return!0}));for(t=0;t<n;t++)J.find(e,i[t],r);return r=this.pushStack(n>1?J.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?J(e):e||[],!1).length}});var le,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=J.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ce.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),ae.test(n[1])&&J.isPlainObject(t))for(n in t)J.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))};ue.prototype=J.fn,le=J(Q);var de=/^(?:parents|prev(?:Until|All))/,fe={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&J(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),J.fn.extend({has:function(e){var t=J(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=oe.test(e)||"string"!=typeof e?J(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&J.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(e){return e?"string"==typeof e?q.call(J(e),this[0]):q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,n){return J.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,n){return J.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return J.dir(e,"previousSibling",n)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(n,r){var i=J.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=J.filter(r,i)),this.length>1&&(fe[e]||J.unique(i),de.test(e)&&i.reverse()),this.pushStack(i)}});var pe=/\S+/g,he={};J.Callbacks=function(e){e="string"==typeof e?he[e]||o(e):J.extend({},e);var t,n,r,i,a,s,l=[],c=!e.once&&[],u=function(o){for(t=e.memory&&o,n=!0,s=i||0,i=0,a=l.length,r=!0;l&&s<a;s++)if(l[s].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,l&&(c?c.length&&u(c.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(t){J.each(t,function(t,n){var r=J.type(n);"function"===r?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?a=l.length:t&&(i=n,u(t))}return this},remove:function(){return l&&J.each(arguments,function(e,t){for(var n;(n=J.inArray(t,l,n))>-1;)l.splice(n,1),r&&(n<=a&&a--,n<=s&&s--)}),this},has:function(e){return e?J.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=t=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||n&&!c||(t=t||[],t=[e,t.slice?t.slice():t],r?c.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(n){J.each(t,function(t,o){var a=J.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,r):r}},i={};return r.pipe=r.then,J.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=K.call(arguments),a=o.length,s=1!==a||e&&J.isFunction(e.promise)?a:0,l=1===s?e:J.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?K.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&J.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(l.reject).progress(c(i,n,t)):--s;return s||l.resolveWith(r,o),l.promise()}});var me;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(e===!0?--J.readyWait:J.isReady)||(J.isReady=!0,e!==!0&&--J.readyWait>0||(me.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(t){return me||(me=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),me.promise(t)},J.ready.promise();var ge=J.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===J.type(n)){i=!0;for(s in n)J.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,J.isFunction(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(J(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=J.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,J.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(J.isEmptyObject(o))J.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,J.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{J.isArray(t)?r=t.concat(t.map(J.camelCase)):(i=J.camelCase(t),t in a?r=[t,i]:(r=i,r=r in a?[r]:r.match(pe)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new s,be=new s,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/([A-Z])/g;J.extend({hasData:function(e){return be.hasData(e)||ve.hasData(e)},data:function(e,t,n){return be.access(e,t,n)},removeData:function(e,t){be.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),J.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=be.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=J.camelCase(r.slice(5)),l(o,r,i[r])));ve.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){be.set(this,e)}):ge(this,function(t){var n,r=J.camelCase(e);if(o&&void 0===t){if(n=be.get(o,e),void 0!==n)return n;if(n=be.get(o,r),void 0!==n)return n;if(n=l(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=be.get(this,r);be.set(this,r,t),e.indexOf("-")!==-1&&void 0!==n&&be.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){be.remove(this,e)})}}),J.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ve.get(e,t),n&&(!r||J.isArray(n)?r=ve.access(e,t,J.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=J.queue(e,t),r=n.length,i=n.shift(),o=J._queueHooks(e,t),a=function(){J.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:J.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),J.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?J.queue(this[0],e):void 0===t?this:this.each(function(){var n=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=J.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ve.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=["Top","Right","Bottom","Left"],Te=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},$e=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),X.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";X.focusinBubbles="onfocusin"in e;var xe=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,_e=/^(?:focusinfocus|focusoutblur)$/,ke=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,g=ve.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=J.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return typeof J!==Se&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],c=t.length;c--;)s=ke.exec(t[c])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p&&(d=J.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=J.event.special[p]||{},u=J.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&J.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||(f=l[p]=[],f.delegateCount=0,d.setup&&d.setup.call(e,r,h,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),J.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,g=ve.hasData(e)&&ve.get(e);if(g&&(l=g.events)){for(t=(t||"").match(pe)||[""],c=t.length;c--;)if(s=ke.exec(t[c])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=J.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,f=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));a&&!f.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||J.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)J.event.remove(e,p+t[c],n,r,!0);J.isEmptyObject(l)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,c,u,d,f=[r||Q],p=G.call(t,"type")?t.type:t,h=G.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!_e.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[J.expando]?t:new J.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:J.makeArray(n,[t]),d=J.event.special[p]||{},i||!d.trigger||d.trigger.apply(r,n)!==!1)){if(!i&&!d.noBubble&&!J.isWindow(r)){for(l=d.delegateType||p,_e.test(l+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||Q)&&f.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||p,u=(ve.get(a,"events")||{})[t.type]&&ve.get(a,"handle"),u&&u.apply(a,n),u=c&&a[c],u&&u.apply&&J.acceptData(a)&&(t.result=u.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||d._default&&d._default.apply(f.pop(),n)!==!1||!J.acceptData(r)||c&&J.isFunction(r[p])&&!J.isWindow(r)&&(s=r[c],s&&(r[c]=null),J.event.triggered=p,r[p](),J.event.triggered=void 0,s&&(r[c]=s)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,n,r,i,o,a=[],s=K.call(arguments),l=(ve.get(this,"events")||{})[e.type]||[],c=J.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=J.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,r=((J.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(r=[],n=0;n<s;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?J(i,this).index(l)>=0:J.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Q,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Ae.test(i)?this.mouseHooks:xe.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new J.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==d()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===d()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&J.nodeName(this,"input"))return this.click(),!1},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=J.extend(new J.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?J.event.trigger(i,null,t):J.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},J.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?c:u):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||J.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),X.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ve.access(r,t);i||r.addEventListener(e,n,!0),ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ve.access(r,t)-1;i?ve.access(r,t,i):(r.removeEventListener(e,n,!0),ve.remove(r,t))}}}),J.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,
n=t,t=void 0)),r===!1)r=u;else if(!r)return this;return 1===i&&(o=r,r=function(e){return J().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,J(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=u),this.each(function(){J.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return J.event.trigger(e,t,n,!0)}});var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Re=/<([\w:]+)/,Ne=/<|&#?\w+;/,De=/<(?:script|style|link)/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,J.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=J.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(a=v(s),o=v(e),r=0,i=o.length;r<i;r++)b(o[r],a[r]);if(t)if(n)for(o=o||v(e),a=a||v(s),r=0,i=o.length;r<i;r++)g(o[r],a[r]);else g(e,s);return a=v(s,"script"),a.length>0&&m(a,!l&&v(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,c,u=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if(i=e[f],i||0===i)if("object"===J.type(i))J.merge(d,i.nodeType?[i]:i);else if(Ne.test(i)){for(o=o||u.appendChild(t.createElement("div")),a=(Re.exec(i)||["",""])[1].toLowerCase(),s=Pe[a]||Pe._default,o.innerHTML=s[1]+i.replace(Oe,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;J.merge(d,o.childNodes),o=u.firstChild,o.textContent=""}else d.push(t.createTextNode(i));for(u.textContent="",f=0;i=d[f++];)if((!r||J.inArray(i,r)===-1)&&(l=J.contains(i.ownerDocument,i),o=v(u.appendChild(i),"script"),l&&m(o),n))for(c=0;i=o[c++];)Le.test(i.type||"")&&n.push(i);return u},cleanData:function(e){for(var t,n,r,i,o=J.event.special,a=0;void 0!==(n=e[a]);a++){if(J.acceptData(n)&&(i=n[ve.expando],i&&(t=ve.cache[i]))){if(t.events)for(r in t.events)o[r]?J.event.remove(n,r):J.removeEvent(n,r,t.handle);ve.cache[i]&&delete ve.cache[i]}delete be.cache[n[be.expando]]}}}),J.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?J.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||J.cleanData(v(n)),n.parentNode&&(t&&J.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!Pe[(Re.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Oe,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(J.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var n,r,i,o,a,s,l=0,c=this.length,u=this,d=c-1,f=e[0],m=J.isFunction(f);if(m||c>1&&"string"==typeof f&&!X.checkClone&&Ie.test(f))return this.each(function(n){var r=u.eq(n);m&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(c&&(n=J.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=J.map(v(n,"script"),p),o=i.length;l<c;l++)a=n,l!==d&&(a=J.clone(a,!0,!0),o&&J.merge(i,v(a,"script"))),t.call(this[l],a,l);if(o)for(s=i[i.length-1].ownerDocument,J.map(i,h),l=0;l<o;l++)a=i[l],Le.test(a.type||"")&&!ve.access(a,"globalEval")&&J.contains(s,a)&&(a.src?J._evalUrl&&J._evalUrl(a.src):J.globalEval(a.textContent.replace(Me,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var n,r=[],i=J(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),J(i[a])[t](n),z.apply(r,n.get());return this.pushStack(r)}});var Be,Ue={},je=/^margin/,He=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),Ke=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(a,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=Q.documentElement,o=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),e.getComputedStyle&&J.extend(X,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(Q.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),a.removeChild(n),t}}))}(),J.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var We=/^(none|table(?!-c[ea]).+)/,ze=new RegExp("^("+we+")(.*)$","i"),qe=new RegExp("^([+-])=("+we+")","i"),Ye={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=J.camelCase(t),l=e.style;return t=J.cssProps[s]||(J.cssProps[s]=T(l,s)),a=J.cssHooks[t]||J.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]:(o=typeof n,"string"===o&&(i=qe.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(J.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||J.cssNumber[s]||(n+="px"),X.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,a,s=J.camelCase(t);return t=J.cssProps[s]||(J.cssProps[s]=T(e.style,s)),a=J.cssHooks[t]||J.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),n===!0||J.isNumeric(o)?o||0:i):i}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,n,r){if(n)return We.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Ye,function(){return x(e,t,r)}):x(e,t,r)},set:function(e,n,r){var i=r&&Ke(e);return $(e,n,r?S(e,t,r,"border-box"===J.css(e,"boxSizing",!1,i),i):0)}}}),J.cssHooks.marginRight=C(X.reliableMarginRight,function(e,t){if(t)return J.swap(e,{display:"inline-block"},w,[e,"marginRight"])}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Ce[r]+t]=o[r]||o[r-2]||o[0];return i}},je.test(e)||(J.cssHooks[e+t].set=$)}),J.fn.extend({css:function(e,t){return ge(this,function(e,t,n){var r,i,o={},a=0;if(J.isArray(t)){for(r=Ke(e),i=t.length;a<i;a++)o[t[a]]=J.css(e,t[a],!1,r);return o}return void 0!==n?J.style(e,t,n):J.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Te(this)?J(this).show():J(this).hide()})}}),J.Tween=_,_.prototype={constructor:_,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(J.cssNumber[n]?"":"px")},cur:function(){var e=_.propHooks[this.prop];return e&&e.get?e.get(this):_.propHooks._default.get(this)},run:function(e){var t,n=_.propHooks[this.prop];return this.options.duration?this.pos=t=J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):_.propHooks._default.set(this),this}},_.prototype.init.prototype=_.prototype,_.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},_.propHooks.scrollTop=_.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=_.prototype.init,J.fx.step={};var Xe,Qe,Ze=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[N],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Je.exec(t),o=i&&i[3]||(J.cssNumber[e]?"":"px"),a=(J.cssNumber[e]||"px"!==o&&+r)&&Je.exec(J.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,J.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};J.Animation=J.extend(I,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),J.speed=function(e,t,n){var r=e&&"object"==typeof e?J.extend({},e):{complete:n||!n&&t||J.isFunction(e)&&e,duration:e,easing:n&&t||t&&!J.isFunction(t)&&t};return r.duration=J.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in J.fx.speeds?J.fx.speeds[r.duration]:J.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){J.isFunction(r.old)&&r.old.call(this),r.queue&&J.dequeue(this,r.queue)},r},J.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Te).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=J.isEmptyObject(e),o=J.speed(t,n,r),a=function(){var t=I(this,J.extend({},e),o);(i||ve.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=J.timers,a=ve.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&et.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||J.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=J.timers,a=r?r.length:0;for(n.finish=!0,J.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),J.each(["toggle","show","hide"],function(e,t){var n=J.fn[t];J.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,r,i)}}),J.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),J.timers=[],J.fx.tick=function(){var e,t=0,n=J.timers;for(Xe=J.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||J.fx.stop(),Xe=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qe||(Qe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qe),Qe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),n=t.appendChild(Q.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=n.selected,t.disabled=!0,X.optDisabled=!n.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",X.radioValue="t"===e.value}();var rt,it,ot=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return ge(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Se?J.prop(e,t,n):(1===o&&J.isXMLDoc(e)||(t=t.toLowerCase(),r=J.attrHooks[t]||(J.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=J.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void J.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(pe);if(o&&1===e.nodeType)for(;n=o[i++];)r=J.propFix[n]||n,J.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&J.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?J.removeAttr(e,n):e.setAttribute(n,n),n}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||J.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var at=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return ge(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!J.isXMLDoc(e),o&&(t=J.propFix[t]||t,i=J.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];l<c;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=J.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];l<c;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?J.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):J.isFunction(e)?this.each(function(n){J(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=J(this),o=e.match(pe)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==Se&&"boolean"!==n||(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;J.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=J.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,J(this).val()):e,null==i?i="":"number"==typeof i?i+="":J.isArray(i)&&(i=J.map(i,function(e){return null==e?"":e+""})),t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=J.valHooks[i.type]||J.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)}}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(n=r[l],(n.selected||l===i)&&(X.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!J.nodeName(n.parentNode,"optgroup"))){if(t=J(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=J.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=J.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){if(J.isArray(t))return e.checked=J.inArray(J(e).val(),t)>=0}},X.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ct=J.now(),ut=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||J.error("Invalid XML: "+e),t};var dt=/#.*$/,ft=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bt={},yt={},Et="*/".concat("*"),wt=e.location.href,Ct=vt.exec(wt.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:ht.test(Ct[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,J.ajaxSettings),t):M(J.ajaxSettings,e)},ajaxPrefilter:L(bt),ajaxTransport:L(yt),ajax:function(e,t){function n(e,t,n,a){var l,u,v,b,E,C=t;2!==y&&(y=2,s&&clearTimeout(s),r=void 0,o=a||"",w.readyState=e>0?4:0,l=e>=200&&e<300||304===e,n&&(b=P(d,w,n)),b=B(d,b,w,l),l?(d.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(J.lastModified[i]=E),E=w.getResponseHeader("etag"),E&&(J.etag[i]=E)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=b.state,u=b.data,v=b.error,l=!v)):(v=C,!e&&C||(C="error",e<0&&(e=0))),w.status=e,w.statusText=(t||C)+"",l?h.resolveWith(f,[u,C,w]):h.rejectWith(f,[w,C,v]),w.statusCode(g),g=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?u:v]),m.fireWith(f,[w,C]),c&&(p.trigger("ajaxComplete",[w,d]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,c,u,d=J.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?J(f):J.event,h=J.Deferred(),m=J.Callbacks("once memory"),g=d.statusCode||{},v={},b={},y=0,E="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!a)for(a={};t=pt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||E;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||wt)+"").replace(dt,"").replace(gt,Ct[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=J.trim(d.dataType||"*").toLowerCase().match(pe)||[""],null==d.crossDomain&&(l=vt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===Ct[1]&&l[2]===Ct[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(Ct[3]||("http:"===Ct[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=J.param(d.data,d.traditional)),F(bt,d,t,w),2===y)return w;c=J.event&&d.global,c&&0===J.active++&&J.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!mt.test(d.type),i=d.url,d.hasContent||(d.data&&(i=d.url+=(ut.test(i)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ft.test(i)?i.replace(ft,"$1_="+ct++):i+(ut.test(i)?"&":"?")+"_="+ct++)),d.ifModified&&(J.lastModified[i]&&w.setRequestHeader("If-Modified-Since",J.lastModified[i]),J.etag[i]&&w.setRequestHeader("If-None-Match",J.etag[i])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Et+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)w.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===y))return w.abort();E="abort";for(u in{success:1,error:1,complete:1})w[u](d[u]);if(r=F(yt,d,t,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,r.send(v,n)}catch(C){if(!(y<2))throw C;n(-1,C)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return J.get(e,t,n,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,n,r,i){return J.isFunction(n)&&(i=i||r,r=n,n=void 0),J.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return J.isFunction(e)?this.each(function(t){J(this).wrapInner(e.call(this,t))}):this.each(function(){var t=J(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(n){J(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var Tt=/%20/g,$t=/\[\]$/,St=/\r?\n/g,xt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var n,r=[],i=function(e,t){t=J.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){i(this.name,this.value)});else for(n in e)U(n,e[n],t,i);return r.join("&").replace(Tt,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&At.test(this.nodeName)&&!xt.test(e)&&(this.checked||!$e.test(e))}).map(function(e,t){var n=J(this).val();return null==n?null:J.isArray(n)?J.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var _t=0,kt={},Ot={0:200,1223:204},Rt=J.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in kt)kt[e]()}),X.cors=!!Rt&&"withCredentials"in Rt,X.ajax=Rt=!!Rt,J.ajaxTransport(function(e){var t;if(X.cors||Rt&&!e.crossDomain)return{send:function(n,r){var i,o=e.xhr(),a=++_t;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete kt[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Ot[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=kt[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Nt=[],Dt=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||J.expando+"_"+ct++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(Dt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Dt,"$1"+i):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||J.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Nt.push(i)),a&&J.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),J.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var r=ae.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=J.buildFragment([e],t,i),i&&i.length&&J(i).remove(),J.merge([],r.childNodes))};var It=J.fn.load;J.fn.load=function(e,t,n){if("string"!=typeof e&&It)return It.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=J.trim(e.slice(s)),e=e.slice(0,s)),J.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&J.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?J("<div>").append(J.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var Lt=e.document.documentElement;J.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c,u=J.css(e,"position"),d=J(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=J.css(e,"top"),l=J.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),J.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,J.contains(t,r)?(typeof r.getBoundingClientRect!==Se&&(i=r.getBoundingClientRect()),n=j(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===J.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(r=e.offset()),r.top+=J.css(e[0],"borderTopWidth",!0),r.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-J.css(n,"marginTop",!0),left:t.left-r.left-J.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Lt;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||Lt;
})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;J.fn[t]=function(i){return ge(this,function(t,i,o){var a=j(t);return void 0===o?a?a[n]:t[i]:void(a?a.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=C(X.pixelPosition,function(e,n){if(n)return n=w(e,t),He.test(n)?J(e).position()[t]+"px":n})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){J.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return ge(this,function(t,n,r){var i;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?J.css(t,n,a):J.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Ft=e.jQuery,Mt=e.$;return J.noConflict=function(t){return e.$===J&&(e.$=Mt),t&&e.jQuery===J&&(e.jQuery=Ft),J},typeof t===Se&&(e.jQuery=e.$=J),J}),function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,i=2,o=arguments,a=o[0],s="["+(e?e+":":"")+a+"] ",l=o[1];for(s+=l.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<o.length?ye(o[n]):e}),s+="\nhttp://errors.angularjs.org/1.5.9/"+(e?e+"/":"")+a,r=i,n="?";r<o.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(ye(o[r]));return new t(s)}}function n(e){if(null==e||x(e))return!1;if(ri(e)||w(e)||zr&&e instanceof zr)return!0;var t="length"in Object(e)&&e.length;return C(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function r(e,t,i){var o,a;if(e)if($(e))for(o in e)"prototype"===o||"length"===o||"name"===o||e.hasOwnProperty&&!e.hasOwnProperty(o)||t.call(i,e[o],o,e);else if(ri(e)||n(e)){var s="object"!=typeof e;for(o=0,a=e.length;o<a;o++)(s||o in e)&&t.call(i,e[o],o,e)}else if(e.forEach&&e.forEach!==r)e.forEach(t,i,e);else if(E(e))for(o in e)t.call(i,e[o],o,e);else if("function"==typeof e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else for(o in e)Br.call(e,o)&&t.call(i,e[o],o,e);return e}function i(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function o(e){return function(t,n){e(n,t)}}function a(){return++ti}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function l(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;i<o;++i){var a=t[i];if(y(a)||$(a))for(var c=Object.keys(a),u=0,d=c.length;u<d;u++){var f=c[u],p=a[f];n&&y(p)?T(p)?e[f]=new Date(p.valueOf()):S(p)?e[f]=new RegExp(p):p.nodeName?e[f]=p.cloneNode(!0):L(p)?e[f]=p.clone():(y(e[f])||(e[f]=ri(p)?[]:{}),l(e[f],[p],!0)):e[f]=p}}return s(e,r),e}function c(e){return l(e,Vr.call(arguments,1),!1)}function u(e){return l(e,Vr.call(arguments,1),!0)}function d(e){return parseInt(e,10)}function f(e,t){return c(Object.create(e),t)}function p(){}function h(e){return e}function m(e){return function(){return e}}function g(e){return $(e.toString)&&e.toString!==Qr}function v(e){return"undefined"==typeof e}function b(e){return"undefined"!=typeof e}function y(e){return null!==e&&"object"==typeof e}function E(e){return null!==e&&"object"==typeof e&&!Zr(e)}function w(e){return"string"==typeof e}function C(e){return"number"==typeof e}function T(e){return"[object Date]"===Qr.call(e)}function $(e){return"function"==typeof e}function S(e){return"[object RegExp]"===Qr.call(e)}function x(e){return e&&e.window===e}function A(e){return e&&e.$evalAsync&&e.$watch}function _(e){return"[object File]"===Qr.call(e)}function k(e){return"[object FormData]"===Qr.call(e)}function O(e){return"[object Blob]"===Qr.call(e)}function R(e){return"boolean"==typeof e}function N(e){return e&&$(e.then)}function D(e){return e&&C(e.length)&&ii.test(Qr.call(e))}function I(e){return"[object ArrayBuffer]"===Qr.call(e)}function L(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function F(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function M(e){return Ur(e.nodeName||e[0]&&e[0].nodeName)}function P(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function B(e,t){function n(e,t){var n,r=t.$$hashKey;if(ri(e))for(var o=0,a=e.length;o<a;o++)t.push(i(e[o]));else if(E(e))for(n in e)t[n]=i(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=i(e[n]));else for(n in e)Br.call(e,n)&&(t[n]=i(e[n]));return s(t,r),t}function i(e){if(!y(e))return e;var t=a.indexOf(e);if(t!==-1)return l[t];if(x(e)||A(e))throw Jr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=o(e);return void 0===i&&(i=ri(e)?[]:Object.create(Zr(e)),r=!0),a.push(e),l.push(i),r?n(e,i):i}function o(e){switch(Qr.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(i(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if($(e.cloneNode))return e.cloneNode(!0)}var a=[],l=[];if(t){if(D(t)||I(t))throw Jr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw Jr("cpi","Can't copy! Source and destination are identical.");return ri(t)?t.length=0:r(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),l.push(t),n(e,t)}return i(e)}function U(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,o=typeof e,a=typeof t;if(o===a&&"object"===o){if(!ri(e)){if(T(e))return!!T(t)&&U(e.getTime(),t.getTime());if(S(e))return!!S(t)&&e.toString()===t.toString();if(A(e)||A(t)||x(e)||x(t)||ri(t)||T(t)||S(t))return!1;i=me();for(r in e)if("$"!==r.charAt(0)&&!$(e[r])){if(!U(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&b(t[r])&&!$(t[r]))return!1;return!0}if(!ri(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!U(e[r],t[r]))return!1;return!0}}return!1}function j(e,t,n){return e.concat(Vr.call(t,n))}function H(e,t){return Vr.call(e,t||0)}function K(e,t){var n=arguments.length>2?H(arguments,2):[];return!$(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,j(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function W(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:x(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":A(n)&&(r="$SCOPE"),r}function z(e,t){if(!v(e))return C(t)||(t=t?2:null),JSON.stringify(e,W,t)}function q(e){return w(e)?JSON.parse(e):e}function Y(e,t){e=e.replace(ci,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return ni(n)?t:n}function V(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function G(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),i=Y(t,r);return V(e,n*(i-r))}function X(e){e=zr(e).clone();try{e.empty()}catch(t){}var n=zr("<div>").append(e).html();try{return e[0].nodeType===gi?Ur(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Ur(t)})}catch(t){return Ur(n)}}function Q(e){try{return decodeURIComponent(e)}catch(t){}}function Z(e){var t={};return r((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),n!==-1&&(r=e.substring(0,n),i=e.substring(n+1)),r=Q(r),b(r)&&(i=!b(i)||Q(i),Br.call(t,r)?ri(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function J(e){var t=[];return r(e,function(e,n){ri(e)?r(e,function(e){t.push(te(n,!0)+(e===!0?"":"="+te(e,!0)))}):t.push(te(n,!0)+(e===!0?"":"="+te(e,!0)))}),t.length?t.join("&"):""}function ee(e){return te(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function te(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ne(e,t){var n,r,i=ui.length;for(r=0;r<i;++r)if(n=ui[r]+t,w(n=e.getAttribute(n)))return n;return null}function re(e){if(!e.currentScript)return!0;var t=e.currentScript.getAttribute("src"),n=e.createElement("a");n.href=t;var r=n.protocol,i=e.location.protocol;if(i===r)return!0;switch(r){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function ie(t,n){var i,o,a={};if(r(ui,function(e){var n=e+"app";!i&&t.hasAttribute&&t.hasAttribute(n)&&(i=t,o=t.getAttribute(n))}),r(ui,function(e){var n,r=e+"app";!i&&(n=t.querySelector("["+r.replace(":","\\:")+"]"))&&(i=n,o=n.getAttribute(r))}),i){if(!di)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==ne(i,"strict-di"),n(i,o?[o]:[],a)}}function oe(t,n,i){y(i)||(i={});var o={strictDi:!1};i=c(o,i);var a=function(){if(t=zr(t),t.injector()){var r=t[0]===e.document?"document":X(t);throw Jr("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=it(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!l.test(e.name)?a():(e.name=e.name.replace(l,""),ei.resumeBootstrap=function(e){return r(e,function(e){n.push(e)}),a()},void($(ei.resumeDeferredBootstrap)&&ei.resumeDeferredBootstrap()))}function ae(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function se(e){var t=ei.element(e).injector();if(!t)throw Jr("test","no injector found for element argument to getTestability");return t.get("$$testability")}function le(e,t){return t=t||"_",e.replace(fi,function(e,n){return(n?t:"")+e.toLowerCase()})}function ce(){var t;if(!pi){var n=li();qr=v(n)?e.jQuery:n?e[n]:void 0,qr&&qr.fn.on?(zr=qr,c(qr.fn,{scope:Li.scope,isolateScope:Li.isolateScope,controller:Li.controller,injector:Li.injector,inheritedData:Li.inheritedData}),t=qr.cleanData,qr.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)n=qr._data(r,"events"),n&&n.$destroy&&qr(r).triggerHandler("$destroy");t(e)}):zr=Oe,ei.element=zr,pi=!0}}function ue(e,t,n){if(!e)throw Jr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function de(e,t,n){return n&&ri(e)&&(e=e[e.length-1]),ue($(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function fe(e,t){if("hasOwnProperty"===e)throw Jr("badname","hasOwnProperty is not a valid {0} name",t)}function pe(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;s<a;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&$(e)?K(o,e):e}function he(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=zr(Vr.call(e,0,i))),t.push(n));return t||e}function me(){return Object.create(null)}function ge(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),o=n(e,"angular",Object);return o.$$minErr=o.$$minErr||t,n(o,"module",function(){var e={};return function(t,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(t,"module"),o&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),u}}function n(e,n){return function(r,o){return o&&$(o)&&(o.$$moduleName=t),i.push([e,n,arguments]),u}}if(!o)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var i=[],s=[],l=[],c=e("$injector","invoke","push",s),u={_invokeQueue:i,_configBlocks:s,_runBlocks:l,requires:o,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:c,run:function(e){return l.push(e),this}};return a&&c(a),u})}})}function ve(e,t){if(ri(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function be(e){var t=[];return JSON.stringify(e,function(e,n){if(n=W(e,n),y(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function ye(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):v(e)?"undefined":"string"!=typeof e?be(e):e}function Ee(n){c(n,{bootstrap:oe,copy:B,extend:c,merge:u,equals:U,element:zr,forEach:r,injector:it,noop:p,bind:K,toJson:z,fromJson:q,identity:h,isUndefined:v,isDefined:b,isString:w,isFunction:$,isObject:y,isNumber:C,isElement:L,isArray:ri,version:Ei,isDate:T,lowercase:Ur,uppercase:jr,callbacks:{$$counter:0},getTestability:se,$$minErr:t,$$csp:si,reloadWithDebugInfo:ae}),(Yr=ge(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:xn}),e.provider("$compile",mt).directive({a:ra,input:Ca,textarea:Ca,form:la,script:vs,select:Es,option:ws,ngBind:Sa,ngBindHtml:Aa,ngBindTemplate:xa,ngClass:ka,ngClassEven:Ra,ngClassOdd:Oa,ngCloak:Na,ngController:Da,ngForm:ca,ngHide:us,ngIf:Fa,ngInclude:Ma,ngInit:Ba,ngNonBindable:ts,ngPluralize:os,ngRepeat:as,ngShow:cs,ngStyle:ds,ngSwitch:fs,ngSwitchWhen:ps,ngSwitchDefault:hs,ngOptions:is,ngTransclude:gs,ngModel:Za,ngList:Ua,ngChange:_a,pattern:Ts,ngPattern:Ts,required:Cs,ngRequired:Cs,minlength:Ss,ngMinlength:Ss,maxlength:$s,ngMaxlength:$s,ngValue:$a,ngModelOptions:es}).directive({ngInclude:Pa}).directive(ia).directive(Ia),e.provider({$anchorScroll:ot,$animate:Qi,$animateCss:eo,$$animateJs:Gi,$$animateQueue:Xi,$$AnimateRunner:Ji,$$animateAsyncRun:Zi,$browser:dt,$cacheFactory:ft,$controller:wt,$document:Ct,$exceptionHandler:Tt,$filter:Un,$$forceReflow:ao,$interpolate:Mt,$interval:Pt,$http:Dt,$httpParamSerializer:St,$httpParamSerializerJQLike:xt,$httpBackend:Lt,$xhrFactory:It,$jsonpCallbacks:go,$location:Jt,$log:en,$parse:En,$rootScope:Sn,$q:wn,$$q:Cn,$sce:On,$sceDelegate:kn,$sniffer:Rn,$templateCache:pt,$templateRequest:Nn,$$testability:Dn,$timeout:In,$window:Mn,$$rAF:$n,$$jqLite:Qe,$$HashMap:Bi,$$cookieReader:Bn})}])}function we(){return++Ci}function Ce(e){return e.replace(Si,function(e,t,n,r){return r?n.toUpperCase():n}).replace(xi,"Moz$1")}function Te(e){return!Oi.test(e)}function $e(e){var t=e.nodeType;return t===hi||!t||t===bi}function Se(e){for(var t in wi[e.ng339])return!0;return!1}function xe(e){for(var t=0,n=e.length;t<n;t++)Ie(e[t])}function Ae(e,t){var n,i,o,a,s=t.createDocumentFragment(),l=[];if(Te(e))l.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),i=(Ri.exec(e)||["",""])[1].toLowerCase(),o=Di[i]||Di._default,n.innerHTML=o[1]+e.replace(Ni,"<$1></$2>")+o[2],a=o[0];a--;)n=n.lastChild;l=j(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",r(l,function(e){s.appendChild(e)}),s}function _e(t,n){n=n||e.document;var r;return(r=ki.exec(t))?[n.createElement(r[1])]:(r=Ae(t,n))?r.childNodes:[]}function ke(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Oe(e){if(e instanceof Oe)return e;var t;if(w(e)&&(e=oi(e),t=!0),!(this instanceof Oe)){if(t&&"<"!==e.charAt(0))throw _i("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Oe(e)}t?Ue(this,_e(e)):Ue(this,e)}function Re(e){return e.cloneNode(!0)}function Ne(e,t){if(t||Ie(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;r<i;r++)Ie(n[r])}function De(e,t,n,i){if(b(i))throw _i("offargs","jqLite#off() does not support the `selector` argument");var o=Le(e),a=o&&o.events,s=o&&o.handle;if(s)if(t){var l=function(t){var r=a[t];b(n)&&P(r||[],n),b(n)&&r&&r.length>0||($i(e,t,s),delete a[t])};r(t.split(" "),function(e){l(e),Ai[e]&&l(Ai[e])})}else for(t in a)"$destroy"!==t&&$i(e,t,s),delete a[t]}function Ie(e,t){var n=e.ng339,r=n&&wi[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),De(e)),delete wi[n],e.ng339=void 0}}function Le(e,t){var n=e.ng339,r=n&&wi[n];return t&&!r&&(e.ng339=n=we(),r=wi[n]={events:{},data:{},handle:void 0}),r}function Fe(e,t,n){if($e(e)){var r=b(n),i=!r&&t&&!y(t),o=!t,a=Le(e,!i),s=a&&a.data;if(r)s[t]=n;else{if(o)return s;if(i)return s&&s[t];c(s,t)}}}function Me(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function Pe(e,t){t&&e.setAttribute&&r(t.split(" "),function(t){e.setAttribute("class",oi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+oi(t)+" "," ")))})}function Be(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(e){e=oi(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",oi(n))}}function Ue(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function je(e,t){return He(e,"$"+(t||"ngController")+"Controller")}function He(e,t,n){e.nodeType===bi&&(e=e.documentElement);for(var r=ri(t)?t:[t];e;){for(var i=0,o=r.length;i<o;i++)if(b(n=zr.data(e,r[i])))return n;e=e.parentNode||e.nodeType===yi&&e.host}}function Ke(e){for(Ne(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function We(e,t){t||Ne(e);var n=e.parentNode;n&&n.removeChild(e)}function ze(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):zr(n).on("load",t)}function qe(e,t){var n=Fi[t.toLowerCase()];return n&&Mi[M(e)]&&n}function Ye(e){return Pi[e]}function Ve(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(v(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||Ge;o>1&&(i=ve(i));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(e,n,i[l])}};return n.elem=e,n}function Ge(e,t,n){n.call(e,t)}function Xe(e,t,n){var r=t.relatedTarget;r&&(r===e||Ii.call(e,r))||n.call(e,t)}function Qe(){this.$get=function(){return c(Oe,{hasClass:function(e,t){return e.attr&&(e=e[0]),Me(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Be(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Pe(e,t)}})}}function Ze(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||a)():r+":"+e}function Je(e,t){if(t){var n=0;this.nextUid=function(){return++n}}r(e,this.put,this)}function et(e){return Function.prototype.toString.call(e)+" "}function tt(e){var t=et(e).replace(Wi,""),n=t.match(Ui)||t.match(ji);return n}function nt(e){var t=tt(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function rt(e,t,n){var i,o,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw w(n)&&n||(n=e.name||nt(e)),zi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=tt(e),r(o[1].split(Hi),function(e){e.replace(Ki,function(e,t,n){i.push(n)})})}e.$inject=i}}else ri(e)?(a=e.length-1,de(e[a],"fn"),i=e.slice(0,a)):de(e,"fn",!0);return i}function it(e,t){function n(e){return function(t,n){return y(t)?void r(t,o(e)):e(t,n)}}function i(e,t){if(fe(e,"service"),($(t)||ri(t))&&(t=T.instantiate(t)),!t.$get)throw zi("pget","Provider '{0}' must define $get factory method.",e);return C[e+g]=t}function a(e,t){return function(){var n=A.invoke(t,this);if(v(n))throw zi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return i(e,{$get:n!==!1?a(e,t):t})}function l(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return s(e,m(t),!1)}function u(e,t){fe(e,"constant"),C[e]=t,S[e]=t}function d(e,t){var n=T.get(e+g),r=n.$get;n.$get=function(){var e=A.invoke(r,n);return A.invoke(t,null,{$delegate:e})}}function f(e){ue(v(e)||ri(e),"modulesToLoad","not an array");var t,n=[];return r(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=T.get(r[0]);i[r[1]].apply(i,r[2])}}if(!E.get(e)){E.put(e,!0);try{w(e)?(t=Yr(e),n=n.concat(f(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):$(e)?n.push(T.invoke(e)):ri(e)?n.push(T.invoke(e)):de(e,"module")}catch(i){throw ri(e)&&(e=e[e.length-1]),i.message&&i.stack&&i.stack.indexOf(i.message)===-1&&(i=i.message+"\n"+i.stack),zi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===h)throw zi("cdep","Circular dependency found: {0}",t+" <- "+b.join(" <- "));return e[t]}try{return b.unshift(t),e[t]=h,e[t]=n(t,r),e[t]}catch(i){throw e[t]===h&&delete e[t],i}finally{b.shift()}}function i(e,n,i){for(var o=[],a=it.$$annotate(e,t,i),s=0,l=a.length;s<l;s++){var c=a[s];if("string"!=typeof c)throw zi("itkn","Incorrect injection token! Expected service name as string, got {0}",c);o.push(n&&n.hasOwnProperty(c)?n[c]:r(c,i))}return o}function o(e){return!(Wr<=11)&&("function"==typeof e&&/^(?:class\b|constructor\()/.test(et(e)))}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return ri(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=ri(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:it.$$annotate,has:function(t){return C.hasOwnProperty(t+g)||e.hasOwnProperty(t)}}}t=t===!0;var h={},g="Provider",b=[],E=new Je([],(!0)),C={$provide:{provider:n(i),factory:n(s),service:n(l),value:n(c),constant:n(u),decorator:d}},T=C.$injector=p(C,function(e,t){throw ei.isString(t)&&b.push(t),zi("unpr","Unknown provider: {0}",b.join(" <- "))}),S={},x=p(S,function(e,t){var n=T.get(e+g,t);return A.invoke(n.$get,n,void 0,e)}),A=x;C["$injector"+g]={$get:m(x)};var _=f(e);return A=x.get("$injector"),A.strictDi=t,r(_,function(e){e&&A.invoke(e)}),A}function ot(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===M(e))return t=e,!0}),t}function o(){var e=s.yOffset;if($(e))e=e();else if(L(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else C(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=w(e)?e:n.hash();var t;e?(t=l.getElementById(e))?a(t):(t=i(l.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var l=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||ze(function(){r.$evalAsync(s)})}),s}]}function at(e,t){return e||t?e?t?(ri(e)&&(e=e.join(" ")),ri(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function st(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Yi)return n}}function lt(e){w(e)&&(e=e.split(" "));var t=me();return r(e,function(e){e.length&&(t[e]=!0)}),t}function ct(e){return y(e)?e:{}}function ut(e,t,n,i){function o(e){try{e.apply(null,H(arguments,1))}finally{if(b--,0===b)for(;y.length;)try{y.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function s(){$=null,l(),c()}function l(){E=S(),E=v(E)?null:E,U(E,_)&&(E=_),_=E}function c(){C===u.url()&&w===E||(C=u.url(),w=E,r(x,function(e){e(u.url(),E)}))}var u=this,d=e.location,f=e.history,h=e.setTimeout,m=e.clearTimeout,g={};u.isMock=!1;var b=0,y=[];u.$$completeOutstandingRequest=o,u.$$incOutstandingRequestCount=function(){b++},u.notifyWhenNoOutstandingRequests=function(e){0===b?e():y.push(e)};var E,w,C=d.href,T=t.find("base"),$=null,S=i.history?function(){try{return f.state}catch(e){}}:p;l(),w=E,u.url=function(t,n,r){if(v(r)&&(r=null),d!==e.location&&(d=e.location),f!==e.history&&(f=e.history),t){var o=w===r;if(C===t&&(!i.history||o))return u;var s=C&&Wt(C)===Wt(t);return C=t,w=r,!i.history||s&&o?(s||($=t),n?d.replace(t):s?d.hash=a(t):d.href=t,d.href!==t&&($=t)):(f[n?"replaceState":"pushState"](r,"",t),l(),w=E),$&&($=t),u}return $||d.href.replace(/%27/g,"'")},u.state=function(){return E};var x=[],A=!1,_=null;u.onUrlChange=function(t){return A||(i.history&&zr(e).on("popstate",s),zr(e).on("hashchange",s),A=!0),x.push(t),t},u.$$applicationDestroyed=function(){zr(e).off("hashchange popstate",s)},u.$$checkUrlChange=c,u.baseHref=function(){var e=T.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},u.defer=function(e,t){var n;return b++,n=h(function(){delete g[n],o(e)},t||0),g[n]=!0,n},u.defer.cancel=function(e){return!!g[e]&&(delete g[e],m(e),o(p),!0)}}function dt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new ut(e,r,t,n)}]}function ft(){this.$get=function(){function e(e,r){function i(e){e!==f&&(p?p===e&&(p=e.n):p=e,o(e.n,e.p),o(e,f),f=e,f.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=c({},r,{id:e}),l=me(),u=r&&r.capacity||Number.MAX_VALUE,d=me(),f=null,p=null;return n[e]={put:function(e,t){if(!v(t)){if(u<Number.MAX_VALUE){var n=d[e]||(d[e]={key:e});i(n)}return e in l||a++,l[e]=t,a>u&&this.remove(p.key),t}},get:function(e){if(u<Number.MAX_VALUE){var t=d[e];if(!t)return;i(t)}return l[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=d[e];if(!t)return;t===f&&(f=t.p),t===p&&(p=t.n),o(t.n,t.p),delete d[e]}e in l&&(delete l[e],a--)},removeAll:function(){l=me(),a=0,d=me(),f=p=null},destroy:function(){l=null,s=null,d=null,delete n[e]},info:function(){return c({},s,{size:a})}}}var n={};return e.info=function(){var e={};return r(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function pt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function ht(){}function mt(t,n){function i(e,t,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=me();return r(e,function(e,r){if(e in x)return void(o[r]=x[e]);var a=e.match(i);if(!a)throw to("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e,n?"controller bindings definition":"isolate scope definition");o[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r},a[4]&&(x[e]=o[r])}),o}function a(e,t){var n={isolateScope:null,bindToController:null};if(y(e.scope)&&(e.bindToController===!0?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),y(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),y(n.bindToController)){var r=e.controller,o=e.controllerAs;if(!r)throw to("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!Et(r,o))throw to("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function s(e){var t=e.charAt(0);if(!t||t!==Ur(t))throw to("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw to("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function l(e){var t=e.require||e.controller&&e.name;return!ri(t)&&y(t)&&r(t,function(e,n){var r=e.match(T),i=e.substring(r[0].length);i||(t[n]=r[0]+n)}),t}var u={},d="Directive",g=/^\s*directive:\s*([\w\-]+)\s+(.*)$/,E=/(([\w\-]+)(?::([^;]+))?;?)/,C=F("ngSrc,ngSrcset,src,srcset"),T=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,S=/^(on[a-z]+|formaction)$/,x=me();this.directive=function D(e,n){return fe(e,"directive"),w(e)?(s(e),ue(n,"directiveFactory"),u.hasOwnProperty(e)||(u[e]=[],t.factory(e+d,["$injector","$exceptionHandler",function(t,n){var i=[];return r(u[e],function(r,o){try{var a=t.invoke(r);$(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||e,a.require=l(a),a.restrict=a.restrict||"EA",a.$$moduleName=r.$$moduleName,i.push(a)}catch(s){n(s)}}),i}])),u[e].push(n)):r(e,o(D)),this},this.component=function(e,t){function n(e){function n(t){return $(t)||ri(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var o=t.template||t.templateUrl?t.template:"",a={controller:i,controllerAs:Et(t.controller)||t.controllerAs||"$ctrl",template:n(o),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return r(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var i=t.controller||function(){};return r(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,$(i)&&(i[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return b(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var _=!0;this.debugInfoEnabled=function(e){return b(e)?(_=e,this):_};var k=10;this.onChangesTtl=function(e){return arguments.length?(k=e,this):k};var O=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(O=e,this):O};var N=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(N=e,this):N},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,i,o,s,l,m,x,D,I){function L(){try{if(!--Ae)throw we=void 0,to("infchng","{0} $onChanges() iterations reached. Aborting!\n",k);m.$apply(function(){for(var e=[],t=0,n=we.length;t<n;++t)try{we[t]()}catch(r){e.push(r)}if(we=void 0,e.length)throw e})}finally{Ae++}}function F(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;n<r;n++)i=o[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function B(e,t,n){$e.innerHTML="<span "+t+">";var r=$e.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function j(e,t){try{e.addClass(t)}catch(n){}}function W(t,n,r,i,o){t instanceof zr||(t=zr(t));for(var a=/\S+/,s=0,l=t.length;s<l;s++){var c=t[s];c.nodeType===gi&&c.nodeValue.match(a)&&ke(c,t[s]=e.document.createElement("span"))}var u=q(t,n,t,r,i,o);W.$$addScopeClass(t);var d=null;return function(e,n,r){ue(e,"scope"),o&&o.needsNewScope&&(e=e.$parent.$new()),r=r||{};var i=r.parentBoundTranscludeFn,a=r.transcludeControllers,s=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),d||(d=z(s));var l;if(l="html"!==d?zr(pe(d,zr("<div>").append(t).html())):n?Li.clone.call(t):t,a)for(var c in a)l.data("$"+c+"Controller",a[c].instance);return W.$$addScopeInfo(l,e),n&&n(l,e),u&&u(e,l,l,i),l}}function z(e){var t=e&&e[0];return t&&"foreignobject"!==M(t)&&Qr.call(t).match(/SVG/)?"svg":"html"}function q(e,t,n,r,i,o){function a(e,n,r,i){var o,a,s,l,c,u,d,f,m;if(p){var g=n.length;for(m=new Array(g),c=0;c<h.length;c+=3)d=h[c],
m[d]=n[d]}else m=n;for(c=0,u=h.length;c<u;)s=m[h[c++]],o=h[c++],a=h[c++],o?(o.scope?(l=e.$new(),W.$$addScopeInfo(zr(s),l)):l=e,f=o.transcludeOnThisElement?Y(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?Y(e,t):null,o(a,l,s,r,f)):a&&a(e,s.childNodes,void 0,i)}for(var s,l,c,u,d,f,p,h=[],m=0;m<e.length;m++)s=new F,l=V(e[m],[],s,0===m?r:void 0,i),c=l.length?ee(l,e[m],s,t,n,null,[],[],o):null,c&&c.scope&&W.$$addScopeClass(s.$$element),d=c&&c.terminal||!(u=e[m].childNodes)||!u.length?null:q(u,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||d)&&(h.push(m,c,d),f=!0,p=p||c),o=null;return f?a:null}function Y(e,t,n){function r(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=me();for(var o in t.$$slots)t.$$slots[o]?i[o]=Y(e,t.$$slots[o],n):i[o]=null;return r}function V(e,t,n,r,i){var o,a,s,l=e.nodeType,c=n.$attr;switch(l){case hi:a=M(e),ie(t,vt(a),"E",r,i);for(var u,d,f,p,h,m,g=e.attributes,v=0,b=g&&g.length;v<b;v++){var C=!1,T=!1;u=g[v],d=u.name,h=oi(u.value),p=vt(d),m=De.test(p),m&&(d=d.replace(ro,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var $=p.match(Ie);$&&oe($[1])&&(C=d,T=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),f=vt(d.toLowerCase()),c[f]=d,!m&&n.hasOwnProperty(f)||(n[f]=h,qe(e,f)&&(n[f]=!0)),ge(e,t,h,f,m),ie(t,f,"A",r,i,C,T)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!xe)break;if(s=e.className,y(s)&&(s=s.animVal),w(s)&&""!==s)for(;o=E.exec(s);)f=vt(o[2]),ie(t,f,"C",r,i)&&(n[f]=oi(o[3])),s=s.substr(o.index+o[0].length);break;case gi:if(11===Wr)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===gi;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);fe(t,e.nodeValue);break;case vi:if(!Se)break;G(e,t,n,r,i)}return t.sort(ce),t}function G(e,t,n,r,i){try{var o=g.exec(e.nodeValue);if(o){var a=vt(o[1]);ie(t,a,"M",r,i)&&(n[a]=oi(o[2]))}}catch(s){}}function Q(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw to("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===hi&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return zr(r)}function Z(e,t,n){return function(r,i,o,a,s){return i=Q(i[0],t,n),e(r,i,o,a,s)}}function J(e,t,n,r,i,o){var a;return e?W(t,n,r,i,o):function(){return a||(a=W(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function ee(e,t,n,o,a,s,l,u,d){function f(e,t,n,r){e&&(n&&(e=Z(e,n,r)),e.require=h.require,e.directiveName=m,(S===h||h.$$isolateScope)&&(e=be(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=Z(t,n,r)),t.require=h.require,t.directiveName=m,(S===h||h.$$isolateScope)&&(t=be(t,{isolateScope:!0})),u.push(t))}function p(e,o,a,s,d){function f(e,t,n,r){var i;if(A(e)||(r=n,n=t,t=e,e=void 0),R&&(i=E),n||(n=R?_.parent():_),!r)return d(e,t,i,n,P);var o=d.$$slots[r];if(o)return o(e,t,i,n,P);if(v(o))throw to("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,X(_))}var p,h,m,g,b,E,w,_,k,O;t===a?(k=n,_=n.$$element):(_=zr(a),k=new F(_,n)),b=o,S?g=o.$new(!0):C&&(b=o.$parent),d&&(w=f,w.$$boundTransclude=d,w.isSlotFilled=function(e){return!!d.$$slots[e]}),T&&(E=ne(_,k,w,T,g,o,S)),S&&(W.$$addScopeInfo(_,g,!0,!(x&&(x===S||x===S.$$originalDirective))),W.$$addScopeClass(_,!0),g.$$isolateBindings=S.$$isolateBindings,O=Ee(o,k,g,g.$$isolateBindings,S),O.removeWatches&&g.$on("$destroy",O.removeWatches));for(var N in E){var D=T[N],I=E[N],L=D.$$bindings.bindToController;I.identifier&&L?I.bindingInfo=Ee(b,k,I.instance,L,D):I.bindingInfo={};var M=I();M!==I.instance&&(I.instance=M,_.data("$"+D.name+"Controller",M),I.bindingInfo.removeWatches&&I.bindingInfo.removeWatches(),I.bindingInfo=Ee(b,k,I.instance,L,D))}for(r(T,function(e,t){var n=e.require;e.bindToController&&!ri(n)&&y(n)&&c(E[t].instance,te(t,n,_,E))}),r(E,function(e){var t=e.instance;if($(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(n){i(n)}if($(t.$onInit))try{t.$onInit()}catch(n){i(n)}$(t.$doCheck)&&(b.$watch(function(){t.$doCheck()}),t.$doCheck()),$(t.$onDestroy)&&b.$on("$destroy",function(){t.$onDestroy()})}),p=0,h=l.length;p<h;p++)m=l[p],ye(m,m.isolateScope?g:o,_,k,m.require&&te(m.directiveName,m.require,_,E),w);var P=o;for(S&&(S.template||null===S.templateUrl)&&(P=g),e&&e(P,a.childNodes,void 0,d),p=u.length-1;p>=0;p--)m=u[p],ye(m,m.isolateScope?g:o,_,k,m.require&&te(m.directiveName,m.require,_,E),w);r(E,function(e){var t=e.instance;$(t.$postLink)&&t.$postLink()})}d=d||{};for(var h,m,g,b,E,w=-Number.MAX_VALUE,C=d.newScopeDirective,T=d.controllerDirectives,S=d.newIsolateScopeDirective,x=d.templateDirective,_=d.nonTlbTranscludeDirective,k=!1,O=!1,R=d.hasElementTranscludeDirective,N=n.$$element=zr(t),D=s,I=o,L=!1,P=!1,B=0,U=e.length;B<U;B++){h=e[B];var j=h.$$start,z=h.$$end;if(j&&(N=Q(t,j,z)),g=void 0,w>h.priority)break;if(E=h.scope,E&&(h.templateUrl||(y(E)?(de("new/isolated scope",S||C,h,N),S=h):de("new/isolated scope",S,h,N)),C=C||h),m=h.name,!L&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var q,Y=B+1;q=e[Y++];)if(q.transclude&&!q.$$tlb||q.replace&&(q.templateUrl||q.template)){P=!0;break}L=!0}if(!h.templateUrl&&h.controller&&(E=h.controller,T=T||me(),de("'"+m+"' controller",T[m],h,N),T[m]=h),E=h.transclude)if(k=!0,h.$$tlb||(de("transclusion",_,h,N),_=h),"element"===E)R=!0,w=h.priority,g=N,N=n.$$element=zr(W.$$createComment(m,n[m])),t=N[0],ve(a,H(g),t),g[0].$$parentNode=g[0].parentNode,I=J(P,g,o,w,D&&D.name,{nonTlbTranscludeDirective:_});else{var G=me();if(g=zr(Re(t)).contents(),y(E)){g=[];var ee=me(),ie=me();r(E,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,ee[e]=t,G[t]=null,ie[t]=n}),r(N.contents(),function(e){var t=ee[vt(M(e))];t?(ie[t]=!0,G[t]=G[t]||[],G[t].push(e)):g.push(e)}),r(ie,function(e,t){if(!e)throw to("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var oe in G)G[oe]&&(G[oe]=J(P,G[oe],o))}N.empty(),I=J(P,g,o,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope}),I.$$slots=G}if(h.template)if(O=!0,de("template",x,h,N),x=h,E=$(h.template)?h.template(N,n):h.template,E=Ne(E),h.replace){if(D=h,g=Te(E)?[]:yt(pe(h.templateNamespace,oi(E))),t=g[0],1!==g.length||t.nodeType!==hi)throw to("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");ve(a,N,t);var le={$attr:{}},ce=V(t,[],le),ue=e.splice(B+1,e.length-(B+1));(S||C)&&re(ce,S,C),e=e.concat(ce).concat(ue),ae(n,le),U=e.length}else N.html(E);if(h.templateUrl)O=!0,de("template",x,h,N),x=h,h.replace&&(D=h),p=se(e.splice(B,e.length-B),N,n,a,k&&I,l,u,{controllerDirectives:T,newScopeDirective:C!==h&&C,newIsolateScopeDirective:S,templateDirective:x,nonTlbTranscludeDirective:_}),U=e.length;else if(h.compile)try{b=h.compile(N,n,I);var fe=h.$$originalDirective||h;$(b)?f(null,K(fe,b),j,z):b&&f(K(fe,b.pre),K(fe,b.post),j,z)}catch(he){i(he,X(N))}h.terminal&&(p.terminal=!0,w=Math.max(w,h.priority))}return p.scope=C&&C.scope===!0,p.transcludeOnThisElement=k,p.templateOnThisElement=O,p.transclude=I,d.hasElementTranscludeDirective=R,p}function te(e,t,n,i){var o;if(w(t)){var a=t.match(T),s=t.substring(a[0].length),l=a[1]||a[3],c="?"===a[2];if("^^"===l?n=n.parent():(o=i&&i[s],o=o&&o.instance),!o){var u="$"+s+"Controller";o=l?n.inheritedData(u):n.data(u)}if(!o&&!c)throw to("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(ri(t)){o=[];for(var d=0,f=t.length;d<f;d++)o[d]=te(e,t[d],n,i)}else y(t)&&(o={},r(t,function(t,r){o[r]=te(e,t,n,i)}));return o||null}function ne(e,t,n,r,i,o,a){var s=me();for(var c in r){var u=r[c],d={$scope:u===a||u.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},f=u.controller;"@"===f&&(f=t[u.name]);var p=l(f,d,!0,u.controllerAs);s[u.name]=p,e.data("$"+u.name+"Controller",p.instance)}return s}function re(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=f(e[r],{$$isolateScope:t,$$newScope:n})}function ie(e,n,r,o,s,l,c){if(n===s)return null;var p=null;if(u.hasOwnProperty(n))for(var h,m=t.get(n+d),g=0,b=m.length;g<b;g++)try{if(h=m[g],(v(o)||o>h.priority)&&h.restrict.indexOf(r)!==-1){if(l&&(h=f(h,{$$start:l,$$end:c})),!h.$$bindings){var E=h.$$bindings=a(h,h.name);y(E.isolateScope)&&(h.$$isolateBindings=E.isolateScope)}e.push(h),p=h}}catch(w){i(w)}return p}function oe(e){if(u.hasOwnProperty(e))for(var n,r=t.get(e+d),i=0,o=r.length;i<o;i++)if(n=r[i],n.multiElement)return!0;return!1}function ae(e,t){var n=t.$attr,i=e.$attr;r(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),r(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function se(e,t,n,i,a,s,l,c){var u,d,p=[],h=t[0],m=e.shift(),g=f(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=$(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,b=m.templateNamespace;return t.empty(),o(v).then(function(o){var f,E,w,C;if(o=Ne(o),m.replace){if(w=Te(o)?[]:yt(pe(b,oi(o))),f=w[0],1!==w.length||f.nodeType!==hi)throw to("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);E={$attr:{}},ve(i,t,f);var T=V(f,[],E);y(m.scope)&&re(T,!0),e=T.concat(e),ae(n,E)}else f=h,t.html(o);for(e.unshift(g),u=ee(e,f,n,a,t,m,s,l,c),r(i,function(e,n){e===f&&(i[n]=t[0])}),d=q(t[0].childNodes,a);p.length;){var $=p.shift(),S=p.shift(),x=p.shift(),A=p.shift(),_=t[0];if(!$.$$destroyed){if(S!==h){var k=S.className;c.hasElementTranscludeDirective&&m.replace||(_=Re(f)),ve(x,zr(S),_),j(zr(_),k)}C=u.transcludeOnThisElement?Y($,u.transclude,A):A,u(d,$,_,i,C)}}p=null}),function(e,t,n,r,i){var o=i;t.$$destroyed||(p?p.push(t,n,r,o):(u.transcludeOnThisElement&&(o=Y(t,u.transclude,i)),u(d,t,n,r,o)))}}function ce(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function de(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw to("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,X(r))}function fe(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&W.$$addBindingClass(t),function(e,t){var i=t.parent();n||W.$$addBindingClass(i),W.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function pe(t,n){switch(t=Ur(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function he(e,t){if("srcdoc"===t)return x.HTML;var n=M(e);if("src"===t||"ngSrc"===t){if(["img","video","audio","source","track"].indexOf(n)===-1)return x.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t)return x.RESOURCE_URL}function ge(e,t,r,i,o){var a=he(e,i);o=C[i]||o;var s=n(r,!0,a,o);if(s){if("multiple"===i&&"select"===M(e))throw to("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",X(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){var c=l.$$observers||(l.$$observers=me());if(S.test(i))throw to("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=l[i];u!==r&&(s=u&&n(u,!0,a,o),r=u),s&&(l[i]=s(e),(c[i]||(c[i]=[])).$$inter=!0,(l.$$observers&&l.$$observers[i].$$scope||e).$watch(s,function(e,t){"class"===i&&e!==t?l.$updateClass(e,t):l.$set(i,e)}))}}}})}}function ve(t,n,r){var i,o,a=n[0],s=n.length,l=a.parentNode;if(t)for(i=0,o=t.length;i<o;i++)if(t[i]===a){t[i++]=r;for(var c=i,u=c+s-1,d=t.length;c<d;c++,u++)u<d?t[c]=t[u]:delete t[c];t.length-=s-1,t.context===a&&(t.context=r);break}l&&l.replaceChild(r,a);var f=e.document.createDocumentFragment();for(i=0;i<s;i++)f.appendChild(n[i]);for(zr.hasData(a)&&(zr.data(r,zr.data(a)),zr(a).off("$destroy")),zr.cleanData(f.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function be(e,t){return c(function(){return e.apply(null,arguments)},e,t)}function ye(e,t,n,r,o,a){try{e(t,n,r,o,a)}catch(s){i(s,X(n))}}function Ee(e,t,i,o,a){function l(t,n,r){$(i.$onChanges)&&n!==r&&(we||(e.$$postDigest(L),we=[]),u||(u={},we.push(c)),u[t]&&(r=u[t].previousValue),u[t]=new gt(r,n))}function c(){i.$onChanges(u),u=void 0}var u,d=[],f={};return r(o,function(r,o){var c,u,h,m,g,v=r.attrName,b=r.optional,y=r.mode;switch(y){case"@":b||Br.call(t,v)||(i[o]=t[v]=void 0),t.$observe(v,function(e){if(w(e)||R(e)){var t=i[o];l(o,e,t),i[o]=e}}),t.$$observers[v].$$scope=e,c=t[v],w(c)?i[o]=n(c)(e):R(c)&&(i[o]=c),f[o]=new gt(no,i[o]);break;case"=":if(!Br.call(t,v)){if(b)break;t[v]=void 0}if(b&&!t[v])break;u=s(t[v]),m=u.literal?U:function(e,t){return e===t||e!==e&&t!==t},h=u.assign||function(){throw c=i[o]=u(e),to("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[v],v,a.name)},c=i[o]=u(e);var E=function(t){return m(t,i[o])||(m(t,c)?h(e,t=i[o]):i[o]=t),c=t};E.$stateful=!0,g=r.collection?e.$watchCollection(t[v],E):e.$watch(s(t[v],E),null,u.literal),d.push(g);break;case"<":if(!Br.call(t,v)){if(b)break;t[v]=void 0}if(b&&!t[v])break;u=s(t[v]);var C=i[o]=u(e);f[o]=new gt(no,i[o]),g=e.$watch(u,function(e,t){if(t===e){if(t===C)return;t=C}l(o,e,t),i[o]=e},u.literal),d.push(g);break;case"&":if(u=t.hasOwnProperty(v)?s(t[v]):p,u===p&&b)break;i[o]=function(t){return u(e,t)}}}),{initialChanges:f,removeWatches:d.length&&function(){for(var e=0,t=d.length;e<t;++e)d[e]()}}}var we,Ce=/^\w/,$e=e.document.createElement("div"),Se=O,xe=N,Ae=k;F.prototype={$normalize:vt,$addClass:function(e){e&&e.length>0&&D.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&D.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=bt(e,t);n&&n.length&&D.addClass(this.$$element,n);var r=bt(t,e);r&&r.length&&D.removeClass(this.$$element,r)},$set:function(e,t,n,o){var a,s=this.$$element[0],l=qe(s,e),c=Ye(e),u=e;if(l?(this.$$element.prop(e,t),o=l):c&&(this[c]=t,u=c),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=le(e,"-"))),a=M(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=I(t,"src"===e);else if("img"===a&&"srcset"===e&&b(t)){for(var d="",f=oi(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,h=/\s/.test(f)?p:/(,)/,m=f.split(h),g=Math.floor(m.length/2),y=0;y<g;y++){var E=2*y;d+=I(oi(m[E]),!0),d+=" "+oi(m[E+1])}var w=oi(m[2*y]).split(/\s/);d+=I(oi(w[0]),!0),2===w.length&&(d+=" "+oi(w[1])),this[e]=t=d}n!==!1&&(null===t||v(t)?this.$$element.removeAttr(o):Ce.test(o)?this.$$element.attr(o,t):B(this.$$element[0],o,t));var C=this.$$observers;C&&r(C[u],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=me()),i=r[e]||(r[e]=[]);return i.push(t),m.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||v(n[e])||t(n[e])}),function(){P(i,t)}}};var _e=n.startSymbol(),Oe=n.endSymbol(),Ne="{{"===_e&&"}}"===Oe?h:function(e){return e.replace(/\{\{/g,_e).replace(/}}/g,Oe)},De=/^ngAttr[A-Z]/,Ie=/^(.+)Start$/;return W.$$addBindingInfo=_?function(e,t){var n=e.data("$binding")||[];ri(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,W.$$addBindingClass=_?function(e){j(e,"ng-binding")}:p,W.$$addScopeInfo=_?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:p,W.$$addScopeClass=_?function(e,t){j(e,t?"ng-isolate-scope":"ng-scope")}:p,W.$$createComment=function(t,n){var r="";return _&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},W}]}function gt(e,t){this.previousValue=e,this.currentValue=t}function vt(e){return Ce(e.replace(ro,""))}function bt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function yt(e){e=zr(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];n.nodeType===vi&&Gr.call(e,t,1)}return e}function Et(e,t){if(t&&w(t))return t;if(w(e)){var n=oo.exec(e);if(n)return n[3]}}function wt(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){fe(t,"controller"),y(t)?c(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function o(e,n,r,i){if(!e||!y(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function(t,a,s,l){var u,d,f,p;if(s=s===!0,l&&w(l)&&(p=l),w(t)){if(d=t.match(oo),!d)throw io("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);f=d[1],p=p||d[3],t=e.hasOwnProperty(f)?e[f]:pe(a.$scope,f,!0)||(n?pe(i,f,!0):void 0),de(t,f,!0)}if(s){var h=(ri(t)?t[t.length-1]:t).prototype;return u=Object.create(h||null),p&&o(a,p,u,f||t.name),c(function(){var e=r.invoke(t,u,a,f);return e!==u&&(y(e)||$(e))&&(u=e,p&&o(a,p,u,f||t.name)),u},{instance:u,identifier:p})}return u=r.instantiate(t,a,f),p&&o(a,p,u,f||t.name),u}}]}function Ct(){this.$get=["$window",function(e){return zr(e.document)}]}function Tt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function $t(e){return y(e)?T(e)?e.toISOString():z(e):e}function St(){this.$get=function(){return function(e){if(!e)return"";var t=[];return i(e,function(e,n){null===e||v(e)||(ri(e)?r(e,function(e){t.push(te(n)+"="+te($t(e)))}):t.push(te(n)+"="+te($t(e))))}),t.join("&")}}}function xt(){this.$get=function(){return function(e){function t(e,o,a){null===e||v(e)||(ri(e)?r(e,function(e,n){t(e,o+"["+(y(e)?n:"")+"]")}):y(e)&&!T(e)?i(e,function(e,n){t(e,o+(a?"":"[")+n+(a?"":"]"))}):n.push(te(o)+"="+te($t(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function At(e,t){if(w(e)){var n=e.replace(fo,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(so)||_t(n))&&(e=q(n))}}return e}function _t(e){var t=e.match(co);return t&&uo[t[0]].test(e)}function kt(e){function t(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}var n,i=me();return w(e)?r(e.split("\n"),function(e){n=e.indexOf(":"),t(Ur(oi(e.substr(0,n))),oi(e.substr(n+1)))}):y(e)&&r(e,function(e,n){t(Ur(n),oi(e))}),i}function Ot(e){var t;return function(n){if(t||(t=kt(e)),n){var r=t[Ur(n)];return void 0===r&&(r=null),r}return t}}function Rt(e,t,n,i){return $(i)?i(e,t,n):(r(i,function(r){e=r(e,t,n)}),e)}function Nt(e){return 200<=e&&e<300}function Dt(){var e=this.defaults={transformResponse:[At],transformRequest:[function(e){return!y(e)||_(e)||O(e)||k(e)?e:z(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ve(lo),put:ve(lo),patch:ve(lo)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(e){return b(e)?(n=!!e,this):n};var i=!0;this.useLegacyPromiseExtensions=function(e){return b(e)?(i=!!e,this):i};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,l,u,d,f){function p(n){function o(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function a(e,t){var n,i={};return r(e,function(e,r){$(e)?(n=e(t),null!=n&&(i[r]=n)):i[r]=e}),i}function s(t){var n,r,i,o=e.headers,s=c({},t.headers);o=c({},o.common,o[Ur(t.method)]);e:for(n in o){r=Ur(n);for(i in s)if(Ur(i)===r)continue e;s[n]=o[n]}return a(s,ve(t))}function l(t){var n=t.headers,i=Rt(t.data,Ot(n),void 0,t.transformRequest);return v(i)&&r(n,function(e,t){"content-type"===Ur(t)&&delete n[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),g(t,i).then(u,u)}function u(e){var t=c({},e);return t.data=Rt(e.data,e.headers,e.status,p.transformResponse),Nt(e.status)?t:d.reject(t)}if(!y(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!w(n.url))throw t("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var p=c({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},n);p.headers=s(n),p.method=jr(p.method),p.paramSerializer=w(p.paramSerializer)?f.get(p.paramSerializer):p.paramSerializer;var h=[],m=[],b=d.when(p);return r(T,function(e){(e.request||e.requestError)&&h.unshift(e.request,e.requestError),(e.response||e.responseError)&&m.push(e.response,e.responseError)}),b=o(b,h),b=b.then(l),b=o(b,m),i?(b.success=function(e){return de(e,"fn"),b.then(function(t){e(t.data,t.status,t.headers,p)}),b},b.error=function(e){return de(e,"fn"),b.then(null,function(t){e(t.data,t.status,t.headers,p)}),b}):(b.success=ho("success"),b.error=ho("error")),b}function h(e){r(arguments,function(e){p[e]=function(t,n){return p(c({},n||{},{method:e,url:t}))}})}function m(e){r(arguments,function(e){p[e]=function(t,n,r){return p(c({},r||{},{method:e,url:t,data:n}))}})}function g(t,i){function o(e){if(e){var t={};return r(e,function(e,r){t[r]=function(t){function r(){e(t)}n?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}}),t}}function l(e,t,r,i){function o(){c(t,e,r,i)}m&&(Nt(e)?m.put(S,[e,t,kt(r),i]):m.remove(S)),n?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function c(e,n,r,i){n=n>=-1?n:0,(Nt(n)?w.resolve:w.reject)({data:e,status:n,headers:Ot(r),config:t,statusText:i})}function f(e){c(e.data,e.status,ve(e.headers()),e.statusText)}function h(){var e=p.pendingRequests.indexOf(t);e!==-1&&p.pendingRequests.splice(e,1)}var m,g,w=d.defer(),T=w.promise,$=t.headers,S=E(t.url,t.paramSerializer(t.params));if(p.pendingRequests.push(t),T.then(h,h),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(m=y(t.cache)?t.cache:y(e.cache)?e.cache:C),m&&(g=m.get(S),b(g)?N(g)?g.then(f,f):ri(g)?c(g[1],g[0],ve(g[2]),g[3]):c(g,200,{},"OK"):m.put(S,T)),v(g)){var x=Fn(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;x&&($[t.xsrfHeaderName||e.xsrfHeaderName]=x),a(t.method,S,i,l,$,t.timeout,t.withCredentials,t.responseType,o(t.eventHandlers),o(t.uploadEventHandlers))}return T}function E(e,t){return t.length>0&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}var C=l("$http");e.paramSerializer=w(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var T=[];return r(o,function(e){T.unshift(w(e)?f.get(e):f.invoke(e))}),p.pendingRequests=[],h("get","delete","head","jsonp"),m("post","put","patch"),p.defaults=e,p}]}function It(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Lt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return Ft(e,r,e.defer,t,n[0])}]}function Ft(e,t,n,i,o){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var r=o.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){$i(r,"load",a),$i(r,"error",a),o.body.removeChild(r),r=null;var s=-1,l="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},Ti(r,"load",a),Ti(r,"error",a),o.body.appendChild(r),a}return function(o,s,l,c,u,d,f,h,m,g){function y(){C&&C(),T&&T.abort()}function E(t,r,i,o,a){b(x)&&n.cancel(x),C=T=null,t(r,i,o,a),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"===Ur(o))var w=i.createCallback(s),C=a(s,w,function(e,t){var n=200===e&&i.getResponse(w);E(c,e,n,"",t),i.removeCallback(w)});else{var T=t(o,s);T.open(o,s,!0),r(u,function(e,t){b(e)&&T.setRequestHeader(t,e)}),T.onload=function(){var e=T.statusText||"",t="response"in T?T.response:T.responseText,n=1223===T.status?204:T.status;0===n&&(n=t?200:"file"===Ln(s).protocol?404:0),E(c,n,t,T.getAllResponseHeaders(),e)};var $=function(){E(c,-1,null,null,"")};if(T.onerror=$,T.onabort=$,T.ontimeout=$,r(m,function(e,t){T.addEventListener(t,e)}),r(g,function(e,t){T.upload.addEventListener(t,e)}),f&&(T.withCredentials=!0),h)try{T.responseType=h}catch(S){if("json"!==h)throw S}T.send(v(l)?null:l)}if(d>0)var x=n(y,d);else N(d)&&d.then(y)}}function Mt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(p,e).replace(h,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=z(e)}return e}function l(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function u(o,u,p,h){function g(e){try{return e=N(e),h&&!b(e)?e:s(e)}catch(t){r(mo.interr(o,t))}}if(!o.length||o.indexOf(e)===-1){var y;if(!u){var E=a(o);y=m(E),y.exp=o,y.expressions=[],y.$$watchDelegate=l}return y}h=!!h;for(var w,C,T,S=0,x=[],A=[],_=o.length,k=[],O=[];S<_;){if((w=o.indexOf(e,S))===-1||(C=o.indexOf(t,w+d))===-1){S!==_&&k.push(a(o.substring(S)));break}S!==w&&k.push(a(o.substring(S,w))),T=o.substring(w+d,C),x.push(T),A.push(n(T,g)),S=C+f,O.push(k.length),k.push("")}if(p&&k.length>1&&mo.throwNoconcat(o),!u||x.length){var R=function(e){for(var t=0,n=x.length;t<n;t++){if(h&&v(e[t]))return;k[O[t]]=e[t]}return k.join("")},N=function(e){return p?i.getTrusted(p,e):i.valueOf(e)};return c(function(e){var t=0,n=x.length,i=new Array(n);try{for(;t<n;t++)i[t]=A[t](e);return R(i)}catch(a){r(mo.interr(o,a))}},{exp:o,expressions:x,$$watchDelegate:function(e,t){var n;return e.$watchGroup(A,function(r,i){var o=R(r);$(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var d=e.length,f=t.length,p=new RegExp(e.replace(/./g,o),"g"),h=new RegExp(t.replace(/./g,o),"g");return u.startSymbol=function(){return e},u.endSymbol=function(){return t},u}]}function Pt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,l,c){function u(){d?o.apply(null,f):o(m)}var d=arguments.length>4,f=d?H(arguments,4):[],p=t.setInterval,h=t.clearInterval,m=0,g=b(c)&&!c,v=(g?r:n).defer(),y=v.promise;return l=b(l)?l:0,y.$$intervalId=p(function(){g?i.defer(u):e.$evalAsync(u),v.notify(m++),l>0&&m>=l&&(v.resolve(m),h(y.$$intervalId),delete a[y.$$intervalId]),g||e.$apply()},s),a[y.$$intervalId]=v,y}var a={};return o.cancel=function(e){return!!(e&&e.$$intervalId in a)&&(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0)},o}]}function Bt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ee(t[n]);return t.join("/")}function Ut(e,t){var n=Ln(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=d(n.port)||bo[n.protocol]||null}function jt(e,t){if(Eo.test(e))throw yo("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Ln(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=Z(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Ht(e,t){return 0===e.lastIndexOf(t,0)}function Kt(e,t){if(Ht(t,e))return t.substr(e.length)}function Wt(e){var t=e.indexOf("#");return t===-1?e:e.substr(0,t)}function zt(e){return e.replace(/(#.+)|#$/,"$1")}function qt(e){return e.substr(0,Wt(e).lastIndexOf("/")+1)}function Yt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Vt(e,t,n){this.$$html5=!0,n=n||"",Ut(e,this),this.$$parse=function(e){var n=Kt(t,e);if(!w(n))throw yo("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);jt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=J(this.$$search),n=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Bt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return b(o=Kt(e,r))?(a=o,s=n&&b(o=Kt(n,o))?t+(Kt("/",o)||o):e+a):b(o=Kt(t,r))?s=t+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function Gt(e,t,n){Ut(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return Ht(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var o,a=Kt(e,r)||Kt(t,r);v(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",v(a)&&(e=r,this.replace())):(o=Kt(n,a),v(o)&&(o=a)),jt(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=J(this.$$search),r=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Bt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Wt(e)===Wt(t)&&(this.$$parse(t),!0)}}function Xt(e,t,n){this.$$html5=!0,Gt.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===Wt(r)?o=r:(a=Kt(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=J(this.$$search),r=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Bt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Qt(e){return function(){return this[e]}}function Zt(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Jt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return b(t)?(e=t,this):e},this.html5Mode=function(e){return R(e)?(t.enabled=e,this):y(e)?(R(e.enabled)&&(t.enabled=e.enabled),R(e.requireBase)&&(t.requireBase=e.requireBase),R(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=c.url(),o=c.$$state;try{r.url(e,t,n),c.$$state=r.state()}catch(a){throw c.url(i),c.$$state=o,a}}function l(e,t){n.$broadcast("$locationChangeSuccess",c.absUrl(),e,c.$$state,t)}var c,u,d,f=r.baseHref(),p=r.url();if(t.enabled){if(!f&&t.requireBase)throw yo("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=Yt(p)+(f||"/"),u=i.history?Vt:Xt}else d=Wt(p),u=Gt;var h=qt(d);c=new u(d,h,"#"+e),c.$$parseLinkUrl(p,p),c.$$state=r.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var i=zr(e.target);"a"!==M(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),l=i.attr("href")||i.attr("xlink:href");y(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Ln(s.animVal).href),m.test(s)||!s||i.attr("target")||e.isDefaultPrevented()||c.$$parseLinkUrl(s,l)&&(e.preventDefault(),c.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),zt(c.absUrl())!==zt(p)&&r.url(c.absUrl(),!0);var g=!0;return r.onUrlChange(function(e,t){return v(Kt(h,e))?void(a.location.href=e):(n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;e=zt(e),c.$$parse(e),c.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,c.absUrl()===e&&(r?(c.$$parse(i),c.$$state=o,s(i,!1,o)):(g=!1,l(i,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=zt(r.url()),t=zt(c.absUrl()),o=r.state(),a=c.$$replace,u=e!==t||c.$$html5&&i.history&&o!==c.$$state;(g||u)&&(g=!1,n.$evalAsync(function(){var t=c.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,c.$$state,o).defaultPrevented;c.absUrl()===t&&(r?(c.$$parse(e),c.$$state=o):(u&&s(t,a,o===c.$$state?null:c.$$state),l(e,o)))})),c.$$replace=!1}),c}]}function en(){var e=!0,t=this;this.debugEnabled=function(t){return b(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=n.console||{},o=t[e]||t.log||p,a=!1;try{a=!!o.apply}catch(s){}return a?function(){var e=[];return r(arguments,function(t){e.push(i(t))}),o.apply(t,e)}:function(e,t){o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function tn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Co("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function nn(e){return e+""}function rn(e,t){if(e){if(e.constructor===e)throw Co("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);
if(e.window===e)throw Co("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Co("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Co("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function on(e,t){if(e){if(e.constructor===e)throw Co("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Lo||e===Fo||e===Mo)throw Co("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function an(e,t){if(e&&(e===To||e===$o||e===So||e===xo||e===Ao||e===_o||e===ko||e===Oo||e===Ro||e===No||e===Do||e===Io))throw Co("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",t)}function sn(e,t){return"undefined"!=typeof e?e:t}function ln(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function cn(e,t){var n=e(t);return!n.$stateful}function un(e,t){var n,i,o;switch(e.type){case Ho.Program:n=!0,r(e.body,function(e){un(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Ho.Literal:e.constant=!0,e.toWatch=[];break;case Ho.UnaryExpression:un(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ho.BinaryExpression:un(e.left,t),un(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ho.LogicalExpression:un(e.left,t),un(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ho.ConditionalExpression:un(e.test,t),un(e.alternate,t),un(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ho.Identifier:e.constant=!1,e.toWatch=[e];break;case Ho.MemberExpression:un(e.object,t),e.computed&&un(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ho.CallExpression:o=!!e.filter&&cn(t,e.callee.name),n=o,i=[],r(e.arguments,function(e){un(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=o?i:[e];break;case Ho.AssignmentExpression:un(e.left,t),un(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ho.ArrayExpression:n=!0,i=[],r(e.elements,function(e){un(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case Ho.ObjectExpression:n=!0,i=[],r(e.properties,function(e){un(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case Ho.ThisExpression:e.constant=!1,e.toWatch=[];break;case Ho.LocalsExpression:e.constant=!1,e.toWatch=[]}}function dn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function fn(e){return e.type===Ho.Identifier||e.type===Ho.MemberExpression}function pn(e){if(1===e.body.length&&fn(e.body[0].expression))return{type:Ho.AssignmentExpression,left:e.body[0].expression,right:{type:Ho.NGValueParameter},operator:"="}}function hn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Ho.Literal||e.body[0].expression.type===Ho.ArrayExpression||e.body[0].expression.type===Ho.ObjectExpression)}function mn(e){return e.constant}function gn(e,t){this.astBuilder=e,this.$filter=t}function vn(e,t){this.astBuilder=e,this.$filter=t}function bn(e){return"constructor"===e}function yn(e){return $(e.valueOf)?e.valueOf():Po.call(e)}function En(){var e,t,n=me(),i=me(),o={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(e,t){o[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(a){function s(e,t,r){var o,s,c;switch(r=r||E,typeof e){case"string":e=e.trim(),c=e;var g=r?i:n;if(o=g[c],!o){":"===e.charAt(0)&&":"===e.charAt(1)&&(s=!0,e=e.substring(2));var b=r?y:v,w=new jo(b),C=new Ko(w,a,b);o=C.parse(e),o.constant?o.$$watchDelegate=h:s?o.$$watchDelegate=o.literal?f:d:o.inputs&&(o.$$watchDelegate=u),r&&(o=l(o)),g[c]=o}return m(o,t);case"function":return m(e,t);default:return m(p,t)}}function l(e){function t(t,n,r,i){var o=E;E=!0;try{return e(t,n,r,i)}finally{E=o}}if(!e)return e;t.$$watchDelegate=e.$$watchDelegate,t.assign=l(e.assign),t.constant=e.constant,t.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=l(e.inputs[n]);return t.inputs=e.inputs,t}function c(e,t){return null==e||null==t?e===t:("object"!=typeof e||(e=yn(e),"object"!=typeof e))&&(e===t||e!==e&&t!==t)}function u(e,t,n,r,i){var o,a=r.inputs;if(1===a.length){var s=c;return a=a[0],e.$watch(function(e){var t=a(e);return c(t,s)||(o=r(e,void 0,void 0,[t]),s=t&&yn(t)),o},t,n,i)}for(var l=[],u=[],d=0,f=a.length;d<f;d++)l[d]=c,u[d]=null;return e.$watch(function(e){for(var t=!1,n=0,i=a.length;n<i;n++){var s=a[n](e);(t||(t=!c(s,l[n])))&&(u[n]=s,l[n]=s&&yn(s))}return t&&(o=r(e,void 0,void 0,u)),o},t,n,i)}function d(e,t,n,r){var i,o;return i=e.$watch(function(e){return r(e)},function(e,n,r){o=e,$(t)&&t.apply(this,arguments),b(e)&&r.$$postDigest(function(){b(o)&&i()})},n)}function f(e,t,n,i){function o(e){var t=!0;return r(e,function(e){b(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return i(e)},function(e,n,r){s=e,$(t)&&t.call(this,e,n,r),o(e)&&r.$$postDigest(function(){o(s)&&a()})},n)}function h(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function m(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==f&&n!==d,o=i?function(n,i,o,a){var s=r&&a?a[0]:e(n,i,o,a);return t(s,n,i)}:function(n,r,i,o){var a=e(n,r,i,o),s=t(a,n,r);return b(a)?s:a};return e.$$watchDelegate&&e.$$watchDelegate!==u?o.$$watchDelegate=e.$$watchDelegate:t.$stateful||(o.$$watchDelegate=u,r=!e.inputs,o.inputs=e.inputs?e.inputs:[e]),o}var g=si().noUnsafeEval,v={csp:g,expensiveChecks:!1,literals:B(o),isIdentifierStart:$(e)&&e,isIdentifierContinue:$(t)&&t},y={csp:g,expensiveChecks:!0,literals:B(o),isIdentifierStart:$(e)&&e,isIdentifierContinue:$(t)&&t},E=!1;return s.$$runningExpensiveChecks=function(){return E},s}]}function wn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Tn(function(t){e.$evalAsync(t)},t)}]}function Cn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Tn(function(t){e.defer(t)},t)}]}function Tn(e,n){function i(){this.$$state={status:0}}function o(e,t){return function(n){t.call(e,n)}}function a(e){var t,r,i;i=e.pending,e.processScheduled=!1,e.pending=void 0;for(var o=0,a=i.length;o<a;++o){r=i[o][0],t=i[o][e.status];try{$(t)?r.resolve(t(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(s){r.reject(s),n(s)}}}function s(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){a(t)}))}function l(){this.promise=new i}function u(e){var t=new l,n=0,i=ri(e)?[]:{};return r(e,function(e,r){n++,b(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}function d(e){var t=p();return r(e,function(e){b(e).then(t.resolve,t.reject)}),t.promise}var f=t("$q",TypeError),p=function(){var e=new l;return e.resolve=o(e,e.resolve),e.reject=o(e,e.reject),e.notify=o(e,e.notify),e};c(i.prototype,{then:function(e,t,n){if(v(e)&&v(t)&&v(n))return this;var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&s(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return g(t,!0,e)},function(t){return g(t,!1,e)},t)}}),c(l.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(f("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){function t(e){l||(l=!0,a.$$resolve(e))}function r(e){l||(l=!0,a.$$reject(e))}var i,a=this,l=!1;try{(y(e)||$(e))&&(i=e&&e.then),$(i)?(this.promise.$$state.status=-1,i.call(e,t,r,o(this,this.notify))):(this.promise.$$state.value=e,this.promise.$$state.status=1,s(this.promise.$$state))}catch(c){r(c),n(c)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,s(this.promise.$$state)},notify:function(t){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,o=0,a=r.length;o<a;o++){i=r[o][0],e=r[o][3];try{i.notify($(e)?e(t):t)}catch(s){n(s)}}})}});var h=function(e){var t=new l;return t.reject(e),t.promise},m=function(e,t){var n=new l;return t?n.resolve(e):n.reject(e),n.promise},g=function(e,t,n){var r=null;try{$(n)&&(r=n())}catch(i){return m(i,!1)}return N(r)?r.then(function(){return m(e,t)},function(e){return m(e,!1)}):m(e,t)},b=function(e,t,n,r){var i=new l;return i.resolve(e),i.promise.then(t,n,r)},E=b,w=function(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!$(e))throw f("norslvr","Expected resolverFn, got '{0}'",e);var r=new l;return e(t,n),r.promise};return w.prototype=i.prototype,w.defer=p,w.reject=h,w.when=b,w.resolve=E,w.all=u,w.race=d,w}function $n(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function Sn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=a(),this.$$ChildScope=null}return t.prototype=e,t}var i=10,o=t("$rootScope"),s=null,l=null;this.digestTtl=function(e){return arguments.length&&(i=e),i},this.$get=["$exceptionHandler","$parse","$browser",function(t,c,u){function d(e){e.currentScope.$$destroyed=!0}function f(e){9===Wr&&(e.$$childHead&&f(e.$$childHead),e.$$nextSibling&&f(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function h(){this.$id=a(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(e){if(S.$$phase)throw o("inprog","{0} already in progress",S.$$phase);S.$$phase=e}function g(){S.$$phase=null}function b(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function E(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function C(){for(;_.length;)try{_.shift()()}catch(e){t(e)}l=null}function T(){null===l&&(l=u.defer(function(){S.$apply(C)}))}h.prototype={constructor:h,$new:function(t,n){var r;return n=n||this,t?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=c(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,a=o.$$watchers,l={fn:t,last:w,get:i,exp:r||e,eq:!!n};return s=null,$(t)||(l.fn=p),a||(a=o.$$watchers=[]),a.unshift(l),b(this,1),function(){P(a,l)>=0&&b(o,-1),s=null}},$watchGroup:function(e,t){function n(){l=!1,c?(c=!1,t(o,o,s)):t(o,i,s)}var i=new Array(e.length),o=new Array(e.length),a=[],s=this,l=!1,c=!0;if(!e.length){var u=!0;return s.$evalAsync(function(){u&&t(o,o,s)}),function(){u=!1}}return 1===e.length?this.$watch(e[0],function(e,n,r){o[0]=e,i[0]=n,t(o,e===n?o:i,r)}):(r(e,function(e,t){var r=s.$watch(e,function(e,r){o[t]=e,i[t]=r,l||(l=!0,s.$evalAsync(n))});a.push(r)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function r(e){o=e;var t,r,i,s,l;if(!v(o)){if(y(o))if(n(o)){a!==p&&(a=p,g=a.length=0,d++),t=o.length,g!==t&&(d++,a.length=g=t);for(var c=0;c<t;c++)l=a[c],s=o[c],i=l!==l&&s!==s,i||l===s||(d++,a[c]=s)}else{a!==h&&(a=h={},g=0,d++),t=0;for(r in o)Br.call(o,r)&&(t++,s=o[r],l=a[r],r in a?(i=l!==l&&s!==s,i||l===s||(d++,a[r]=s)):(g++,a[r]=s,d++));if(g>t){d++;for(r in a)Br.call(o,r)||(g--,delete a[r])}}else a!==o&&(a=o,d++);return d}}function i(){if(m?(m=!1,t(o,o,l)):t(o,s,l),u)if(y(o))if(n(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var r in o)Br.call(o,r)&&(s[r]=o[r])}else s=o}r.$stateful=!0;var o,a,s,l=this,u=t.length>1,d=0,f=c(e,r),p=[],h={},m=!0,g=0;return this.$watch(f,i)},$digest:function(){var e,n,r,a,c,d,f,p,h,v,b,y,E=i,T=this,_=[];m("$digest"),u.$$checkUrlChange(),this===S&&null!==l&&(u.defer.cancel(l),C()),s=null;do{p=!1,v=T;for(var O=0;O<x.length;O++){try{y=x[O],y.scope.$eval(y.expression,y.locals)}catch(R){t(R)}s=null}x.length=0;e:do{if(d=v.$$watchers)for(f=d.length;f--;)try{if(e=d[f])if(c=e.get,(n=c(v))===(r=e.last)||(e.eq?U(n,r):ni(n)&&ni(r))){if(e===s){p=!1;break e}}else p=!0,s=e,e.last=e.eq?B(n,null):n,a=e.fn,a(n,r===w?n:r,v),E<5&&(b=4-E,_[b]||(_[b]=[]),_[b].push({msg:$(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:n,oldVal:r}))}catch(R){t(R)}if(!(h=v.$$watchersCount&&v.$$childHead||v!==T&&v.$$nextSibling))for(;v!==T&&!(h=v.$$nextSibling);)v=v.$parent}while(v=h);if((p||x.length)&&!E--)throw g(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,_)}while(p||x.length);for(g();k<A.length;)try{A[k++]()}catch(R){t(R)}A.length=k=0},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===S&&u.$$applicationDestroyed(),b(this,-this.$$watchersCount);for(var t in this.$$listenerCount)E(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){S.$$phase||x.length||u.defer(function(){x.length&&S.$digest()}),x.push({scope:this,expression:c(e),locals:t})},$$postDigest:function(e){A.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{g()}}catch(n){t(n)}finally{try{S.$digest()}catch(n){throw t(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&_.push(t),e=c(e),T()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);r!==-1&&(n[r]=null,E(i,1,e))}},$emit:function(e,n){var r,i,o,a=[],s=this,l=!1,c={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=j([c],arguments,1);do{for(r=s.$$listeners[e]||a,c.currentScope=s,i=0,o=r.length;i<o;i++)if(r[i])try{r[i].apply(null,u)}catch(d){t(d)}else r.splice(i,1),i--,o--;if(l)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,n){var r=this,i=r,o=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s,l,c,u=j([a],arguments,1);i=o;){for(a.currentScope=i,s=i.$$listeners[e]||[],l=0,c=s.length;l<c;l++)if(s[l])try{s[l].apply(null,u)}catch(d){t(d)}else s.splice(l,1),l--,c--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var S=new h,x=S.$$asyncQueue=[],A=S.$$postDigestQueue=[],_=S.$$applyAsyncQueue=[],k=0;return S}]}function xn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return b(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=Ln(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function An(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw Wo("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=ai(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(S(e))return new RegExp("^"+e.source+"$");throw Wo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function _n(e){var t=[];return b(e)&&r(e,function(e){t.push(An(e))}),t}function kn(){this.SCE_CONTEXTS=zo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=_n(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=_n(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Fn(t):!!e.exec(t.href)}function i(n){var i,o,a=Ln(n.toString()),s=!1;for(i=0,o=e.length;i<o;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;i<o;i++)if(r(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=d.hasOwnProperty(e)?d[e]:null;if(!n)throw Wo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||v(t)||""===t)return t;if("string"!=typeof t)throw Wo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof u?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||v(t)||""===t)return t;var n=d.hasOwnProperty(e)?d[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===zo.RESOURCE_URL){if(i(t))return t;throw Wo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===zo.HTML)return c(t);throw Wo("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(e){throw Wo("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(c=n.get("$sanitize"));var u=o(),d={};return d[zo.HTML]=o(u),d[zo.CSS]=o(u),d[zo.URL]=o(u),d[zo.JS]=o(u),d[zo.RESOURCE_URL]=o(d[zo.URL]),{trustAs:a,getTrusted:l,valueOf:s}}]}function On(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&Wr<8)throw Wo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=ve(zo);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=h),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var o=i.parseAs,a=i.getTrusted,s=i.trustAs;return r(zo,function(e,t){var n=Ur(t);i[Ce("parse_as_"+n)]=function(t){return o(e,t)},i[Ce("get_trusted_"+n)]=function(t){return a(e,t)},i[Ce("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Rn(){this.$get=["$window","$document",function(e,t){var n,r,i={},o=e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),a=!o&&e.history&&e.history.pushState,s=d((/android (\d+)/.exec(Ur((e.navigator||{}).userAgent))||[])[1]),l=/Boxee/i.test((e.navigator||{}).userAgent),c=t[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,f=c.body&&c.body.style,p=!1,h=!1;if(f){for(var m in f)if(r=u.exec(m)){n=r[0],n=n[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in f&&"webkit"),p=!!("transition"in f||n+"Transition"in f),h=!!("animation"in f||n+"Animation"in f),!s||p&&h||(p=w(f.webkitTransition),h=w(f.webkitAnimation))}return{history:!(!a||s<4||l),hasEvent:function(e){if("input"===e&&Wr<=11)return!1;if(v(i[e])){var t=c.createElement("div");i[e]="on"+e in t}return i[e]},csp:si(),vendorPrefix:n,transitions:p,animations:h,android:s}}]}function Nn(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$templateCache","$http","$q","$sce",function(t,n,r,i){function o(a,s){function l(e){if(!s)throw qo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText);return r.reject(e)}o.totalPendingRequests++,w(a)&&!v(t.get(a))||(a=i.getTrustedResourceUrl(a));var u=n.defaults&&n.defaults.transformResponse;return ri(u)?u=u.filter(function(e){return e!==At}):u===At&&(u=null),n.get(a,c({cache:t,transformResponse:u},e))["finally"](function(){o.totalPendingRequests--}).then(function(e){return t.put(a,e.data),e.data},l)}return o.totalPendingRequests=0,o}]}function Dn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),o=[];return r(i,function(e){var i=ei.element(e).data("$binding");i&&r(i,function(r){if(n){var i=new RegExp("(^|\\s)"+ai(t)+"(\\s|\\||$)");i.test(r)&&o.push(e)}else r.indexOf(t)!==-1&&o.push(e)})}),o},i.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function In(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,l){$(o)||(l=s,s=o,o=p);var c,u=H(arguments,3),d=b(l)&&!l,f=(d?r:n).defer(),h=f.promise;return c=t.defer(function(){try{f.resolve(o.apply(null,u))}catch(t){f.reject(t),i(t)}finally{delete a[h.$$timeoutId]}d||e.$apply()},s),h.$$timeoutId=c,a[c]=f,h}var a={};return o.cancel=function(e){return!!(e&&e.$$timeoutId in a)&&(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}function Ln(e){var t=e;return Wr&&(Yo.setAttribute("href",t),t=Yo.href),Yo.setAttribute("href",t),{href:Yo.href,protocol:Yo.protocol?Yo.protocol.replace(/:$/,""):"",host:Yo.host,search:Yo.search?Yo.search.replace(/^\?/,""):"",hash:Yo.hash?Yo.hash.replace(/^#/,""):"",hostname:Yo.hostname,port:Yo.port,pathname:"/"===Yo.pathname.charAt(0)?Yo.pathname:"/"+Yo.pathname}}function Fn(e){var t=w(e)?Ln(e):e;return t.protocol===Vo.protocol&&t.host===Vo.host}function Mn(){this.$get=m(e)}function Pn(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var n=e[0]||{},r={},i="";return function(){var e,o,a,s,l,c=n.cookie||"";if(c!==i)for(i=c,e=i.split("; "),r={},a=0;a<e.length;a++)o=e[a],s=o.indexOf("="),s>0&&(l=t(o.substring(0,s)),v(r[l])&&(r[l]=t(o.substring(s+1))));return r}}function Bn(){this.$get=Pn}function Un(e){function t(i,o){if(y(i)){var a={};return r(i,function(e,n){a[n]=t(n,e)}),a}return e.factory(i+n,o)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",zn),t("date",ar),t("filter",jn),t("json",sr),t("limitTo",lr),t("lowercase",ta),t("number",qn),t("orderBy",ur),t("uppercase",na)}function jn(){return function(e,r,i,o){if(!n(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a,s,l=Wn(r);switch(l){case"function":a=r;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Hn(r,i,o,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Hn(e,t,n,r){var i,o=y(e)&&n in e;return t===!0?t=U:$(t)||(t=function(e,t){return!v(e)&&(null===e||null===t?e===t:!(y(t)||y(e)&&!g(e))&&(e=Ur(""+e),t=Ur(""+t),e.indexOf(t)!==-1))}),i=function(i){return o&&!y(i)?Kn(i,e[n],t,n,!1):Kn(i,e,t,n,r)}}function Kn(e,t,n,r,i,o){var a=Wn(e),s=Wn(t);if("string"===s&&"!"===t.charAt(0))return!Kn(e,t.substring(1),n,r,i);if(ri(e))return e.some(function(e){return Kn(e,t,n,r,i)});switch(a){case"object":var l;if(i){for(l in e)if("$"!==l.charAt(0)&&Kn(e[l],t,n,r,!0))return!0;return!o&&Kn(e,t,n,r,!1)}if("object"===s){for(l in t){var c=t[l];if(!$(c)&&!v(c)){var u=l===r,d=u?e:e[l];if(!Kn(d,c,n,r,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Wn(e){return null===e?"null":typeof e}function zn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return v(n)&&(n=t.CURRENCY_SYM),v(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Gn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function qn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Gn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Yn(e){var t,n,r,i,o,a=0;for((n=e.indexOf(Xo))>-1&&(e=e.replace(Xo,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===Qo;r++);if(r===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===Qo;)o--;for(n-=r,t=[],i=0;r<=o;r++,i++)t[i]=+e.charAt(r)}return n>Go&&(t=t.splice(0,Go-1),a=n-1,n=1),{d:t,e:a,i:n}}function Vn(e,t,n,r){var i=e.d,o=i.length-e.i;t=v(t)?Math.min(Math.max(n,o),r):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var l=a;l<i.length;l++)i[l]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(s>=5)if(a-1<0){for(var u=0;u>a;u--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var d=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);d&&(i.unshift(d),e.i++)}function Gn(e,t,n,r,i){if(!w(e)&&!C(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,l=Math.abs(e)+"",c="";if(a)c="∞";else{o=Yn(l),Vn(o,i,t.minFrac,t.maxFrac);var u=o.d,d=o.i,f=o.e,p=[];for(s=u.reduce(function(e,t){return e&&!t},!0);d<0;)u.unshift(0),d++;d>0?p=u.splice(d,u.length):(p=u,u=[0]);var h=[];for(u.length>=t.lgSize&&h.unshift(u.splice(-t.lgSize,u.length).join(""));u.length>t.gSize;)h.unshift(u.splice(-t.gSize,u.length).join(""));u.length&&h.unshift(u.join("")),c=h.join(n),p.length&&(c+=r+p.join("")),f&&(c+="e+"+f)}return e<0&&!s?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function Xn(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=Qo+e;return n&&(e=e.substr(e.length-t)),i+e}function Qn(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&n===-12&&(a=12),Xn(a,t,r,i)}}function Zn(e,t,n){return function(r,i){var o=r["get"+e](),a=(n?"STANDALONE":"")+(t?"SHORT":""),s=jr(a+e);return i[s][o]}}function Jn(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Xn(Math[r>0?"floor":"ceil"](r/60),2)+Xn(Math.abs(r%60),2)}function er(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function tr(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function nr(e){return function(t){var n=er(t.getFullYear()),r=tr(t),i=+r-+n,o=1+Math.round(i/6048e5);return Xn(o,e)}}function rr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function ir(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function or(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function ar(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=d(t[9]+t[10]),o=d(t[9]+t[11])),a.call(r,d(t[1]),d(t[2])-1,d(t[3]));var l=d(t[4]||0)-i,c=d(t[5]||0)-o,u=d(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,l,c,u,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,o){var a,s,l="",c=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,w(n)&&(n=ea.test(n)?d(n):t(n)),C(n)&&(n=new Date(n)),!T(n)||!isFinite(n.getTime()))return n;for(;i;)s=Jo.exec(i),s?(c=j(c,s,1),i=c.pop()):(c.push(i),i=null);var u=n.getTimezoneOffset();return o&&(u=Y(o,u),n=G(n,o,!0)),r(c,function(t){a=Zo[t],l+=a?a(n,e.DATETIME_FORMATS,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function sr(){return function(e,t){return v(t)&&(t=2),z(e,t)}}function lr(){return function(e,t,r){return t=Math.abs(Number(t))===1/0?Number(t):d(t),ni(t)?e:(C(e)&&(e=e.toString()),n(e)?(r=!r||isNaN(r)?0:d(r),r=r<0?Math.max(0,e.length+r):r,t>=0?cr(e,r,r+t):0===r?cr(e,t,e.length):cr(e,Math.max(0,r+t),r)):e)}}function cr(e,t,n){return w(e)?e.slice(t,n):Vr.call(e,t,n)}function ur(e){function r(t){return t.map(function(t){var n=1,r=h;if($(t))r=t;else if(w(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return $(e.valueOf)&&(e=e.valueOf(),i(e))?e:g(e)&&(e=e.toString(),i(e))?e:e}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=o(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var o=e.value,a=t.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(y(o)&&(o=e.index),y(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}return function(e,i,o,l){function c(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:d.map(function(n){return a(n.get(e),t)})}}function u(e,t){for(var n=0,r=d.length;n<r;n++){var i=p(e.predicateValues[n],t.predicateValues[n]);if(i)return i*d[n].descending*f}return p(e.tieBreaker,t.tieBreaker)*f}if(null==e)return e;if(!n(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);ri(i)||(i=[i]),0===i.length&&(i=["+"]);var d=r(i),f=o?-1:1,p=$(l)?l:s,h=Array.prototype.map.call(e,c);return h.sort(u),e=h.map(function(e){return e.value})}}function dr(e){return $(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function fr(e,t){e.$name=t}function pr(e,t,n,i,o){var a=this,s=[];a.$error={},a.$$success={},a.$pending=void 0,a.$name=o(t.name||t.ngForm||"")(n),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,a.$$parentForm=oa,a.$rollbackViewValue=function(){r(s,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){r(s,function(e){e.$commitViewValue()})},a.$addControl=function(e){fe(e.$name,"input"),s.push(e),e.$name&&(a[e.$name]=e),e.$$parentForm=a},a.$$renameControl=function(e,t){var n=e.$name;a[n]===e&&delete a[n],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],r(a.$pending,function(t,n){a.$setValidity(n,null,e)}),r(a.$error,function(t,n){a.$setValidity(n,null,e)}),r(a.$$success,function(t,n){a.$setValidity(n,null,e)}),P(s,e),e.$$parentForm=oa},Ir({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);i===-1&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(P(r,n),0===r.length&&delete e[t])},$animate:i}),a.$setDirty=function(){i.removeClass(e,Ka),i.addClass(e,Wa),a.$dirty=!0,a.$pristine=!1,a.$$parentForm.$setDirty()},a.$setPristine=function(){i.setClass(e,Ka,Wa+" "+aa),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,r(s,function(e){e.$setPristine()})},a.$setUntouched=function(){r(s,function(e){e.$setUntouched()})},a.$setSubmitted=function(){i.addClass(e,aa),a.$submitted=!0,a.$$parentForm.$setSubmitted()}}function hr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function mr(e,t,n,r,i,o){gr(e,t,n,r,i,o),hr(r)}function gr(e,t,n,r,i,o){var a=Ur(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,c()})}var l,c=function(e){if(l&&(o.defer.cancel(l),l=null),!s){var i=t.val(),c=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=oi(i)),
(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))t.on("input",c);else{var u=function(e,t,n){l||(l=o.defer(function(){l=null,t&&t.value===n||c(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||u(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",u)}t.on("change",c),Ea[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(ya,function(e){if(!l){var t=this[Pr],n=t.badInput,r=t.typeMismatch;l=o.defer(function(){l=null,t.badInput===n&&t.typeMismatch===r||c(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function vr(e,t){if(T(e))return e;if(w(e)){ga.lastIndex=0;var n=ga.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,l=0,c=er(r),u=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,c.getDate()+u,o,a,s,l)}}return NaN}function br(e,t){return function(n,i){var o,a;if(T(n))return n;if(w(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ua.test(n))return new Date(n);if(e.lastIndex=0,o=e.exec(n))return o.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(o,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function yr(e,t,n,r){return function(i,o,a,s,l,c,u){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return b(e)&&!T(e)?n(e)||void 0:e}Er(i,o,a,s),gr(i,o,a,s,l,c);var p,h=s&&s.$options&&s.$options.timezone;if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,p);return h&&(r=G(r,h)),r}}),s.$formatters.push(function(e){if(e&&!T(e))throw Xa("datefmt","Expected `{0}` to be a date",e);return d(e)?(p=e,p&&h&&(p=G(p,h,!0)),u("date")(e,r,h)):(p=null,"")}),b(a.min)||a.ngMin){var m;s.$validators.min=function(e){return!d(e)||v(m)||n(e)>=m},a.$observe("min",function(e){m=f(e),s.$validate()})}if(b(a.max)||a.ngMax){var g;s.$validators.max=function(e){return!d(e)||v(g)||n(e)<=g},a.$observe("max",function(e){g=f(e),s.$validate()})}}}function Er(e,t,n,r){var i=t[0],o=r.$$hasNativeValidators=y(i.validity);o&&r.$parsers.push(function(e){var n=t.prop(Pr)||{};return n.badInput||n.typeMismatch?void 0:e})}function wr(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:pa.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!C(t))throw Xa("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function Cr(e){return b(e)&&!C(e)&&(e=parseFloat(e)),ni(e)?void 0:e}function Tr(e){return(0|e)===e}function $r(e){var t=e.toString(),n=t.indexOf(".");if(n===-1){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Sr(e,t,n){var r=Number(e);if(!Tr(r)||!Tr(t)||!Tr(n)){var i=Math.max($r(r),$r(t),$r(n)),o=Math.pow(10,i);r*=o,t*=o,n*=o}return(r-t)%n===0}function xr(e,t,n,r,i,o){Er(e,t,n,r),gr(e,t,n,r,i,o),wr(r);var a,s;(b(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||v(a)||e>=a},n.$observe("min",function(e){a=Cr(e),r.$validate()})),(b(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||v(s)||e<=s},n.$observe("max",function(e){s=Cr(e),r.$validate()}))}function Ar(e,t,n,r,i,o){function a(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(d=Cr(e),!ni(r.$modelValue))if(u){var n=t.val();d>n&&(n=d,t.val(n)),r.$setViewValue(n)}else r.$validate()}function l(e){if(f=Cr(e),!ni(r.$modelValue))if(u){var n=t.val();f<n&&(t.val(f),n=f<d?d:f),r.$setViewValue(n)}else r.$validate()}function c(e){p=Cr(e),ni(r.$modelValue)||(u&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}Er(e,t,n,r),wr(r),gr(e,t,n,r,i,o);var u=r.$$hasNativeValidators&&"range"===t[0].type,d=u?0:void 0,f=u?100:void 0,p=u?1:void 0,h=t[0].validity,m=b(n.min),g=b(n.max),y=b(n.step),E=r.$render;r.$render=u&&b(h.rangeUnderflow)&&b(h.rangeOverflow)?function(){E(),r.$setViewValue(t.val())}:E,m&&(r.$validators.min=u?function(){return!0}:function(e,t){return r.$isEmpty(t)||v(d)||t>=d},a("min",s)),g&&(r.$validators.max=u?function(){return!0}:function(e,t){return r.$isEmpty(t)||v(f)||t<=f},a("max",l)),y&&(r.$validators.step=u?function(){return!h.stepMismatch}:function(e,t){return r.$isEmpty(t)||v(p)||Sr(t,d||0,p)},a("step",c))}function _r(e,t,n,r,i,o){gr(e,t,n,r,i,o),hr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||da.test(n)}}function kr(e,t,n,r,i,o){gr(e,t,n,r,i,o),hr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||fa.test(n)}}function Or(e,t,n,r){v(n.name)&&t.attr("name",a());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)}function Rr(e,t,n,r,i){var o;if(b(r)){if(o=e(r),!o.constant)throw Xa("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function Nr(e,t,n,r,i,o,a,s){var l=Rr(s,e,"ngTrueValue",n.ngTrueValue,!0),c=Rr(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return U(e,l)}),r.$parsers.push(function(e){return e?l:c})}function Dr(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function o(e){var t=[];return ri(e)?(r(e,function(e){t=t.concat(o(e))}),t):w(e)?e.split(" "):y(e)?(r(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(a,s,l){function c(e){var t=d(e,1);l.$addClass(t)}function u(e){var t=d(e,-1);l.$removeClass(t)}function d(e,t){var n=s.data("$classCounts")||me(),i=[];return r(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function f(e,t){var r=i(t,e),o=i(e,t);r=d(r,1),o=d(o,-1),r&&r.length&&n.addClass(s,r),o&&o.length&&n.removeClass(s,o)}function p(e){if(t===!0||(1&a.$index)===t){var n=o(e||[]);if(h){if(!U(e,h)){var r=o(h);f(r,n)}}else c(n)}h=ri(e)?e.map(function(e){return ve(e)}):ve(e)}var h;a.$watch(l[e],p,!0),l.$observe("class",function(t){p(a.$eval(l[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var i=1&n;if(i!==(1&r)){var s=o(a.$eval(l[e]));i===t?c(s):u(s)}})}}}]}function Ir(e){function t(e,t,s){v(t)?n("$pending",e,s):r("$pending",e,s),R(t)?t?(u(a.$error,e,s),c(a.$$success,e,s)):(c(a.$error,e,s),u(a.$$success,e,s)):(u(a.$error,e,s),u(a.$$success,e,s)),a.$pending?(i(Ya,!0),a.$valid=a.$invalid=void 0,o("",null)):(i(Ya,!1),a.$valid=Lr(a.$error),a.$invalid=!a.$valid,o("",a.$valid));var l;l=a.$pending&&a.$pending[e]?void 0:!a.$error[e]&&(!!a.$$success[e]||null),o(e,l),a.$$parentForm.$setValidity(e,l,a)}function n(e,t,n){a[e]||(a[e]={}),c(a[e],t,n)}function r(e,t,n){a[e]&&u(a[e],t,n),Lr(a[e])&&(a[e]=void 0)}function i(e,t){t&&!l[e]?(d.addClass(s,e),l[e]=!0):!t&&l[e]&&(d.removeClass(s,e),l[e]=!1)}function o(e,t){e=e?"-"+le(e,"-"):"",i(ja+e,t===!0),i(Ha+e,t===!1)}var a=e.ctrl,s=e.$element,l={},c=e.set,u=e.unset,d=e.$animate;l[Ha]=!(l[ja]=s.hasClass(ja)),a.$setValidity=t}function Lr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Fr(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}var Mr=/^\/(.+)\/([a-z]*)$/,Pr="validity",Br=Object.prototype.hasOwnProperty,Ur=function(e){return w(e)?e.toLowerCase():e},jr=function(e){return w(e)?e.toUpperCase():e},Hr=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Kr=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(Ur=Hr,jr=Kr);var Wr,zr,qr,Yr,Vr=[].slice,Gr=[].splice,Xr=[].push,Qr=Object.prototype.toString,Zr=Object.getPrototypeOf,Jr=t("ng"),ei=e.angular||(e.angular={}),ti=0;Wr=e.document.documentMode;var ni=Number.isNaN||function(e){return e!==e};p.$inject=[],h.$inject=[];var ri=Array.isArray,ii=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,oi=function(e){return w(e)?e.trim():e},ai=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},si=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!b(si.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");si.rules={noUnsafeEval:!r||r.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!r||r.indexOf("no-inline-style")!==-1}}else si.rules={noUnsafeEval:t(),noInlineStyle:!1}}return si.rules},li=function(){if(b(li.name_))return li.name_;var t,n,r,i,o=ui.length;for(n=0;n<o;++n)if(r=ui[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return li.name_=i},ci=/:/g,ui=["ng-","data-ng-","ng:","x-ng-"],di=re(e.document),fi=/[A-Z]/g,pi=!1,hi=1,mi=2,gi=3,vi=8,bi=9,yi=11,Ei={full:"1.5.9",major:1,minor:5,dot:9,codeName:"timeturning-lockdown"};Oe.expando="ng339";var wi=Oe.cache={},Ci=1,Ti=function(e,t,n){e.addEventListener(t,n,!1)},$i=function(e,t,n){e.removeEventListener(t,n,!1)};Oe._data=function(e){return this.cache[e[this.expando]]||{}};var Si=/([:\-_]+(.))/g,xi=/^moz([A-Z])/,Ai={mouseleave:"mouseout",mouseenter:"mouseover"},_i=t("jqLite"),ki=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Oi=/<|&#?\w+;/,Ri=/<([\w:-]+)/,Ni=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Di={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Di.optgroup=Di.option,Di.tbody=Di.tfoot=Di.colgroup=Di.caption=Di.thead,Di.th=Di.td;var Ii=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Li=Oe.prototype={ready:function(t){function n(){r||(r=!0,t())}var r=!1;"complete"===e.document.readyState?e.setTimeout(n):(this.on("DOMContentLoaded",n),Oe(e).on("load",n))},toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return zr(e>=0?this[e]:this[this.length+e])},length:0,push:Xr,sort:[].sort,splice:[].splice},Fi={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Fi[Ur(e)]=e});var Mi={};r("input,select,option,textarea,button,form,details".split(","),function(e){Mi[e]=!0});var Pi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:Fe,removeData:Ie,hasData:Se,cleanData:xe},function(e,t){Oe[t]=e}),r({data:Fe,inheritedData:He,scope:function(e){return zr.data(e,"$scope")||He(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return zr.data(e,"$isolateScope")||zr.data(e,"$isolateScopeNoTemplate")},controller:je,injector:function(e){return He(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Me,css:function(e,t,n){return t=Ce(t),b(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r=e.nodeType;if(r!==gi&&r!==mi&&r!==vi){var i=Ur(t);if(Fi[i]){if(!b(n))return e[t]||(e.attributes.getNamedItem(t)||p).specified?i:void 0;n?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(b(n))e.setAttribute(t,n);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?void 0:o}}},prop:function(e,t,n){return b(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===hi||n===gi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===M(e)){var n=[];return r(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(Ne(e,!0),void(e.innerHTML=t))},empty:Ke},function(e,t){Oe.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==Ke&&v(2===e.length&&e!==Me&&e!==je?t:n)){if(y(t)){for(r=0;r<o;r++)if(e===Fe)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=v(a)?Math.min(o,1):o,l=0;l<s;l++){var c=e(this[l],t,n);a=a?a+c:c}return a}for(r=0;r<o;r++)e(this[r],t,n);return this}}),r({removeData:Ie,on:function(e,t,n,r){if(b(r))throw _i("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if($e(e)){var i=Le(e,!0),o=i.events,a=i.handle;a||(a=i.handle=Ve(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,c=function(t,r,i){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||Ti(e,t,a)),s.push(n)};l--;)t=s[l],Ai[t]?(c(Ai[t],Xe),c(t,void 0,!0)):c(t)}},off:De,one:function(e,t,n){e=zr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;Ne(e),r(new Oe(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){e.nodeType===hi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===hi||n===yi){t=new Oe(t);for(var r=0,i=t.length;r<i;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===hi){var n=e.firstChild;r(new Oe(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){ke(e,zr(t).eq(0).clone()[0])},remove:We,detach:function(e){We(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new Oe(t);for(var i=0,o=t.length;i<o;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Be,removeClass:Pe,toggleClass:function(e,t,n){t&&r(t.split(" "),function(t){var r=n;v(r)&&(r=!Me(e,t)),(r?Be:Pe)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==yi?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Re,triggerHandler:function(e,t,n){var i,o,a,s=t.type||t,l=Le(e),u=l&&l.events,d=u&&u[s];d&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(i=c(i,t)),o=ve(d),a=n?[i].concat(n):[i],r(o,function(t){i.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Oe.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;o<a;o++)v(i)?(i=e(this[o],t,n,r),b(i)&&(i=zr(i))):Ue(i,e(this[o],t,n,r));return b(i)?i:this},Oe.prototype.bind=Oe.prototype.on,Oe.prototype.unbind=Oe.prototype.off}),Je.prototype={put:function(e,t){this[Ze(e,this.nextUid)]=t},get:function(e){return this[Ze(e,this.nextUid)]},remove:function(e){var t=this[e=Ze(e,this.nextUid)];return delete this[e],t}};var Bi=[function(){this.$get=[function(){return Je}]}],Ui=/^([^\(]+?)=>/,ji=/^[^\(]*\(\s*([^\)]*)\)/m,Hi=/,/,Ki=/^\s*(_?)(\S+?)\1\s*$/,Wi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,zi=t("$injector");it.$$annotate=rt;var qi=t("$animate"),Yi=1,Vi="ng-animate",Gi=function(){this.$get=p},Xi=function(){var e=new Je,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function o(e,t,n){var i=!1;return t&&(t=w(t)?t.split(" "):ri(t)?t:[],r(t,function(t){t&&(i=!0,e[t]=n)})),i}function a(){r(t,function(t){var n=e.get(t);if(n){var i=lt(t.attr("class")),o="",a="";r(n,function(e,t){var n=!!i[t];e!==n&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),r(t,function(e){o&&Be(e,o),a&&Pe(e,a)}),e.remove(t)}}),t.length=0}function s(n,r,s){var l=e.get(n)||{},c=o(l,r,!0),u=o(l,s,!1);(c||u)&&(e.put(n,l),t.push(n),1===t.length&&i.$$postDigest(a))}return{enabled:p,on:p,off:p,pin:p,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},Qi=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw qi("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+Vi+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw qi("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Vi)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=st(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&zr(r),i=i&&zr(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",ct(o))},move:function(n,r,i,o){return r=r&&zr(r),i=i&&zr(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",ct(o))},leave:function(t,n){return e.push(t,"leave",ct(n),function(){t.remove()})},addClass:function(t,n,r){return r=ct(r),r.addClass=at(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=ct(r),r.removeClass=at(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=ct(i),i.addClass=at(i.addClass,n),i.removeClass=at(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=ct(o),o.from=o.from?c(o.from,n):n,o.to=o.to?c(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=at(o.tempClasses,i),e.push(t,"animate",o)}}}]}],Zi=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},Ji=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,i,o){function a(e){this.setHost(e);var t=n(),r=function(e){o(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){var n=i[0];n&&n.hidden?r(e):t(e)},this._state=0}var s=0,l=1,c=2;return a.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},a.all=function(e,t){function n(n){o=o&&n,++i===e.length&&t(o)}var i=0,o=!0;r(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===c?e():this._doneCallbacks.push(e)},progress:p,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=l,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==c&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=c)}},a}]},eo=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||l.complete(),s=!0}),l}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=B(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,l=new n;return{start:i,end:i}}}]},to=t("$compile"),no=new ht;mt.$inject=["$provide","$$sanitizeUriProvider"],gt.prototype.isFirstChange=function(){return this.previousValue===no};var ro=/^((?:x|data)[:\-_])/i,io=t("$controller"),oo=/^(\S+)(\s+as\s+([\w$]+))?$/,ao=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof zr&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},so="application/json",lo={"Content-Type":so+";charset=utf-8"},co=/^\[|^\{(?!\{)/,uo={"[":/]$/,"{":/}$/},fo=/^\)\]\}',?\n/,po=t("$http"),ho=function(e){return function(){throw po("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},mo=ei.$interpolateMinErr=t("$interpolate");mo.throwNoconcat=function(e){throw mo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},mo.interr=function(e,t){return mo("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var go=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var n=e.angular.callbacks,r={};return{createCallback:function(e){var i="_"+(n.$$counter++).toString(36),o="angular.callbacks."+i,a=t(i);return r[o]=n[i]=a,o},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){var t=r[e];delete n[t.id],delete r[e]}}}]},vo=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,bo={http:80,https:443,ftp:21},yo=t("$location"),Eo=/^\s*[\\/]{2,}/,wo={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Qt("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=vo.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Qt("$$protocol"),host:Qt("$$host"),port:Qt("$$port"),path:Zt("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||C(e))e=e.toString(),this.$$search=Z(e);else{if(!y(e))throw yo("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=B(e,{}),r(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Zt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};r([Xt,Gt,Vt],function(e){e.prototype=Object.create(wo),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Vt||!this.$$html5)throw yo("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var Co=t("$parse"),To=[].constructor,$o=(!1).constructor,So=Function.constructor,xo=(0).constructor,Ao={}.constructor,_o="".constructor,ko=To.prototype,Oo=$o.prototype,Ro=So.prototype,No=xo.prototype,Do=Ao.prototype,Io=_o.prototype,Lo=Ro.call,Fo=Ro.apply,Mo=Ro.bind,Po=Do.valueOf,Bo=me();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Bo[e]=!0});var Uo={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},jo=function(e){this.options=e};jo.prototype={constructor:jo,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Bo[t],o=Bo[n],a=Bo[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\x0B"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=b(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Co("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Ur(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=Uo[o];n+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Ho=function(e,t){this.lexer=e,this.options=t};Ho.Program="Program",Ho.ExpressionStatement="ExpressionStatement",Ho.AssignmentExpression="AssignmentExpression",Ho.ConditionalExpression="ConditionalExpression",Ho.LogicalExpression="LogicalExpression",Ho.BinaryExpression="BinaryExpression",Ho.UnaryExpression="UnaryExpression",Ho.CallExpression="CallExpression",Ho.MemberExpression="MemberExpression",Ho.Identifier="Identifier",Ho.Literal="Literal",Ho.ArrayExpression="ArrayExpression",Ho.Property="Property",Ho.ObjectExpression="ObjectExpression",Ho.ThisExpression="ThisExpression",Ho.LocalsExpression="LocalsExpression",Ho.NGValueParameter="NGValueParameter",Ho.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ho.Program,body:e}},expressionStatement:function(){return{type:Ho.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:Ho.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ho.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ho.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ho.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ho.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ho.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ho.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ho.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ho.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=B(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ho.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Ho.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ho.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ho.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Ho.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ho.Identifier,name:e.text}},constant:function(){return{type:Ho.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ho.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ho.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ho.ObjectExpression,properties:t}},throwError:function(e,t){throw Co("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Co("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);
return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Co("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{"this":{type:Ho.ThisExpression},$locals:{type:Ho.LocalsExpression}}},gn.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},un(i,n.$filter);var o,a="";if(this.stage="assign",o=pn(i)){this.state.computing="assign";var s=this.nextId();this.recurse(o,s),this.return_(s),a="fn.assign="+this.generateFunction("assign","s,v,l")}var l=dn(i.body);n.stage="inputs",r(l,function(e,t){var r="fn"+t;n.state[r]={vars:[],body:[],own:{}},n.state.computing=r;var i=n.nextId();n.recurse(e,i),n.return_(i),n.state.inputs.push(r),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",u=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",c)(this.$filter,tn,rn,on,nn,an,sn,ln,e);return this.state=this.stage=void 0,u.literal=hn(i),u.constant=mn(i),u},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return r(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return r(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,o,a){var s,l,c,u,d,f=this;if(i=i||p,!a&&b(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,o,!0));switch(e.type){case Ho.Program:r(e.body,function(t,n){f.recurse(t.expression,void 0,void 0,function(e){l=e}),n!==e.body.length-1?f.current().body.push(l,";"):f.return_(l)});break;case Ho.Literal:u=this.escape(e.value),this.assign(t,u),i(u);break;case Ho.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){l=e}),u=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,u),i(u);break;case Ho.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){l=e}),u="+"===e.operator?this.plus(s,l):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(l,0):"("+s+")"+e.operator+"("+l+")",this.assign(t,u),i(u);break;case Ho.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_("&&"===e.operator?t:f.not(t),f.lazyRecurse(e.right,t)),i(t);break;case Ho.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),i(t);break;case Ho.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),tn(e.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",e.name)),function(){f.if_("inputs"===f.stage||"s",function(){o&&1!==o&&f.if_(f.not(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))})},t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),(f.state.expensiveChecks||bn(e.name))&&f.addEnsureSafeObject(t),i(t);break;case Ho.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,s,void 0,function(){f.if_(f.notNull(s),function(){o&&1!==o&&f.addEnsureSafeAssignContext(s),e.computed?(l=f.nextId(),f.recurse(e.property,l),f.getStringValue(l),f.addEnsureSafeMemberName(l),o&&1!==o&&f.if_(f.not(f.computedMember(s,l)),f.lazyAssign(f.computedMember(s,l),"{}")),u=f.ensureSafeObject(f.computedMember(s,l)),f.assign(t,u),n&&(n.computed=!0,n.name=l)):(tn(e.property.name),o&&1!==o&&f.if_(f.not(f.nonComputedMember(s,e.property.name)),f.lazyAssign(f.nonComputedMember(s,e.property.name),"{}")),u=f.nonComputedMember(s,e.property.name),(f.state.expensiveChecks||bn(e.property.name))&&(u=f.ensureSafeObject(u)),f.assign(t,u),n&&(n.computed=!1,n.name=e.property.name))},function(){f.assign(t,"undefined")}),i(t)},!!o);break;case Ho.CallExpression:t=t||this.nextId(),e.filter?(l=f.filter(e.callee.name),c=[],r(e.arguments,function(e){var t=f.nextId();f.recurse(e,t),c.push(t)}),u=l+"("+c.join(",")+")",f.assign(t,u),i(t)):(l=f.nextId(),s={},c=[],f.recurse(e.callee,l,s,function(){f.if_(f.notNull(l),function(){f.addEnsureSafeFunction(l),r(e.arguments,function(e){f.recurse(e,f.nextId(),void 0,function(e){c.push(f.ensureSafeObject(e))})}),s.name?(f.state.expensiveChecks||f.addEnsureSafeObject(s.context),u=f.member(s.context,s.name,s.computed)+"("+c.join(",")+")"):u=l+"("+c.join(",")+")",u=f.ensureSafeObject(u),f.assign(t,u)},function(){f.assign(t,"undefined")}),i(t)}));break;case Ho.AssignmentExpression:if(l=this.nextId(),s={},!fn(e.left))throw Co("lval","Trying to assign a value to a non l-value");this.recurse(e.left,void 0,s,function(){f.if_(f.notNull(s.context),function(){f.recurse(e.right,l),f.addEnsureSafeObject(f.member(s.context,s.name,s.computed)),f.addEnsureSafeAssignContext(s.context),u=f.member(s.context,s.name,s.computed)+e.operator+l,f.assign(t,u),i(t||u)})},1);break;case Ho.ArrayExpression:c=[],r(e.elements,function(e){f.recurse(e,f.nextId(),void 0,function(e){c.push(e)})}),u="["+c.join(",")+"]",this.assign(t,u),i(u);break;case Ho.ObjectExpression:c=[],d=!1,r(e.properties,function(e){e.computed&&(d=!0)}),d?(t=t||this.nextId(),this.assign(t,"{}"),r(e.properties,function(e){e.computed?(s=f.nextId(),f.recurse(e.key,s)):s=e.key.type===Ho.Identifier?e.key.name:""+e.key.value,l=f.nextId(),f.recurse(e.value,l),f.assign(f.member(t,s,e.computed),l)})):(r(e.properties,function(t){f.recurse(t.value,e.constant?void 0:f.nextId(),void 0,function(e){c.push(f.escape(t.key.type===Ho.Identifier?t.key.name:""+t.key.value)+":"+e)})}),u="{"+c.join(",")+"}",this.assign(t,u)),i(t||u);break;case Ho.ThisExpression:this.assign(t,"s"),i("s");break;case Ho.LocalsExpression:this.assign(t,"l"),i("l");break;case Ho.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(w(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(C(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Co("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},vn.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,un(i,n.$filter);var o,a;(o=pn(i))&&(a=this.recurse(o));var s,l=dn(i.body);l&&(s=[],r(l,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var c=[];r(i.body,function(e){c.push(n.recurse(e.expression))});var u=0===i.body.length?p:1===i.body.length?c[0]:function(e,t){var n;return r(c,function(r){n=r(e,t)}),n};return a&&(u.assign=function(e,t,n){return a(e,n,t)}),s&&(u.inputs=s),u.literal=hn(i),u.constant=mn(i),u},recurse:function(e,t,n){var i,o,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ho.Literal:return this.value(e.value,t);case Ho.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case Ho.BinaryExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case Ho.LogicalExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case Ho.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Ho.Identifier:return tn(e.name,s.expression),s.identifier(e.name,s.expensiveChecks||bn(e.name),t,n,s.expression);case Ho.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(tn(e.property.name,s.expression),o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(i,o,t,n,s.expression):this.nonComputedMember(i,o,s.expensiveChecks,t,n,s.expression);case Ho.CallExpression:return a=[],r(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,n,r,i){for(var s=[],l=0;l<a.length;++l)s.push(a[l](e,n,r,i));var c=o.apply(void 0,s,i);return t?{context:void 0,name:void 0,value:c}:c}:function(e,n,r,i){var l,c=o(e,n,r,i);if(null!=c.value){rn(c.context,s.expression),on(c.value,s.expression);for(var u=[],d=0;d<a.length;++d)u.push(rn(a[d](e,n,r,i),s.expression));l=rn(c.value.apply(c.context,u),s.expression)}return t?{value:l}:l};case Ho.AssignmentExpression:return i=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,n,r,a){var l=i(e,n,r,a),c=o(e,n,r,a);return rn(l.value,s.expression),an(l.context),l.context[l.name]=c,t?{value:c}:c};case Ho.ArrayExpression:return a=[],r(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case Ho.ObjectExpression:return a=[],r(e.properties,function(e){e.computed?a.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):a.push({key:e.key.type===Ho.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case Ho.ThisExpression:return function(e){return t?{value:e}:e};case Ho.LocalsExpression:return function(e,n){return t?{value:n}:n};case Ho.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=b(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=b(a)?-a:0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),l=t(r,i,o,a),c=ln(s,l);return n?{value:c}:c}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),l=t(r,i,o,a),c=(b(s)?s:0)-(b(l)?l:0);return n?{value:c}:c}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var l=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n,r,i){return function(o,a,s,l){var c=a&&e in a?a:o;r&&1!==r&&c&&!c[e]&&(c[e]={});var u=c?c[e]:void 0;return t&&rn(u,i),n?{context:c,name:e,value:u}:u}},computedMember:function(e,t,n,r,i){return function(o,a,s,l){var c,u,d=e(o,a,s,l);return null!=d&&(c=t(o,a,s,l),c=nn(c),tn(c,i),r&&1!==r&&(an(d),d&&!d[c]&&(d[c]={})),u=d[c],rn(u,i)),n?{context:d,name:c,value:u}:u}},nonComputedMember:function(e,t,n,r,i,o){return function(a,s,l,c){var u=e(a,s,l,c);i&&1!==i&&(an(u),u&&!u[t]&&(u[t]={}));var d=null!=u?u[t]:void 0;return(n||bn(t))&&rn(d,o),r?{context:u,name:t,value:d}:d}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var Ko=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new Ho(e,n),this.astCompiler=n.csp?new vn(this.ast,t):new gn(this.ast,t)};Ko.prototype={constructor:Ko,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var Wo=t("$sce"),zo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},qo=t("$compile"),Yo=e.document.createElement("a"),Vo=Ln(e.location.href);Pn.$inject=["$document"],Un.$inject=["$provide"];var Go=22,Xo=".",Qo="0";zn.$inject=["$locale"],qn.$inject=["$locale"];var Zo={yyyy:Qn("FullYear",4,0,!1,!0),yy:Qn("FullYear",2,0,!0,!0),y:Qn("FullYear",1,0,!1,!0),MMMM:Zn("Month"),MMM:Zn("Month",!0),MM:Qn("Month",2,1),M:Qn("Month",1,1),LLLL:Zn("Month",!1,!0),dd:Qn("Date",2),d:Qn("Date",1),HH:Qn("Hours",2),H:Qn("Hours",1),hh:Qn("Hours",2,-12),h:Qn("Hours",1,-12),mm:Qn("Minutes",2),m:Qn("Minutes",1),ss:Qn("Seconds",2),s:Qn("Seconds",1),sss:Qn("Milliseconds",3),EEEE:Zn("Day"),EEE:Zn("Day",!0),a:rr,Z:Jn,ww:nr(2),w:nr(1),G:ir,GG:ir,GGG:ir,GGGG:or},Jo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ea=/^\-?\d+$/;ar.$inject=["$locale"];var ta=m(Ur),na=m(jr);ur.$inject=["$parse"];var ra=m({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Qr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),ia={};r(Fi,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=vt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),ia[r]=function(){return{restrict:"A",priority:100,link:i}}}}),r(Pi,function(e,t){ia[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Mr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),r(["src","srcset","href"],function(e){var t=vt("ng-"+e);ia[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Qr.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(Wr&&o&&r.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var oa={$addControl:p,$$renameControl:fr,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},aa="ng-submitted";pr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var sa=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||p}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:pr,compile:function(n,i){n.addClass(Ka).addClass(ja);var o=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,a){var s=a[0];if(!("action"in i)){var l=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};Ti(n[0],"submit",l),n.on("$destroy",function(){t(function(){$i(n[0],"submit",l)},0,!1)})}var u=a[1]||s.$$parentForm;u.$addControl(s);var d=o?r(s.$name):p;o&&(d(e,s),i.$observe(o,function(t){s.$name!==t&&(d(e,void 0),s.$$parentForm.$$renameControl(s,t),(d=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),d(e,void 0),c(s,oa)})}}}};return i}]},la=sa(),ca=sa(!0),ua=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,da=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,fa=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,pa=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ha=/^(\d{4,})-(\d{2})-(\d{2})$/,ma=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ga=/^(\d{4,})-W(\d\d)$/,va=/^(\d{4,})-(\d\d)$/,ba=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ya="keydown wheel mousedown",Ea=me();r("date,datetime-local,month,time,week".split(","),function(e){Ea[e]=!0});var wa={text:mr,date:yr("date",ha,br(ha,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":yr("datetimelocal",ma,br(ma,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:yr("time",ba,br(ba,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:yr("week",ga,vr,"yyyy-Www"),month:yr("month",va,br(va,["yyyy","MM"]),"yyyy-MM"),number:xr,url:_r,email:kr,radio:Or,range:Ar,checkbox:Nr,hidden:p,button:p,submit:p,reset:p,file:p},Ca=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){if(s[0]){var l=Ur(a.type);"range"!==l||a.hasOwnProperty("ngInputRange")||(l="text"),(wa[l]||wa.text)(i,o,a,s[0],t,e,n,r)}}}}}],Ta=/^(true|false|\d+)$/,$a=function(){return{restrict:"A",priority:100,compile:function(e,t){return Ta.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Sa=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=v(e)?"":e})}}}}],xa=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var o=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=v(e)?"":e})}}}}],Aa=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){var n=o(t);r.html(e.getTrustedHtml(n)||"")})}}}}],_a=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),ka=Dr("",!0),Oa=Dr("Odd",0),Ra=Dr("Even",1),Na=dr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Da=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ia={},La={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=vt("ng-"+e);Ia[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};La[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Fa=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,l,c;n.$watch(i.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=he(s.clone),e.leave(c).then(function(){c=null}),s=null))})}}}],Ma=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ei.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,l,c,u){var d,f,p,h=0,m=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).then(function(){f=null}),f=p,p=null)};r.$watch(o,function(o){var l=function(){!b(s)||s&&!r.$eval(s)||t()},f=++h;o?(e(o,!0).then(function(e){if(!r.$$destroyed&&f===h){var t=r.$new();c.template=e;var s=u(t,function(e){m(),n.enter(e,null,i).then(l)});d=t,p=s,d.$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||f===h&&(m(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(m(),c.template=null)})}}}}],Pa=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){return Qr.call(r[0]).match(/SVG/)?(r.empty(),void t(Ae(o.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(o.template),void t(r.contents())(n))}}}],Ba=dr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ua=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var o=t.attr(n.$attr.ngList)||", ",a="false"!==n.ngTrim,s=a?oi(o):o,l=function(e){if(!v(e)){var t=[];return e&&r(e.split(s),function(e){e&&t.push(a?oi(e):e)}),t}};i.$parsers.push(l),i.$formatters.push(function(e){if(ri(e))return e.join(o)}),i.$isEmpty=function(e){return!e||!e.length}}}},ja="ng-valid",Ha="ng-invalid",Ka="ng-pristine",Wa="ng-dirty",za="ng-untouched",qa="ng-touched",Ya="ng-pending",Va="ng-empty",Ga="ng-not-empty",Xa=t("ngModel"),Qa=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,i,o,a,s,l,c,u){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(e),this.$$parentForm=oa;var d,f=o(n.ngModel),h=f.assign,m=f,g=h,y=null,E=this;this.$$setOptions=function(e){if(E.$options=e,e&&e.getterSetter){var t=o(n.ngModel+"()"),r=o(n.ngModel+"($$$p)");m=function(e){var n=f(e);return $(n)&&(n=t(e)),n},g=function(e,t){$(f(e))?r(e,{$$$p:t}):h(e,t)}}else if(!f.assign)throw Xa("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,X(i))},this.$render=p,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e},this.$$updateEmptyClasses=function(e){E.$isEmpty(e)?(a.removeClass(i,Ga),a.addClass(i,Va)):(a.removeClass(i,Va),a.addClass(i,Ga))};var w=0;Ir({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:a}),this.$setPristine=function(){E.$dirty=!1,E.$pristine=!0,a.removeClass(i,Wa),a.addClass(i,Ka)},this.$setDirty=function(){E.$dirty=!0,E.$pristine=!1,a.removeClass(i,Ka),a.addClass(i,Wa),E.$$parentForm.$setDirty()},this.$setUntouched=function(){E.$touched=!1,E.$untouched=!0,a.setClass(i,za,qa)},this.$setTouched=function(){E.$touched=!0,E.$untouched=!1,a.setClass(i,qa,za)},this.$rollbackViewValue=function(){s.cancel(y),E.$viewValue=E.$$lastCommittedViewValue,E.$render()},this.$validate=function(){if(!ni(E.$modelValue)){var e=E.$$lastCommittedViewValue,t=E.$$rawModelValue,n=E.$valid,r=E.$modelValue,i=E.$options&&E.$options.allowInvalid;E.$$runValidators(t,e,function(e){i||n===e||(E.$modelValue=e?t:void 0,E.$modelValue!==r&&E.$$writeModelToScope())})}},this.$$runValidators=function(e,t,n){function i(){var e=E.$$parserName||"parse";return v(d)?(s(e,null),!0):(d||(r(E.$validators,function(e,t){s(t,null)}),r(E.$asyncValidators,function(e,t){s(t,null)})),s(e,d),d)}function o(){var n=!0;return r(E.$validators,function(r,i){var o=r(e,t);n=n&&o,s(i,o)}),!!n||(r(E.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],i=!0;r(E.$asyncValidators,function(r,o){var a=r(e,t);if(!N(a))throw Xa("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),n.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),n.length?c.all(n).then(function(){l(i)},p):l(!0)}function s(e,t){u===w&&E.$setValidity(e,t)}function l(e){u===w&&n(e)}w++;var u=w;return i()&&o()?void a():void l(!1)},this.$commitViewValue=function(){var e=E.$viewValue;s.cancel(y),(E.$$lastCommittedViewValue!==e||""===e&&E.$$hasNativeValidators)&&(E.$$updateEmptyClasses(e),E.$$lastCommittedViewValue=e,E.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){E.$modelValue!==o&&E.$$writeModelToScope()}var n=E.$$lastCommittedViewValue,r=n;if(d=!v(r)||void 0)for(var i=0;i<E.$parsers.length;i++)if(r=E.$parsers[i](r),v(r)){d=!1;break}ni(E.$modelValue)&&(E.$modelValue=m(e));var o=E.$modelValue,a=E.$options&&E.$options.allowInvalid;E.$$rawModelValue=r,a&&(E.$modelValue=r,t()),E.$$runValidators(r,E.$$lastCommittedViewValue,function(e){a||(E.$modelValue=e?r:void 0,t())})},this.$$writeModelToScope=function(){g(e,E.$modelValue),r(E.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){E.$viewValue=e,E.$options&&!E.$options.updateOnDefault||E.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=E.$options;i&&b(i.debounce)&&(n=i.debounce,C(n)?r=n:C(n[t])?r=n[t]:C(n["default"])&&(r=n["default"])),s.cancel(y),r?y=s(function(){E.$commitViewValue()},r):l.$$phase?E.$commitViewValue():e.$apply(function(){E.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==E.$modelValue&&(E.$modelValue===E.$modelValue||t===t)){E.$modelValue=E.$$rawModelValue=t,d=void 0;for(var n=E.$formatters,r=n.length,i=t;r--;)i=n[r](i);E.$viewValue!==i&&(E.$$updateEmptyClasses(i),E.$viewValue=E.$$lastCommittedViewValue=i,E.$render(),E.$$runValidators(E.$modelValue,E.$viewValue,p))}return t})}],Za=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Qa,priority:1,compile:function(t){return t.addClass(Ka).addClass(za).addClass(ja),{pre:function(e,t,n,r){var i=r[0],o=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],Ja=/(\s+|^)default(\s+|$)/,es=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=B(e.$eval(t.ngModelOptions)),b(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=oi(this.$options.updateOn.replace(Ja,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ts=dr({terminal:!0,priority:1e3}),ns=t("ngOptions"),rs=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,is=["$compile","$document","$parse",function(t,i,o){function a(e,t,r){function i(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!c&&n(e))t=e;else{t=[];for(var r in e)e.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t.push(r)}return t}var s=e.match(rs);if(!s)throw ns("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,X(t));var l=s[5]||s[7],c=s[6],u=/ as /.test(s[0])&&s[1],d=s[9],f=o(s[2]?s[1]:l),p=u&&o(u),h=p||f,m=d&&o(d),g=d?function(e,t){return m(r,t)}:function(e){return Ze(e)},v=function(e,t){return g(e,T(e,t))},b=o(s[2]||s[1]),y=o(s[3]||""),E=o(s[4]||""),w=o(s[8]),C={},T=c?function(e,t){return C[c]=t,C[l]=e,C}:function(e){return C[l]=e,C};return{trackBy:d,getTrackByValue:v,getWatchables:o(w,function(e){var t=[];e=e||[];for(var n=a(e),i=n.length,o=0;o<i;o++){var l=e===n?o:n[o],c=e[l],u=T(c,l),d=g(c,u);if(t.push(d),s[2]||s[1]){var f=b(r,u);t.push(f)}if(s[4]){var p=E(r,u);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},n=w(r)||[],o=a(n),s=o.length,l=0;l<s;l++){var c=n===o?l:o[l],u=n[c],f=T(u,c),p=h(r,f),m=g(p,f),C=b(r,f),$=y(r,f),S=E(r,f),x=new i(m,p,C,$,S);e.push(x),t[m]=x}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return d?ei.copy(e.viewValue):e.viewValue}}}}}function s(e,n,o,s){function u(e,t){var n=l.cloneNode(!1);t.appendChild(n),d(e,n)}function d(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function f(){var e=T&&h.readValue();if(T)for(var t=T.items.length-1;t>=0;t--){var r=T.items[t];We(b(r.group)?r.element.parentNode:r.element)}T=$.getOptions();var i={};if(w&&n.prepend(p),T.items.forEach(function(e){var t;b(e.group)?(t=i[e.group],t||(t=c.cloneNode(!1),S.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),u(e,t)):u(e,S)}),n[0].appendChild(S),m.$render(),!m.$isEmpty(e)){var o=h.readValue(),a=$.trackBy||g;(a?U(e,o):e===o)||(m.$setViewValue(o),m.$render())}}for(var p,h=s[0],m=s[1],g=o.multiple,v=0,y=n.children(),E=y.length;v<E;v++)if(""===y[v].value){p=y.eq(v);break}var w=!!p,C=zr(l.cloneNode(!1));C.val("?");var T,$=a(o.ngOptions,n,e),S=i[0].createDocumentFragment(),x=function(){
w||n.prepend(p),n.val(""),p.prop("selected",!0),p.attr("selected",!0)},A=function(){w?p.removeAttr("selected"):p.remove()},_=function(){n.prepend(C),n.val("?"),C.prop("selected",!0),C.attr("selected",!0)},k=function(){C.remove()};g?(m.$isEmpty=function(e){return!e||0===e.length},h.writeValue=function(e){T.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=T.getOptionFromViewValue(e);t&&(t.element.selected=!0)})},h.readValue=function(){var e=n.val()||[],t=[];return r(e,function(e){var n=T.selectValueMap[e];n&&!n.disabled&&t.push(T.getViewValueFromOption(n))}),t},$.trackBy&&e.$watchCollection(function(){if(ri(m.$viewValue))return m.$viewValue.map(function(e){return $.getTrackByValue(e)})},function(){m.$render()})):(h.writeValue=function(e){var t=T.selectValueMap[n.val()],r=T.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),r?(n[0].value!==r.selectValue&&(k(),A(),n[0].value=r.selectValue,r.element.selected=!0),r.element.setAttribute("selected","selected")):null===e||w?(k(),x()):(A(),_())},h.readValue=function(){var e=T.selectValueMap[n.val()];return e&&!e.disabled?(A(),k(),T.getViewValueFromOption(e)):null},$.trackBy&&e.$watch(function(){return $.getTrackByValue(m.$viewValue)},function(){m.$render()})),w?(p.remove(),t(p)(e),p.removeClass("ng-scope")):p=zr(l.cloneNode(!1)),n.empty(),f(),e.$watchCollection($.getWatchables,f)}var l=e.document.createElement("option"),c=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=p},post:s}}}],os=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function c(e){s.text(e||"")}var u,d=l.count,f=l.$attr.when&&s.attr(l.$attr.when),h=l.offset||0,m=a.$eval(f)||{},g={},b=t.startSymbol(),y=t.endSymbol(),E=b+d+"-"+h+y,w=ei.noop;r(l,function(e,t){var n=o.exec(t);if(n){var r=(n[1]?"-":"")+Ur(n[2]);m[r]=s.attr(l.$attr[t])}}),r(m,function(e,n){g[n]=t(e.replace(i,E))}),a.$watch(d,function(t){var r=parseFloat(t),i=ni(r);if(i||r in m||(r=e.pluralCat(r-h)),!(r===u||i&&ni(u))){w();var o=g[r];v(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),w=p,c()):w=a.$watch(o,c),u=r}})}}}],as=["$parse","$animate","$compile",function(e,i,o){var a="$$NG_REMOVED",s=t("ngRepeat"),l=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},u=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,d){var f=d.ngRepeat,p=o.$$createComment("end ngRepeat",f),h=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var m=h[1],g=h[2],v=h[3],b=h[4];if(h=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!h)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var y=h[3]||h[1],E=h[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var w,C,T,$,S={$id:Ze};return b?w=e(b):(T=function(e,t){return Ze(t)},$=function(e){return e}),function(e,t,o,d,h){w&&(C=function(t,n,r){return E&&(S[E]=t),S[y]=n,S.$index=r,w(e,S)});var m=me();e.$watchCollection(g,function(o){var d,g,b,w,S,x,A,_,k,O,R,N,D=t[0],I=me();if(v&&(e[v]=o),n(o))k=o,_=C||T;else{_=C||$,k=[];for(var L in o)Br.call(o,L)&&"$"!==L.charAt(0)&&k.push(L)}for(w=k.length,R=new Array(w),d=0;d<w;d++)if(S=o===k?d:k[d],x=o[S],A=_(S,x,d),m[A])O=m[A],delete m[A],I[A]=O,R[d]=O;else{if(I[A])throw r(R,function(e){e&&e.scope&&(m[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,A,x);R[d]={id:A,scope:void 0,clone:void 0},I[A]=!0}for(var F in m){if(O=m[F],N=he(O.clone),i.leave(N),N[0].parentNode)for(d=0,g=N.length;d<g;d++)N[d][a]=!0;O.scope.$destroy()}for(d=0;d<w;d++)if(S=o===k?d:k[d],x=o[S],O=R[d],O.scope){b=D;do b=b.nextSibling;while(b&&b[a]);c(O)!==b&&i.move(he(O.clone),null,D),D=u(O),l(O.scope,d,y,x,E,S,w)}else h(function(e,t){O.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,i.enter(e,null,D),D=n,O.clone=e,I[O.id]=O,l(O.scope,d,y,x,E,S,w)});m=I})}}}}],ss="ng-hide",ls="ng-hide-animate",cs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,ss,{tempClasses:ls})})}}}],us=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,ss,{tempClasses:ls})})}}}],ds=dr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&r(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),fs=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,o,a){var s=o.ngSwitch||o.on,l=[],c=[],u=[],d=[],f=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var i,o;for(i=0,o=u.length;i<o;++i)e.cancel(u[i]);for(u.length=0,i=0,o=d.length;i<o;++i){var s=he(c[i].clone);d[i].$destroy();var p=u[i]=e.leave(s);p.then(f(u,i))}c.length=0,d.length=0,(l=a.cases["!"+n]||a.cases["?"])&&r(l,function(n){n.transclude(function(r,i){d.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};c.push(a),e.enter(r,o.parent(),o)})})})}}}],ps=dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),hs=dr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),ms=t("ngTransclude"),gs=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,o){function a(e,n){e.length?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}if(!o)throw ms("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",X(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var l=r.ngTransclude||r.ngTranscludeSlot;o(a,null,l),l&&!o.isSlotFilled(l)&&s()}}}}],vs=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],bs={$setViewValue:p,$render:p},ys=["$element","$scope",function(t,n){var r=this,i=new Je;r.ngModelCtrl=bs,r.unknownOption=zr(e.document.createElement("option")),r.renderUnknownOption=function(e){var n="? "+Ze(e)+" ?";r.unknownOption.val(n),t.prepend(r.unknownOption),t.val(n)},n.$on("$destroy",function(){r.renderUnknownOption=p}),r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.readValue=function(){return r.removeUnknownOption(),t.val()},r.writeValue=function(e){r.hasOption(e)?(r.removeUnknownOption(),t.val(e),""===e&&r.emptyOption.prop("selected",!0)):null==e&&r.emptyOption?(r.removeUnknownOption(),t.val("")):r.renderUnknownOption(e)},r.addOption=function(e,t){if(t[0].nodeType!==vi){fe(e,'"option value"'),""===e&&(r.emptyOption=t);var n=i.get(e)||0;i.put(e,n+1),r.ngModelCtrl.$render(),Fr(t)}},r.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.remove(e),""===e&&(r.emptyOption=void 0)):i.put(e,t-1))},r.hasOption=function(e){return!!i.get(e)},r.registerOption=function(e,t,n,i,o){if(i){var a;n.$observe("value",function(e){b(a)&&r.removeOption(a),a=e,r.addOption(e,t)})}else o?e.$watch(o,function(e,i){n.$set("value",e),i!==e&&r.removeOption(i),r.addOption(e,t)}):r.addOption(n.value,t);t.on("$destroy",function(){r.removeOption(n.value),r.ngModelCtrl.$render()})}}],Es=function(){function e(e,t,n,i){var o=i[1];if(o){var a=i[0];if(a.ngModelCtrl=o,t.on("change",function(){e.$apply(function(){o.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var e=[];return r(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},a.writeValue=function(e){var n=new Je(e);r(t.find("option"),function(e){e.selected=b(n.get(e.value))})};var s,l=NaN;e.$watch(function(){l!==o.$viewValue||U(s,o.$viewValue)||(s=ve(o.$viewValue),o.$render()),l=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:ys,priority:1,link:{pre:e,post:t}}},ws=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){if(b(n.value))var r=e(n.value,!0);else{var i=e(t.text(),!0);i||n.$set("value",t.text())}return function(e,t,n){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,n,r,i)}}}}],Cs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Ts=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(w(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,X(n));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||v(o)||o.test(t)}}}}},$s=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=d(e);i=ni(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},Ss=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=d(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void(e.console&&void 0):(ce(),Ee(ei),ei.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r),o=(e*i|0)%i;return{v:r,f:o}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),void zr(e.document).ready(function(){ie(e.document,oe)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(e,t){"use strict";function n(e,t,n){if(!e)throw me("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function r(e,t){return e||t?e?t?(G(e)&&(e=e.join(" ")),G(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function i(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function o(e,t,n){var r="";return e=G(e)?e:e&&ee(e)&&e.length?e.split(/\s+/):[],V(e,function(e,i){e&&e.length>0&&(r+=i>0?" ":"",r+=n?t+e:e+t)}),r}function a(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function s(e){if(e instanceof ne)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===M)return e;break;default:return ne(l(e))}if(e.nodeType===M)return ne(e)}function l(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===M)return n}}function c(e,t,n){V(t,function(t){e.addClass(t,n)})}function u(e,t,n){V(t,function(t){e.removeClass(t,n)})}function d(e){return function(t,n){n.addClass&&(c(e,t,n.addClass),n.addClass=null),n.removeClass&&(u(e,t,n.removeClass),n.removeClass=null)}}function f(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||re;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=re},e.$$prepared=!0}return e}function p(e,t){h(e,t),m(e,t)}function h(e,t){t.from&&(e.css(t.from),t.from=null)}function m(e,t){t.to&&(e.css(t.to),t.to=null)}function g(e,t,n){var r=t.options||{},i=n.options||{},o=(r.addClass||"")+" "+(i.addClass||""),a=(r.removeClass||"")+" "+(i.removeClass||""),s=v(e.attr("class"),o,a);i.preparationClasses&&(r.preparationClasses=$(i.preparationClasses,r.preparationClasses),delete i.preparationClasses);var l=r.domOperation!==re?r.domOperation:null;return Y(r,i),l&&(r.domOperation=l),s.addClass?r.addClass=s.addClass:r.addClass=null,s.removeClass?r.removeClass=s.removeClass:r.removeClass=null,t.addClass=r.addClass,t.removeClass=r.removeClass,r}function v(e,t,n){function r(e){ee(e)&&(e=e.split(" "));var t={};return V(e,function(e){e.length&&(t[e]=!0)}),t}var i=1,o=-1,a={};e=r(e),t=r(t),V(t,function(e,t){a[t]=i}),n=r(n),V(n,function(e,t){a[t]=a[t]===i?null:o});var s={addClass:"",removeClass:""};return V(a,function(t,n){var r,a;t===i?(r="addClass",a=!e[n]||e[n+B]):t===o&&(r="removeClass",a=e[n]||e[n+P]),a&&(s[r].length&&(s[r]+=" "),s[r]+=n)}),s}function b(e){return e instanceof ne?e[0]:e}function y(e,t,n){var r="";t&&(r=o(t,U,!0)),n.addClass&&(r=$(r,o(n.addClass,P))),n.removeClass&&(r=$(r,o(n.removeClass,B))),r.length&&(n.preparationClasses=r,e.addClass(r))}function E(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function w(e,t){var n=t?"-"+t+"s":"";return T(e,[pe,n]),[pe,n]}function C(e,t){var n=t?"paused":"",r=L+ce;return T(e,[r,n]),[r,n]}function T(e,t){var n=t[0],r=t[1];e.style[n]=r}function $(e,t){return e?t?e+" "+t:e:t}function S(e){return[fe,e+"s"]}function x(e,t){var n=t?de:pe;return[n,e+"s"]}function A(e,t,n){var r=Object.create(null),i=e.getComputedStyle(t)||{};return V(n,function(e,t){var n=i[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=_(n)),0===n&&(n=null),r[t]=n}}),r}function _(e){var t=0,n=e.split(/\s*,\s*/);return V(n,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function k(e){return 0===e||null!=e}function O(e,t){var n=D,r=e+"s";return t?n+=ie:r+=" linear all",[n,r]}function R(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function N(e,t,n){V(n,function(n){e[n]=X(e[n])?e[n]:t.style.getPropertyValue(n)})}var D,I,L,F,M=1,P="-add",B="-remove",U="ng-",j="-active",H="-prepare",K="ng-animate",W="$$ngAnimateChildren",z="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(z="-webkit-",D="WebkitTransition",I="webkitTransitionEnd transitionend"):(D="transition",I="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(z="-webkit-",L="WebkitAnimation",F="webkitAnimationEnd animationend"):(L="animation",F="animationend");var q,Y,V,G,X,Q,Z,J,ee,te,ne,re,ie="Duration",oe="Property",ae="Delay",se="TimingFunction",le="IterationCount",ce="PlayState",ue=9999,de=L+ae,fe=L+ie,pe=D+ae,he=D+ie,me=t.$$minErr("ng"),ge=["$$rAF",function(e){function t(e){r=r.concat(e),n()}function n(){if(r.length){for(var t=r.shift(),o=0;o<t.length;o++)t[o]();i||e(function(){i||n()})}}var r,i;return r=t.queue=[],t.waitUntilQuiet=function(t){i&&i(),i=e(function(){i=null,t(),n()})},t}],ve=["$interpolate",function(e){return{link:function(t,n,r){function i(e){e="on"===e||"true"===e,n.data(W,e)}var o=r.ngAnimateChildren;ee(o)&&0===o.length?n.data(W,!0):(i(e(o)(t)),r.$observe("ngAnimateChildren",i))}}}],be="$$animateCss",ye=1e3,Ee=3,we=1.5,Ce={transitionDuration:he,transitionDelay:pe,transitionProperty:D+oe,animationDuration:fe,animationDelay:de,animationIterationCount:L+le},Te={transitionDuration:he,transitionDelay:pe,animationDuration:fe,animationDelay:de},$e=["$animateProvider",function(e){var t=R(),n=R();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,r,s,l,c,u,g,v){function y(e,t){var n="$$ngAnimateParentKey",r=e.parentNode,i=r[n]||(r[n]=++H);return i+"-"+e.getAttribute("class")+"-"+t}function E(n,r,i,o){var a=t.get(i);return a||(a=A(e,n,o),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(i,a),a}function $(i,a,s,l){var c;if(t.count(s)>0&&(c=n.get(s),!c)){var u=o(a,"-stagger");r.addClass(i,u),c=A(e,i,l),c.animationDuration=Math.max(c.animationDuration,0),c.transitionDuration=Math.max(c.transitionDuration,0),r.removeClass(i,u),n.put(s,c)}return c||{}}function _(e){K.push(e),g.waitUntilQuiet(function(){t.flush(),n.flush();for(var e=c(),r=0;r<K.length;r++)K[r](e);K.length=0})}function R(e,t,n){var r=E(e,t,n,Ce),i=r.animationDelay,o=r.transitionDelay;return r.maxDelay=i&&o?Math.max(i,o):i||o,r.maxDuration=Math.max(r.animationDuration*r.animationIterationCount,r.transitionDuration),r}var M=d(r),H=0,K=[];return function(e,n){function c(){g()}function d(){g(!0)}function g(t){if(!(X||Z&&Q)){X=!0,Q=!1,W.$$skipPreparationClasses||r.removeClass(e,Ce),r.removeClass(e,Se),C(Y,!1),w(Y,!1),V(ce,function(e){Y.style[e[0]]=""}),M(e,W),p(e,W),Object.keys(z).length&&V(z,function(e,t){e?Y.style.setProperty(t,e):Y.style.removeProperty(t)}),W.onDone&&W.onDone(),pe&&pe.length&&e.off(pe.join(" "),H);var n=e.data(be);n&&(l.cancel(n[0].timer),e.removeData(be)),J&&J.complete(!t)}}function E(e){Be.blockTransition&&w(Y,e),Be.blockKeyframeAnimation&&C(Y,!!e)}function A(){return J=new s({end:c,cancel:d}),_(re),g(),{$$willAnimate:!1,start:function(){return J},end:c}}function H(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||Date.now(),r=parseFloat(t.elapsedTime.toFixed(Ee));Math.max(n-le,0)>=ne&&r>=ie&&(Z=!0,g())}function K(){function t(){if(!X){if(E(!1),V(ce,function(e){var t=e[0],n=e[1];Y.style[t]=n}),M(e,W),r.addClass(e,Se),Be.recalculateTimingStyles){if($e=Y.className+" "+Ce,_e=y(Y,$e),Me=R(Y,$e,_e),Pe=Me.maxDelay,te=Math.max(Pe,0),ie=Me.maxDuration,0===ie)return void g();Be.hasTransitions=Me.transitionDuration>0,Be.hasAnimations=Me.animationDuration>0}if(Be.applyAnimationDelay&&(Pe="boolean"!=typeof W.delay&&k(W.delay)?parseFloat(W.delay):Pe,te=Math.max(Pe,0),Me.animationDelay=Pe,Ue=x(Pe,!0),ce.push(Ue),Y.style[Ue[0]]=Ue[1]),ne=te*ye,ae=ie*ye,W.easing){var t,i=W.easing;Be.hasTransitions&&(t=D+se,ce.push([t,i]),Y.style[t]=i),Be.hasAnimations&&(t=L+se,ce.push([t,i]),Y.style[t]=i)}Me.transitionDuration&&pe.push(I),Me.animationDuration&&pe.push(F),le=Date.now();var o=ne+we*ae,a=le+o,s=e.data(be)||[],c=!0;if(s.length){var u=s[0];c=a>u.expectedEndTime,c?l.cancel(u.timer):s.push(g)}if(c){var d=l(n,o,!1);s[0]={timer:d,expectedEndTime:a},s.push(g),e.data(be,s)}pe.length&&e.on(pe.join(" "),H),W.to&&(W.cleanupStyles&&N(z,Y,Object.keys(W.to)),m(e,W))}}function n(){var t=e.data(be);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(be)}}if(!X){if(!Y.parentNode)return void g();var i=function(e){if(Z)Q&&e&&(Q=!1,g());else if(Q=!e,Me.animationDuration){var t=C(Y,Q);Q?ce.push(t):a(ce,t)}},o=Le>0&&(Me.transitionDuration&&0===ke.transitionDuration||Me.animationDuration&&0===ke.animationDuration)&&Math.max(ke.animationDelay,ke.transitionDelay);o?l(t,Math.floor(o*Le*ye),!1):t(),ee.resume=function(){i(!0)},ee.pause=function(){i(!1)}}}var W=n||{};W.$$prepared||(W=f(q(W)));var z={},Y=b(e);if(!Y||!Y.parentNode||!v.enabled())return A();var X,Q,Z,J,ee,te,ne,ie,ae,le,ce=[],de=e.attr("class"),fe=i(W),pe=[];if(0===W.duration||!u.animations&&!u.transitions)return A();var he=W.event&&G(W.event)?W.event.join(" "):W.event,me=he&&W.structural,ge="",ve="";me?ge=o(he,U,!0):he&&(ge=he),W.addClass&&(ve+=o(W.addClass,P)),W.removeClass&&(ve.length&&(ve+=" "),ve+=o(W.removeClass,B)),W.applyClassesEarly&&ve.length&&M(e,W);var Ce=[ge,ve].join(" ").trim(),$e=de+" "+Ce,Se=o(Ce,j),xe=fe.to&&Object.keys(fe.to).length>0,Ae=(W.keyframeStyle||"").length>0;if(!Ae&&!xe&&!Ce)return A();var _e,ke;if(W.stagger>0){var Oe=parseFloat(W.stagger);ke={transitionDelay:Oe,animationDelay:Oe,transitionDuration:0,animationDuration:0}}else _e=y(Y,$e),ke=$(Y,Ce,_e,Te);W.$$skipPreparationClasses||r.addClass(e,Ce);var Re;if(W.transitionStyle){var Ne=[D,W.transitionStyle];T(Y,Ne),ce.push(Ne)}if(W.duration>=0){Re=Y.style[D].length>0;var De=O(W.duration,Re);T(Y,De),ce.push(De)}if(W.keyframeStyle){var Ie=[L,W.keyframeStyle];T(Y,Ie),ce.push(Ie)}var Le=ke?W.staggerIndex>=0?W.staggerIndex:t.count(_e):0,Fe=0===Le;Fe&&!W.skipBlocking&&w(Y,ue);var Me=R(Y,$e,_e),Pe=Me.maxDelay;te=Math.max(Pe,0),ie=Me.maxDuration;var Be={};if(Be.hasTransitions=Me.transitionDuration>0,Be.hasAnimations=Me.animationDuration>0,Be.hasTransitionAll=Be.hasTransitions&&"all"===Me.transitionProperty,Be.applyTransitionDuration=xe&&(Be.hasTransitions&&!Be.hasTransitionAll||Be.hasAnimations&&!Be.hasTransitions),Be.applyAnimationDuration=W.duration&&Be.hasAnimations,Be.applyTransitionDelay=k(W.delay)&&(Be.applyTransitionDuration||Be.hasTransitions),Be.applyAnimationDelay=k(W.delay)&&Be.hasAnimations,Be.recalculateTimingStyles=ve.length>0,(Be.applyTransitionDuration||Be.applyAnimationDuration)&&(ie=W.duration?parseFloat(W.duration):ie,Be.applyTransitionDuration&&(Be.hasTransitions=!0,Me.transitionDuration=ie,Re=Y.style[D+oe].length>0,ce.push(O(ie,Re))),Be.applyAnimationDuration&&(Be.hasAnimations=!0,Me.animationDuration=ie,ce.push(S(ie)))),0===ie&&!Be.recalculateTimingStyles)return A();if(null!=W.delay){var Ue;"boolean"!=typeof W.delay&&(Ue=parseFloat(W.delay),te=Math.max(Ue,0)),Be.applyTransitionDelay&&ce.push(x(Ue)),Be.applyAnimationDelay&&ce.push(x(Ue,!0))}return null==W.duration&&Me.transitionDuration>0&&(Be.recalculateTimingStyles=Be.recalculateTimingStyles||Fe),ne=te*ye,ae=ie*ye,W.skipBlocking||(Be.blockTransition=Me.transitionDuration>0,Be.blockKeyframeAnimation=Me.animationDuration>0&&ke.animationDelay>0&&0===ke.animationDuration),W.from&&(W.cleanupStyles&&N(z,Y,Object.keys(W.from)),h(e,W)),Be.blockTransition||Be.blockKeyframeAnimation?E(ie):W.skipBlocking||w(Y,!1),{$$willAnimate:!0,end:c,start:function(){if(!X)return ee={end:c,cancel:d,resume:null,pause:null},J=new s(ee),_(K),J}}}}]}],Se=["$$animationProvider",function(e){function t(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var n="ng-animate-shim",r="ng-anchor",i="ng-anchor-out",o="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,a,s,l,c,u,d){function f(e){return e.replace(/\bng-\S+\b/g,"")}function p(e,t){return ee(e)&&(e=e.split(" ")),ee(t)&&(t=t.split(" ")),e.filter(function(e){return t.indexOf(e)===-1}).join(" ")}function h(t,a,l){function c(e){var t={},n=b(e).getBoundingClientRect();return V(["width","height","top","left"],function(e){var r=n[e];switch(e){case"top":r+=v.scrollTop;break;case"left":r+=v.scrollLeft}t[e]=Math.floor(r)+"px"}),t}function u(){var t=e(g,{addClass:i,delay:!0,from:c(a)});return t.$$willAnimate?t:null}function d(e){return e.attr("class")||""}function h(){var t=f(d(l)),n=p(t,y),r=p(y,t),a=e(g,{to:c(l),addClass:o+" "+n,removeClass:i+" "+r,delay:!0});return a.$$willAnimate?a:null}function m(){g.remove(),a.removeClass(n),l.removeClass(n)}var g=ne(b(a).cloneNode(!0)),y=f(d(g));a.addClass(n),l.addClass(n),g.addClass(r),E.append(g);var w,C=u();if(!C&&(w=h(),!w))return m();var T=C||w;return{start:function(){function e(){n&&n.end()}var t,n=T.start();return n.done(function(){return n=null,!w&&(w=h())?(n=w.start(),n.done(function(){n=null,m(),t.complete()}),n):(m(),void t.complete())}),t=new s({end:e,cancel:e})}}}function m(e,t,n,r){var i=g(e,re),o=g(t,re),a=[];if(V(r,function(e){var t=e.out,r=e["in"],i=h(n,t,r);i&&a.push(i)}),i||o||0!==a.length)return{start:function(){function e(){V(t,function(e){e.end()})}var t=[];i&&t.push(i.start()),o&&t.push(o.start()),V(a,function(e){t.push(e.start())});var n=new s({end:e,cancel:e});return s.all(t,function(e){n.complete(e)}),n}}}function g(t){var n=t.element,r=t.options||{};t.structural&&(r.event=t.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===t.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=$(r.event,r.preparationClasses));var i=e(n,r);return i.$$willAnimate?i:null}if(!c.animations&&!c.transitions)return re;var v=d[0].body,y=b(l),E=ne(t(y)||v.contains(y)?y:v);return function(e){return e.from&&e.to?m(e.from,e.to,e.classes,e.anchors):g(e)}}]}],xe=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,r){function i(n){n=G(n)?n:n.split(" ");for(var r=[],i={},o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];s&&!i[a]&&(r.push(t.get(s)),i[a]=!0)}return r}var o=d(r);return function(e,t,r,a){function s(){a.domOperation(),o(e,a)}function l(){h=!0,s(),p(e,a)}function c(e,t,r,i,o){var a;switch(r){case"animate":a=[t,i.from,i.to,o];break;case"setClass":a=[t,v,b,o];break;case"addClass":a=[t,v,o];break;case"removeClass":a=[t,b,o];break;default:a=[t,o]}a.push(i);var s=e.apply(e,a);if(s)if(Z(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(Z(s))return s;return re}function u(e,t,r,i,o){var a=[];return V(i,function(i){var s=i[o];s&&a.push(function(){var i,o,a=!1,l=function(e){a||(a=!0,(o||re)(e),i.complete(!e))};return i=new n({end:function(){l()},cancel:function(){l(!0)}}),o=c(s,e,t,r,function(e){var t=e===!1;l(t)}),i})}),a}function d(e,t,r,i,o){var a=u(e,t,r,i,o);if(0===a.length){var s,l;"beforeSetClass"===o?(s=u(e,"removeClass",r,i,"beforeRemoveClass"),l=u(e,"addClass",r,i,"beforeAddClass")):"setClass"===o&&(s=u(e,"removeClass",r,i,"removeClass"),l=u(e,"addClass",r,i,"addClass")),s&&(a=a.concat(s)),l&&(a=a.concat(l))}if(0!==a.length)return function(e){var t=[];return a.length&&V(a,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){V(t,function(t){e?t.cancel():t.end()})}}}var h=!1;3===arguments.length&&J(r)&&(a=r,r=null),a=f(a),r||(r=e.attr("class")||"",a.addClass&&(r+=" "+a.addClass),a.removeClass&&(r+=" "+a.removeClass));var m,g,v=a.addClass,b=a.removeClass,y=i(r);if(y.length){var E,w;"leave"===t?(w="leave",E="afterLeave"):(w="before"+t.charAt(0).toUpperCase()+t.substr(1),E=t),"enter"!==t&&"move"!==t&&(m=d(e,t,a,y,w)),g=d(e,t,a,y,E)}if(m||g){var C;return{$$willAnimate:!0,end:function(){return C?C.end():(l(),C=new n,C.complete(!0)),C},start:function(){function e(e){l(e),C.complete(e)}function t(t){h||((r||re)(t),e(t))}if(C)return C;C=new n;var r,i=[];return m&&i.push(function(e){r=m(e)}),i.length?i.push(function(e){s(),e(!0)}):s(),g&&i.push(function(e){r=g(e)}),C.setHost({end:function(){t()},cancel:function(){t(!0)}}),n.chain(i,e),C}}}}}]}],Ae=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){var n=t.element,r=t.event,i=t.options,o=t.classes;return e(n,r,o,i)}return function(e){if(e.from&&e.to){var r=n(e.from),i=n(e.to);if(!r&&!i)return;return{start:function(){function e(){return function(){V(o,function(e){e.end()})}}function n(e){a.complete(e)}var o=[];r&&o.push(r.start()),i&&o.push(i.start()),t.all(o,n);var a=new t({end:e(),cancel:e()});return a}}}return n(e)}}]}],_e="data-ng-animate",ke="$ngAnimatePin",Oe=["$animateProvider",function(t){function r(e){if(!e)return null;var t=e.split(h),n=Object.create(null);return V(t,function(e){n[e]=!0}),n}function i(e,t){if(e&&t){var n=r(t);return e.split(h).some(function(e){return n[e]})}}function o(e,t,n,r){return m[e].some(function(e){return e(t,n,r)})}function a(e,t){var n=(e.addClass||"").length>0,r=(e.removeClass||"").length>0;return t?n&&r:n||r}var c=1,u=2,h=" ",m=this.rules={skip:[],cancel:[],join:[]};m.join.push(function(e,t,n){return!t.structural&&a(t)}),m.skip.push(function(e,t,n){return!t.structural&&!a(t)}),m.skip.push(function(e,t,n){return"leave"===n.event&&t.structural}),m.skip.push(function(e,t,n){return n.structural&&n.state===u&&!t.structural}),m.cancel.push(function(e,t,n){return n.structural&&t.structural}),m.cancel.push(function(e,t,n){return n.state===u&&t.structural}),m.cancel.push(function(e,t,n){if(n.structural)return!1;var r=t.addClass,o=t.removeClass,a=n.addClass,s=n.removeClass;return!(te(r)&&te(o)||te(a)&&te(s))&&(i(r,s)||i(o,a))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(r,i,h,m,v,w,C,T,$,S){function x(){var e=!1;return function(t){e?t():i.$$postDigest(function(){e=!0,t()})}}function A(e,t){return g(e,t,{})}function _(e,t,n){var r=b(t),i=b(e),o=[],a=H[n];return a&&V(a,function(e){re.call(e.node,r)?o.push(e.callback):"leave"===n&&re.call(e.node,i)&&o.push(e.callback)}),o}function k(e,t,n){var r=l(t);return e.filter(function(e){var t=e.node===r&&(!n||e.callback===n);return!t})}function O(e,t){"close"!==e||t[0].parentNode||ie.off(t)}function R(e,t,n){function l(t,n,i,o){S(function(){var t=_(v,e,n);t.length?r(function(){V(t,function(t){t(e,i,o)}),O(i,e)}):O(i,e)}),t.progress(n,i,o)}function d(t){E(e,T),Z(e,T),p(e,T),T.domOperation(),$.complete(!t)}var h,v,T=q(n);e=s(e),e&&(h=b(e),v=e.parent()),T=f(T);var $=new C,S=x();if(G(T.addClass)&&(T.addClass=T.addClass.join(" ")),T.addClass&&!ee(T.addClass)&&(T.addClass=null),G(T.removeClass)&&(T.removeClass=T.removeClass.join(" ")),T.removeClass&&!ee(T.removeClass)&&(T.removeClass=null),T.from&&!J(T.from)&&(T.from=null),T.to&&!J(T.to)&&(T.to=null),!h)return d(),$;var k=[h.className,T.addClass,T.removeClass].join(" ");if(!z(k))return d(),$;var R=["enter","move","leave"].indexOf(t)>=0,I=m[0].hidden,M=!U||I||B.get(h),j=!M&&P.get(h)||{},H=!!j.state;if(M||H&&j.state===c||(M=!L(e,v,t)),M)return I&&l($,t,"start"),d(),I&&l($,t,"close"),$;R&&N(e);var K={structural:R,element:e,event:t,addClass:T.addClass,removeClass:T.removeClass,close:d,options:T,runner:$};if(H){var W=o("skip",e,K,j);if(W)return j.state===u?(d(),$):(g(e,j,K),j.runner);var Y=o("cancel",e,K,j);if(Y)if(j.state===u)j.runner.end();else{if(!j.structural)return g(e,j,K),j.runner;j.close()}else{var X=o("join",e,K,j);if(X){if(j.state!==u)return y(e,R?t:null,T),t=K.event=j.event,T=g(e,j,K),j.runner;A(e,K)}}}else A(e,K);var Q=K.structural;if(Q||(Q="animate"===K.event&&Object.keys(K.options.to||{}).length>0||a(K)),!Q)return d(),D(e),$;var te=(j.counter||0)+1;return K.counter=te,F(e,c,K),i.$$postDigest(function(){var n=P.get(h),r=!n;n=n||{};var i=e.parent()||[],o=i.length>0&&("animate"===n.event||n.structural||a(n));if(r||n.counter!==te||!o)return r&&(Z(e,T),
p(e,T)),(r||R&&n.event!==t)&&(T.domOperation(),$.end()),void(o||D(e));t=!n.structural&&a(n,!0)?"setClass":n.event,F(e,u);var s=w(e,t,n.options);$.setHost(s),l($,t,"start",{}),s.done(function(n){d(!n);var r=P.get(h);r&&r.counter===te&&D(b(e)),l($,t,"close",{})})}),$}function N(e){var t=b(e),n=t.querySelectorAll("["+_e+"]");V(n,function(e){var t=parseInt(e.getAttribute(_e),10),n=P.get(e);if(n)switch(t){case u:n.runner.end();case c:P.remove(e)}})}function D(e){var t=b(e);t.removeAttribute(_e),P.remove(t)}function I(e,t){return b(e)===b(t)}function L(e,t,n){var r,i=ne(m[0].body),o=I(e,i)||"HTML"===e[0].nodeName,a=I(e,h),s=!1,l=B.get(b(e)),c=ne.data(e[0],ke);for(c&&(t=c),t=b(t);t&&(a||(a=I(t,h)),t.nodeType===M);){var u=P.get(t)||{};if(!s){var d=B.get(t);if(d===!0&&l!==!1){l=!0;break}d===!1&&(l=!1),s=u.structural}if(te(r)||r===!0){var f=ne.data(t,W);X(f)&&(r=f)}if(s&&r===!1)break;if(o||(o=I(t,i)),o&&a)break;t=a||!(c=ne.data(t,ke))?t.parentNode:b(c)}var p=(!s||r)&&l!==!0;return p&&a&&o}function F(e,t,n){n=n||{},n.state=t;var r=b(e);r.setAttribute(_e,t);var i=P.get(r),o=i?Y(i,n):n;P.put(r,o)}var P=new v,B=new v,U=null,j=i.$watch(function(){return 0===T.totalPendingRequests},function(e){e&&(j(),i.$$postDigest(function(){i.$$postDigest(function(){null===U&&(U=!0)})}))}),H=Object.create(null),K=t.classNameFilter(),z=K?function(e){return K.test(e)}:function(){return!0},Z=d($),re=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},ie={on:function(e,t,n){var r=l(t);H[e]=H[e]||[],H[e].push({node:r,callback:n}),ne(t).on("$destroy",function(){var i=P.get(r);i||ie.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||ee(arguments[0])){var r=H[e];r&&(H[e]=1===arguments.length?null:k(r,t,n))}else{t=arguments[0];for(var i in H)H[i]=k(H[i],t)}},pin:function(e,t){n(Q(e),"element","not an element"),n(Q(t),"parentElement","not an element"),e.data(ke,t)},push:function(e,t,n,r){return n=n||{},n.domOperation=r,R(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!U;else{var r=Q(e);if(r){var i=b(e);1===n?t=!B.get(i):B.put(i,!t)}else t=U=!!e}return t}};return ie}]}],Re=["$animateProvider",function(e){function t(e,t){e.data(s,t)}function n(e){e.removeData(s)}function i(e){return e.data(s)}var o="ng-animate-ref",a=this.drivers=[],s="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(e,s,l,c,u,h){function m(e){function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode,r=n.parentNode;o.put(n,e);for(var a;r;){if(a=o.get(r)){a.processed||(a=t(a));break}r=r.parentNode}return(a||i).children.push(e),e}function n(e){var t,n=[],r=[];for(t=0;t<e.children.length;t++)r.push(e.children[t]);var i=r.length,o=0,a=[];for(t=0;t<r.length;t++){var s=r[t];i<=0&&(i=o,o=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach(function(e){o++,r.push(e)}),i--}return a.length&&n.push(a),n}var r,i={children:[]},o=new u;for(r=0;r<e.length;r++){var a=e[r];o.put(a.domNode,e[r]={domNode:a.domNode,fn:a.fn,children:[]})}for(r=0;r<e.length;r++)t(e[r]);return n(i)}var g=[],v=d(e);return function(u,d,y){function E(e){var t="["+o+"]",n=e.hasAttribute(o)?[e]:e.querySelectorAll(t),r=[];return V(n,function(e){var t=e.getAttribute(o);t&&t.length&&r.push(e)}),r}function w(e){var t=[],n={};V(e,function(e,r){var i=e.element,a=b(i),s=e.event,l=["enter","move"].indexOf(s)>=0,c=e.structural?E(a):[];if(c.length){var u=l?"to":"from";V(c,function(e){var t=e.getAttribute(o);n[t]=n[t]||{},n[t][u]={animationID:r,element:ne(e)}})}else t.push(e)});var r={},i={};return V(n,function(n,o){var a=n.from,s=n.to;if(!a||!s){var l=a?a.animationID:s.animationID,c=l.toString();return void(r[c]||(r[c]=!0,t.push(e[l])))}var u=e[a.animationID],d=e[s.animationID],f=a.animationID.toString();if(!i[f]){var p=i[f]={structural:!0,beforeStart:function(){u.beforeStart(),d.beforeStart()},close:function(){u.close(),d.close()},classes:C(u.classes,d.classes),from:u,to:d,anchors:[]};p.classes.length?t.push(p):(t.push(u),t.push(d))}i[f].anchors.push({out:a.element,"in":s.element})}),t}function C(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var o=0;o<t.length;o++)if(i===t[o]){n.push(i);break}}return n.join(" ")}function T(e){for(var t=a.length-1;t>=0;t--){var n=a[t],r=l.get(n),i=r(e);if(i)return i}}function $(){u.addClass(K),R&&e.addClass(u,R),N&&(e.removeClass(u,N),N=null)}function S(e,t){function n(e){var n=i(e);n&&n.setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function x(){var e=i(u);!e||"leave"===d&&y.$$domOperationFired||e.end()}function A(t){u.off("$destroy",x),n(u),v(u,y),p(u,y),y.domOperation(),R&&e.removeClass(u,R),u.removeClass(K),k.complete(!t)}y=f(y);var _=["enter","move","leave"].indexOf(d)>=0,k=new c({end:function(){A()},cancel:function(){A(!0)}});if(!a.length)return A(),k;t(u,k);var O=r(u.attr("class"),r(y.addClass,y.removeClass)),R=y.tempClasses;R&&(O+=" "+R,y.tempClasses=null);var N;return _&&(N="ng-"+d+H,e.addClass(u,N)),g.push({element:u,classes:O,event:d,structural:_,options:y,beforeStart:$,close:A}),u.on("$destroy",x),g.length>1?k:(s.$$postDigest(function(){var e=[];V(g,function(t){i(t.element)?e.push(t):t.close()}),g.length=0;var t=w(e),n=[];V(t,function(e){n.push({domNode:b(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close,r=e.anchors?e.from.element||e.to.element:e.element;if(i(r)){var o=T(e);o&&(t=o.start)}if(t){var a=t();a.done(function(e){n(!e)}),S(e,a)}else n()}})}),h(m(n))}),k)}}]}],Ne=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,r,i,o){var a,s;t.$watchCollection(r.ngAnimateSwap||r["for"],function(r){a&&e.leave(a),s&&(s.$destroy(),s=null),(r||0===r)&&(s=t.$new(),o(s,function(t){a=t,e.enter(t,null,n)}))})}}}];t.module("ngAnimate",[],function(){re=t.noop,q=t.copy,Y=t.extend,ne=t.element,V=t.forEach,G=t.isArray,ee=t.isString,J=t.isObject,te=t.isUndefined,X=t.isDefined,Z=t.isFunction,Q=t.isElement}).directive("ngAnimateSwap",Ne).directive("ngAnimateChildren",ve).factory("$$rAFScheduler",ge).provider("$$animateQueue",Oe).provider("$$animation",Re).provider("$animateCss",$e).provider("$$animateCssDriver",Se).provider("$$animateJs",xe).provider("$$animateJsDriver",Ae)}(window,window.angular),angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(e,t,n,r,i){var o=10,a=15,s=1e4,l="angular-notify.html",c="center",u=document.body,d=0,f=[],p=[],h=function(h){"object"!=typeof h&&(h={message:h}),h.duration=h.duration?h.duration:s,h.templateUrl=h.templateUrl?h.templateUrl:l,h.container=h.container?h.container:u,h.classes=h.classes?h.classes:"";var m=h.scope?h.scope.$new():i.$new();if(m.$position=h.position?h.position:c,m.$message=h.message,m.$classes=h.classes,m.$messageTemplate=h.messageTemplate,d>0)for(var g=p.length+1-d,v=0;v<g;v++)p[v].$close();t.get(h.templateUrl,{cache:r}).success(function(t){var r=n(t)(m);if(r.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(e){("opacity"===e.propertyName||0===e.currentTarget.style.opacity||e.originalEvent&&"opacity"===e.originalEvent.propertyName)&&(r.remove(),f.splice(f.indexOf(r),1),p.splice(p.indexOf(m),1),l())}),h.messageTemplate){for(var i,s=0;s<r.children().length;s++)if(angular.element(r.children()[s]).hasClass("cg-notify-message-template")){i=angular.element(r.children()[s]);break}if(!i)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+h.templateUrl+".");i.append(n(h.messageTemplate)(m))}angular.element(h.container).append(r),f.push(r),"center"===m.$position&&e(function(){m.$centerMargin="-"+r[0].offsetWidth/2+"px"}),m.$close=function(){r.css("opacity",0).attr("data-closing","true"),l()};var l=function(){for(var e=0,t=o,n=f.length-1;n>=0;n--){var r=10,i=f[n],s=i[0].offsetHeight,l=t+s+r;i.attr("data-closing")?l+=20:t+=s+a,i.css("top",l+"px").css("margin-top","-"+(s+r)+"px").css("visibility","visible"),e++}};e(function(){l()}),h.duration>0&&e(function(){m.$close()},h.duration)}).error(function(e){throw new Error("Template specified for cgNotify ("+h.templateUrl+") could not be loaded. "+e)});var b={};return b.close=function(){m.$close&&m.$close()},Object.defineProperty(b,"message",{get:function(){return m.$message},set:function(e){m.$message=e}}),p.push(m),b};return h.config=function(e){o=angular.isUndefined(e.startTop)?o:e.startTop,a=angular.isUndefined(e.verticalSpacing)?a:e.verticalSpacing,s=angular.isUndefined(e.duration)?s:e.duration,l=e.templateUrl?e.templateUrl:l,c=angular.isUndefined(e.position)?c:e.position,u=e.container?e.container:u,d=e.maximumOpen?e.maximumOpen:d},h.closeAll=function(){for(var e=f.length-1;e>=0;e--){var t=f[e];t.css("opacity",0)}},h}]),angular.module("cgNotify").run(["$templateCache",function(e){"use strict";e.put("angular-notify.html","<div class=\"cg-notify-message\" ng-class=\"[$classes, \n    $position === 'center' ? 'cg-notify-message-center' : '',\n    $position === 'left' ? 'cg-notify-message-left' : '',\n    $position === 'right' ? 'cg-notify-message-right' : '']\"\n    ng-style=\"{'margin-left': $centerMargin}\">\n\n    <div ng-show=\"!$messageTemplate\">\n        {{$message}}\n    </div>\n\n"+'    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]),function(){"use strict";function e(e,t,n,r,i,o,a){function s(e){if(1!==arguments.length||e)if(e)f(e.toastId);else for(var t=0;t<y.length;t++)f(y[t].toastId)}function l(e,t,n){var r=h().iconClasses.error;return p(r,e,t,n)}function c(e,t,n){var r=h().iconClasses.info;return p(r,e,t,n)}function u(e,t,n){var r=h().iconClasses.success;return p(r,e,t,n)}function d(e,t,n){var r=h().iconClasses.warning;return p(r,e,t,n)}function f(t,n){function r(e){for(var t=0;t<y.length;t++)if(y[t].toastId===e)return y[t]}function i(){return!y.length}var s=r(t);s&&!s.deleting&&(s.deleting=!0,s.isOpened=!1,e.leave(s.el).then(function(){s.scope.options.onHidden&&s.scope.options.onHidden(n),s.scope.$destroy();var e=y.indexOf(s);delete w[s.scope.message],y.splice(e,1);var t=o.maxOpened;t&&y.length>=t&&y[t-1].open.resolve(),i()&&(v.remove(),v=null,C=a.defer())}))}function p(e,t,n,r){return angular.isObject(n)&&(r=n,n=null),g({iconClass:e,message:t,optionsOverride:r,title:n})}function h(){return angular.extend({},o)}function m(t){if(v)return C.promise;v=angular.element("<div></div>"),v.attr("id",t.containerId),v.addClass(t.positionClass),v.css({"pointer-events":"auto"});var n=angular.element(document.querySelector(t.target));if(!n||!n.length)throw"Target for toasts doesn't exist";return e.enter(v,n).then(function(){C.resolve()}),C.promise}function g(n){function o(){return p.autoDismiss&&p.maxOpened&&y.length>p.maxOpened}function s(e,t,n){n.allowHtml?(e.scope.allowHtml=!0,e.scope.title=i.trustAsHtml(t.title),e.scope.message=i.trustAsHtml(t.message)):(e.scope.title=t.title,e.scope.message=t.message),e.scope.toastType=e.iconClass,e.scope.toastId=e.toastId,e.scope.extraData=n.extraData,e.scope.options={extendedTimeOut:n.extendedTimeOut,messageClass:n.messageClass,onHidden:n.onHidden,onShown:n.onShown,onTap:n.onTap,progressBar:n.progressBar,tapToDismiss:n.tapToDismiss,timeOut:n.timeOut,titleClass:n.titleClass,toastClass:n.toastClass},n.closeButton&&(e.scope.options.closeHtml=n.closeHtml)}function l(){function e(e){for(var t=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],n=0,r=t.length;n<r;n++)delete e[t[n]];return e}var t={toastId:b++,isOpened:!1,scope:r.$new(),open:a.defer()};return t.iconClass=n.iconClass,n.optionsOverride&&(angular.extend(p,e(n.optionsOverride)),t.iconClass=n.optionsOverride.iconClass||t.iconClass),s(t,n,p),t.el=c(t.scope),t}function c(e){var n=angular.element("<div toast></div>"),r=t.get("$compile");return r(n)(e)}function u(){return p.maxOpened&&y.length<=p.maxOpened||!p.maxOpened}function d(){var e=p.preventDuplicates&&n.message===E,t=p.preventOpenDuplicates&&w[n.message];return!(!e&&!t)||(E=n.message,w[n.message]=!0,!1)}var p=h();if(!d()){var g=l();if(y.push(g),o())for(var C=y.slice(0,y.length-p.maxOpened),T=0,$=C.length;T<$;T++)f(C[T].toastId);return u()&&g.open.resolve(),g.open.promise.then(function(){m(p).then(function(){if(g.isOpened=!0,p.newestOnTop)e.enter(g.el,v).then(function(){g.scope.init()});else{var t=v[0].lastChild?angular.element(v[0].lastChild):null;e.enter(g.el,v,t).then(function(){g.scope.init()})}})}),g}}var v,b=0,y=[],E="",w={},C=a.defer(),T={clear:s,error:l,info:c,remove:f,success:u,warning:d};return T}angular.module("toastr",[]).factory("toastr",e),e.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){"use strict";angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){"use strict";function e(e){function t(e,t,n,r){function i(){var e=(s-(new Date).getTime())/a*100;t.css("width",e+"%")}var o,a,s;r.progressBar=e,e.start=function(e){o&&clearInterval(o),a=parseFloat(e),s=(new Date).getTime()+a,o=setInterval(i,10)},e.stop=function(){o&&clearInterval(o)},e.$on("$destroy",function(){clearInterval(o)})}return{replace:!0,require:"^toast",templateUrl:function(){return e.templates.progressbar},link:t}}angular.module("toastr").directive("progressBar",e),e.$inject=["toastrConfig"]}(),function(){"use strict";function e(){this.progressBar=null,this.startProgressBar=function(e){this.progressBar&&this.progressBar.start(e)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",e)}(),function(){"use strict";function e(e,t,n,r){function i(n,i,o,a){function s(e){return a.startProgressBar(e),t(function(){a.stopProgressBar(),r.remove(n.toastId)},e,1)}function l(){n.progressBar=!1,a.stopProgressBar()}function c(){return n.options.closeHtml}var u;if(n.toastClass=n.options.toastClass,n.titleClass=n.options.titleClass,n.messageClass=n.options.messageClass,n.progressBar=n.options.progressBar,c()){var d=angular.element(n.options.closeHtml),f=e.get("$compile");d.addClass("toast-close-button"),d.attr("ng-click","close(true, $event)"),f(d)(n),i.prepend(d)}n.init=function(){n.options.timeOut&&(u=s(n.options.timeOut)),n.options.onShown&&n.options.onShown()},i.on("mouseenter",function(){l(),u&&t.cancel(u)}),n.tapToast=function(){angular.isFunction(n.options.onTap)&&n.options.onTap(),n.options.tapToDismiss&&n.close(!0)},n.close=function(e,t){t&&angular.isFunction(t.stopPropagation)&&t.stopPropagation(),r.remove(n.toastId,e)},i.on("mouseleave",function(){0===n.options.timeOut&&0===n.options.extendedTimeOut||(n.$apply(function(){n.progressBar=n.options.progressBar}),u=s(n.options.extendedTimeOut))})}return{replace:!0,templateUrl:function(){return n.templates.toast},controller:"ToastController",link:i}}angular.module("toastr").directive("toast",e),e.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(e){e.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),e.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function r(e,t){return W(new(W(function(){},{prototype:e})),t)}function i(e){return K(arguments,function(t){t!==e&&K(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function a(e){if(Object.keys)return Object.keys(e);var t=[];return K(e,function(e,n){t.push(n)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for(r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=n);r<n;r++)if(r in e&&e[r]===t)return r;return-1}function l(e,t,n,r){var i,l=o(n,r),c={},u=[];for(var d in l)if(l[d]&&l[d].params&&(i=a(l[d].params),i.length))for(var f in i)s(u,i[f])>=0||(u.push(i[f]),c[i[f]]=e[i[f]]);return W({},c,t)}function c(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var i=0;i<n.length;i++){var o=n[i];if(e[o]!=t[o])return!1}return!0}function u(e,t){var n={};return K(e,function(e){n[e]=t[e]}),n}function d(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return K(n,function(n){n in e&&(t[n]=e[n])}),t}function f(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)s(n,r)==-1&&(t[r]=e[r]);return t}function p(e,t){var n=H(e),r=n?[]:{};return K(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function h(e,t){var n=H(e)?[]:{};return K(e,function(e,r){n[r]=t(e,r)}),n}function m(e){return e.then(n,function(){})&&e}function g(e,t){var r=1,o=2,l={},c=[],u=l,d=W(e.when(l),{$$promises:l,$$values:l});this.study=function(l){function p(e,n){if(b[n]!==o){if(v.push(n),b[n]===r)throw v.splice(0,s(v,n)),new Error("Cyclic dependency: "+v.join(" -> "));if(b[n]=r,U(e))g.push(n,[function(){return t.get(e)}],c);else{var i=t.annotate(e);K(i,function(e){e!==n&&l.hasOwnProperty(e)&&p(l[e],e)}),g.push(n,e,i)}v.pop(),b[n]=o}}function h(e){return j(e)&&e.then&&e.$$promises}if(!j(l))throw new Error("'invocables' must be an object");var m=a(l||{}),g=[],v=[],b={};return K(l,p),l=v=b=null,function(r,o,a){function s(){--E||(w||i(y,o.$$values),v.$$values=y,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,p.resolve(y))}function l(e){v.$$failure=e,p.reject(e)}function c(n,i,o){function c(e){d.reject(e),l(e)}function u(){if(!P(v.$$failure))try{d.resolve(t.invoke(i,a,y)),d.promise.then(function(e){y[n]=e,s()},c)}catch(e){c(e)}}var d=e.defer(),f=0;K(o,function(e){b.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(f++,b[e].then(function(t){y[e]=t,--f||u()},c))}),f||u(),b[n]=d.promise}if(h(r)&&a===n&&(a=o,o=r,r=null),r){if(!j(r))throw new Error("'locals' must be an object")}else r=u;if(o){if(!h(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=d;var p=e.defer(),v=p.promise,b=v.$$promises={},y=W({},r),E=1+g.length/3,w=!1;if(P(o.$$failure))return l(o.$$failure),v;o.$$inheritedValues&&i(y,f(o.$$inheritedValues,m)),W(b,o.$$promises),o.$$values?(w=i(y,f(o.$$values,m)),v.$$inheritedValues=f(o.$$values,m),s()):(o.$$inheritedValues&&(v.$$inheritedValues=f(o.$$inheritedValues,m)),o.then(s,l));for(var C=0,T=g.length;C<T;C+=3)r.hasOwnProperty(g[C])?s():c(g[C],g[C+1],g[C+2]);return v}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function v(e,t,n){this.fromConfig=function(e,t,n){return P(e.template)?this.fromString(e.template,t):P(e.templateUrl)?this.fromUrl(e.templateUrl,t):P(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return B(e)?e(t):e},this.fromUrl=function(n,r){return B(n)&&(n=n(r)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function b(e,t,i){function o(t,n,r,i){if(g.push(t),h[t])return h[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(m[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return m[t]=new Y.Param(t,n,r,i),m[t]}function a(e,t,n,r){var i=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:i=["(",")"+(r?"?":"")];break;case!0:o=o.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+n+"|",")?"]}return o+i[0]+t+i[1]}function s(i,o){var a,s,l,c,u;return a=i[2]||i[3],u=t.params[a],l=e.substring(f,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),s&&(c=Y.type(s)||r(Y.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":n)})),{id:a,regexp:s,segment:l,type:c,cfg:u}}t=W({params:{}},j(t)?t:{});var l,c=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d="^",f=0,p=this.segments=[],h=i?i.params:{},m=this.params=i?i.params.$$new():new Y.ParamSet,g=[];this.source=e;for(var v,b,y;(l=c.exec(e))&&(v=s(l,!1),!(v.segment.indexOf("?")>=0));)b=o(v.id,v.type,v.cfg,"path"),d+=a(v.segment,b.type.pattern.source,b.squash,b.isOptional),p.push(v.segment),f=c.lastIndex;y=e.substring(f);var E=y.indexOf("?");if(E>=0){var w=this.sourceSearch=y.substring(E);if(y=y.substring(0,E),this.sourcePath=e.substring(0,f+E),w.length>0)for(f=0;l=u.exec(w);)v=s(l,!0),b=o(v.id,v.type,v.cfg,"search"),f=c.lastIndex}else this.sourcePath=e,this.sourceSearch="";d+=a(y)+(t.strict===!1?"/?":"")+"$",p.push(y),this.regexp=new RegExp(d,t.caseInsensitive?"i":n),this.prefix=p[0],this.$$paramNames=g}function y(e){W(this,e)}function E(){function e(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function i(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function o(){return{strict:m,caseInsensitive:f}}function l(e){return B(e)||H(e)&&B(e[e.length-1])}function c(){for(;C.length;){var e=C.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(v[e.name],d.invoke(e.def))}}function u(e){W(this,e||{})}Y=this;var d,f=!1,m=!0,g=!1,v={},w=!0,C=[],T={string:{encode:e,decode:i,is:function(e){return null==e||!P(e)||"string"==typeof e},pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return P(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};E.$$getDefaultValue=function(e){if(!l(e.value))return e.value;if(!d)throw new Error("Injectable functions cannot be called at configuration time");return d.invoke(e.value)},this.caseInsensitive=function(e){return P(e)&&(f=e),f},this.strictMode=function(e){return P(e)&&(m=e),m},this.defaultSquashPolicy=function(e){if(!P(e))return g;if(e!==!0&&e!==!1&&!U(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return g=e,e},this.compile=function(e,t){return new b(e,W(o(),t))},this.isMatcher=function(e){if(!j(e))return!1;var t=!0;return K(b.prototype,function(n,r){B(n)&&(t=t&&P(e[r])&&B(e[r]))}),t},this.type=function(e,t,n){if(!P(t))return v[e];if(v.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return v[e]=new y(W({name:e},t)),n&&(C.push({name:e,def:n}),w||c()),this},K(T,function(e,t){v[t]=new y(W({name:t},e))}),v=r(v,{}),this.$get=["$injector",function(e){return d=e,w=!1,c(),K(T,function(e,t){v[t]||(v[t]=new y(e))}),this}],this.Param=function(e,r,i,o){function c(e){var t=j(e)?a(e):[],n=s(t,"value")===-1&&s(t,"type")===-1&&s(t,"squash")===-1&&s(t,"array")===-1;return n&&(e={value:e}),e.$$fn=l(e.value)?e.value:function(){return e.value},e}function u(n,r,i){if(n.type&&r)throw new Error("Param '"+e+"' has two type configurations.");return r?r:n.type?t.isString(n.type)?v[n.type]:n.type instanceof y?n.type:new y(n.type):"config"===i?v.any:v.string}function f(){var t={array:"search"===o&&"auto"},n=e.match(/\[\]$/)?{array:!0}:{};return W(t,n,i).array}function m(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!P(n)||null==n)return g;if(n===!0||U(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function b(e,t,r,i){var o,a,l=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return o=H(e.replace)?e.replace:[],U(i)&&o.push({from:i,to:n}),a=h(o,function(e){return e.from}),p(l,function(e){return s(a,e.from)===-1}).concat(o)}function E(){if(!d)throw new Error("Injectable functions cannot be called at configuration time");var e=d.invoke(i.$$fn);if(null!==e&&e!==n&&!T.type.is(e))throw new Error("Default value ("+e+") for parameter '"+T.id+"' is not an instance of Type ("+T.type.name+")");return e}function w(e){function t(e){return function(t){return t.from===e}}function n(e){var n=h(p(T.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),P(e)?T.type.$normalize(e):E()}function C(){return"{Param:"+e+" "+r+" squash: '"+x+"' optional: "+S+"}"}var T=this;i=c(i),r=u(i,r,o);var $=f();r=$?r.$asArray($,"search"===o):r,"string"!==r.name||$||"path"!==o||i.value!==n||(i.value="");var S=i.value!==n,x=m(i,S),A=b(i,$,S,x);W(this,{id:e,type:r,location:o,array:$,squash:x,replace:A,isOptional:S,value:w,dynamic:n,config:i,toString:C})},u.prototype={$$new:function(){return r(this,W(new u,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=a(u.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),K(t,function(t){K(a(t),function(t){s(e,t)===-1&&s(r,t)===-1&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return K(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return K(r.$$keys(),function(i){var o=e&&e[i],a=t&&t[i];r[i].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var r,i,o,a,s,l=this.$$keys();for(r=0;r<l.length&&(i=this[l[r]],o=e[l[r]],o!==n&&null!==o||!i.isOptional);r++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=u}function w(e,r){function i(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function a(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return!P(r)||r}function s(r,i,o,a,s){function f(e,t,n){return"/"===g?e:t?g.slice(0,-1)+e:n?g.slice(1)+e:e}function p(e){function t(e){var t=e(o,r);return!!t&&(U(t)&&r.replace().url(t),!0)}if(!e||!e.defaultPrevented){m&&r.url()===m;m=n;var i,a=c.length;for(i=0;i<a;i++)if(t(c[i]))return;u&&t(u)}}function h(){return l=l||i.$on("$locationChangeSuccess",p)}var m,g=a.baseHref(),v=r.url();return d||h(),{sync:function(){p()},listen:function(){return h()},update:function(e){return e?void(v=r.url()):void(r.url()!==v&&(r.url(v),r.replace()))},push:function(e,t,i){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),r.url(o),m=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,o){if(!n.validates(i))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled),a=a&&s.history;var l=n.format(i);if(o=o||{},a||null===l||(l="#"+e.hashPrefix()+l),null!==l&&i&&i["#"]&&(l+="#"+i["#"]),l=f(l,a,o.absolute),!o.absolute||!l)return l;var c=!a&&l?"/":"",u=r.port();return u=80===u||443===u?"":":"+u,[r.protocol(),"://",r.host(),u,c,l].join("")}}}var l,c=[],u=null,d=!1;this.rule=function(e){if(!B(e))throw new Error("'rule' must be a function");return c.push(e),this},this.otherwise=function(e){if(U(e)){var t=e;e=function(){return t}}else if(!B(e))throw new Error("'rule' must be a function");return u=e,this},this.when=function(e,t){var n,s=U(t);if(U(e)&&(e=r.compile(e)),!s&&!B(t)&&!H(t))throw new Error("invalid 'handler' in when()");var l={matcher:function(e,t){return s&&(n=r.compile(t),t=["$match",function(e){return n.format(e)}]),W(function(n,r){return a(n,t,e.exec(r.path(),r.search()))},{prefix:U(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=t,t=["$match",function(e){return o(n,e)}]),W(function(n,r){return a(n,t,e.exec(r.path()))},{prefix:i(e)})}},c={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var u in c)if(c[u])return this.rule(l[u](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),d=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function C(e,i){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function f(e,t){if(!e)return n;var r=U(e),i=r?e:e.name,a=o(i);if(a){if(!t)throw new Error("No reference point given for path '"+i+"'");t=f(t);for(var s=i.split("."),l=0,c=s.length,u=t;l<c;l++)if(""!==s[l]||0!==l){if("^"!==s[l])break;if(!u.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");u=u.parent}else u=t;s=s.slice(l).join("."),i=u.name+(u.name&&s?".":"")+s}var d=x[i];return!d||!r&&(r||d!==e&&d.self!==e)?n:d}function p(e,t){A[e]||(A[e]=[]),A[e].push(t)}function g(e){for(var t=A[e]||[];t.length;)v(t.shift())}function v(t){t=r(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!U(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(x.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var i=n.indexOf(".")!==-1?n.substring(0,n.lastIndexOf(".")):U(t.parent)?t.parent:j(t.parent)&&U(t.parent.name)?t.parent.name:"";if(i&&!x[i])return p(i,t.self);for(var o in k)B(k[o])&&(t[o]=k[o](t,k.$delegates[o]));return x[n]=t,!t[_]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){S.$current.navigable==t&&c(e,n)||S.transitionTo(t,e,{inherit:!0,location:!1})}]),g(n),t}function b(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),n=S.$current.name.split("."),r=0,i=t.length;r<i;r++)"*"===t[r]&&(n[r]="*");return"**"===t[0]&&(n=n.slice(s(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(s(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length==n.length&&n.join("")===t.join("")}function E(e,t){return U(e)&&!P(t)?k[e]:B(t)&&U(e)?(k[e]&&!k.$delegates[e]&&(k.$delegates[e]=k[e]),k[e]=t,this):this}function w(e,t){return j(e)?t=e:t.name=e,v(t),this}function C(e,i,o,s,d,p,g,v,E){function w(t,n,r,o){var a=e.$broadcast("$stateNotFound",t,n,r);if(a.defaultPrevented)return g.update(),R;if(!a.retry)return null;if(o.$retry)return g.update(),N;var s=S.transition=i.when(a.retry);return s.then(function(){return s!==S.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,n,r),k):(t.options.$retry=!0,S.transitionTo(t.to,t.toParams,t.options));
},function(){return R}),g.update(),s}function C(e,n,r,a,l,c){function f(){var n=[];return K(e.views,function(r,i){var a=r.resolve&&r.resolve!==e.resolve?r.resolve:{};a.$template=[function(){return o.load(i,{view:r,locals:l.globals,params:p,notify:c.notify})||""}],n.push(d.resolve(a,l.globals,l.resolve,e).then(function(n){if(B(r.controllerProvider)||H(r.controllerProvider)){var o=t.extend({},a,l.globals);n.$$controller=s.invoke(r.controllerProvider,null,o)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,n.$$resolveAs=r.resolveAs,l[i]=n}))}),i.all(n).then(function(){return l.globals})}var p=r?n:u(e.params.$$keys(),n),h={$stateParams:p};l.resolve=d.resolve(e.resolve,h,l.resolve,e);var m=[l.resolve.then(function(e){l.globals=e})];return a&&m.push(a),i.all(m).then(f).then(function(e){return l})}var A=new Error("transition superseded"),k=m(i.reject(A)),O=m(i.reject(new Error("transition prevented"))),R=m(i.reject(new Error("transition aborted"))),N=m(i.reject(new Error("transition failed")));return $.locals={resolve:null,globals:{$stateParams:{}}},S={params:{},current:$.self,$current:$,transition:null},S.reload=function(e){return S.transitionTo(S.current,p,{reload:e||!0,inherit:!1,notify:!0})},S.go=function(e,t,n){return S.transitionTo(e,t,W({inherit:!0,relative:S.$current},n))},S.transitionTo=function(t,n,o){n=n||{},o=W({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,c=S.$current,d=S.params,h=c.path,m=f(t,o.relative),v=n["#"];if(!P(m)){var b={to:t,toParams:n,options:o},y=w(b,c.self,d,o);if(y)return y;if(t=b.to,n=b.toParams,o=b.options,m=f(t,o.relative),!P(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[_])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=l(p,n||{},S.$current,m)),!m.params.$$validates(n))return N;n=m.params.$$values(n),t=m;var E=t.path,x=0,R=E[x],D=$.locals,I=[];if(o.reload){if(U(o.reload)||j(o.reload)){if(j(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var L=o.reload===!0?h[0]:f(o.reload);if(o.reload&&!L)throw new Error("No such reload state '"+(U(o.reload)?o.reload:o.reload.name)+"'");for(;R&&R===h[x]&&R!==L;)D=I[x]=R.locals,x++,R=E[x]}}else for(;R&&R===h[x]&&R.ownParams.$$equals(n,d);)D=I[x]=R.locals,x++,R=E[x];if(T(t,n,c,d,D,o))return v&&(n["#"]=v),S.params=n,z(S.params,p),z(u(t.params.$$keys(),p),t.locals.globals.$stateParams),o.location&&t.navigable&&t.navigable.url&&(g.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),g.update(!0)),S.transition=null,i.when(S.current);if(n=u(t.params.$$keys(),n||{}),v&&(n["#"]=v),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,c.self,d,o).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,c.self,d),null==S.transition&&g.update(),O;for(var F=i.when(D),M=x;M<E.length;M++,R=E[M])D=I[M]=r(D),F=C(R,n,R===t,F,D,o);var B=S.transition=F.then(function(){var r,i,a;if(S.transition!==B)return e.$broadcast("$stateChangeCancel",t.self,n,c.self,d),k;for(r=h.length-1;r>=x;r--)a=h[r],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(r=x;r<E.length;r++)i=E[r],i.locals=I[r],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return S.transition!==B?(e.$broadcast("$stateChangeCancel",t.self,n,c.self,d),k):(S.$current=t,S.current=t.self,S.params=n,z(S.params,p),S.transition=null,o.location&&t.navigable&&g.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,c.self,d),g.update(!0),S.current)}).then(null,function(r){return r===A?k:S.transition!==B?(e.$broadcast("$stateChangeCancel",t.self,n,c.self,d),k):(S.transition=null,a=e.$broadcast("$stateChangeError",t.self,n,c.self,d,r),a.defaultPrevented||g.update(),i.reject(r))});return B},S.is=function(e,t,r){r=W({relative:S.$current},r||{});var i=f(e,r.relative);return P(i)?S.$current===i&&(!t||c(i.params.$$values(t),p)):n},S.includes=function(e,t,r){if(r=W({relative:S.$current},r||{}),U(e)&&b(e)){if(!y(e))return!1;e=S.$current.name}var i=f(e,r.relative);if(!P(i))return n;if(!P(S.$current.includes[i.name]))return!1;if(!t)return!0;for(var o=a(t),s=0;s<o.length;s++){var l=o[s],c=i.params[l];if(c&&!c.type.equals(p[l],t[l]))return!1}return!0},S.href=function(e,t,r){r=W({lossy:!0,inherit:!0,absolute:!1,relative:S.$current},r||{});var i=f(e,r.relative);if(!P(i))return null;r.inherit&&(t=l(p,t||{},S.$current,i));var o=i&&r.lossy?i.navigable:i;return o&&o.url!==n&&null!==o.url?g.href(o.url,u(i.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},S.get=function(e,t){if(0===arguments.length)return h(a(x),function(e){return x[e].self});var n=f(e,t||S.$current);return n&&n.self?n.self:null},S}function T(e,t,n,r,i,o){function a(e,t,n){function r(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(r),o=d.apply({},[e.params].concat(i)),a=new Y.ParamSet(o);return a.$$equals(t,n)}if(!o.reload&&e===n&&(i===n.locals||e.self.reloadOnSearch===!1&&a(n,r,t)))return!0}var $,S,x={},A={},_="abstract",k={parent:function(e){if(P(e.parent)&&e.parent)return f(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?f(t[1]):$},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=r(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(U(t))return"^"==t.charAt(0)?i.compile(t.substring(1),n):(e.parent.navigable||$).url.concat(t,n);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new Y.ParamSet;return K(e.params||{},function(e,n){t[n]||(t[n]=new Y.Param(n,null,e,"config"))}),t},params:function(e){var t=d(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?W(e.parent.params.$$new(),t):new Y.ParamSet},views:function(e){var t={};return K(P(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),n.resolveAs=n.resolveAs||e.resolveAs||"$resolve",t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?W({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};$=v({name:"",url:"^",views:null,"abstract":!0}),$.navigable=null,this.decorator=E,this.state=w,this.$get=C,C.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function T(){function e(e,t){return{load:function(e,n){var r,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return n=W(i,n),n.view&&(r=t.fromConfig(n.view,n.params,n.locals)),r}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function $(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function S(e,n,r,i,o){function a(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function s(e,n){var r=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,n,r){t.version.minor>2?u.enter(e,null,n).then(r):u.enter(e,null,n,r)},leave:function(e,n){t.version.minor>2?u.leave(e).then(n):u.leave(e,n)}};if(c){var i=c&&c(n,e);return{enter:function(e,t,n){i.enter(e,null,t),n()},leave:function(e,t){i.leave(e),t()}}}return r()}var l=a(),c=l("$animator"),u=l("$animate"),d={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,a,l){return function(n,a,c){function u(){if(f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),p){var e=p.data("$uiViewAnim");b.leave(p,function(){e.$$animLeave.resolve(),f=null}),f=p,p=null}}function d(s){var d,f=A(n,c,a,i),y=f&&e.$current&&e.$current.locals[f];if(s||y!==m){d=n.$new(),m=e.$current.locals[f],d.$emit("$viewContentLoading",f);var E=l(d,function(e){var i=o.defer(),s=o.defer(),l={$animEnter:i.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",l),b.enter(e,a,function(){i.resolve(),h&&h.$emit("$viewContentAnimationEnded"),(t.isDefined(v)&&!v||n.$eval(v))&&r(e)}),u()});p=E,h=d,h.$emit("$viewContentLoaded",f),h.$eval(g)}}var f,p,h,m,g=c.onload||"",v=c.autoscroll,b=s(c,n);a.inheritedData("$uiView");n.$on("$stateChangeSuccess",function(){d(!1)}),d(!0)}}};return d}function x(e,n,r,i){return{restrict:"ECA",priority:-400,compile:function(o){var a=o.html();return function(o,s,l){var c=r.$current,u=A(o,l,s,i),d=c&&c.locals[u];if(d){s.data("$uiView",{name:u,state:d.$$state}),s.html(d.$template?d.$template:a);var f=t.extend({},d);o[d.$$resolveAs]=f;var p=e(s.contents());if(d.$$controller){d.$scope=o,d.$element=s;var h=n(d.$$controller,d);d.$$controllerAs&&(o[d.$$controllerAs]=h,o[d.$$controllerAs][d.$$resolveAs]=f),B(h.$onInit)&&h.$onInit(),s.data("$ngControllerController",h),s.children().data("$ngControllerController",h)}p(o)}}}}}function A(e,t,n,r){var i=r(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function _(e,t){var n,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e=t+"("+r[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function k(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function O(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function R(e,t,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var l=n(function(){t.go(s.state,s.params,s.options)});o.preventDefault();var c=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(l)}}}}function N(e,t){return{relative:k(e)||t.$current,inherit:!0}}function D(e,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,l=_(o.uiSref,e.current.name),c={state:l.state,href:null,params:null},u=O(i),d=a[1]||a[0],f=null;c.options=W(N(i,e),o.uiSrefOpts?r.$eval(o.uiSrefOpts):{});var p=function(n){n&&(c.params=t.copy(n)),c.href=e.href(l.state,c.params,c.options),f&&f(),d&&(f=d.$$addStateInfo(l.state,c.params)),null!==c.href&&o.$set(u.attr,c.href)};l.paramExpr&&(r.$watch(l.paramExpr,function(e){e!==c.params&&p(e)},!0),c.params=t.copy(r.$eval(l.paramExpr))),p(),u.clickable&&(s=R(i,e,n,u,function(){return c}),i[i.on?"on":"bind"]("click",s),r.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",s)}))}}}function I(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,r,i,o){function a(t){f.state=t[0],f.params=t[1],f.options=t[2],f.href=e.href(f.state,f.params,f.options),p&&p(),c&&(p=c.$$addStateInfo(f.state,f.params)),f.href&&i.$set(l.attr,f.href)}var s,l=O(r),c=o[1]||o[0],u=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],d="["+u.map(function(e){return e||"null"}).join(", ")+"]",f={state:null,params:null,options:null,href:null},p=null;n.$watch(d,a,!0),a(n.$eval(d)),l.clickable&&(s=R(r,e,t,l,function(){return f}),r[r.on?"on":"bind"]("click",s),n.$on("$destroy",function(){r[r.off?"off":"unbind"]("click",s)}))}}}function L(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,r,i,o){function a(t,n,i){var o=e.get(t,k(r)),a=s(t,n),l={state:o||{name:t},params:n,hash:a};return m.push(l),g[a]=i,function(){var e=m.indexOf(l);e!==-1&&m.splice(e,1)}}function s(e,n){if(!U(e))throw new Error("state should be a string");return j(n)?e+q(n):(n=t.$eval(n),j(n)?e+q(n):e)}function l(){for(var e=0;e<m.length;e++)d(m[e].state,m[e].params)?c(r,g[m[e].hash]):u(r,g[m[e].hash]),f(m[e].state,m[e].params)?c(r,p):u(r,p)}function c(e,t){o(function(){e.addClass(t)})}function u(e,t){e.removeClass(t)}function d(t,n){return e.includes(t.name,n)}function f(t,n){return e.is(t.name,n)}var p,h,m=[],g={};p=n(i.uiSrefActiveEq||"",!1)(t);try{h=t.$eval(i.uiSrefActive)}catch(v){}h=h||n(i.uiSrefActive||"",!1)(t),j(h)&&K(h,function(n,r){if(U(n)){var i=_(n,e.current.name);a(i.state,t.$eval(i.paramExpr),r)}}),this.$$addStateInfo=function(e,t){if(!(j(h)&&m.length>0)){var n=a(e,t,h);return l(),n}},t.$on("$stateChangeSuccess",l),l()}]}}function F(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function M(e){var t=function(t,n,r){return e.includes(t,n,r)};return t.$stateful=!0,t}var P=t.isDefined,B=t.isFunction,U=t.isString,j=t.isObject,H=t.isArray,K=t.forEach,W=t.extend,z=t.copy,q=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),v.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",v);var Y;b.prototype.concat=function(e,t){var n={caseInsensitive:Y.caseInsensitive(),strict:Y.strictMode(),squash:Y.defaultSquashPolicy()};return new b(this.sourcePath+e+this.sourceSearch,W(n,t),this)},b.prototype.toString=function(){return this.source},b.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var r=t(e).split(/-(?!\\)/),i=h(r,t);return h(i,n).reverse()}var r=this.regexp.exec(e);if(!r)return null;t=t||{};var i,o,a,s=this.parameters(),l=s.length,c=this.segments.length-1,u={};if(c!==r.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var d,f;for(i=0;i<c;i++){for(a=s[i],d=this.params[a],f=r[i+1],o=0;o<d.replace.length;o++)d.replace[o].from===f&&(f=d.replace[o].to);f&&d.array===!0&&(f=n(f)),P(f)&&(f=d.type.decode(f)),u[a]=d.value(f)}for(;i<l;i++){for(a=s[i],u[a]=this.params[a].value(t[a]),d=this.params[a],f=t[a],o=0;o<d.replace.length;o++)d.replace[o].from===f&&(f=d.replace[o].to);P(f)&&(f=d.type.decode(f)),u[a]=d.value(f)}return u},b.prototype.parameters=function(e){return P(e)?this.params[e]||null:this.$$paramNames},b.prototype.validates=function(e){return this.params.$$validates(e)},b.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,r=this.parameters(),i=this.params;if(!this.validates(e))return null;var o,a=!1,s=n.length-1,l=r.length,c=n[0];for(o=0;o<l;o++){var u=o<s,d=r[o],f=i[d],p=f.value(e[d]),m=f.isOptional&&f.type.equals(f.value(),p),g=!!m&&f.squash,v=f.type.encode(p);if(u){var b=n[o+1],y=o+1===s;if(g===!1)null!=v&&(c+=H(v)?h(v,t).join("-"):encodeURIComponent(v)),c+=b;else if(g===!0){var E=c.match(/\/$/)?/\/?(.*)/:/(.*)/;c+=b.match(E)[1]}else U(g)&&(c+=g+b);y&&f.squash===!0&&"/"===c.slice(-1)&&(c=c.slice(0,-1))}else{if(null==v||m&&g!==!1)continue;if(H(v)||(v=[v]),0===v.length)continue;v=h(v,encodeURIComponent).join("&"+d+"="),c+=(a?"&":"?")+(d+"="+v),a=!0}}return c},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},y.prototype.$asArray=function(e,t){function r(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return H(e)?e:P(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(n){if(H(n)&&0===n.length)return n;n=i(n);var r=h(n,e);return t===!0?0===p(r,a).length:o(r)}}function l(e){return function(t,n){var r=i(t),o=i(n);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e(r[a],o[a]))return!1;return!0}}this.encode=s(r(e,"encode")),this.decode=s(r(e,"decode")),this.is=s(r(e,"is"),!0),this.equals=l(r(e,"equals")),this.pattern=e.pattern,this.$normalize=s(r(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new r(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",E),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",w),C.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",C).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),T.$inject=[],t.module("ui.router.state").provider("$view",T),t.module("ui.router.state").provider("$uiViewScroll",$),S.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],x.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",S),t.module("ui.router.state").directive("uiView",x),D.$inject=["$state","$timeout"],I.$inject=["$state","$timeout"],L.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",L).directive("uiSrefActiveEq",L).directive("uiState",I),F.$inject=["$state"],M.$inject=["$state"],t.module("ui.router.state").filter("isState",F).filter("includedByState",M)}(window,window.angular),function(){var e,t,n,r,i,o,a,s,l=[].slice,c={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,r,i,o;if(r=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[r])for(i=0,o=n.length;o>i;i++)t=n[i],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,r,i,o,a;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(r=this._callbacks[e],!r)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(i=o=0,a=r.length;a>o;i=++o)if(n=r[i],n===t){r.splice(i,1);break}return this},e}(),e=function(e){function n(e,t){var i,o,a;if(this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,i=null!=(a=n.optionsForElement(this.element))?a:{},this.options=r({},this.defaultOptions,i,null!=t?t:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?n.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:n.getElements(this.options.clickable,"clickable")),this.init()}var r,i;return u(n,e),n.prototype.Emitter=t,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return a},forceFallback:!1,fallback:function(){var e,t,r,i,o,a;for(this.element.className=""+this.element.className+" dz-browser-not-supported",a=this.element.getElementsByTagName("div"),i=0,o=a.length;o>i;i++)e=a[i],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),r=t.getElementsByTagName("span")[0],r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),r=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:a,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:a,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,r,i,o,a,s,l,c,u,d,f,p,h;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),d=e.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=d.length;l>o;o++)t=d[o],t.textContent=this._renameFilename(e.name);for(f=e.previewElement.querySelectorAll("[data-dz-size]"),a=0,c=f.length;c>a;a++)t=f[a],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(t){return function(r){return r.preventDefault(),r.stopPropagation(),e.status===n.UPLOADING?n.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?n.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),p=e.previewElement.querySelectorAll("[data-dz-remove]"),h=[],s=0,u=p.length;u>s;s++)i=p[s],h.push(i.addEventListener("click",r));return h}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,i,o;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=0,i=o.length;i>r;r++)n=o[r],n.alt=e.name,n.src=t;return setTimeout(function(){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var n,r,i,o,a;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),o=e.previewElement.querySelectorAll("[data-dz-errormessage]"),a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push(n.textContent=t);return a}},errormultiple:a,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:a,uploadprogress:function(e,t){var n,r,i,o,a;if(e.previewElement){for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],r=0,i=o.length;i>r;r++)n=o[r],a.push("PROGRESS"===n.nodeName?n.value=t:n.style.width=""+t+"%");return a}},totaluploadprogress:a,sending:a,sendingmultiple:a,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:a,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:a,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:a,maxfilesexceeded:a,maxfilesreached:a,queuecomplete:a,addedfiles:a,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},r=function(){var e,t,n,r,i,o,a;for(r=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],o=0,a=n.length;a>o;o++){t=n[o];for(e in t)i=t[e],r[e]=i}return r},n.prototype.getAcceptedFiles=function(){var e,t,n,r,i;for(r=this.files,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.accepted&&i.push(e);return i},n.prototype.getRejectedFiles=function(){var e,t,n,r,i;for(r=this.files,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.accepted||i.push(e);return i},n.prototype.getFilesWithStatus=function(e){var t,n,r,i,o;for(i=this.files,o=[],n=0,r=i.length;r>n;n++)t=i[n],t.status===e&&o.push(t);return o},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getAddedFiles=function(){return this.getFilesWithStatus(n.ADDED)},n.prototype.getActiveFiles=function(){var e,t,r,i,o;for(i=this.files,o=[],t=0,r=i.length;r>t;t++)e=i[t],(e.status===n.UPLOADING||e.status===n.QUEUED)&&o.push(e);return o},n.prototype.init=function(){var e,t,r,i,o,a,s;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),
e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,i,o;if(n=e.hiddenFileInput.files,n.length)for(i=0,o=n.length;o>i;i++)t=n[i],e.addFile(t);return e.emit("addedfiles",n),r()})}}(this))(),this.URL=null!=(a=window.URL)?a:window.webkitURL,s=this.events,i=0,o=s.length;o>i;i++)e=s[i],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(){return 0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(n){return t(n),e.emit("dragenter",n)}}(this),dragover:function(e){return function(n){var r;try{r=n.dataTransfer.effectAllowed}catch(i){}return n.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",t(n),e.emit("dragover",n)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(n){return t(n),e.drop(n)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(r){return(t!==e.element||r.target===e.element||n.elementInside(r.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,r,i,o,a,s;if(r=0,n=0,e=this.getActiveFiles(),e.length){for(s=this.getActiveFiles(),o=0,a=s.length;a>o;o++)t=s[o],r+=t.upload.bytesSent,n+=t.upload.total;i=100*r/n}else i=100;return this.emit("totaluploadprogress",i,n,r)},n.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},n.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},n.prototype.getFallbackForm=function(){var e,t,r,i;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(r),"FORM"!==this.element.tagName?(i=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),i.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=i?i:t)},n.prototype.getExistingFallback=function(){var e,t,n,r,i,o;for(t=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},o=["div","form"],r=0,i=o.length;i>r;r++)if(n=o[r],e=t(this.element.getElementsByTagName(n)))return e},n.prototype.setupEventListeners=function(){var e,t,n,r,i,o,a;for(o=this.listeners,a=[],r=0,i=o.length;i>r;r++)e=o[r],a.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.addEventListener(t,n,!1));return i}());return a},n.prototype.removeEventListeners=function(){var e,t,n,r,i,o,a;for(o=this.listeners,a=[],r=0,i=o.length;i>r;r++)e=o[r],a.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.removeEventListener(t,n,!1));return i}());return a},n.prototype.disable=function(){var e,t,n,r,i;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(this.cancelUpload(e));return i},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t,n,r,i,o,a,s,l;if(r=0,i="b",e>0){for(a=["TB","GB","MB","KB","b"],n=s=0,l=a.length;l>s;n=++s)if(o=a[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){r=e/Math.pow(this.options.filesizeBase,4-n),i=o;break}r=Math.round(10*r)/10}return"<strong>"+r+"</strong> "+i},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},n.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},n.prototype.handleFiles=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(this.addFile(t));return i},n.prototype._addFilesFromItems=function(e){var t,n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],o.push(null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?this.addFile(n.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?this.addFile(n.getAsFile()):void 0);return o},n.prototype._addFilesFromDirectory=function(e,t){var n,r,i;return n=e.createReader(),r=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?void 0:void 0},(i=function(e){return function(){return n.readEntries(function(n){var r,o,a;if(n.length>0){for(o=0,a=n.length;a>o;o++)r=n[o],r.isFile?r.file(function(n){return e.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+t+"/"+n.name,e.addFile(n))}):r.isDirectory&&e._addFilesFromDirectory(r,""+t+"/"+r.name);i()}return null},r)}}(this))()},n.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},n.prototype.enqueueFiles=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){if(e.status!==n.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=n.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},n.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},n.prototype.removeFile=function(e){return e.status===n.UPLOADING&&this.cancelUpload(e),this.files=s(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},n.prototype.removeAllFiles=function(e){var t,r,i,o;for(null==e&&(e=!1),o=this.files.slice(),r=0,i=o.length;i>r;r++)t=o[r],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(r){return function(){return"image/svg+xml"===e.type?(r.emit("thumbnail",e,n.result),void(null!=t&&t())):r.createThumbnailFromUrl(e,n.result,t)}}(this),n.readAsDataURL(e)},n.prototype.createThumbnailFromUrl=function(e,t,n,r){var i;return i=document.createElement("img"),r&&(i.crossOrigin=r),i.onload=function(t){return function(){var r,a,s,l,c,u,d,f;return e.width=i.width,e.height=i.height,s=t.options.resize.call(t,e),null==s.trgWidth&&(s.trgWidth=s.optWidth),null==s.trgHeight&&(s.trgHeight=s.optHeight),r=document.createElement("canvas"),a=r.getContext("2d"),r.width=s.trgWidth,r.height=s.trgHeight,o(a,i,null!=(c=s.srcX)?c:0,null!=(u=s.srcY)?u:0,s.srcWidth,s.srcHeight,null!=(d=s.trgX)?d:0,null!=(f=s.trgY)?f:0,s.trgWidth,s.trgHeight),l=r.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=n?n():void 0}}(this),null!=n&&(i.onerror=n),i.src=t},n.prototype.processQueue=function(){var e,t,n,r;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(r=this.getQueuedFiles(),r.length>0)){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-n));for(;t>e;){if(!r.length)return;this.processFile(r.shift()),e++}}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,r,i;for(r=0,i=e.length;i>r;r++)t=e[r],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,r,i,o;for(i=this.files,o=[],n=0,r=i.length;r>n;n++)t=i[n],t.xhr===e&&o.push(t);return o}.call(this)},n.prototype.cancelUpload=function(e){var t,r,i,o,a,s,l;if(e.status===n.UPLOADING){for(r=this._getFilesWithXhr(e.xhr),i=0,a=r.length;a>i;i++)t=r[i],t.status=n.CANCELED;for(e.xhr.abort(),o=0,s=r.length;s>o;o++)t=r[o],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else((l=e.status)===n.ADDED||l===n.QUEUED)&&(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},i=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var t,o,a,s,l,c,u,d,f,p,h,m,g,v,b,y,E,w,C,T,$,S,x,A,_,k,O,R,N,D,I,L,F,M;for(C=new XMLHttpRequest,T=0,A=e.length;A>T;T++)t=e[T],t.xhr=C;m=i(this.options.method,e),E=i(this.options.url,e),C.open(m,E,!0),C.withCredentials=!!this.options.withCredentials,b=null,a=function(n){return function(){var r,i,o;for(o=[],r=0,i=e.length;i>r;r++)t=e[r],o.push(n._errorProcessing(e,b||n.options.dictResponseError.replace("{{statusCode}}",C.status),C));return o}}(this),y=function(n){return function(r){var i,o,a,s,l,c,u,d,f;if(null!=r)for(o=100*r.loaded/r.total,a=0,c=e.length;c>a;a++)t=e[a],t.upload={progress:o,total:r.total,bytesSent:r.loaded};else{for(i=!0,o=100,s=0,u=e.length;u>s;s++)t=e[s],(100!==t.upload.progress||t.upload.bytesSent!==t.upload.total)&&(i=!1),t.upload.progress=o,t.upload.bytesSent=t.upload.total;if(i)return}for(f=[],l=0,d=e.length;d>l;l++)t=e[l],f.push(n.emit("uploadprogress",t,o,t.upload.bytesSent));return f}}(this),C.onload=function(t){return function(r){var i;if(e[0].status!==n.CANCELED&&4===C.readyState){if(b=C.responseText,C.getResponseHeader("content-type")&&~C.getResponseHeader("content-type").indexOf("application/json"))try{b=JSON.parse(b)}catch(o){r=o,b="Invalid JSON response from server."}return y(),200<=(i=C.status)&&300>i?t._finished(e,b,r):a()}}}(this),C.onerror=function(){return function(){return e[0].status!==n.CANCELED?a():void 0}}(this),v=null!=(N=C.upload)?N:C,v.onprogress=y,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&r(c,this.options.headers);for(s in c)l=c[s],l&&C.setRequestHeader(s,l);if(o=new FormData,this.options.params){D=this.options.params;for(h in D)w=D[h],o.append(h,w)}for($=0,_=e.length;_>$;$++)t=e[$],this.emit("sending",t,C,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,C,o),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),S=0,k=I.length;k>S;S++)if(d=I[S],f=d.getAttribute("name"),p=d.getAttribute("type"),"SELECT"===d.tagName&&d.hasAttribute("multiple"))for(L=d.options,x=0,O=L.length;O>x;x++)g=L[x],g.selected&&o.append(f,g.value);else(!p||"checkbox"!==(F=p.toLowerCase())&&"radio"!==F||d.checked)&&o.append(f,d.value);for(u=R=0,M=e.length-1;M>=0?M>=R:R>=M;u=M>=0?++R:--R)o.append(this._getParamName(u),e[u],this._renameFilename(e[u].name));return this.submitRequest(C,o,e)},n.prototype.submitRequest=function(e,t){return e.send(t)},n.prototype._finished=function(e,t,r){var i,o,a;for(o=0,a=e.length;a>o;o++)i=e[o],i.status=n.SUCCESS,this.emit("success",i,t,r),this.emit("complete",i);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,r),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},n.prototype._errorProcessing=function(e,t,r){var i,o,a;for(o=0,a=e.length;a>o;o++)i=e[o],i.status=n.ERROR,this.emit("error",i,t,r),this.emit("complete",i);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,r),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},n}(t),e.version="4.3.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[n(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,r,i,o,a;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],t=function(e){var t,n,i,o;for(o=[],n=0,i=e.length;i>n;n++)t=e[n],o.push(/(^| )dropzone($| )/.test(t.className)?r.push(t):void 0);return o},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),a=[],i=0,o=r.length;o>i;i++)n=r[i],a.push(e.optionsForElement(n)!==!1?new e(n):void 0);return a},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,r,i,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=e.blacklistedBrowsers,r=0,i=o.length;i>r;r++)n=o[r],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},s=function(e,t){var n,r,i,o;for(o=[],r=0,i=e.length;i>r;r++)n=e[r],n!==t&&o.push(n);return o},n=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(e,t){var n,r,i,o,a,s,l,c;if(e instanceof Array){i=[];try{for(o=0,s=e.length;s>o;o++)r=e[o],i.push(this.getElement(r,t))}catch(u){n=u,i=null}}else if("string"==typeof e)for(i=[],c=document.querySelectorAll(e),a=0,l=c.length;l>a;a++)r=c[a],i.push(r);else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},e.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},e.isValidFile=function(e,t){var n,r,i,o,a;if(!t)return!0;for(t=t.split(","),r=e.type,n=r.replace(/\/.*$/,""),o=0,a=t.length;a>o;o++)if(i=t[o],i=i.trim(),"."===i.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length))return!0}else if(/\/\*$/.test(i)){if(n===i.replace(/\/.*$/,""))return!0}else if(r===i)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",i=function(e){var t,n,r,i,o,a,s,l,c,u;for(s=e.naturalWidth,a=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=a,r=n.getContext("2d"),r.drawImage(e,0,0),i=r.getImageData(0,0,1,a).data,u=0,o=a,l=a;l>u;)t=i[4*(l-1)+3],0===t?o=l:u=l,l=o+u>>1;return c=l/a,0===c?1:c},o=function(e,t,n,r,o,a,s,l,c,u){var d;return d=i(t),e.drawImage(t,n,r,o,a,s,l,c,u/d)},r=function(e,t){var n,r,i,o,a,s,l,c,u;if(i=!1,u=!0,r=e.document,c=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",l=r.addEventListener?"removeEventListener":"detachEvent",s=r.addEventListener?"":"on",o=function(n){return"readystatechange"!==n.type||"complete"===r.readyState?(("load"===n.type?e:r)[l](s+n.type,o,!1),!i&&(i=!0)?t.call(e,n.type||n):void 0):void 0},a=function(){var e;try{c.doScroll("left")}catch(t){return e=t,void setTimeout(a,50)}return o("poll")},"complete"!==r.readyState){if(r.createEventObject&&c.doScroll){try{u=!e.frameElement}catch(d){}u&&a()}return r[n](s+"DOMContentLoaded",o,!1),r[n](s+"readystatechange",o,!1),e[n](s+"load",o,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},r(window,e._autoDiscoverFunction)}.call(this),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},i=n.prototype,o=r.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=e.URL||e.webkitURL||e,d=u.createObjectURL,f=u.revokeObjectURL,p=u,h=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=o.fake=!0;c--;)s.prototype[l[c]]=c+1;return u.createObjectURL||(p=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),p.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof r?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(u,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&f&&f.call(u,e)},i.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var i="",o=new v(e),l=0,c=o.length;l<c;l++)i+=String.fromCharCode(o[l]);n.push(i)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var u=new a;n.push(u.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},i.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},i.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var i=arguments.length;return i<3&&(n=null),new r(this.data.slice(e,i>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var r=t?t.type||"":"",i=new n;if(e)for(var o=0,a=e.length;o<a;o++)Uint8Array&&e[o]instanceof Uint8Array?i.append(e[o].buffer):i.append(e[o]);var s=i.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var r=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=r(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},a=e.webkitRequestFileSystem,s=e.requestFileSystem||a||e.mozRequestFileSystem,l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=0,d=500,f=function(t){var r=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?r():setTimeout(r,d)},p=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(o){l(o)}}},h=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},m=function(t,l){t=h(t);var d,m,g,v=this,b=t.type,y=!1,E=function(){p(v,"writestart progress write writeend".split(" "))},w=function(){if(!y&&d||(d=n().createObjectURL(t)),m)m.location.href=d;else{var r=e.open(d,"_blank");void 0==r&&"undefined"!=typeof safari&&(e.location.href=d)}v.readyState=v.DONE,E(),f(d)},C=function(e){return function(){if(v.readyState!==v.DONE)return e.apply(this,arguments)}},T={create:!0,exclusive:!1};return v.readyState=v.INIT,l||(l="download"),i?(d=n().createObjectURL(t),r.href=d,r.download=l,o(r),v.readyState=v.DONE,E(),void f(d)):(e.chrome&&b&&b!==c&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,c),y=!0),a&&"download"!==l&&(l+=".download"),(b===c||a)&&(m=e),s?(u+=t.size,void s(e.TEMPORARY,u,C(function(e){e.root.getDirectory("saved",T,C(function(e){var n=function(){e.getFile(l,T,C(function(e){e.createWriter(C(function(n){n.onwriteend=function(t){m.location.href=e.toURL(),v.readyState=v.DONE,p(v,"writeend",t),f(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=v["on"+e]}),n.write(t),v.abort=function(){n.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),w)}),w)};e.getFile(l,{create:!1},C(function(e){e.remove(),n()}),C(function(e){e.code===e.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},g=m.prototype,v=function(e,t){return new m(e,t)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t){return navigator.msSaveOrOpenBlob(h(e),t)}:(g.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports="ngFileSaver",angular.module("ngFileSaver",[]).factory("FileSaver",["Blob","SaveAs","FileSaverUtils",n(1)]).factory("FileSaverUtils",[n(2)]).factory("Blob",["$window",n(3)]).factory("SaveAs",[n(5)])},function(e,t){"use strict";e.exports=function(e,t,n){function r(e,r,i){try{t(e,r,i)}catch(o){n.handleErrors(o.message)}}return{saveAs:function(e,t,i){return n.isBlobInstance(e)||n.handleErrors("Data argument should be a blob instance"),n.isString(t)||n.handleErrors("Filename argument should be a string"),r(e,t,i)}}}},function(e,t){"use strict";e.exports=function(){return{handleErrors:function(e){throw new Error(e)},isString:function(e){return"string"==typeof e||e instanceof String},isUndefined:function(e){return"undefined"==typeof e},isBlobInstance:function(e){return e instanceof Blob}}}},function(e,t,n){"use strict";n(4),e.exports=function(e){return e.Blob}},function(e,t){!function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},i=n.prototype,o=r.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=e.URL||e.webkitURL||e,d=u.createObjectURL,f=u.revokeObjectURL,p=u,h=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=o.fake=!0;c--;)s.prototype[l[c]]=c+1;return u.createObjectURL||(p=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),p.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof r?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(u,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&f&&f.call(u,e)},i.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var i="",o=new v(e),l=0,c=o.length;l<c;l++)i+=String.fromCharCode(o[l]);n.push(i)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var u=new a;n.push(u.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},i.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},i.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var i=arguments.length;return i<3&&(n=null),new r(this.data.slice(e,i>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var r=t?t.type||"":"",i=new n;if(e)for(var o=0,a=e.length;o<a;o++)Uint8Array&&e[o]instanceof Uint8Array?i.append(e[o].buffer):i.append(e[o]);var s=i.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var r=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=r(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(e,t,n){"use strict";e.exports=function(){return n(6).saveAs||function(){}}},function(e,t,n){var r,i,o=o||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement),s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,u)},f=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(o){l(o)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,l,u){u||(t=p(t));var h,m=this,g=t.type,v=g===c,b=function(){f(m,"writestart progress write writeend".split(" "))},y=function(){if((s||v&&a)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,m.readyState=m.DONE,b()},r.readAsDataURL(t),void(m.readyState=m.INIT)}if(h||(h=n().createObjectURL(t)),v)e.location.href=h;else{var i=e.open(h,"_blank");i||(e.location.href=h)}m.readyState=m.DONE,b(),d(h)};return m.readyState=m.INIT,i?(h=n().createObjectURL(t),void setTimeout(function(){r.href=h,r.download=l,o(r),b(),d(h),m.readyState=m.DONE})):void y()},m=h.prototype,g=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=o:null!==n(7)&&null!==n(8)&&(r=[],i=function(){return o}.apply(t,r),!(void 0!==i&&(e.exports=i)))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})}])}),function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,defaultCollapsed:!1,appendChildOnHover:!0})}(),
function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,t){this.scope=e,e.$element=t,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(e,t){function n(e){if(!e)return 0;var t,r,i,o=0,a=e.childNodes();if(!a||0===a.length)return 0;for(i=a.length-1;i>=0;i--)t=a[i],r=1+n(t),o=Math.max(o,r);return o}this.scope=e,e.$element=t,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$allowNodeDrop=!1,e.collapsed=!1,e.expandOnHover=!1,e.init=function(n){var r=n[0];e.$treeScope=n[1]?n[1].scope:null,e.$parentNodeScope=r.scope.$nodeScope,e.$modelValue=r.scope.$modelValue[e.$index],e.$parentNodesScope=r.scope,r.scope.initSubNode(e),t.on("$destroy",function(){r.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(t){return e.$parentNodesScope==t.$parentNodesScope},e.isChild=function(t){var n=e.childNodes();return n&&n.indexOf(t)>-1},e.prev=function(){var t=e.index();return t>0?e.siblings()[t-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(t,n){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(t,n)},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed,e.$treeScope.$callbacks.toggle(e.collapsed,e)},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var t=e.$parentNodeScope;return t?t.depth()+1:1},e.maxSubDepth=function(){return e.$childNodesScope?n(e.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function(e,t){this.scope=e,e.$element=t,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(t){return t.$modelValue?void(e.$nodesMap[t.$modelValue.$$hashKey]=t):null},e.destroySubNode=function(t){return t.$modelValue?void(e.$nodesMap[t.$modelValue.$$hashKey]=null):null},e.accept=function(t,n){return e.$treeScope.$callbacks.accept(t,e,n)},e.beforeDrag=function(t){return e.$treeScope.$callbacks.beforeDrag(t)},e.isParent=function(t){return t.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},e.removeNode=function(t){var n=e.$modelValue.indexOf(t.$modelValue);return n>-1?(e.safeApply(function(){e.$modelValue.splice(n,1)[0]}),e.$treeScope.$callbacks.removed(t)):null},e.insertNode=function(t,n){e.safeApply(function(){e.$modelValue.splice(t,0,n)})},e.childNodes=function(){var t,n=[];if(e.$modelValue)for(t=0;t<e.$modelValue.length;t++)n.push(e.$nodesMap[e.$modelValue[t].$$hashKey]);return n},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(t){var n=e.maxDepth||e.$treeScope.maxDepth;return n>0&&e.depth()+t.maxSubDepth()+1>n}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(e,t){this.scope=e,e.$element=t,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceholderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(t){e.$nodesScope.$element.append(t),e.$emptyElm.remove()},this.resetEmptyElement=function(){e.$nodesScope.$modelValue&&0!==e.$nodesScope.$modelValue.length||!e.emptyPlaceholderEnabled?e.$emptyElm.remove():t.append(e.$emptyElm)},e.resetEmptyElement=this.resetEmptyElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,t){return{restrict:"A",scope:!0,controller:"TreeController",link:function(n,r,i,o){var a,s,l,c={accept:null,beforeDrag:null},u={};angular.extend(u,e),u.treeClass&&r.addClass(u.treeClass),"table"===r.prop("tagName").toLowerCase()?(n.$emptyElm=angular.element(t.document.createElement("tr")),s=r.find("tr"),l=s.length>0?angular.element(s).children().length:1e6,a=angular.element(t.document.createElement("td")).attr("colspan",l),n.$emptyElm.append(a)):n.$emptyElm=angular.element(t.document.createElement("div")),u.emptyTreeClass&&n.$emptyElm.addClass(u.emptyTreeClass),n.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&o.resetEmptyElement()},!0),n.$watch(i.dragEnabled,function(e){"boolean"==typeof e&&(n.dragEnabled=e)}),n.$watch(i.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(n.emptyPlaceholderEnabled=e,o.resetEmptyElement())}),n.$watch(i.nodropEnabled,function(e){"boolean"==typeof e&&(n.nodropEnabled=e)}),n.$watch(i.cloneEnabled,function(e){"boolean"==typeof e&&(n.cloneEnabled=e)}),n.$watch(i.maxDepth,function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(i.dragDelay,function(e){"number"==typeof e&&(n.dragDelay=e)}),c.accept=function(e,t,n){return!(t.nodropEnabled||t.$treeScope.nodropEnabled||t.outOfDepth(e))},c.beforeDrag=function(e){return!0},c.expandTimeoutStart=function(){},c.expandTimeoutCancel=function(){},c.expandTimeoutEnd=function(){},c.removed=function(e){},c.dropped=function(e){},c.dragStart=function(e){},c.dragMove=function(e){},c.dragStop=function(e){},c.beforeDrop=function(e){},c.toggle=function(e,t){},n.$watch(i.uiTree,function(e,t){angular.forEach(e,function(e,t){c[t]&&"function"==typeof e&&(c[t]=e)}),n.$callbacks=c},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(t,n,r,i){var o={};angular.extend(o,e),o.handleClass&&n.addClass(o.handleClass),t!=i.scope&&(t.$nodeScope=i.scope,i.scope.$handleScope=t)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(e,t,n,r,i,o){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(a,s,l,c){var u,d,f,p,h,m,g,v,b,y,E,w,C,T,$,S,x,A,_,k,O,R,N,D,I,L,F,M,P={},B="ontouchstart"in window,U=null,j=document.body,H=document.documentElement;angular.extend(P,e),P.nodeClass&&s.addClass(P.nodeClass),a.init(c),a.collapsed=!!t.getNodeAttribute(a,"collapsed")||e.defaultCollapsed,a.expandOnHover=!!t.getNodeAttribute(a,"expandOnHover"),a.scrollContainer=t.getNodeAttribute(a,"scrollContainer")||l.scrollContainer||null,a.sourceOnly=a.nodropEnabled||a.$treeScope.nodropEnabled,a.$watch(l.collapsed,function(e){"boolean"==typeof e&&(a.collapsed=e)}),a.$watch("collapsed",function(e){t.setNodeAttribute(a,"collapsed",e),l.$set("collapsed",e)}),a.$watch(l.expandOnHover,function(e){"boolean"!=typeof e&&"number"!=typeof e||(a.expandOnHover=e)}),a.$watch("expandOnHover",function(e){t.setNodeAttribute(a,"expandOnHover",e),l.$set("expandOnHover",e)}),l.$observe("scrollContainer",function(e){"string"==typeof e&&(a.scrollContainer=e)}),a.$watch("scrollContainer",function(e){t.setNodeAttribute(a,"scrollContainer",e),l.$set("scrollContainer",e),g=document.querySelector(e)}),a.$on("angular-ui-tree:collapse-all",function(){a.collapsed=!0}),a.$on("angular-ui-tree:expand-all",function(){a.collapsed=!1}),w=function(e){if((B||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var i,o,l,c,g,v,w,C,T,$=angular.element(e.target);if(i=t.treeNodeHandlerContainerOfElement($),i&&($=angular.element(i)),o=s.clone(),C=t.elementIsTreeNode($),T=t.elementIsTreeNodeHandle($),(C||T)&&!(C&&t.elementContainsTreeNodeHandler($)||(l=$.prop("tagName").toLowerCase(),"input"==l||"textarea"==l||"button"==l||"select"==l))){for(L=angular.element(e.target);L&&L[0]&&L[0]!==s&&!F;){if(L[0].attributes&&(F=L[0].attributes["ui-tree"]),t.nodrag(L))return;L=L.parent()}a.beforeDrag(a)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),g=t.eventObj(e),u=!0,d=t.dragInfo(a),M=d.source.$treeScope.$id,c=s.prop("tagName"),"tr"===c.toLowerCase()?(p=angular.element(n.document.createElement(c)),v=angular.element(n.document.createElement("td")).addClass(P.placeholderClass).attr("colspan",s[0].children.length),p.append(v)):p=angular.element(n.document.createElement(c)).addClass(P.placeholderClass),h=angular.element(n.document.createElement(c)),P.hiddenClass&&h.addClass(P.hiddenClass),f=t.positionStarted(g,s),p.css("height",t.height(s)+"px"),m=angular.element(n.document.createElement(a.$parentNodesScope.$element.prop("tagName"))).addClass(a.$parentNodesScope.$element.attr("class")).addClass(P.dragClass),m.css("width",t.width(s)+"px"),m.css("z-index",9999),w=(s[0].querySelector(".angular-ui-tree-handle")||s[0]).currentStyle,w&&(document.body.setAttribute("ui-tree-cursor",r.find("body").css("cursor")||""),r.find("body").css({cursor:w.cursor+"!important"})),a.sourceOnly&&p.css("display","none"),s.after(p),s.after(h),d.isClone()&&a.sourceOnly?m.append(o):m.append(s),r.find("body").append(m),m.css({left:g.pageX-f.offsetX+"px",top:g.pageY-f.offsetY+"px"}),b={placeholder:p,dragging:m},O(),a.$apply(function(){a.$treeScope.$callbacks.dragStart(d.eventArgs(b,f))}),y=Math.max(j.scrollHeight,j.offsetHeight,H.clientHeight,H.scrollHeight,H.offsetHeight),E=Math.max(j.scrollWidth,j.offsetWidth,H.clientWidth,H.scrollWidth,H.offsetWidth))}}},C=function(e){var r,o,s,l,c,h,w,C,T,$,S,x,A,_,k,O,R,N,L,F,B,j,H,K=t.eventObj(e);if(m){if(e.preventDefault(),n.getSelection?n.getSelection().removeAllRanges():n.document.selection&&n.document.selection.empty(),s=K.pageX-f.offsetX,l=K.pageY-f.offsetY,s<0&&(s=0),l<0&&(l=0),l+10>y&&(l=y-10),s+10>E&&(s=E-10),m.css({left:s+"px",top:l+"px"}),g?(w=g.getBoundingClientRect(),c=g.scrollTop,h=c+g.clientHeight,w.bottom<K.clientY&&h<g.scrollHeight&&(k=Math.min(g.scrollHeight-h,10),g.scrollTop+=k),w.top>K.clientY&&c>0&&(O=Math.min(c,10),g.scrollTop-=O)):(c=window.pageYOffset||n.document.documentElement.scrollTop,h=c+(window.innerHeight||n.document.clientHeight||n.document.clientHeight),h<K.pageY&&h<y&&(k=Math.min(y-h,10),window.scrollBy(0,k)),c>K.pageY&&(O=Math.min(c,10),window.scrollBy(0,-O))),t.positionMoved(e,f,u),u)return void(u=!1);if(T=K.pageX-(n.pageXOffset||n.document.body.scrollLeft||n.document.documentElement.scrollLeft)-(n.document.documentElement.clientLeft||0),$=K.pageY-(n.pageYOffset||n.document.body.scrollTop||n.document.documentElement.scrollTop)-(n.document.documentElement.clientTop||0),angular.isFunction(m.hide)?m.hide():(S=m[0].style.display,m[0].style.display="none"),n.document.elementFromPoint(T,$),A=angular.element(n.document.elementFromPoint(T,$)),I=t.treeNodeHandlerContainerOfElement(A),I&&(A=angular.element(I)),angular.isFunction(m.show)?m.show():m[0].style.display=S,D=!(t.elementIsTreeNodeHandle(A)||t.elementIsTreeNode(A)||t.elementIsTreeNodes(A)||t.elementIsTree(A)||t.elementIsPlaceholder(A)),D&&(p.remove(),U&&(U.resetEmptyElement(),U=null),d.resetParent()),t.elementIsTree(A)?x=A.controller("uiTree").scope:t.elementIsTreeNodeHandle(A)?x=A.controller("uiTreeHandle").scope:t.elementIsTreeNode(A)?x=A.controller("uiTreeNode").scope:t.elementIsTreeNodes(A)?x=A.controller("uiTreeNodes").scope:t.elementIsPlaceholder(A)?x=A.controller("uiTreeNodes").scope:A.controller("uiTreeNode")&&(x=A.controller("uiTreeNode").scope),L=x&&x.$treeScope&&x.$treeScope.$id&&x.$treeScope.$id===M,L&&f.dirAx)f.distX>0&&(r=d.prev(),r&&!r.collapsed&&r.accept(a,r.childNodesCount())&&(r.$childNodesScope.$element.append(p),d.moveTo(r.$childNodesScope,r.childNodes(),r.childNodesCount()))),f.distX<0&&(o=d.next(),o||(C=d.parentNode(),C&&C.$parentNodesScope.accept(a,C.index()+1)&&(C.$element.after(p),d.moveTo(C.$parentNodesScope,C.siblings(),C.index()+1))));else{if(_=!1,!x)return;if(!x.$treeScope||x.$parent.nodropEnabled||x.$treeScope.nodropEnabled||p.css("display",""),"uiTree"===x.$type&&x.dragEnabled&&(_=x.isEmpty()),"uiTreeHandle"===x.$type&&(x=x.$nodeScope),"uiTreeNode"!==x.$type&&!_)return void(P.appendChildOnHover&&(o=d.next(),!o&&v&&(C=d.parentNode(),C.$element.after(p),d.moveTo(C.$parentNodesScope,C.siblings(),C.index()+1),v=!1)));U&&p.parent()[0]!=U.$element[0]&&(U.resetEmptyElement(),U=null),_?(U=x,x.$nodesScope.accept(a,0)&&(x.place(p),d.moveTo(x.$nodesScope,x.$nodesScope.childNodes(),0))):x.dragEnabled()&&(angular.isDefined(a.expandTimeoutOn)&&a.expandTimeoutOn!==x.id&&(i.cancel(a.expandTimeout),delete a.expandTimeout,delete a.expandTimeoutOn,a.$callbacks.expandTimeoutCancel()),x.collapsed&&(a.expandOnHover===!0||angular.isNumber(a.expandOnHover)&&0===a.expandOnHover?x.collapsed=!1:a.expandOnHover!==!1&&angular.isNumber(a.expandOnHover)&&a.expandOnHover>0&&angular.isUndefined(a.expandTimeoutOn)&&(a.expandTimeoutOn=x.$id,a.$callbacks.expandTimeoutStart(),a.expandTimeout=i(function(){a.$callbacks.expandTimeoutEnd(),x.collapsed=!1},a.expandOnHover))),A=x.$element,R=t.offset(A),B=t.height(A),j=x.$childNodesScope?x.$childNodesScope.$element:null,H=j?t.height(j):0,B-=H,F=P.appendChildOnHover?.25*B:t.height(A)/2,N=K.pageY<R.top+F,x.$parentNodesScope.accept(a,x.index())?N?(A[0].parentNode.insertBefore(p[0],A[0]),d.moveTo(x.$parentNodesScope,x.siblings(),x.index())):P.appendChildOnHover&&x.accept(a,x.childNodesCount())?(x.$childNodesScope.$element.prepend(p),d.moveTo(x.$childNodesScope,x.childNodes(),0),v=!0):(A.after(p),d.moveTo(x.$parentNodesScope,x.siblings(),x.index()+1)):!N&&x.accept(a,x.childNodesCount())?(x.$childNodesScope.$element.append(p),d.moveTo(x.$childNodesScope,x.childNodes(),x.childNodesCount())):(D=!0,d.resetParent()))}a.$apply(function(){a.$treeScope.$callbacks.dragMove(d.eventArgs(b,f))})}},T=function(e){var t=d.eventArgs(b,f);e.preventDefault(),R(),i.cancel(a.expandTimeout),a.$treeScope.$apply(function(){o.when(a.$treeScope.$callbacks.beforeDrop(t)).then(function(e){e!==!1&&a.$$allowNodeDrop&&!D?(d.apply(),a.$treeScope.$callbacks.dropped(t)):k()})["catch"](function(){k()})["finally"](function(){h.replaceWith(a.$element),p.remove(),m&&(m.remove(),m=null),a.$treeScope.$callbacks.dragStop(t),a.$$allowNodeDrop=!1,d=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(r.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},$=function(e){a.dragEnabled()&&w(e)},S=function(e){C(e)},x=function(e){a.$$allowNodeDrop=!0,T(e)},A=function(e){T(e)},_=function(){var e;return{exec:function(t,n){n||(n=0),this.cancel(),e=i(t,n)},cancel:function(){i.cancel(e)}}}(),N=function(e){27===e.keyCode&&x(e)},k=function(){s.bind("touchstart mousedown",function(e){a.dragDelay>0?_.exec(function(){$(e)},a.dragDelay):$(e)}),s.bind("touchend touchcancel mouseup",function(){a.dragDelay>0&&_.cancel()})},k(),O=function(){angular.element(r).bind("touchend",x),angular.element(r).bind("touchcancel",x),angular.element(r).bind("touchmove",S),angular.element(r).bind("mouseup",x),angular.element(r).bind("mousemove",S),angular.element(r).bind("mouseleave",A),angular.element(r).bind("keydown",N)},R=function(){angular.element(r).unbind("touchend",x),angular.element(r).unbind("touchcancel",x),angular.element(r).unbind("touchmove",S),angular.element(r).unbind("mouseup",x),angular.element(r).unbind("mousemove",S),angular.element(r).unbind("mouseleave",A),angular.element(r).unbind("keydown",N)}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(t,n,r,i){var o={},a=i[0],s=i[1],l=i[2];angular.extend(o,e),o.nodesClass&&n.addClass(o.nodesClass),s?(s.scope.$childNodesScope=t,t.$nodeScope=s.scope):l.scope.$nodesScope=t,t.$treeScope=l.scope,a&&(a.$render=function(){t.$modelValue=a.$modelValue}),t.$watch(function(){return r.maxDepth},function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(function(){return r.nodropEnabled},function(e){"undefined"!=typeof e&&(t.nodropEnabled=!0)},!0)}}}])}(),function(){"use strict";function e(e,t){if(void 0===t)return null;for(var n=t.parentNode,r=1,i="function"==typeof n.setAttribute&&n.hasAttribute(e)?n:null;n&&"function"==typeof n.setAttribute&&!n.hasAttribute(e);){if(n=n.parentNode,i=n,n===document.documentElement){i=null;break}r++}return i}angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(t,n,r){return{nodesData:{},setNodeAttribute:function(e,t,n){if(!e.$modelValue)return null;var r=this.nodesData[e.$modelValue.$$hashKey];r||(r={},this.nodesData[e.$modelValue.$$hashKey]=r),r[t]=n},getNodeAttribute:function(e,t){if(!e.$modelValue)return null;var n=this.nodesData[e.$modelValue.$$hashKey];return n?n[t]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")&&"false"!==e.attr("data-nodrag")},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:e.$treeScope.cloneEnabled===!0?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,resetParent:function(){this.parent=e.$parentNodesScope},moveTo:function(e,t,n){this.parent=e,this.siblings=t.slice(0);var r=this.siblings.indexOf(this.source);r>-1&&(this.siblings.splice(r,1),this.source.index()<n&&n--),this.siblings.splice(n,0,this.source),this.index=n},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,t){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:t}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var r=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:r.top+(n.pageYOffset||t[0].body.scrollTop||t[0].documentElement.scrollTop),left:r.left+(n.pageXOffset||t[0].body.scrollLeft||t[0].documentElement.scrollLeft)}},positionStarted:function(e,t){var n={},r=e.pageX,i=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(r=e.originalEvent.touches[0].pageX,i=e.originalEvent.touches[0].pageY),n.offsetX=r-this.offset(t).left,n.offsetY=i-this.offset(t).top,n.startX=n.lastX=r,n.startY=n.lastY=i,n.nowX=n.nowY=n.distX=n.distY=n.dirAx=0,n.dirX=n.dirY=n.lastDirX=n.lastDirY=n.distAxX=n.distAxY=0,n},positionMoved:function(e,t,n){var r,i=e.pageX,o=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(i=e.originalEvent.touches[0].pageX,o=e.originalEvent.touches[0].pageY),t.lastX=t.nowX,t.lastY=t.nowY,t.nowX=i,t.nowY=o,t.distX=t.nowX-t.lastX,t.distY=t.nowY-t.lastY,t.lastDirX=t.dirX,t.lastDirY=t.dirY,t.dirX=0===t.distX?0:t.distX>0?1:-1,t.dirY=0===t.distY?0:t.distY>0?1:-1,r=Math.abs(t.distX)>Math.abs(t.distY)?1:0,n?(t.dirAx=r,void(t.moving=!0)):(t.dirAx!==r?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),0!==t.dirX&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),0!==t.dirY&&t.dirY!==t.lastDirY&&(t.distAxY=0)),void(t.dirAx=r))},elementIsTreeNode:function(e){return"undefined"!=typeof e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return"undefined"!=typeof e.attr("ui-tree-handle")},elementIsTree:function(e){return"undefined"!=typeof e.attr("ui-tree")},elementIsTreeNodes:function(e){return"undefined"!=typeof e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(r.placeholderClass)},elementContainsTreeNodeHandler:function(e){return e[0].querySelectorAll("[ui-tree-handle]").length>=1},treeNodeHandlerContainerOfElement:function(t){return e("ui-tree-handle",t[0])}}}])}(),function(e,t){"use strict";function n(){function n(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?l(i[n]):i[n]]=!0;return r}function r(t,n){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),b.innerHTML=t;var r=5;do{if(0===r)throw f("uinput","Failed to sanitize html because the input is unstable");r--,e.document.documentMode&&g(b),t=b.innerHTML,b.innerHTML=t}while(t!==b.innerHTML);for(var i=b.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),p(i.attributes));break;case 3:n.chars(i.textContent)}var o;if(!(o=i.firstChild)&&(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),o=i.nextSibling,!o))for(;null==o&&(i=i.parentNode,i!==b);)o=i.nextSibling,1===i.nodeType&&n.end(i.nodeName.toLowerCase());i=o}for(;i=b.firstChild;)b.removeChild(i)}function p(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function h(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(E,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=l(e),!n&&_[e]&&(n=e),n||k[e]!==!0||(r("<"),r(e),a(i,function(n,i){var o=l(i),a="img"===e&&"src"===o||"background"===o;D[o]!==!0||O[o]===!0&&!t(n,a)||(r(" "),r(i),r('="'),r(h(n)),r('"'))}),r(">"))},end:function(e){e=l(e),n||k[e]!==!0||w[e]===!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(h(e))}}}function g(t){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),r--,i--)}var s=t.firstChild;s&&g(s),s=t.nextSibling,s&&g(s)}var v=!1;this.$get=["$$sanitizeUri",function(e){return v&&o(k,A),function(t){var n=[];return u(t,d(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return s(e)?(v=e,this):v},i=t.bind,o=t.extend,a=t.forEach,s=t.isDefined,l=t.lowercase,c=t.noop,u=r,d=m;var b,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E=/([^#-~ |!])/g,w=n("area,br,col,hr,img,wbr"),C=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),T=n("rp,rt"),$=o({},T,C),S=o({},C,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),x=o({},T,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),_=n("script,style"),k=o({},w,S,x,$),O=n("background,cite,href,longdesc,src,xlink:href"),R=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),N=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),D=o({},O,N,R);!function(e){var t;if(!e.document||!e.document.implementation)throw f("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var n=t.documentElement||t.getDocumentElement(),r=n.getElementsByTagName("body");if(1===r.length)b=r[0];else{var i=t.createElement("html");b=t.createElement("body"),i.appendChild(b),t.appendChild(i)}}(e)}function r(e){var t=[],n=d(t,c);return n.chars(e),t.join("")}var i,o,a,s,l,c,u,d,f=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,o=t.$$minErr("linky"),a=t.isDefined,s=t.isFunction,l=t.isObject,c=t.isString;return function(t,u,d){function f(e){e&&y.push(r(e))}function p(e,t){var n,r=v(e);y.push("<a ");for(n in r)y.push(n+'="'+r[n]+'" ');!a(u)||"target"in r||y.push('target="',u,'" '),y.push('href="',e.replace(/"/g,"&quot;"),'">'),f(t),y.push("</a>")}if(null==t||""===t)return t;if(!c(t))throw o("notstring","Expected string but received: {0}",t);for(var h,m,g,v=s(d)?d:l(d)?function(){return d}:function(){return{}},b=t,y=[];h=b.match(n);)m=h[0],h[2]||h[4]||(m=(h[3]?"http://":"mailto:")+m),g=h.index,f(b.substr(0,g)),p(m,h[0].replace(i,"")),b=b.substring(g+h[0].length);return f(b),e(y.join(""))}}])}(window,window.angular),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return mr.apply(null,arguments)}function t(e){mr=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t;for(t in e)return!1;return!0}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,n,r){return vt(e,t,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(e){return null==e._pf&&(e._pf=d()),e._pf}function p(e){if(null==e._isValid){var t=f(e),n=vr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function h(e){var t=u(NaN);return null!=e?c(f(t),e):f(t).userInvalidated=!0,t}function m(e){return void 0===e}function g(e,t){var n,r,i;if(m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),m(t._i)||(e._i=t._i),m(t._f)||(e._f=t._f),m(t._l)||(e._l=t._l),m(t._strict)||(e._strict=t._strict),m(t._tzm)||(e._tzm=t._tzm),m(t._isUTC)||(e._isUTC=t._isUTC),m(t._offset)||(e._offset=t._offset),m(t._pf)||(e._pf=f(t)),m(t._locale)||(e._locale=t._locale),br.length>0)for(n in br)r=br[n],i=t[r],m(i)||(e[r]=i);return e}function v(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),yr===!1&&(yr=!0,e.updateOffset(this),yr=!1)}function b(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function E(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=y(t)),n}function w(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&E(e[r])!==E(t[r]))&&a++;return a+o}function C(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&void 0}function T(t,n){var r=!0;return c(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}C(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function $(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Er[t]||(C(n),Er[t]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function x(e){var t,n;for(n in e)t=e[n],S(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function A(e,t){var n,i=c({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},c(i[n],e[n]),c(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=c({},i[n]));return i}function _(e){null!=e&&this.set(e)}function k(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return S(r)?r.call(t,n):r}function O(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function R(){return this._invalidDate}function N(e){return this._ordinal.replace("%d",e)}function D(e,t,n,r){var i=this._relativeTime[n];return S(i)?i(e,t,n,r):i.replace(/%d/i,e)}function I(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)}function L(e,t){var n=e.toLowerCase();Or[n]=Or[n+"s"]=Or[t]=e}function F(e){return"string"==typeof e?Or[e]||Or[e.toLowerCase()]:void 0}function M(e){var t,n,r={};for(n in e)l(e,n)&&(t=F(n),t&&(r[t]=e[n]));return r}function P(e,t){Rr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:Rr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function U(t,n){return function(r){return null!=r?(H(this,t,r),e.updateOffset(this,n),this):j(this,t)}}function j(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function H(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n);
}function K(e){return e=F(e),S(this[e])?this[e]():this}function W(e,t){if("object"==typeof e){e=M(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=F(e),S(this[e]))return this[e](t);return this}function z(e,t,n){var r=""+Math.abs(e),i=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function q(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Lr[e]=i),t&&(Lr[t[0]]=function(){return z(i.apply(this,arguments),t[1],t[2])}),n&&(Lr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,r=e.match(Nr);for(t=0,n=r.length;t<n;t++)Lr[r[t]]?r[t]=Lr[r[t]]:r[t]=Y(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=r[i]instanceof Function?r[i].call(t,e):r[i];return o}}function G(e,t){return e.isValid()?(t=X(t,e.localeData()),Ir[t]=Ir[t]||V(t),Ir[t](e)):e.localeData().invalidDate()}function X(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Dr.lastIndex=0;r>=0&&Dr.test(e);)e=e.replace(Dr,n),Dr.lastIndex=0,r-=1;return e}function Q(e,t,n){Jr[e]=S(t)?t:function(e,r){return e&&n?n:t}}function Z(e,t){return l(Jr,e)?Jr[e](t._strict,t._locale):new RegExp(J(e))}function J(e){return ee(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function ee(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),o(t)&&(r=function(e,n){n[t]=E(e)}),n=0;n<e.length;n++)ei[e[n]]=r}function ne(e,t){te(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function re(e,t,n){null!=t&&l(ei,e)&&ei[e](t,n._a,n,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function oe(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||di).test(t)?"format":"standalone"][e.month()]:this._months}function ae(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[di.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function se(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=u([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(i=ui.call(this._shortMonthsParse,a),i!==-1?i:null):(i=ui.call(this._longMonthsParse,a),i!==-1?i:null):"MMM"===t?(i=ui.call(this._shortMonthsParse,a),i!==-1?i:(i=ui.call(this._longMonthsParse,a),i!==-1?i:null)):(i=ui.call(this._longMonthsParse,a),i!==-1?i:(i=ui.call(this._shortMonthsParse,a),i!==-1?i:null))}function le(e,t,n){var r,i,o;if(this._monthsParseExact)return se.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=u([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=E(t);else if(t=e.localeData().monthsParse(t),!o(t))return e;return n=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ue(t){return null!=t?(ce(this,t),e.updateOffset(this,!0),this):j(this,"Month")}function de(){return ie(this.year(),this.month())}function fe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||he.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=hi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||he.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=mi),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function he(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=u([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=ee(r[t]),i[t]=ee(i[t]);for(t=0;t<24;t++)o[t]=ee(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function me(e){return ge(e)?366:365}function ge(e){return e%4===0&&e%100!==0||e%400===0}function ve(){return ge(this.year())}function be(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function ye(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ee(e,t,n){var r=7+t-n,i=(7+ye(e,0,r).getUTCDay()-t)%7;return-i+r-1}function we(e,t,n,r,i){var o,a,s=(7+n-r)%7,l=Ee(e,r,i),c=1+7*(t-1)+s+l;return c<=0?(o=e-1,a=me(o)+c):c>me(e)?(o=e+1,a=c-me(e)):(o=e,a=c),{year:o,dayOfYear:a}}function Ce(e,t,n){var r,i,o=Ee(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,r=a+Te(i,t,n)):a>Te(e.year(),t,n)?(r=a-Te(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Te(e,t,n){var r=Ee(e,t,n),i=Ee(e+1,t,n);return(me(e)-r+i)/7}function $e(e){return Ce(e,this._week.dow,this._week.doy).week}function Se(){return this._week.dow}function xe(){return this._week.doy}function Ae(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function _e(e){var t=Ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ke(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Oe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Re(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Ne(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function De(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ie(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=u([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(i=ui.call(this._weekdaysParse,a),i!==-1?i:null):"ddd"===t?(i=ui.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=ui.call(this._minWeekdaysParse,a),i!==-1?i:null):"dddd"===t?(i=ui.call(this._weekdaysParse,a),i!==-1?i:(i=ui.call(this._shortWeekdaysParse,a),i!==-1?i:(i=ui.call(this._minWeekdaysParse,a),i!==-1?i:null))):"ddd"===t?(i=ui.call(this._shortWeekdaysParse,a),i!==-1?i:(i=ui.call(this._weekdaysParse,a),i!==-1?i:(i=ui.call(this._minWeekdaysParse,a),i!==-1?i:null))):(i=ui.call(this._minWeekdaysParse,a),i!==-1?i:(i=ui.call(this._weekdaysParse,a),i!==-1?i:(i=ui.call(this._shortWeekdaysParse,a),i!==-1?i:null)))}function Le(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Ie.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=u([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ke(e,this.localeData()),this.add(e-t,"d")):t}function Me(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Pe(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Oe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Be(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=wi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ue(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ci),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function je(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||He.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ti),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function He(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=u([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),l.push(o),c.push(r),c.push(i),c.push(o);for(a.sort(e),s.sort(e),l.sort(e),c.sort(e),t=0;t<7;t++)s[t]=ee(s[t]),l[t]=ee(l[t]),c[t]=ee(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ke(){return this.hours()%12||12}function We(){return this.hours()||24}function ze(e,t){q(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function qe(e,t){return t._meridiemParse}function Ye(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ve(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ge(e){return e?e.toLowerCase().replace("_","-"):e}function Xe(e){for(var t,n,r,i,o=0;o<e.length;){for(i=Ge(e[o]).split("-"),t=i.length,n=Ge(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=Qe(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&w(i,n,!0)>=t-1)break;t--}o++}return null}function Qe(e){var t=null;if(!_i[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=$i._abbr,require("./locale/"+e),Ze(t)}catch(n){}return _i[e]}function Ze(e,t){var n;return e&&(n=m(t)?tt(e):Je(e,t),n&&($i=n)),$i._abbr}function Je(e,t){if(null!==t){var n=Ai;if(t.abbr=e,null!=_i[e])$("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=_i[e]._config;else if(null!=t.parentLocale){if(null==_i[t.parentLocale])return ki[t.parentLocale]||(ki[t.parentLocale]=[]),ki[t.parentLocale].push({name:e,config:t}),null;n=_i[t.parentLocale]._config}return _i[e]=new _(A(n,t)),ki[e]&&ki[e].forEach(function(e){Je(e.name,e.config)}),Ze(e),_i[e]}return delete _i[e],null}function et(e,t){if(null!=t){var n,r=Ai;null!=_i[e]&&(r=_i[e]._config),t=A(r,t),n=new _(t),n.parentLocale=_i[e],_i[e]=n,Ze(e)}else null!=_i[e]&&(null!=_i[e].parentLocale?_i[e]=_i[e].parentLocale:null!=_i[e]&&delete _i[e]);return _i[e]}function tt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return $i;if(!n(e)){if(t=Qe(e))return t;e=[e]}return Xe(e)}function nt(){return Tr(_i)}function rt(e){var t,n=e._a;return n&&f(e).overflow===-2&&(t=n[ni]<0||n[ni]>11?ni:n[ri]<1||n[ri]>ie(n[ti],n[ni])?ri:n[ii]<0||n[ii]>24||24===n[ii]&&(0!==n[oi]||0!==n[ai]||0!==n[si])?ii:n[oi]<0||n[oi]>59?oi:n[ai]<0||n[ai]>59?ai:n[si]<0||n[si]>999?si:-1,f(e)._overflowDayOfYear&&(t<ti||t>ri)&&(t=ri),f(e)._overflowWeeks&&t===-1&&(t=li),f(e)._overflowWeekday&&t===-1&&(t=ci),f(e).overflow=t),e}function it(e){var t,n,r,i,o,a,s=e._i,l=Oi.exec(s)||Ri.exec(s);if(l){for(f(e).iso=!0,t=0,n=Di.length;t<n;t++)if(Di[t][1].exec(l[1])){i=Di[t][0],r=Di[t][2]!==!1;break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=Ii.length;t<n;t++)if(Ii[t][1].exec(l[3])){o=(l[2]||" ")+Ii[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!Ni.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),ut(e)}else e._isValid=!1}function ot(t){var n=Li.exec(t._i);return null!==n?void(t._d=new Date((+n[1]))):(it(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function at(e,t,n){return null!=e?e:null!=t?t:n}function st(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,r,i,o=[];if(!e._d){for(r=st(e),e._w&&null==e._a[ri]&&null==e._a[ni]&&ct(e),e._dayOfYear&&(i=at(e._a[ti],r[ti]),e._dayOfYear>me(i)&&(f(e)._overflowDayOfYear=!0),n=ye(i,0,e._dayOfYear),e._a[ni]=n.getUTCMonth(),e._a[ri]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ii]&&0===e._a[oi]&&0===e._a[ai]&&0===e._a[si]&&(e._nextDay=!0,e._a[ii]=0),e._d=(e._useUTC?ye:be).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ii]=24)}}function ct(e){var t,n,r,i,o,a,s,l;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,n=at(t.GG,e._a[ti],Ce(bt(),1,4).year),r=at(t.W,1),i=at(t.E,1),(i<1||i>7)&&(l=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var c=Ce(bt(),o,a);n=at(t.gg,e._a[ti],c.year),r=at(t.w,c.week),null!=t.d?(i=t.d,(i<0||i>6)&&(l=!0)):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o}r<1||r>Te(n,o,a)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=we(n,r,i,o,a),e._a[ti]=s.year,e._dayOfYear=s.dayOfYear)}function ut(t){if(t._f===e.ISO_8601)return void it(t);t._a=[],f(t).empty=!0;var n,r,i,o,a,s=""+t._i,l=s.length,c=0;for(i=X(t._f,t._locale).match(Nr)||[],n=0;n<i.length;n++)o=i[n],r=(s.match(Z(o,t))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&f(t).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),Lr[o]?(r?f(t).empty=!1:f(t).unusedTokens.push(o),re(o,r,t)):t._strict&&!r&&f(t).unusedTokens.push(o);f(t).charsLeftOver=l-c,s.length>0&&f(t).unusedInput.push(s),t._a[ii]<=12&&f(t).bigHour===!0&&t._a[ii]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[ii]=dt(t._locale,t._a[ii],t._meridiem),lt(t),rt(t)}function dt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ft(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],ut(t),p(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));c(e,n||t)}function pt(e){if(!e._d){var t=M(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function ht(e){var t=new v(rt(mt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function mt(e){var t=e._i,r=e._f;return e._locale=e._locale||tt(e._l),null===t||void 0===r&&""===t?h({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new v(rt(t)):(a(t)?e._d=t:n(r)?ft(e):r?ut(e):gt(e),p(e)||(e._d=null),e))}function gt(t){var r=t._i;void 0===r?t._d=new Date(e.now()):a(r)?t._d=new Date(r.valueOf()):"string"==typeof r?ot(t):n(r)?(t._a=s(r.slice(0),function(e){return parseInt(e,10)}),lt(t)):"object"==typeof r?pt(t):o(r)?t._d=new Date(r):e.createFromInputFallback(t)}function vt(e,t,o,a,s){var l={};return o!==!0&&o!==!1||(a=o,o=void 0),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=o,l._i=e,l._f=t,l._strict=a,ht(l)}function bt(e,t,n,r){return vt(e,t,n,r,!1)}function yt(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return bt();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function Et(){var e=[].slice.call(arguments,0);return yt("isBefore",e)}function wt(){var e=[].slice.call(arguments,0);return yt("isAfter",e)}function Ct(e){var t=M(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=tt(),this._bubble()}function Tt(e){return e instanceof Ct}function $t(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function St(e,t){q(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+z(~~(e/60),2)+t+z(~~e%60,2)})}function xt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Bi)||["-",0,0],o=+(60*i[1])+E(i[2]);return 0===o?0:"+"===i[0]?o:-o}function At(t,n){var r,i;return n._isUTC?(r=n.clone(),i=(b(t)||a(t)?t.valueOf():bt(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),e.updateOffset(r,!1),r):bt(t).local()}function _t(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function kt(t,n){var r,i=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(t=xt(Xr,t),null===t)return this}else Math.abs(t)<16&&(t=60*t);return!this._isUTC&&n&&(r=_t(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?zt(this,Ut(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:_t(this)}function Ot(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Rt(e){return this.utcOffset(0,e)}function Nt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_t(this),"m")),this}function Dt(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=xt(Gr,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function It(e){return!!this.isValid()&&(e=e?bt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Lt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ft(){if(!m(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),e=mt(e),e._a){var t=e._isUTC?u(e._a):bt(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Mt(){return!!this.isValid()&&!this._isUTC}function Pt(){return!!this.isValid()&&this._isUTC}function Bt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ut(e,t){var n,r,i,a=e,s=null;return Tt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(a={},t?a[t]=e:a.milliseconds=e):(s=Ui.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:E(s[ri])*n,h:E(s[ii])*n,m:E(s[oi])*n,s:E(s[ai])*n,ms:E($t(1e3*s[si]))*n}):(s=ji.exec(e))?(n="-"===s[1]?-1:1,a={y:jt(s[2],n),M:jt(s[3],n),w:jt(s[4],n),d:jt(s[5],n),h:jt(s[6],n),m:jt(s[7],n),s:jt(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=Kt(bt(a.from),bt(a.to)),a={},a.ms=i.milliseconds,a.M=i.months),r=new Ct(a),Tt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ht(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Kt(e,t){var n;return e.isValid()&&t.isValid()?(t=At(t,e),e.isBefore(t)?n=Ht(e,t):(n=Ht(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Wt(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||($(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Ut(n,r),zt(this,i,e),this}}function zt(t,n,r,i){var o=n._milliseconds,a=$t(n._days),s=$t(n._months);t.isValid()&&(i=null==i||i,o&&t._d.setTime(t._d.valueOf()+o*r),a&&H(t,"Date",j(t,"Date")+a*r),s&&ce(t,j(t,"Month")+s*r),i&&e.updateOffset(t,a||s))}function qt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Yt(t,n){var r=t||bt(),i=At(r,this).startOf("day"),o=e.calendarFormat(this,i)||"sameElse",a=n&&(S(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,bt(r)))}function Vt(){return new v(this)}function Gt(e,t){var n=b(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&(t=F(m(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Xt(e,t){var n=b(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&(t=F(m(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Qt(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Zt(e,t){var n,r=b(e)?e:bt(e);return!(!this.isValid()||!r.isValid())&&(t=F(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Jt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function en(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function tn(e,t,n){var r,i,o,a;return this.isValid()?(r=At(e,this),r.isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),t=F(t),"year"===t||"month"===t||"quarter"===t?(a=nn(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-r,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-i)/864e5:"week"===t?(o-i)/6048e5:o),n?a:y(a)):NaN):NaN}function nn(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(n=e.clone().add(i-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(i+1,"months"),r=(t-o)/(n-o)),-(i+r)||0}function rn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function on(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():G(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):G(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+r+i+o)}function sn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=G(this,t);return this.localeData().postformat(n)}function ln(e,t){return this.isValid()&&(b(e)&&e.isValid()||bt(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function cn(e){return this.from(bt(),e)}function un(e,t){return this.isValid()&&(b(e)&&e.isValid()||bt(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dn(e){return this.to(bt(),e)}function fn(e){var t;return void 0===e?this._locale._abbr:(t=tt(e),null!=t&&(this._locale=t),this)}function pn(){return this._locale}function hn(e){switch(e=F(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function mn(e){return e=F(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function gn(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function bn(){return new Date(this.valueOf())}function yn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function En(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wn(){return this.isValid()?this.toISOString():null}function Cn(){return p(this)}function Tn(){return c({},f(this))}function $n(){return f(this).overflow}function Sn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xn(e,t){q(0,[e,e.length],0,t)}function An(e){return Rn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function _n(e){return Rn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function kn(){return Te(this.year(),1,4)}function On(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function Rn(e,t,n,r,i){var o;return null==e?Ce(this,r,i).year:(o=Te(e,r,i),t>o&&(t=o),Nn.call(this,e,t,n,r,i))}function Nn(e,t,n,r,i){var o=we(e,t,n,r,i),a=ye(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Dn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function In(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Ln(e,t){t[si]=E(1e3*("0."+e))}function Fn(){return this._isUTC?"UTC":""}function Mn(){return this._isUTC?"Coordinated Universal Time":""}function Pn(e){return bt(1e3*e)}function Bn(){return bt.apply(null,arguments).parseZone()}function Un(e){return e}function jn(e,t,n,r){var i=tt(),o=u().set(r,t);return i[n](o,e)}function Hn(e,t,n){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return jn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=jn(e,r,n,"month");return i}function Kn(e,t,n,r){"boolean"==typeof e?(o(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,o(t)&&(n=t,t=void 0),t=t||"");var i=tt(),a=e?i._week.dow:0;if(null!=n)return jn(t,(n+a)%7,r,"day");var s,l=[];for(s=0;s<7;s++)l[s]=jn(t,(s+a)%7,r,"day");return l}function Wn(e,t){return Hn(e,t,"months")}function zn(e,t){return Hn(e,t,"monthsShort")}function qn(e,t,n){return Kn(e,t,n,"weekdays")}function Yn(e,t,n){return Kn(e,t,n,"weekdaysShort")}function Vn(e,t,n){return Kn(e,t,n,"weekdaysMin")}function Gn(){var e=this._data;return this._milliseconds=Zi(this._milliseconds),this._days=Zi(this._days),this._months=Zi(this._months),e.milliseconds=Zi(e.milliseconds),e.seconds=Zi(e.seconds),e.minutes=Zi(e.minutes),e.hours=Zi(e.hours),e.months=Zi(e.months),e.years=Zi(e.years),this}function Xn(e,t,n,r){var i=Ut(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Qn(e,t){return Xn(this,e,t,1)}function Zn(e,t){return Xn(this,e,t,-1)}function Jn(e){return e<0?Math.floor(e):Math.ceil(e)}function er(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Jn(nr(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=y(o/1e3),l.seconds=e%60,t=y(e/60),l.minutes=t%60,n=y(t/60),l.hours=n%24,a+=y(n/24),i=y(tr(a)),s+=i,a-=Jn(nr(i)),r=y(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function tr(e){return 4800*e/146097}function nr(e){return 146097*e/4800}function rr(e){var t,n,r=this._milliseconds;if(e=F(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+tr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(nr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function ir(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12)}function or(e){return function(){return this.as(e)}}function ar(e){return e=F(e),this[e+"s"]()}function sr(e){return function(){return this._data[e]}}function lr(){return y(this.days()/7)}function cr(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ur(e,t,n){var r=Ut(e).abs(),i=mo(r.as("s")),o=mo(r.as("m")),a=mo(r.as("h")),s=mo(r.as("d")),l=mo(r.as("M")),c=mo(r.as("y")),u=i<go.s&&["s",i]||o<=1&&["m"]||o<go.m&&["mm",o]||a<=1&&["h"]||a<go.h&&["hh",a]||s<=1&&["d"]||s<go.d&&["dd",s]||l<=1&&["M"]||l<go.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,cr.apply(null,u)}function dr(e){return void 0===e?mo:"function"==typeof e&&(mo=e,!0)}function fr(e,t){return void 0!==go[e]&&(void 0===t?go[e]:(go[e]=t,!0))}function pr(e){var t=this.localeData(),n=ur(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function hr(){var e,t,n,r=vo(this._milliseconds)/1e3,i=vo(this._days),o=vo(this._months);e=y(r/60),t=y(e/60),r%=60,e%=60,n=y(o/12),o%=12;var a=n,s=o,l=i,c=t,u=e,d=r,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var mr,gr;gr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var vr=gr,br=e.momentProperties=[],yr=!1,Er={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var wr;wr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var Cr,Tr=wr,$r={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Sr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},xr="Invalid date",Ar="%d",_r=/\d{1,2}/,kr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Or={},Rr={},Nr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Dr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ir={},Lr={},Fr=/\d/,Mr=/\d\d/,Pr=/\d{3}/,Br=/\d{4}/,Ur=/[+-]?\d{6}/,jr=/\d\d?/,Hr=/\d\d\d\d?/,Kr=/\d\d\d\d\d\d?/,Wr=/\d{1,3}/,zr=/\d{1,4}/,qr=/[+-]?\d{1,6}/,Yr=/\d+/,Vr=/[+-]?\d+/,Gr=/Z|[+-]\d\d:?\d\d/gi,Xr=/Z|[+-]\d\d(?::?\d\d)?/gi,Qr=/[+-]?\d+(\.\d{1,3})?/,Zr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jr={},ei={},ti=0,ni=1,ri=2,ii=3,oi=4,ai=5,si=6,li=7,ci=8;Cr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var ui=Cr;q("M",["MM",2],"Mo",function(){return this.month()+1}),q("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),q("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),
P("month",8),Q("M",jr),Q("MM",jr,Mr),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),te(["M","MM"],function(e,t){t[ni]=E(e)-1}),te(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ni]=i:f(n).invalidMonth=e});var di=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hi=Zr,mi=Zr;q("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),q(0,["YY",2],0,function(){return this.year()%100}),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),L("year","y"),P("year",1),Q("Y",Vr),Q("YY",jr,Mr),Q("YYYY",zr,Br),Q("YYYYY",qr,Ur),Q("YYYYYY",qr,Ur),te(["YYYYY","YYYYYY"],ti),te("YYYY",function(t,n){n[ti]=2===t.length?e.parseTwoDigitYear(t):E(t)}),te("YY",function(t,n){n[ti]=e.parseTwoDigitYear(t)}),te("Y",function(e,t){t[ti]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)};var gi=U("FullYear",!0);q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),P("week",5),P("isoWeek",5),Q("w",jr),Q("ww",jr,Mr),Q("W",jr),Q("WW",jr,Mr),ne(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=E(e)});var vi={dow:0,doy:6};q("d",0,"do","day"),q("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),q("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),q("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),P("day",11),P("weekday",11),P("isoWeekday",11),Q("d",jr),Q("e",jr),Q("E",jr),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),ne(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),ne(["d","e","E"],function(e,t,n,r){t[r]=E(e)});var bi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),yi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ei="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),wi=Zr,Ci=Zr,Ti=Zr;q("H",["HH",2],0,"hour"),q("h",["hh",2],0,Ke),q("k",["kk",2],0,We),q("hmm",0,0,function(){return""+Ke.apply(this)+z(this.minutes(),2)}),q("hmmss",0,0,function(){return""+Ke.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),q("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),q("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),ze("a",!0),ze("A",!1),L("hour","h"),P("hour",13),Q("a",qe),Q("A",qe),Q("H",jr),Q("h",jr),Q("HH",jr,Mr),Q("hh",jr,Mr),Q("hmm",Hr),Q("hmmss",Kr),Q("Hmm",Hr),Q("Hmmss",Kr),te(["H","HH"],ii),te(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),te(["h","hh"],function(e,t,n){t[ii]=E(e),f(n).bigHour=!0}),te("hmm",function(e,t,n){var r=e.length-2;t[ii]=E(e.substr(0,r)),t[oi]=E(e.substr(r)),f(n).bigHour=!0}),te("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ii]=E(e.substr(0,r)),t[oi]=E(e.substr(r,2)),t[ai]=E(e.substr(i)),f(n).bigHour=!0}),te("Hmm",function(e,t,n){var r=e.length-2;t[ii]=E(e.substr(0,r)),t[oi]=E(e.substr(r))}),te("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ii]=E(e.substr(0,r)),t[oi]=E(e.substr(r,2)),t[ai]=E(e.substr(i))});var $i,Si=/[ap]\.?m?\.?/i,xi=U("Hours",!0),Ai={calendar:$r,longDateFormat:Sr,invalidDate:xr,ordinal:Ar,ordinalParse:_r,relativeTime:kr,months:fi,monthsShort:pi,week:vi,weekdays:bi,weekdaysMin:Ei,weekdaysShort:yi,meridiemParse:Si},_i={},ki={},Oi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ri=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ni=/Z|[+-]\d\d(?::?\d\d)?/,Di=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ii=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Li=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=T("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Fi=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),Mi=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),Pi=function(){return Date.now?Date.now():+new Date};St("Z",":"),St("ZZ",""),Q("Z",Xr),Q("ZZ",Xr),te(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=xt(Xr,e)});var Bi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Ui=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ji=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ut.fn=Ct.prototype;var Hi=Wt(1,"add"),Ki=Wt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wi=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});q(0,["gg",2],0,function(){return this.weekYear()%100}),q(0,["GG",2],0,function(){return this.isoWeekYear()%100}),xn("gggg","weekYear"),xn("ggggg","weekYear"),xn("GGGG","isoWeekYear"),xn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),P("weekYear",1),P("isoWeekYear",1),Q("G",Vr),Q("g",Vr),Q("GG",jr,Mr),Q("gg",jr,Mr),Q("GGGG",zr,Br),Q("gggg",zr,Br),Q("GGGGG",qr,Ur),Q("ggggg",qr,Ur),ne(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=E(e)}),ne(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),q("Q",0,"Qo","quarter"),L("quarter","Q"),P("quarter",7),Q("Q",Fr),te("Q",function(e,t){t[ni]=3*(E(e)-1)}),q("D",["DD",2],"Do","date"),L("date","D"),P("date",9),Q("D",jr),Q("DD",jr,Mr),Q("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),te(["D","DD"],ri),te("Do",function(e,t){t[ri]=E(e.match(jr)[0],10)});var zi=U("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),P("dayOfYear",4),Q("DDD",Wr),Q("DDDD",Pr),te(["DDD","DDDD"],function(e,t,n){n._dayOfYear=E(e)}),q("m",["mm",2],0,"minute"),L("minute","m"),P("minute",14),Q("m",jr),Q("mm",jr,Mr),te(["m","mm"],oi);var qi=U("Minutes",!1);q("s",["ss",2],0,"second"),L("second","s"),P("second",15),Q("s",jr),Q("ss",jr,Mr),te(["s","ss"],ai);var Yi=U("Seconds",!1);q("S",0,0,function(){return~~(this.millisecond()/100)}),q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,function(){return 10*this.millisecond()}),q(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),q(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),q(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),q(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),q(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),P("millisecond",16),Q("S",Wr,Fr),Q("SS",Wr,Mr),Q("SSS",Wr,Pr);var Vi;for(Vi="SSSS";Vi.length<=9;Vi+="S")Q(Vi,Yr);for(Vi="S";Vi.length<=9;Vi+="S")te(Vi,Ln);var Gi=U("Milliseconds",!1);q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName");var Xi=v.prototype;Xi.add=Hi,Xi.calendar=Yt,Xi.clone=Vt,Xi.diff=tn,Xi.endOf=mn,Xi.format=sn,Xi.from=ln,Xi.fromNow=cn,Xi.to=un,Xi.toNow=dn,Xi.get=K,Xi.invalidAt=$n,Xi.isAfter=Gt,Xi.isBefore=Xt,Xi.isBetween=Qt,Xi.isSame=Zt,Xi.isSameOrAfter=Jt,Xi.isSameOrBefore=en,Xi.isValid=Cn,Xi.lang=Wi,Xi.locale=fn,Xi.localeData=pn,Xi.max=Mi,Xi.min=Fi,Xi.parsingFlags=Tn,Xi.set=W,Xi.startOf=hn,Xi.subtract=Ki,Xi.toArray=yn,Xi.toObject=En,Xi.toDate=bn,Xi.toISOString=on,Xi.inspect=an,Xi.toJSON=wn,Xi.toString=rn,Xi.unix=vn,Xi.valueOf=gn,Xi.creationData=Sn,Xi.year=gi,Xi.isLeapYear=ve,Xi.weekYear=An,Xi.isoWeekYear=_n,Xi.quarter=Xi.quarters=Dn,Xi.month=ue,Xi.daysInMonth=de,Xi.week=Xi.weeks=Ae,Xi.isoWeek=Xi.isoWeeks=_e,Xi.weeksInYear=On,Xi.isoWeeksInYear=kn,Xi.date=zi,Xi.day=Xi.days=Fe,Xi.weekday=Me,Xi.isoWeekday=Pe,Xi.dayOfYear=In,Xi.hour=Xi.hours=xi,Xi.minute=Xi.minutes=qi,Xi.second=Xi.seconds=Yi,Xi.millisecond=Xi.milliseconds=Gi,Xi.utcOffset=kt,Xi.utc=Rt,Xi.local=Nt,Xi.parseZone=Dt,Xi.hasAlignedHourOffset=It,Xi.isDST=Lt,Xi.isLocal=Mt,Xi.isUtcOffset=Pt,Xi.isUtc=Bt,Xi.isUTC=Bt,Xi.zoneAbbr=Fn,Xi.zoneName=Mn,Xi.dates=T("dates accessor is deprecated. Use date instead.",zi),Xi.months=T("months accessor is deprecated. Use month instead",ue),Xi.years=T("years accessor is deprecated. Use year instead",gi),Xi.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ot),Xi.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ft);var Qi=_.prototype;Qi.calendar=k,Qi.longDateFormat=O,Qi.invalidDate=R,Qi.ordinal=N,Qi.preparse=Un,Qi.postformat=Un,Qi.relativeTime=D,Qi.pastFuture=I,Qi.set=x,Qi.months=oe,Qi.monthsShort=ae,Qi.monthsParse=le,Qi.monthsRegex=pe,Qi.monthsShortRegex=fe,Qi.week=$e,Qi.firstDayOfYear=xe,Qi.firstDayOfWeek=Se,Qi.weekdays=Re,Qi.weekdaysMin=De,Qi.weekdaysShort=Ne,Qi.weekdaysParse=Le,Qi.weekdaysRegex=Be,Qi.weekdaysShortRegex=Ue,Qi.weekdaysMinRegex=je,Qi.isPM=Ye,Qi.meridiem=Ve,Ze("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===E(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=T("moment.lang is deprecated. Use moment.locale instead.",Ze),e.langData=T("moment.langData is deprecated. Use moment.localeData instead.",tt);var Zi=Math.abs,Ji=or("ms"),eo=or("s"),to=or("m"),no=or("h"),ro=or("d"),io=or("w"),oo=or("M"),ao=or("y"),so=sr("milliseconds"),lo=sr("seconds"),co=sr("minutes"),uo=sr("hours"),fo=sr("days"),po=sr("months"),ho=sr("years"),mo=Math.round,go={s:45,m:45,h:22,d:26,M:11},vo=Math.abs,bo=Ct.prototype;return bo.abs=Gn,bo.add=Qn,bo.subtract=Zn,bo.as=rr,bo.asMilliseconds=Ji,bo.asSeconds=eo,bo.asMinutes=to,bo.asHours=no,bo.asDays=ro,bo.asWeeks=io,bo.asMonths=oo,bo.asYears=ao,bo.valueOf=ir,bo._bubble=er,bo.get=ar,bo.milliseconds=so,bo.seconds=lo,bo.minutes=co,bo.hours=uo,bo.days=fo,bo.weeks=lr,bo.months=po,bo.years=ho,bo.humanize=pr,bo.toISOString=hr,bo.toString=hr,bo.toJSON=hr,bo.locale=fn,bo.localeData=pn,bo.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",hr),bo.lang=Wi,q("X",0,0,"unix"),q("x",0,0,"valueOf"),Q("x",Vr),Q("X",Qr),te("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),te("x",function(e,t,n){n._d=new Date(E(e))}),e.version="2.17.0",t(bt),e.fn=Xi,e.min=Et,e.max=wt,e.now=Pi,e.utc=u,e.unix=Pn,e.months=Wn,e.isDate=a,e.locale=Ze,e.invalid=h,e.duration=Ut,e.isMoment=b,e.weekdays=qn,e.parseZone=Bn,e.localeData=tt,e.isDuration=Tt,e.monthsShort=zn,e.weekdaysMin=Vn,e.defineLocale=Je,e.updateLocale=et,e.locales=nt,e.weekdaysShort=Yn,e.normalizeUnits=F,e.relativeTimeRounding=dr,e.relativeTimeThreshold=fr,e.calendarFormat=qt,e.prototype=Xi,e}),function(e){e.fn.CommandBar=function(){var t=function(e){var t='<li class="ms-ContextualMenu-item"><a class="ms-ContextualMenu-link"" href="#">';return t+=e,t+="</a></li>"},n=function(t,n,r){var i=[];return t.each(function(){var t=e(this),o=t.position().left+t.outerWidth()+n+10-r.position().left;i.push({jquery:t,rightOffset:o})}),i},r=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i].jquery,a=e[i].rightOffset;o.hasClass("ms-CommandBarItem-overflow")||(a+n>t?r.push(o):o.removeClass("is-hidden"))}return r},i=function(n,r,i){var o="";if(n.length>0){r.addClass("is-visible"),i.html("");for(var a=0;a<n.length;a++){var s=e(n[a]);s.addClass("is-hidden");var l=s.find(".ms-CommandBarItem-commandText").text();o+=t(l)}i.html(o)}else r.removeClass("is-visible")};return this.each(function(){var t,o,a=e(this),s=a.find(".ms-CommandBar-mainArea"),l=s.find(".ms-CommandBarItem").not(".ms-CommandBarItem-overflow"),c=a.find(".ms-CommandBarItem-overflow"),u=a.find(".ms-CommandBarItem-overflow").outerWidth(),d=a.find(".ms-CommandBar-overflowMenu"),f=a.find(".ms-CommandBarSearch"),p=!1;o=n(l,u,s),t=r(o,s.innerWidth(),u),i(t,c,d),e(window).width()<640&&e(".ms-CommandBarSearch-iconSearchWrapper").click(function(){e(this).closest(".ms-CommandBarSearch").addClass("is-active")}),e(window).resize(function(){var t;e(window).width()<640&&p===!1?(o=n(l,u,s),p=!0,e(".ms-CommandBarSearch-iconSearchWrapper").unbind(),e(".ms-CommandBarSearch-iconSearchWrapper").click(function(){e(this).closest(".ms-CommandBarSearch").addClass("is-active")})):e(window).width()>639&&p===!0&&(o=n(l,u,s),p=!1,e(".ms-CommandBarSearch").unbind()),t=r(o,s.innerWidth(),u),i(t,c,d)}),c.click(function(){d.toggleClass("is-open")}),c.focusout(function(){d.removeClass("is-open")}),f.find(".ms-CommandBarSearch-input").click(function(){e(this).closest(".ms-CommandBarSearch").addClass("is-active")}),f.find(".ms-CommandBarSearch-input").on("focus",function(){e(this).closest(".ms-CommandBarSearch").addClass("is-active")}),f.find(".ms-CommandBarSearch-iconClearWrapper").click(function(){var t=e(this).parent().find(".ms-CommandBarSearch-input");t.val(""),t.parent().removeClass("is-active")}),f.parent().find(".ms-CommandBarSearch-input").blur(function(){var t=e(this);t.val(""),t.parent().removeClass("is-active")})})}}(jQuery),function(e){function t(t){var i=t.find(".ms-DatePicker-monthComponents"),o=t.find(".ms-DatePicker-goToday"),a=t.find(".ms-DatePicker-monthPicker"),s=t.find(".ms-DatePicker-yearPicker"),l=t.find(".ms-DatePicker-wrap"),c=t.find(".ms-TextField-field").pickadate("picker");i.appendTo(l),o.appendTo(l),a.appendTo(l),s.appendTo(l),r(t),i.on("click",".js-prevMonth",function(e){e.preventDefault();var t=c.get("highlight").month-1;n(c,null,t,null)}),i.on("click",".js-nextMonth",function(e){e.preventDefault();var t=c.get("highlight").month+1;n(c,null,t,null)}),a.on("click",".js-prevYear",function(e){e.preventDefault();var t=c.get("highlight").year-1;n(c,t,null,null)}),a.on("click",".js-nextYear",function(e){e.preventDefault();var t=c.get("highlight").year+1;n(c,t,null,null)}),s.on("click",".js-prevDecade",function(e){e.preventDefault();var t=c.get("highlight").year-10;n(c,t,null,null)}),s.on("click",".js-nextDecade",function(e){e.preventDefault();var t=c.get("highlight").year+10;n(c,t,null,null)}),o.click(function(e){e.preventDefault();var n=new Date;c.set("select",[n.getFullYear(),n.getMonth(),n.getDate()]),t.removeClass("is-pickingMonths").removeClass("is-pickingYears")}),a.on("click",".js-changeDate",function(r){r.preventDefault();var i=e(this).attr("data-year"),o=e(this).attr("data-month"),a=e(this).attr("data-day");n(c,i,o,a),t.hasClass("is-pickingMonths")&&t.removeClass("is-pickingMonths")}),s.on("click",".js-changeDate",function(r){r.preventDefault();var i=e(this).attr("data-year"),o=e(this).attr("data-month"),a=e(this).attr("data-day");n(c,i,o,a),t.hasClass("is-pickingYears")&&t.removeClass("is-pickingYears")}),a.on("click",".js-showDayPicker",function(){t.removeClass("is-pickingMonths"),t.removeClass("is-pickingYears")}),i.on("click",".js-showMonthPicker",function(){t.toggleClass("is-pickingMonths")}),a.on("click",".js-showYearPicker",function(){t.toggleClass("is-pickingYears")})}function n(e,t,n,r){"undefined"!=typeof t&&null!==t||(t=e.get("highlight").year),"undefined"!=typeof n&&null!==n||(n=e.get("highlight").month),"undefined"!=typeof r&&null!==r||(r=e.get("highlight").date),e.set("highlight",[t,n,r])}function r(e){var t=e.find(".ms-DatePicker-monthPicker"),n=e.find(".ms-DatePicker-yearPicker"),r=e.find(".ms-TextField-field").pickadate("picker");t.find(".ms-DatePicker-currentYear").text(r.get("view").year),t.find(".ms-DatePicker-monthOption").removeClass("is-highlighted"),t.find('.ms-DatePicker-monthOption[data-month="'+r.get("highlight").month+'"]').addClass("is-highlighted"),n.find(".ms-DatePicker-currentDecade").remove(),n.find(".ms-DatePicker-optionGrid").remove();var i=r.get("highlight").year-11,o=i+" - "+(i+11),a='<div class="ms-DatePicker-currentDecade">'+o+"</div>";a+='<div class="ms-DatePicker-optionGrid">';for(var s=i;s<i+12;s++)a+='<span class="ms-DatePicker-yearOption js-changeDate" data-year="'+s+'">'+s+"</span>";a+="</div>",n.append(a),n.find(".ms-DatePicker-yearOption").removeClass("is-highlighted"),n.find('.ms-DatePicker-yearOption[data-year="'+r.get("highlight").year+'"]').addClass("is-highlighted")}function i(t){e("html, body").animate({scrollTop:t.offset().top},367)}e.fn.DatePicker=function(n){return this.each(function(){var o=e(this),a=o.find(".ms-TextField-field").pickadate(e.extend({weekdaysShort:["S","M","T","W","T","F","S"],today:"",clear:"",close:"",onStart:function(){t(o)},klass:{input:"ms-DatePicker-input",active:"ms-DatePicker-input--active",picker:"ms-DatePicker-picker",opened:"ms-DatePicker-picker--opened",focused:"ms-DatePicker-picker--focused",holder:"ms-DatePicker-holder",frame:"ms-DatePicker-frame",wrap:"ms-DatePicker-wrap",box:"ms-DatePicker-dayPicker",header:"ms-DatePicker-header",month:"ms-DatePicker-month",year:"ms-DatePicker-year",table:"ms-DatePicker-table",weekdays:"ms-DatePicker-weekday",day:"ms-DatePicker-day",disabled:"ms-DatePicker-day--disabled",selected:"ms-DatePicker-day--selected",highlighted:"ms-DatePicker-day--highlighted",now:"ms-DatePicker-day--today",infocus:"ms-DatePicker-day--infocus",outfocus:"ms-DatePicker-day--outfocus"}},n||{})),s=a.pickadate("picker");s.on({render:function(){r(o)},open:function(){i(o)}})})}}(jQuery),!function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(e){function t(o,a,s,u){function d(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",C.component.nodes(v.open),y.box),y.wrap),y.frame),y.holder)}function f(){E.data(a,C).addClass(y.input).val(E.data("value")?C.get("select",b.format):o.value).on("focus."+v.id+" click."+v.id,m),b.editable||E.on("keydown."+v.id,function(e){var t=e.keyCode,n=/^(8|46)$/.test(t);return 27==t?(C.close(),!1):void((32==t||n||!v.open&&C.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?C.clear().close():C.open()))}),i(o,{haspopup:!0,expanded:!1,readonly:!1,owns:o.id+"_root"+(C._hidden?" "+C._hidden.id:"")})}function p(){C.$root.on({focusin:function(e){C.$root.removeClass(y.focused),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=C.$root.children()[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(n).is(":input")||"OPTION"==n.nodeName||(t.preventDefault(),o.focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),n=t.data(),r=t.hasClass(y.navDisabled)||t.hasClass(y.disabled),i=document.activeElement;i=i&&(i.type||i.href)&&i,(r||i&&!e.contains(C.$root[0],i))&&o.focus(),!r&&n.nav?C.set("highlight",C.component.item.highlight,{nav:n.nav}):!r&&"pick"in n?C.set("select",n.pick).close(!0):n.clear?C.clear().close(!0):n.close&&C.close(!0)}),i(C.$root[0],"hidden",!0)}function h(){var t;b.hiddenName===!0?(t=o.name,o.name=""):(t=["string"==typeof b.hiddenPrefix?b.hiddenPrefix:"","string"==typeof b.hiddenSuffix?b.hiddenSuffix:"_submit"],t=t[0]+o.name+t[1]),C._hidden=e('<input type=hidden name="'+t+'"'+(E.data("value")||o.value?' value="'+C.get("select",b.formatSubmit)+'"':"")+">")[0],E.on("change."+v.id,function(){C._hidden.value=o.value?C.get("select",b.formatSubmit):""}).after(C._hidden)}function m(e){e.stopPropagation(),"focus"==e.type&&C.$root.addClass(y.focused),C.open()}if(!o)return t;var g=!1,v={id:o.id||"P"+Math.abs(~~(Math.random()*new Date))},b=s?e.extend(!0,{},s.defaults,u):u||{},y=e.extend({},t.klasses(),b.klass),E=e(o),w=function(){return this.start()},C=w.prototype={constructor:w,$node:E,start:function(){return v&&v.start?C:(v.methods={},v.start=!0,v.open=!1,v.type=o.type,o.autofocus=o==document.activeElement,o.readOnly=!b.editable,o.id=o.id||v.id,"text"!=o.type&&(o.type="text"),C.component=new s(C,b),C.$root=e(t._.node("div",d(),y.picker,'id="'+o.id+'_root"')),p(),b.formatSubmit&&h(),f(),b.container?e(b.container).append(C.$root):E.after(C.$root),C.on({start:C.component.onStart,render:C.component.onRender,stop:C.component.onStop,open:C.component.onOpen,close:C.component.onClose,set:C.component.onSet}).on({start:b.onStart,render:b.onRender,stop:b.onStop,open:b.onOpen,close:b.onClose,set:b.onSet}),g=n(C.$root.children()[0]),o.autofocus&&C.open(),C.trigger("start").trigger("render"))},render:function(e){return e?C.$root.html(d()):C.$root.find("."+y.box).html(C.component.nodes(v.open)),C.trigger("render")},stop:function(){return v.start?(C.close(),C._hidden&&C._hidden.parentNode.removeChild(C._hidden),C.$root.remove(),E.removeClass(y.input).removeData(a),setTimeout(function(){E.off("."+v.id)},0),o.type=v.type,o.readOnly=!1,C.trigger("stop"),v.methods={},v.start=!1,C):C},open:function(n){return v.open?C:(E.addClass(y.active),i(o,"expanded",!0),setTimeout(function(){C.$root.addClass(y.opened),i(C.$root[0],"hidden",!1)},0),n!==!1&&(v.open=!0,g&&c.css("overflow","hidden").css("padding-right","+="+r()),E.trigger("focus"),l.on("click."+v.id+" focusin."+v.id,function(e){var t=e.target;t!=o&&t!=document&&3!=e.which&&C.close(t===C.$root.children()[0])}).on("keydown."+v.id,function(n){var r=n.keyCode,i=C.component.key[r],a=n.target;27==r?C.close(!0):a!=o||!i&&13!=r?e.contains(C.$root[0],a)&&13==r&&(n.preventDefault(),a.click()):(n.preventDefault(),i?t._.trigger(C.component.key.go,C,[t._.trigger(i)]):C.$root.find("."+y.highlighted).hasClass(y.disabled)||C.set("select",C.component.item.highlight).close())})),C.trigger("open"))},close:function(e){return e&&(E.off("focus."+v.id).trigger("focus"),setTimeout(function(){E.on("focus."+v.id,m)},0)),E.removeClass(y.active),i(o,"expanded",!1),setTimeout(function(){C.$root.removeClass(y.opened+" "+y.focused),i(C.$root[0],"hidden",!0)},0),v.open?(v.open=!1,g&&c.css("overflow","").css("padding-right","-="+r()),l.off("."+v.id),C.trigger("close")):C},clear:function(e){return C.set("clear",null,e)},set:function(t,n,r){var i,o,a=e.isPlainObject(t),s=a?t:{};if(r=a&&e.isPlainObject(n)?n:r||{},t){a||(s[t]=n);for(i in s)o=s[i],i in C.component.item&&(void 0===o&&(o=null),C.component.set(i,o,r)),("select"==i||"clear"==i)&&E.val("clear"==i?"":C.get(i,b.format)).trigger("change");C.render()}return r.muted?C:C.trigger("set",s)},get:function(e,n){if(e=e||"value",null!=v[e])return v[e];if("value"==e)return o.value;if(e in C.component.item){if("string"==typeof n){var r=C.component.get(e);return r?t._.trigger(C.component.formats.toString,C.component,[n,r]):""}return C.component.get(e)}},on:function(t,n,r){var i,o,a=e.isPlainObject(t),s=a?t:{};if(t){a||(s[t]=n);for(i in s)o=s[i],r&&(i="_"+i),v.methods[i]=v.methods[i]||[],v.methods[i].push(o)}return C},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;namesCount>e;e+=1)t=n[e],t in v.methods&&delete v.methods[t];return C},trigger:function(e,n){var r=function(e){var r=v.methods[e];r&&r.map(function(e){t._.trigger(e,C,[n])})};return r("_"+e),r(e),C}};return new w}function n(e){var t,n="position";return e.currentStyle?t=e.currentStyle[n]:window.getComputedStyle&&(t=getComputedStyle(e)[n]),"fixed"==t}function r(){if(c.height()<=s.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=t[0].offsetWidth;t.css("overflow","scroll");var r=e('<div style="width:100%" />').appendTo(t),i=r[0].offsetWidth;return t.remove(),n-i}function i(t,n,r){if(e.isPlainObject(n))for(var i in n)o(t,i,n[i]);else o(t,n,r)}function o(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function a(t,n){e.isPlainObject(t)||(t={attribute:n}),n="";for(var r in t){var i=("role"==r?"":"aria-")+r,o=t[r];n+=null==o?"":i+'="'+t[r]+'"'}return n}var s=e(window),l=e(document),c=e(document.documentElement);return t.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var n,r="",i=t._.trigger(e.min,e);i<=t._.trigger(e.max,e,[i]);i+=e.i)n=t._.trigger(e.item,e,[i]),r+=t._.node(e.node,n[0],n[1],n[2]);return r},node:function(t,n,r,i){return n?(n=e.isArray(n)?n.join(""):n,r=r?' class="'+r+'"':"",i=i?" "+i:"","<"+t+r+i+">"+n+"</"+t+">"):""},lead:function(e){return(10>e?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getUTCDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1===0},ariaAttr:a},t.extend=function(n,r){e.fn[n]=function(i,o){var a=this.data(n);return"picker"==i?a:a&&"string"==typeof i?t._.trigger(a[i],a,[o]):this.each(function(){var o=e(this);o.data(n)||new t(this,n,r,i)})},e.fn[n].defaults=r.defaults},t}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function n(e,t){var n=this,r=e.$node[0],i=r.value,o=e.$node.data("value"),a=o||i,s=o?t.formatSubmit:t.format,l=function(){return r.currentStyle?"rtl"==r.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),a?n.set("select",a,{format:s}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=n.item.highlight,r=new Date(Date.UTC(t.year,t.month,t.date+e));n.set("highlight",r,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var r="";n.disabled(n.get("now"))&&(r=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+r+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var r=7,i=6,o=e._;n.prototype.set=function(e,t,n){var r=this,i=r.item;return null===t?("clear"==e&&(e="select"),i[e]=t,r):(i["enable"==e?"disable":"flip"==e?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n)}).pop(),"select"==e?r.set("highlight",i.select,n):"highlight"==e?r.set("view",i.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,r){var i,a=this;return n=void 0===n?e:n,n==-1/0||1/0==n?i=n:t.isPlainObject(n)&&o.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(Date.UTC(n[0],n[1],n[2])),n=o.isDate(n)?n:a.create().obj):n=o.isInteger(n)?a.normalize(new Date(n),r):o.isDate(n)?a.normalize(n,r):a.now(e,n,r),{year:i||n.getUTCFullYear(),month:i||n.getUTCMonth(),date:i||n.getUTCDate(),day:i||n.getUTCDay(),obj:i||n,pick:i||n.getTime()}},n.prototype.createRange=function(e,n){var r=this,i=function(e){return e===!0||t.isArray(e)||o.isDate(e)?r.create(e):e};return o.isInteger(e)||(e=i(e)),o.isInteger(n)||(n=i(n)),o.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:o.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:i(e),to:i(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setUTCDate(t.getUTCDate()+n.rel),this.normalize(t,n)},n.prototype.navigate=function(e,n,r){var i,o,a,s,l=t.isArray(n),c=t.isPlainObject(n),u=this.item.view;if(l||c){for(c?(o=n.year,a=n.month,s=n.date):(o=+n[0],a=+n[1],s=+n[2]),r&&r.nav&&u&&u.month!==a&&(o=u.year,a=u.month),i=new Date(Date.UTC(o,a+(r&&r.nav?r.nav:0),1)),o=i.getUTCFullYear(),a=i.getUTCMonth();new Date(Date.UTC(o,a,s)).getUTCMonth()!==a;)s-=1;n=[o,a,s]}return n},n.prototype.normalize=function(e){return e.setUTCHours(0,0,0,0),e},n.prototype.measure=function(e,t){var n=this;return t?"string"==typeof t?t=n.parse(e,t):o.isInteger(t)&&(t=n.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},n.prototype.validate=function(e,n,r){var i,a,s,l,c=this,u=n,d=r&&r.interval?r.interval:1,f=-1===c.item.enable,p=c.item.min,h=c.item.max,m=f&&c.item.disable.filter(function(e){if(t.isArray(e)){var r=c.create(e).pick;r<n.pick?i=!0:r>n.pick&&(a=!0)}return o.isInteger(e)}).length;if((!r||!r.nav)&&(!f&&c.disabled(n)||f&&c.disabled(n)&&(m||i||a)||!f&&(n.pick<=p.pick||n.pick>=h.pick)))for(f&&!m&&(!a&&d>0||!i&&0>d)&&(d*=-1);c.disabled(n)&&(Math.abs(d)>1&&(n.month<u.month||n.month>u.month)&&(n=u,d=d>0?1:-1),n.pick<=p.pick?(s=!0,d=1,n=c.create([p.year,p.month,p.date+(n.pick===p.pick?0:-1)])):n.pick>=h.pick&&(l=!0,d=-1,n=c.create([h.year,h.month,h.date+(n.pick===h.pick?0:1)])),!s||!l);)n=c.create([n.year,n.month,n.date+d]);return n},n.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){return o.isInteger(r)?e.day===(n.settings.firstDay?r:r-1)%7:t.isArray(r)||o.isDate(r)?e.pick===n.create(r).pick:t.isPlainObject(r)?n.withinRange(r,e):void 0});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.parse=function(e,t,n){var r=this,i={};return t&&"string"==typeof t?(n&&n.format||(n=n||{},n.format=r.settings.format),r.formats.toArray(n.format).map(function(e){var n=r.formats[e],a=n?o.trigger(n,r,[t,i]):e.replace(/^!/,"").length;n&&(i[e]=t.substr(0,a)),t=t.substr(a)}),[i.yyyy||i.yy,+(i.mm||i.m)-1,i.dd||i.d]):t},n.prototype.formats=function(){function e(e,t,n){var r=e.match(/\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(r)+1),r.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?o.digits(e):t.date},dd:function(e,t){return e?2:o.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day];
},m:function(e,t){return e?o.digits(e):t.month+1},mm:function(e,t){return e?2:o.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return o.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(e,n){var r=this;return o.isInteger(e)&&o.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(o.isDate(e)||t.isArray(e))&&(o.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&(r.isDateExact(e.from,n.from)&&r.isDateExact(e.to,n.to))},n.prototype.isDateOverlap=function(e,n){var r=this,i=r.settings.firstDay?1:0;return o.isInteger(e)&&(o.isDate(n)||t.isArray(n))?(e=e%7+i,e===r.create(n).day+1):o.isInteger(n)&&(o.isDate(e)||t.isArray(e))?(n=n%7+i,n===r.create(e).day+1):!(!t.isPlainObject(e)||!t.isPlainObject(n))&&r.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var r=this,i=r.item.disable.slice(0);return"flip"==n?r.flipEnable():n===!1?(r.flipEnable(1),i=[]):n===!0?(r.flipEnable(-1),i=[]):n.map(function(e){for(var n,a=0;a<i.length;a+=1)if(r.isDateExact(e,i[a])){n=!0;break}n||(o.isInteger(e)||o.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&i.push(e)}),i},n.prototype.activate=function(e,n){var r=this,i=r.item.disable,a=i.length;return"flip"==n?r.flipEnable():n===!0?(r.flipEnable(1),i=[]):n===!1?(r.flipEnable(-1),i=[]):n.map(function(e){var n,s,l,c;for(l=0;a>l;l+=1){if(s=i[l],r.isDateExact(s,e)){n=i[l]=null,c=!0;break}if(r.isDateOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[3]||n.push("inverted")):o.isDate(e)&&(n=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),"inverted"]);break}}if(n)for(l=0;a>l;l+=1)if(r.isDateExact(i[l],e)){i[l]=null;break}if(c)for(l=0;a>l;l+=1)if(r.isDateOverlap(i[l],e)){i[l]=null;break}n&&i.push(n)}),i.filter(function(e){return null!=e})},n.prototype.nodes=function(e){var t=this,n=t.settings,a=t.item,s=a.now,l=a.select,c=a.highlight,u=a.view,d=a.disable,f=a.min,p=a.max,h=function(e,t){return n.firstDay&&(e.push(e.shift()),t.push(t.shift())),o.node("thead",o.node("tr",o.group({min:0,max:r-1,i:1,node:"th",item:function(r){return[e[r],n.klass.weekdays,'scope=col title="'+t[r]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysShort).slice(0),n.weekdaysFull.slice(0)),m=function(e){return o.node("div"," ",n.klass["nav"+(e?"Next":"Prev")]+(e&&u.year>=p.year&&u.month>=p.month||!e&&u.year<=f.year&&u.month<=f.month?" "+n.klass.navDisabled:""),"data-nav="+(e||-1)+" "+o.ariaAttr({role:"button",components:t.$node[0].id+"_table"})+' title="'+(e?n.labelMonthNext:n.labelMonthPrev)+'"')},g=function(){var r=n.showMonthsShort?n.monthsShort:n.monthsFull;return n.selectMonths?o.node("select",o.group({min:0,max:11,i:1,node:"option",item:function(e){return[r[e],0,"value="+e+(u.month==e?" selected":"")+(u.year==f.year&&e<f.month||u.year==p.year&&e>p.month?" disabled":"")]}}),n.klass.selectMonth,(e?"":"disabled")+" "+o.ariaAttr({components:t.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):o.node("div",r[u.month],n.klass.month)},v=function(){var r=u.year,i=n.selectYears===!0?5:~~(n.selectYears/2);if(i){var a=f.year,s=p.year,l=r-i,c=r+i;if(a>l&&(c+=a-l,l=a),c>s){var d=l-a,h=c-s;l-=d>h?h:d,c=s}return o.node("select",o.group({min:l,max:c,i:1,node:"option",item:function(e){return[e,0,"value="+e+(r==e?" selected":"")]}}),n.klass.selectYear,(e?"":"disabled")+" "+o.ariaAttr({components:t.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return o.node("div",r,n.klass.year)};return o.node("div",(n.selectYears?v()+g():g()+v())+m()+m(1),n.klass.header)+o.node("table",h+o.node("tbody",o.group({min:0,max:i-1,i:1,node:"tr",item:function(e){var i=n.firstDay&&0===t.create([u.year,u.month,1]).day?-7:0;return[o.group({min:r*e-u.day+i+1,max:function(){return this.min+r-1},i:1,node:"td",item:function(e){e=t.create([u.year,u.month,e+(n.firstDay?1:0)]);var r=l&&l.pick==e.pick,i=c&&c.pick==e.pick,a=d&&t.disabled(e)||e.pick<f.pick||e.pick>p.pick;return[o.node("div",e.date,function(t){return t.push(u.month==e.month?n.klass.infocus:n.klass.outfocus),s.pick==e.pick&&t.push(n.klass.now),r&&t.push(n.klass.selected),i&&t.push(n.klass.highlighted),a&&t.push(n.klass.disabled),t.join(" ")}([n.klass.day]),"data-pick="+e.pick+" "+o.ariaAttr({role:"gridcell",selected:!(!r||t.$node.val()!==o.trigger(t.formats.toString,t,[n.format,e]))||null,activedescendant:!!i||null,disabled:!!a||null})),"",o.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+t.$node[0].id+'_table" '+o.ariaAttr({role:"grid",components:t.$node[0].id,readonly:!0}))+o.node("div",o.node("button",n.today,n.klass.buttonToday,"type=button data-pick="+s.pick+(e&&!t.disabled(s)?"":" disabled")+" "+o.ariaAttr({components:t.$node[0].id}))+o.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+o.ariaAttr({components:t.$node[0].id}))+o.node("button",n.close,n.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+o.ariaAttr({components:t.$node[0].id})),n.klass.footer)},n.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",n)}),function(e){e.fn.Dialog=function(){return e(".js-DialogAction--open").each(function(){e(this).on("click",function(){var t=e(this).data("target");e(t).show()})}),this.each(function(){var t=this;e(t).hide(),e(t).find(".js-DialogAction--close").each(function(){e(this).on("click",function(){e(t).hide()})}),e(t).find(".ms-Dialog-action").on("click",function(){e(t).hide()})})}}(jQuery),function(e){e.fn.Dropdown=function(){return this.each(function(){function t(t){if(!n.hasClass("is-disabled")){n.find(".is-open").removeClass("is-open"),t.stopPropagation();var r=e(this).parents(".ms-Dropdown").width();e(this).next(".ms-Dropdown-items").css("width",r+"px"),n.toggleClass("is-open"),e(".ms-Dropdown").each(function(){e(this)[0]!==n[0]&&e(this).removeClass("is-open")}),e(document).bind("click.dropdown",function(){n.removeClass("is-open"),e(document).unbind("click.dropdown")})}}var n=e(this),r=n.children(".ms-Dropdown-select"),i=r.children("option"),o="",a="",s="";i.each(function(e,t){t.selected&&(o=t.text),a+='<li class="ms-Dropdown-item'+(t.disabled?' is-disabled"':'"')+">"+t.text+"</li>"}),s='<span class="ms-Dropdown-title">'+o+'</span><ul class="ms-Dropdown-items">'+a+"</ul>",n.append(s),n.on("click",".ms-Dropdown-title",function(e){t(e)}),n.on("keyup",function(i){var o=i.keyCode||i.which;if(e(this).hasClass("is-open")){if(e(this).hasClass("is-open")&&(38===o&&e(this).find(".ms-Dropdown-item.is-selected").prev().siblings().size()>0&&e(this).find(".ms-Dropdown-item.is-selected").removeClass("is-selected").prev().addClass("is-selected"),40===o&&e(this).find(".ms-Dropdown-item.is-selected").next().siblings().size()>0&&e(this).find(".ms-Dropdown-item.is-selected").removeClass("is-selected").next().addClass("is-selected"),13===o&&!n.hasClass("is-disabled"))){var a=e(this).find(".ms-Dropdown-item.is-selected").text();e(this).find(".ms-Dropdown-title").html(a),r.find("option").each(function(t,n){n.text===a?e(this).prop("selected",!0):e(this).prop("selected",!1)}),r.change(),e(this).removeClass("is-open")}}else 13!==o&&38!==o&&40!==o||(t(i),e(this).find(".ms-Dropdown-item").hasClass("is-selected")||e(this).find(".ms-Dropdown-item:first").addClass("is-selected"));27===o&&e(this).removeClass("is-open")}),n.on("click",".ms-Dropdown-item",function(){if(!n.hasClass("is-disabled")&&!e(this).hasClass("is-disabled")){e(this).siblings(".ms-Dropdown-item").removeClass("is-selected"),e(this).addClass("is-selected"),e(this).parents().siblings(".ms-Dropdown-title").html(e(this).text());var t=e(this).text();r.find("option").each(function(n,r){r.text===t?e(this).prop("selected",!0):e(this).prop("selected",!1)}),r.change()}})})}}(jQuery),function(e){e.fn.Facepile=function(){return this.each(function(){e(".ms-PeoplePicker").PeoplePicker(),e(".ms-Panel").Panel();var t=e(this),n=e(".ms-Facepile-members"),r=e(".ms-Facepile-members > .ms-Facepile-itemBtn").length,i=e(".ms-Facepile-panel.ms-Panel"),o=i.find(".ms-Panel-main"),a=e(".ms-PeoplePicker.ms-PeoplePicker--Facepile"),s=a.find(".ms-PeoplePicker-selectedPeople"),l=e(".ms-Facepile").find(".ms-PersonaCard"),c=function(){if(r+=1,e(".ms-Facepile-members").children(":gt(4)").hide(),r>5){e(".ms-Facepile-itemBtn--overflow").addClass("is-active");var t=r-5;e(".ms-Facepile-overflowText").text("+"+t)}};t.on("click",".js-addPerson",function(){o.css({display:"block"}),i.toggleClass("is-open").addClass("ms-Panel-animateIn").removeClass("ms-Facepile-panel--overflow ms-Panel--right").addClass("ms-Facepile-panel--addPerson"),l.removeClass("is-active").hide()}),i.on("click",".js-togglePanel",function(){i.toggleClass("is-open").addClass("ms-Panel-animateIn")}),t.on("click",".js-overflowPanel",function(){o.css({display:"block"}),i.toggleClass("is-open").addClass("ms-Panel-animateIn").removeClass("ms-Facepile-panel--addPerson").addClass("ms-Facepile-panel--overflow ms-Panel--right")}),e(document).ready(function(){e(".ms-Facepile-overflowText").text("+"+r)}),e(".ms-PeoplePicker-result").on("click",function(){var t=e(this),r=t.find(".ms-Persona-primaryText").html(),i=t.find(".ms-Persona-secondaryText").html(),o=function(){for(var e=r.split(" "),t="",n=0;n<e.length;n++)t+=e[n].charAt(0);return t.substring(0,2)}(),a=t.find(".ms-Persona-initials").attr("class"),s=function(){if(t.find(".ms-Persona-image").length){var e=t.find(".ms-Persona-image").attr("src");return'<img class="ms-Persona-image" src="'+e+'" alt="Persona image">'}return""}(),l='<button class="ms-Facepile-itemBtn ms-Facepile-itemBtn--member" title="'+r+'"><div class="ms-Persona ms-Persona--xs"><div class="ms-Persona-imageArea"><div class="'+a+'">'+o+"</div>"+s+'</div><div class="ms-Persona-presence"></div><div class="ms-Persona-details"><div class="ms-Persona-primaryText">'+r+'</div><div class="ms-Persona-secondaryText">'+i+"</div></div></div></button>";n.prepend(l),c()}),s.on("click",".js-selectedRemove",function(){var t=e(this).parent().find(".ms-Persona-primaryText").text(),i=n.find(".ms-Persona-primaryText:contains("+t+")").first();if(i)if(i.parent().closest(".ms-Facepile-itemBtn").remove(),r-=1,e(".ms-Facepile-members").children(":lt(5)").show(),r<=5)e(".ms-Facepile-itemBtn--overflow").removeClass("is-active");else{var o=r-5;e(".ms-Facepile-overflowText").text("+"+o)}}),n.on("click",".ms-Facepile-itemBtn",function(){var t=e(this).find(".ms-Persona-primaryText").html(),n=e(this).find(".ms-Persona-secondaryText").html(),r=function(){for(var e=t.split(" "),n="",r=0;r<e.length;r++)n+=e[r].charAt(0);return n.substring(0,2)}(),i=e(this).find(".ms-Persona-initials").attr("class"),o=e(this).find(".ms-Persona-image").attr("src"),a=e(".ms-PersonaCard"),s=a.find(".ms-Persona-primaryText"),c=a.find(".ms-Persona-secondaryText"),u=a.find(".ms-Persona-initials"),d=a.find(".ms-Persona-image");if(l.removeClass("is-active"),s.text(t),c.text(n),u.text(r),u.removeClass(),u.addClass(i),d.attr("src",o),setTimeout(function(){l.addClass("is-active")},100),e(window).width()>480){var f=e(this).offset().left,p=f-26;l.css({left:p})}else l.css({left:0,top:"auto",position:"fixed"})}),e(document).on("click",function(t){var n=e(".ms-Facepile-itemBtn--member");n.is(t.target)||0!==n.has(t.target).length||l.is(t.target)||0!==l.has(t.target).length?l.addClass("is-active"):(l.removeClass("is-active"),l.removeAttr("style"))})})}}(jQuery),function(e){e.fn.ListItem=function(){return this.each(function(){var t=e(this);t.on("click",".js-toggleSelection",function(){e(this).parents(".ms-ListItem").toggleClass("is-selected")})})}}(jQuery);var fabric=fabric||{};fabric.MessageBanner=function(e){this.container=e,this.init()},fabric.MessageBanner.prototype=function(){var e,t,n,r,i,o,a,s,l,c=700,u=88,d=35,f=480,p=function(){n=a.offsetWidth,window.innerWidth>=f?h():m()},h=function(){n-t>i&&i<c?(r="auto",o.className="ms-MessageBanner-expand",b()):(r=Math.min(n-t,c)+"px",o.className.indexOf("is-visible")===-1&&(o.className+=" is-visible")),e.style.width=r},m=function(){n-(d+l.offsetWidth)>i?(r="auto",b()):r=n-(d+l.offsetWidth)+"px",e.style.width=r},g=function(n){a=n.container,e=n.container.querySelector(".ms-MessageBanner-clipper"),o=n.container.querySelector(".ms-MessageBanner-expand"),s=n.container.querySelector(".ms-MessageBanner-action"),t=s.offsetWidth+u,l=n.container.querySelector(".ms-MessageBanner-close")},v=function(){var e=o.querySelector(".ms-Icon");a.className+=" is-expanded",e.className="ms-Icon ms-Icon--chevronsUp"},b=function(){var e=o.querySelector(".ms-Icon");a.className="ms-MessageBanner",e.className="ms-Icon ms-Icon--chevronsDown"},y=function(){a.className.indexOf("is-expanded")>-1?b():v()},E=function(){a.className.indexOf("hide")===-1&&(a.className+=" hide",setTimeout(function(){a.className="ms-MessageBanner is-hidden"},500))},w=function(){a.className="ms-MessageBanner"},C=function(){window.addEventListener("resize",p,!1),o.addEventListener("click",y,!1),l.addEventListener("click",E,!1)},T=function(){g(this),C(),n=a.offsetWidth,i=e.offsetWidth,p(null)};return{init:T,showBanner:w}}(),function(e){e.fn.NavBar=function(){return this.each(function(){var t=e(this);t.on("click",".js-openMenu",function(e){e.stopPropagation(),t.toggleClass("is-open")}),t.click(function(){t.hasClass("is-open")&&t.removeClass("is-open")}),t.on("click",".ms-NavBar-item:not(.is-disabled)",function(n){var r=t.find(".ms-NavBar-item.ms-NavBar-item--search .ms-TextField-field");n.stopPropagation(),0===e(this).children(".ms-NavBar-link").length&&n.preventDefault(),e(this).siblings(".ms-NavBar-item").removeClass("is-selected"),r.length>0&&0===r.val().length&&e(".ms-NavBar-item.ms-NavBar-item--search").removeClass("is-open").find(".ms-TextField-field").blur(),e(this).hasClass("ms-NavBar-item--hasMenu")?(e(this).siblings(".ms-NavBar-item--hasMenu").children(".ms-ContextualMenu:first").removeClass("is-open"),e(this).children(".ms-ContextualMenu:first").toggleClass("is-open"),e(this).toggleClass("is-selected")):(e(this).addClass("is-selected"),t.removeClass("is-open").find(".ms-ContextualMenu").removeClass("is-open")),e(this).hasClass("ms-NavBar-item--search")&&(e(this).addClass("is-open"),e(this).find(".ms-TextField-field").focus(),t.find(".ms-ContextualMenu:first").removeClass("is-open"))}),t.on("click",".ms-NavBar-item .ms-ContextualMenu",function(n){n.stopPropagation(),e(this).removeClass("is-open"),t.removeClass("is-open").find(".ms-NavBar-item--hasMenu").removeClass("is-selected")}),e(document).on("click","html",function(){var e=t.find(".ms-NavBar-item.ms-NavBar-item--search .ms-TextField-field");t.find(".ms-NavBar-item").removeClass("is-selected").find(".ms-ContextualMenu").removeClass("is-open"),e.length>0&&0===e.val().length&&t.find(".ms-NavBar-item.ms-NavBar-item--search").removeClass("is-open").find(".ms-TextField-field").blur()})})}}(jQuery),function(e){e.fn.Panel=function(){function t(e,t,r){for(var i=0;i<n.length;i++)n[i]||(t=t.toLowerCase()),e.addEventListener(n[i]+t,r,!1)}var n=["webkit","moz","MS","o",""];return this.each(function(){var n=e(this),r=n.find(".ms-Panel-main");e(".ms-PanelAction-close").on("click",function(){n.addClass("ms-Panel-animateOut")}),e(".ms-PanelAction-open").on("click",function(){n.addClass("is-open"),n.addClass("ms-Panel-animateIn")}),t(r[0],"AnimationEnd",function(e){e.animationName.indexOf("Out")>-1&&(n.removeClass("is-open"),n.removeClass("ms-Panel-animateIn ms-Panel-animateOut"))}),e(".panelVariant-item").on("click",function(){var t=e(this).find("span").attr("class");switch(e(".panelVariant-item").removeClass("is-selected"),e(this).addClass("is-selected"),t){case"is-default":e(".ms-Panel").removeClass().addClass("ms-Panel");break;case"is-left":e(".ms-Panel").removeClass().addClass("ms-Panel ms-Panel--left");break;case"is-lightDismiss":e(".ms-Panel").removeClass().addClass("ms-Panel ms-Panel--lightDismiss");break;case"is-md":e(".ms-Panel").removeClass().addClass("ms-Panel ms-Panel--md");break;case"is-lgFixed":e(".ms-Panel").removeClass().addClass("ms-Panel ms-Panel--lg ms-Panel--fixed");break;case"is-lg":e(".ms-Panel").removeClass().addClass("ms-Panel ms-Panel--lg");break;case"is-xl":e(".ms-Panel").removeClass().addClass("ms-Panel ms-Panel--xl")}})})}}(jQuery),function(e){e.fn.ContextualMenu=function(){return this.each(function(){var t=e(this);t.on("click",".ms-ContextualMenu-link:not(.is-disabled)",function(n){n.preventDefault(),t.hasClass("ms-ContextualMenu--multiselect")?e(this).hasClass("is-selected")?e(this).removeClass("is-selected"):e(this).addClass("is-selected"):(e(".ms-ContextualMenu-link").removeClass("is-selected").siblings(".ms-ContextualMenu").removeClass("is-open"),e(this).addClass("is-selected"),e(this).hasClass("ms-ContextualMenu-link--hasMenu")&&(e(this).siblings(".ms-ContextualMenu:first").addClass("is-open"),n.stopPropagation()))})})}}(jQuery),function(e){e.fn.PersonaCard=function(){return this.each(function(){var t=e(this);t.on("click",".ms-PersonaCard-action",function(){t.find(".ms-PersonaCard-action").removeClass("is-active"),e(this).addClass("is-active");var n=function(e,t){var n=e.className+"",r=t.charAt(0).toUpperCase()+t.slice(1),i="ms-PersonaCard-detail"+r;n!==i&&(e.classList.remove(n),e.classList.add(i))},r=e(this).attr("id");n(e(this).parent().next().find("#detailList")[0],r);var i=e(this).attr("id");t.find(".ms-PersonaCard-actionDetails").removeClass("is-active"),t.find("#"+i+".ms-PersonaCard-actionDetails").addClass("is-active")}),t.on("click",".ms-PersonaCard-detailExpander",function(){e(this).parent(".ms-PersonaCard-actionDetails").toggleClass("is-collapsed")})})}}(jQuery);var fabric=fabric||{};fabric.Breadcrumb=function(e){this.breadcrumb=e,this.breadcrumbList=e.querySelector(".ms-Breadcrumb-list"),this.listItems=e.querySelectorAll(".ms-Breadcrumb-listItem"),this.contextMenu=e.querySelector(".ms-ContextualMenu"),this.overflowButton=e.querySelector(".ms-Breadcrumb-overflowButton"),this.overflowMenu=e.querySelector(".ms-Breadcrumb-overflowMenu"),this.itemCollection=[],this.currentMaxItems=0,this.init()},fabric.Breadcrumb.prototype=function(){var e=639,t=function(){m.call(this),o.call(this),a.call(this,null)},n=function(e,t,n){this.itemCollection.push({text:e,link:t,tabIndex:n}),v.call(this)},r=function(e){for(var t=this.itemCollection.length;t--;)this.itemCollection[t].text===e&&this.itemCollection.splice(t,1);v.call(this)},i=function(e){this.itemCollection.splice(e,1),v.call(this)},o=function(){var e,t,n,r,i=this.listItems.length,o=0;for(o;o<i;o++)e=this.listItems[o].querySelector(".ms-Breadcrumb-itemLink"),t=e.textContent,n=e.getAttribute("href"),r=parseInt(e.getAttribute("tabindex"),10),this.itemCollection.push({text:t,link:n,tabIndex:r})},a=function(){p.call(this,null),s.call(this)},s=function(){var t=window.innerWidth>e?4:2;t!==this.currentMaxItems&&v.call(this),this.currentMaxItems=t},l=function(e){u.call(this,this.contextMenu);var t=this.itemCollection.length-e,n=this.itemCollection.slice(0,t),r=this.contextMenu;n.forEach(function(e){var t=document.createElement("li");t.className="ms-ContextualMenu-item",isNaN(e.tabIndex)||t.setAttribute("tabindex",e.tabIndex);var n=document.createElement("a");n.className="ms-ContextualMenu-link",null!==e.link&&n.setAttribute("href",e.link),n.textContent=e.text,t.appendChild(n),r.appendChild(t)})},c=function(e){u.call(this,this.breadcrumbList);var t=this.itemCollection.length-e;if(t=t<0?0:t,t>=0)for(t;t<this.itemCollection.length;t++){var n=document.createElement("li"),r=this.itemCollection[t],i=document.createElement("a"),o=document.createElement("i");n.className="ms-Breadcrumb-listItem",i.className="ms-Breadcrumb-itemLink",null!==r.link&&i.setAttribute("href",r.link),isNaN(r.tabIndex)||i.setAttribute("tabindex",r.tabIndex),i.textContent=r.text,o.className="ms-Breadcrumb-chevron ms-Icon ms-Icon--chevronRight",n.appendChild(i),n.appendChild(o),this.breadcrumbList.appendChild(n)}},u=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},d=function(e){this.overflowMenu.className.indexOf(" is-open")===-1&&(this.overflowMenu.className+=" is-open",g.call(this,e),this.overflowButton.focus())},f=function(e){13===e.keyCode&&d.call(this,e)},p=function(e){e&&e.target===this.overflowButton||h.call(this,this.overflowMenu," is-open")},h=function(e,t){var n=e.className.indexOf(t);n>-1&&(e.className=e.className.substring(0,n))},m=function(){window.addEventListener("resize",a.bind(this),!1),document.addEventListener("click",p.bind(this),!1),this.overflowButton.addEventListener("click",d.bind(this),!1),this.overflowButton.addEventListener("keypress",f.bind(this),!1),this.breadcrumbList.addEventListener("click",g.bind(this),!1)},g=function(e){e.target.blur()},v=function(){var t=window.innerWidth>e?4:2;this.itemCollection.length>t?this.breadcrumb.className+=" is-overflow":h.call(this,this.breadcrumb," is-overflow"),c.call(this,t),l.call(this,t)};return{init:t,addItem:n,removeItemByLabel:r,removeItemByPosition:i}}();var fabric=fabric||{};fabric.ProgressIndicator=function(e){this.container=e,this.cacheDOM()},fabric.ProgressIndicator.prototype=function(){var e,t,n,r,i,o,a=function(e){o.style.width=Math.round(t*e)+"px"},s=function(t){e=t;var n=e/r;this.setProgressPercent(n)},l=function(e){r=e},c=function(e){n.innerHTML=e},u=function(e){i.innerHTML=e},d=function(){n=this.container.querySelector(".ms-ProgressIndicator-itemName")||null,i=this.container.querySelector(".ms-ProgressIndicator-itemDescription")||null,o=this.container.querySelector(".ms-ProgressIndicator-progressBar"),t=this.container.querySelector(".ms-ProgressIndicator-itemProgress").offsetWidth};return{setProgressPercent:a,setName:c,setDescription:u,setProgress:s,setTotal:l,cacheDOM:d}}(),function(e){e.fn.Pivot=function(){return this.each(function(){var t=e(this);t.on("click",".ms-Pivot-link",function(t){t.preventDefault();var n=e(this).find(".ms-Pivot-ellipsis");0===n.length&&(e(this).siblings(".ms-Pivot-link").removeClass("is-selected"),e(this).addClass("is-selected"))})})}}(jQuery),function(e){e.fn.SearchBox=function(){return this.each(function(){var t=!1,n=e(this).find(".ms-SearchBox-field");n.on("focus",function(){e(this).siblings(".ms-SearchBox-label").hide(),e(this).parent(".ms-SearchBox").addClass("is-active")}),n.on("mouseover",function(){n.addClass("hovering")}),n.on("mouseout",function(){n.removeClass("hovering")}),e(this).find(".ms-SearchBox-closeButton").on("mousedown",function(){t=!0}),e(this).find(".ms-SearchBox-field").on("blur",function(){t&&(e(this).val(""),n.addClass("hovering"));var r=e(this).parent(".ms-SearchBox");setTimeout(function(){r.removeClass("is-active")},10),0===e(this).val().length&&e(this).siblings(".ms-SearchBox-label").show(),t=!1})})}}(jQuery);var fabric=fabric||{};fabric.Spinner=function(e){function t(){n(),f=setInterval(function(){for(var e=b.length;e--;)o(b[e])},y)}function n(){clearInterval(f)}function r(){d(),u(),c(),i(),t()}function i(){var e,t=0,n=1;for(E=1/h,t;t<h;t++){var r=b[t];e=E*n++,s(r.element,e)}}function o(e){var t=a(e.element)-E;t<=0&&(t=1),s(e.element,t)}function a(e){return parseFloat(window.getComputedStyle(e).getPropertyValue("opacity"))}function s(e,t){e.style.opacity=t}function l(){var e=document.createElement("div");return e.className="ms-Spinner-circle",e.style.width=e.style.height=w*m+"px",e}function c(){for(var e,t=0,n=w*m,r=2*Math.PI/h,i=h,o=.5*(w-n);i--;){var a=l(),s=Math.round(.5*w+o*Math.cos(t)-.5*a.clientWidth)-.5*n,c=Math.round(.5*w+o*Math.sin(t)-.5*a.clientHeight)-.5*n;p.appendChild(a),a.style.left=s+"px",a.style.top=c+"px",t+=r,e={element:a,j:i},b.push(e)}}function u(){p.className.indexOf("large")>-1&&(w=28,v=.179),m=v,h=8}function d(){g.className.indexOf("ms-Spinner")===-1?(p=document.createElement("div"),p.className="ms-Spinner",g.appendChild(p)):p=g}var f,p,h,m,g=e,v=.2,b=[],y=90,E=0,w=20;return r(),{start:t,stop:n}},function(e){e.fn.TextField=function(){return this.each(function(){e(this).hasClass("ms-TextField--placeholder")&&(e(this).on("click",function(){e(this).find(".ms-Label").hide()}),e(this).find(".ms-TextField-field").on("focus",function(){e(this).siblings(".ms-Label").hide()}),e(this).find(".ms-TextField-field").on("blur",function(){0===e(this).val().length&&e(this).siblings(".ms-Label").show()})),e(this).hasClass("ms-TextField--underlined")&&(e(this).find(".ms-TextField-field").on("focus",function(){e(this).parent(".ms-TextField--underlined").addClass("is-active")}),e(this).find(".ms-TextField-field").on("blur",function(){e(this).parent(".ms-TextField--underlined").removeClass("is-active")}))})}}(jQuery);var fabric=fabric||{};!function(e){function t(e){var t=e.find(".ms-PeoplePicker-searchBox"),n=t.position().left,r=t.outerWidth(),i=n+r,o=t.find(".ms-PeoplePicker-persona:last"),a=o.offset().left,s=o.outerWidth(),l=a+s,c=i-l-7;c<100&&(c="100%"),e.find(".ms-PeoplePicker-searchField").outerWidth(c)}e.fn.PeoplePicker=function(){return this.each(function(){function n(t){e("html, body").animate({scrollTop:i.offset().top},367),i.hasClass("is-active")&&i.removeClass("is-active"),i.hasClass("ms-PeoplePicker--Facepile")&&""===o.val()&&u.children(":gt(4)").hide(),i.hasClass("ms-PeoplePicker--Facepile")&&(l.addClass("ms-u-slideDownIn20"),setTimeout(function(){a.removeClass("ms-u-slideDownIn20"),l.removeClass("ms-u-slideDownIn20")},1e3)),d=!0,t.stopPropagation(),i.hasClass("ms-PeoplePicker--Facepile")||a.width(i.width()-2),i.addClass("is-active"),e(document).bind("click.peoplepicker",function(){i.removeClass("is-active"),i.hasClass("ms-PeoplePicker--Facepile")&&(i.removeClass("is-searching"),e(".ms-PeoplePicker-selected").show(),e(".ms-PeoplePicker-searchMore").removeClass("is-active"),o.val("")),e(document).unbind("click.peoplepicker"),d=!1})}var r,i=e(this),o=i.find(".ms-PeoplePicker-searchField"),a=i.find(".ms-PeoplePicker-results"),s=i.find(".ms-PeoplePicker-selected"),l=i.find(".ms-PeoplePicker-selectedPeople"),c=i.find(".ms-PeoplePicker-selectedCount"),u=i.find(".ms-PeoplePicker-peopleList"),d=!1,f=e(".ms-PeoplePicker").find(".ms-PersonaCard");i.on("focus",".ms-PeoplePicker-searchField",function(e){n(e)}),i.on("click",".ms-PeoplePicker-searchField",function(e){n(e)}),e(this).click(function(e){e.stopPropagation()}),a.on("click",".ms-PeoplePicker-result",function(){var n=e(this),r=n.find(".ms-Persona-primaryText").html(),a=n.find(".ms-Persona-secondaryText").html(),d=function(){for(var e=r.split(" "),t="",n=0;n<e.length;n++)t+=e[n].charAt(0);return t.substring(0,2)}(),f=n.find(".ms-Persona-initials").attr("class"),p=function(){if(n.find(".ms-Persona-image").length){var e=n.find(".ms-Persona-image").attr("src");return'<img class="ms-Persona-image" src="'+e+'" alt="Persona image">'}return""}(),h='<div class="ms-PeoplePicker-persona"><div class="ms-Persona ms-Persona--xs ms-Persona--square"><div class="ms-Persona-imageArea"><div class="'+f+'">'+d+"</div>"+p+'</div><div class="ms-Persona-presence"></div><div class="ms-Persona-details"><div class="ms-Persona-primaryText">'+r+'</div> </div></div><button class="ms-PeoplePicker-personaRemove"><i class="ms-Icon ms-Icon--x"></i> </button></div>',m='<li class="ms-PeoplePicker-selectedPerson"><div class="ms-Persona ms-Persona--sm"><div class="ms-Persona-imageArea"><div class="'+f+'">'+d+"</div>"+p+'</div><div class="ms-Persona-presence"></div><div class="ms-Persona-details"><div class="ms-Persona-primaryText">'+r+'</div><div class="ms-Persona-secondaryText">'+a+'</div></div></div><button class="ms-PeoplePicker-resultAction js-selectedRemove"><i class="ms-Icon ms-Icon--x"></i></button></li>';if(i.hasClass("ms-PeoplePicker--Facepile")||i.hasClass("ms-PeoplePicker--membersList")){s.hasClass("is-active")||s.addClass("is-active"),l.prepend(m),i.removeClass("is-active");var g=i.find(".ms-PeoplePicker-selectedPerson").length;c.html(g),u.children().show(),u.children(":gt(4)").hide(),e(".ms-PeoplePicker-searchMore").removeClass("is-active"),o.val("")}else o.before(h),i.removeClass("is-active"),t(i)}),i.on("click",".ms-PeoplePicker-personaRemove",function(){e(this).parents(".ms-PeoplePicker-persona").remove(),0===e(".ms-PeoplePicker-persona").length?i.find(".ms-PeoplePicker-searchField").outerWidth("100%"):t(i)}),a.on("click",".js-searchMore",function(){var t=e(this),n=t.find(".ms-PeoplePicker-searchMorePrimary"),a=n.html(),s=o.val();t.addClass("is-searching"),n.html("Searching for "+s),r?r.start():r=new fabric.Spinner(t.get(0)),i.hasClass("ms-PeoplePicker--Facepile")&&setTimeout(function(){u.children().show()},1500),setTimeout(function(){t.removeClass("is-searching"),n.html(a),r.stop()},1500)}),a.on("click",".js-resultRemove",function(t){t.stopPropagation(),e(this).parent(".ms-PeoplePicker-result").remove()}),a.on("click",".js-resultExpand",function(t){t.stopPropagation(),e(this).parent(".ms-PeoplePicker-result").toggleClass("is-expanded")}),l.on("click",".js-selectedRemove",function(t){t.stopPropagation(),e(this).parent(".ms-PeoplePicker-selectedPerson").remove();var n=i.find(".ms-PeoplePicker-selectedPerson").length;c.html(n),0===i.find(".ms-PeoplePicker-selectedPerson").length&&s.removeClass("is-active")});var p=function(t,n,r){return t.find(".ms-Persona-primaryText").filter(function(){return r?e(this).text().toLowerCase()===n:e(this).text().toLowerCase()!==n}).parents(".ms-PeoplePicker-peopleListItem")};i.on("keyup",".ms-PeoplePicker-searchField",function(t){var n=[],r=[],o=a.find(".ms-Persona-primaryText");i.addClass("is-searching"),s.hide(),u.children(":lt(5)").show(),e(".ms-PeoplePicker-searchMore").addClass("is-active"),o.each(function(){n.push(e(this).text())});for(var c=0;c<n.length;c++){var d,f=n[c].toLowerCase(),h=t.target.value.toLowerCase();f.indexOf(h)>-1?(d=n[c].toLowerCase(),r.push(n[c]),p(a,d,!0).show()):p(a,d,!1).hide()}""===e(this).val()&&(i.removeClass("is-searching"),s.show(),e(".ms-PeoplePicker-searchMore").removeClass("is-active"),l.addClass("ms-u-slideDownIn20"),setTimeout(function(){l.removeClass("ms-u-slideDownIn20")},1e3),u.children(":gt(4)").hide())}),l.on("click",".ms-Persona",function(){var t=e(this).find(".ms-Persona-primaryText").html(),n=e(this).find(".ms-Persona-secondaryText").html(),r=function(){for(var e=t.split(" "),n="",r=0;r<e.length;r++)n+=e[r].charAt(0);return n.substring(0,2)}(),i=e(this).find(".ms-Persona-initials").attr("class"),o=e(this).find(".ms-Persona-image").attr("src"),a=e(".ms-PersonaCard"),s=a.find(".ms-Persona-primaryText"),l=a.find(".ms-Persona-secondaryText"),c=a.find(".ms-Persona-initials"),u=a.find(".ms-Persona-image");if(f.removeClass("is-active"),s.text(t),l.text(n),c.text(r),c.removeClass(),c.addClass(i),u.attr("src",o),
setTimeout(function(){f.addClass("is-active"),setTimeout(function(){f.css({"animation-name":"none"})},300)},100),e(window).width()>480){var d=e(this).offset().top,p=d+10;f.css({top:p,left:0})}else f.css({top:"auto"})}),e(document).on("click",function(t){var n=e(".ms-PeoplePicker-selectedPerson").find(".ms-Persona");n.is(t.target)||f.is(t.target)||0!==f.has(t.target).length?f.addClass("is-active"):(f.removeClass("is-active"),setTimeout(function(){f.removeAttr("style")},300))})})}}(jQuery),!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("angular"));else if("function"==typeof define&&define.amd)define(["angular"],t);else{var n=t("object"==typeof exports?require("angular"):e.angular);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(3)},function(e,t,n){"use strict";var r=n(2);t.module=r.module("officeuifabric.core",[])},function(t,n){t.exports=e},function(e,t,n){"use strict";var r=n(2),i=n(4),o=n(5),a=n(8),s=n(11),l=n(13),c=n(14),u=n(15),d=n(16),f=n(17),p=n(19),h=n(20),m=n(21),g=n(23),v=n(24),b=n(25),y=n(29),E=n(30),w=n(32),C=n(33),T=n(35),$=n(37),S=n(42),x=n(45),A=n(48),_=n(49),k=n(50),O=n(52),R=n(55),N=n(57),D=n(58),I=n(62);t.module=r.module("officeuifabric.components",[i.module.name,o.module.name,a.module.name,s.module.name,l.module.name,c.module.name,u.module.name,d.module.name,f.module.name,p.module.name,h.module.name,m.module.name,g.module.name,v.module.name,b.module.name,y.module.name,E.module.name,w.module.name,C.module.name,T.module.name,I.module.name,$.module.name,S.module.name,x.module.name,A.module.name,_.module.name,k.module.name,O.module.name,R.module.name,N.module.name,D.module.name])},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.restrict="E",this.require="^uifBreadcrumb",this.transclude=!0,this.replace=!0,this.template='\n  <li class="ms-Breadcrumb-listItem">\n    <a class="ms-Breadcrumb-itemLink" ng-href="{{ngHref}}" tabindex="{{uifTabindex}}" ng-transclude></a>\n    <i class="ms-Breadcrumb-chevron ms-Icon ms-Icon--chevronRight"></i>\n  </li>',this.scope={ngHref:"@"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r,i){var o=Array.prototype.indexOf.call(t.parent().children(),t[0])+2;e.uifTabindex=o},e}();t.BreadcrumbLinkDirective=i;var o=function(){function e(e,t){this.href=e,this.linkText=t}return e}();t.BreadcrumbLink=o;var a=function(){function e(e,t,n){this.$scope=e,this.$document=t,this.$window=n}return e.$inject=["$scope","$document","$window"],e}();t.BreadcrumbController=a;var s=function(){function e(){var e=this;this.restrict="E",this.replace=!0,this.template='\n  <div class="ms-Breadcrumb" ng-class="{\'is-overflow\': isOverflow()}">\n    <div class="ms-Breadcrumb-overflow">\n      <div class="ms-Breadcrumb-overflowButton ms-Icon ms-Icon--ellipsis"\n           ng-click="openOverflow($event)" tabindex="1"></div>\n      <i class="ms-Breadcrumb-chevron ms-Icon ms-Icon--chevronRight"></i>\n      <div class="ms-Breadcrumb-overflowMenu" ng-class="{\'is-open\': overflowMenuOpen}">\n        <ul class="ms-ContextualMenu is-open">\n          <li class="ms-ContextualMenu-item"\n              ng-repeat="link in uifBreadcrumbLinks | limitTo:overflowElements()">\n            <a class="ms-ContextualMenu-link" ng-href="{{link.href}}">{{link.linkText}}</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <ul class="ms-Breadcrumb-list">\n      <uif-breadcrumb-link ng-repeat="link in uifBreadcrumbLinks | limitTo:-visibleElements"\n                           ng-href="{{link.href}}">{{link.linkText}}</uif-breadcrumb-link>\n    </ul>\n  </div>',this.controller=a,this.require="uifBreadcrumb",this.scope={uifBreadcrumbLinks:"="},this.SMALL_BREAK_POINT=639,this.link=function(t,n,i,o){t.visibleElements=4,t.overflowMenuOpen=!1,t.isOverflow=function(){var e=!1;return e=r.isDefined(t.uifBreadcrumbLinks)&&t.uifBreadcrumbLinks.length>t.visibleElements},t.overflowElements=function(){return t.isOverflow()?t.uifBreadcrumbLinks.length-t.visibleElements:0},t.openOverflow=function(e){e.stopPropagation(),t.overflowMenuOpen=!0},r.element(o.$window).bind("resize",function(){t.onResize(),t.$digest()}),o.$document.find("html").on("click",function(e){t.overflowMenuOpen=!1,t.$apply()}),t.onResize=function(n){void 0===n&&(n=window.innerWidth);var r=n>e.SMALL_BREAK_POINT?4:2;r!==t.visibleElements&&(t.visibleElements=r,t.$apply())},t.onResize()}}return e.factory=function(){var t=function(){return new e};return t},e}();t.BreadcrumbDirective=s,t.module=r.module("officeuifabric.components.breadcrumb",["officeuifabric.components"]).directive("uifBreadcrumb",s.factory()).directive("uifBreadcrumbLink",i.factory())},function(e,t,n){"use strict";var r=n(2),i=n(6),o=n(7),a=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}(),s=function(){function e(e){var t=this;this.$log=e,this.restrict="E",this.transclude=!0,this.replace=!0,this.scope={},this.controller=a,this.controllerAs="button",this.templateOptions={},this.template=function(e,n){switch(!r.isUndefined(n.uifType)&&r.isUndefined(i.ButtonTypeEnum[n.uifType])&&t.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.button - Unsupported button: The button ('"+n.uifType+"') is not supported by the Office UI Fabric. Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/button/buttonTypeEnum.ts"),n.uifType){case i.ButtonTypeEnum[i.ButtonTypeEnum.primary]:return r.isUndefined(n.ngHref)?t.templateOptions[o.ButtonTemplateType.primaryButton]:t.templateOptions[o.ButtonTemplateType.primaryLink];case i.ButtonTypeEnum[i.ButtonTypeEnum.command]:return r.isUndefined(n.ngHref)?t.templateOptions[o.ButtonTemplateType.commandButton]:t.templateOptions[o.ButtonTemplateType.commandLink];case i.ButtonTypeEnum[i.ButtonTypeEnum.compound]:return r.isUndefined(n.ngHref)?t.templateOptions[o.ButtonTemplateType.compoundButton]:t.templateOptions[o.ButtonTemplateType.compoundLink];case i.ButtonTypeEnum[i.ButtonTypeEnum.hero]:return r.isUndefined(n.ngHref)?t.templateOptions[o.ButtonTemplateType.heroButton]:t.templateOptions[o.ButtonTemplateType.heroLink];default:return r.isUndefined(n.ngHref)?t.templateOptions[o.ButtonTemplateType.actionButton]:t.templateOptions[o.ButtonTemplateType.actionLink]}},this._populateHtmlTemplates()}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$log"],t},e.prototype.compile=function(e,t,n){return{post:this.postLink,pre:this.preLink}},e.prototype.preLink=function(e,t,n,r,i){n.$observe("disabled",function(t){e.disabled=!!t}),t.on("click",function(t){e.disabled&&t.preventDefault()})},e.prototype.postLink=function(e,t,n,o,a){if(r.isUndefined(n.uifType)||n.uifType===i.ButtonTypeEnum[i.ButtonTypeEnum.primary]||n.uifType===i.ButtonTypeEnum[i.ButtonTypeEnum.compound]){var s=t.find("uif-icon");0!==s.length&&(s.remove(),o.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.button - Icon not allowed in primary or compound buttons: The primary & compound button does not support including icons in the body. The icon has been removed but may cause rendering errors. Consider buttons that support icons such as command or hero."))}a(function(e){var o;switch(n.uifType){case i.ButtonTypeEnum[i.ButtonTypeEnum.command]:for(var a=0;a<e.length;a++)"SPAN"===e[a].tagName&&(o=r.element("<span></span>"),o.addClass("ms-Button-label").append(e[a]),t.append(o)),"UIF-ICON"===e[a].tagName&&(o=r.element("<span></span>"),o.addClass("ms-Button-icon").append(e[a]),t.append(o));break;case i.ButtonTypeEnum[i.ButtonTypeEnum.compound]:for(var a=0;a<e.length;a++)"SPAN"===e[a].tagName&&("ng-scope"===e[a].classList[0]&&1===e[a].classList.length?(o=r.element("<span></span>"),o.addClass("ms-Button-label").append(e[a]),t.append(o)):t.append(e[a]));break;case i.ButtonTypeEnum[i.ButtonTypeEnum.hero]:for(var a=0;a<e.length;a++)"SPAN"===e[a].tagName&&(o=r.element("<span></span>"),o.addClass("ms-Button-label").append(e[a]),t.append(o)),"UIF-ICON"===e[a].tagName&&(o=r.element("<span></span>"),o.addClass("ms-Button-icon").append(e[a]),t.append(o))}})},e.prototype._populateHtmlTemplates=function(){this.templateOptions[o.ButtonTemplateType.actionButton]='<button class="ms-Button" ng-class="{\'is-disabled\': disabled}">\n         <span class="ms-Button-label" ng-transclude></span>\n       </button>',this.templateOptions[o.ButtonTemplateType.actionLink]='<a class="ms-Button" ng-class="{\'is-disabled\': disabled}">\n         <span class="ms-Button-label" ng-transclude></span>\n       </a>',this.templateOptions[o.ButtonTemplateType.primaryButton]='<button class="ms-Button ms-Button--primary" ng-class="{\'is-disabled\': disabled}">\n         <span class="ms-Button-label" ng-transclude></span>\n       </button>',this.templateOptions[o.ButtonTemplateType.primaryLink]='<a class="ms-Button ms-Button--primary" ng-class="{\'is-disabled\': disabled}">\n         <span class="ms-Button-label" ng-transclude></span>\n       </a>',this.templateOptions[o.ButtonTemplateType.commandButton]='<button class="ms-Button ms-Button--command" ng-class="{\'is-disabled\': disabled}"></button>',this.templateOptions[o.ButtonTemplateType.commandLink]='<a class="ms-Button ms-Button--command" ng-class="{\'is-disabled\': disabled}"></a>',this.templateOptions[o.ButtonTemplateType.compoundButton]='<button class="ms-Button ms-Button--compound" ng-class="{\'is-disabled\': disabled}"></button>',this.templateOptions[o.ButtonTemplateType.compoundLink]='<a class="ms-Button ms-Button--compound" ng-class="{\'is-disabled\': disabled}"></a>',this.templateOptions[o.ButtonTemplateType.heroButton]='<button class="ms-Button ms-Button--hero" ng-class="{\'is-disabled\': disabled}"></button>',this.templateOptions[o.ButtonTemplateType.heroLink]='<a class="ms-Button ms-Button--hero" ng-class="{\'is-disabled\': disabled}"></a>'},e}();t.ButtonDirective=s;var l=function(){function e(){this.restrict="E",this.require="^uifButton",this.transclude=!0,this.replace=!0,this.scope=!1,this.template='<span class="ms-Button-description" ng-transclude></span>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.ButtonDescriptionDirective=l,t.module=r.module("officeuifabric.components.button",["officeuifabric.components"]).directive("uifButton",s.factory()).directive("uifButtonDescription",l.factory())},function(e,t){"use strict";!function(e){e[e.primary=0]="primary",e[e.command=1]="command",e[e.compound=2]="compound",e[e.hero=3]="hero"}(t.ButtonTypeEnum||(t.ButtonTypeEnum={})),t.ButtonTypeEnum},function(e,t){"use strict";!function(e){e[e.actionButton=0]="actionButton",e[e.actionLink=1]="actionLink",e[e.primaryButton=2]="primaryButton",e[e.primaryLink=3]="primaryLink",e[e.commandButton=4]="commandButton",e[e.commandLink=5]="commandLink",e[e.compoundButton=6]="compoundButton",e[e.compoundLink=7]="compoundLink",e[e.heroButton=8]="heroButton",e[e.heroLink=9]="heroLink"}(t.ButtonTemplateType||(t.ButtonTemplateType={})),t.ButtonTemplateType},function(e,t,n){"use strict";var r=n(2),i=n(9),o=n(10),a=function(){function e(e,t){this.$scope=e,this.$log=t}return e.$inject=["$scope","$log"],e}();t.CalloutController=a;var s=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.scope=!1,this.template='<div class="ms-Callout-header"><p class="ms-Callout-title" ng-transclude></p></div>'}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,i){var o=t.parent().parent();if(!r.isUndefined(o)&&o.hasClass("ms-Callout-main")){var a=t.detach();o.prepend(a)}},e}();t.CalloutHeaderDirective=s;var l=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.scope=!1,this.template='<div class="ms-Callout-content"><p class="ms-Callout-subText" ng-transclude></p></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.CalloutContentDirective=l;var c=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.scope=!1,this.template='<div class="ms-Callout-actions" ng-transclude></div>',this.require="^?uifCallout"}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,i){r.isObject(i)&&i.$scope.$watch("hasSeparator",function(e){if(e)for(var n=t.children().eq(0).children(),r=0;r<n.length;r++){var i=n.eq(r);i.addClass("ms-Callout-action");for(var o=i.find("span"),a=0;a<o.length;a++){var s=o.eq(a);(s.hasClass("ms-Button-label")||s.hasClass("ms-Button-icon"))&&s.addClass("ms-Callout-actionText")}}})},e}();t.CalloutActionsDirective=c;var u=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.template="<div class=\"ms-Callout ms-Callout--arrow{{arrowDirection}}\" ng-class=\"{'ms-Callout--actionText': hasSeparator, 'ms-Callout--OOBE': uifType=='oobe', 'ms-Callout--Peek': uifType=='peek', 'ms-Callout--close': closeButton}\">"+'<div class="ms-Callout-main"><div class="ms-Callout-inner" ng-transclude></div></div></div>',this.require=["uifCallout"],this.scope={ngShow:"=?",uifType:"@"},this.controller=a}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,a){var s=a[0];if(n.$observe("uifType",function(e){r.isUndefined(i.CalloutType[e])&&s.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.callout - "'+e+'" is not a valid value for uifType. It should be oobe or peek')}),n.uifArrow||(e.arrowDirection="Left"),n.$observe("uifArrow",function(t){if(r.isUndefined(o.CalloutArrow[t]))return void s.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.callout - "'+t+'" is not a valid value for uifArrow. It should be left, right, top, bottom.');var n=t.charAt(0).toUpperCase();n+=t.slice(1).toLowerCase(),e.arrowDirection=n}),e.hasSeparator=!r.isUndefined(n.uifActionText)||!r.isUndefined(n.uifSeparator),!r.isUndefined(n.uifClose)){e.closeButton=!0;var l=r.element('<button class="ms-Callout-close" type="button"><i class="ms-Icon ms-Icon--x"></i></button>'),c=t.find("div").eq(0);c.append(l),l.bind("click",function(t){e.ngShow=!1,e.closeButtonClicked=!0,e.$apply()})}t.bind("mouseenter",function(t){e.isMouseOver=!0,e.$apply()}),t.bind("mouseleave",function(t){e.isMouseOver=!1,e.$apply()}),e.$watch("ngShow",function(t,n){var r=!t&&e.closeButtonClicked;return r?void(e.ngShow=e.closeButtonClicked=!1):void(t||(e.ngShow=e.isMouseOver))}),e.$watch("isMouseOver",function(t,n){!t&&n&&(e.closeButton||(e.ngShow=!1))})},e}();t.CalloutDirective=u,t.module=r.module("officeuifabric.components.callout",["officeuifabric.components"]).directive("uifCallout",u.factory()).directive("uifCalloutHeader",s.factory()).directive("uifCalloutContent",l.factory()).directive("uifCalloutActions",c.factory())},function(e,t){"use strict";!function(e){e[e.oobe=0]="oobe",e[e.peek=1]="peek"}(t.CalloutType||(t.CalloutType={})),t.CalloutType},function(e,t){"use strict";!function(e){e[e.left=0]="left",e[e.right=1]="right",e[e.top=2]="top",e[e.bottom=3]="bottom"}(t.CalloutArrow||(t.CalloutArrow={})),t.CalloutArrow},function(e,t,n){"use strict";var r=n(2),i=n(12),o=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}();t.ChoicefieldOptionController=o;var a=function(){function e(){this.template='<div class="ms-ChoiceField"><input id="{{::$id}}" class="ms-ChoiceField-input" type="{{uifType}}" value="{{value}}" ng-disabled="disabled"  ng-model="ngModel" ng-true-value="{{ngTrueValue}}" ng-false-value="{{ngFalseValue}}" /><label for="{{::$id}}" class="ms-ChoiceField-field"><span class="ms-Label" ng-transclude></span></label></div>',this.restrict="E",this.require=["uifChoicefieldOption","^?uifChoicefieldGroup"],this.replace=!0,this.transclude=!0,this.scope={ngFalseValue:"@",ngModel:"=",ngTrueValue:"@",uifType:"@",value:"@"},this.controller=o}return e.factory=function(){var t=function(){return new e};return t},e.prototype.compile=function(e,t,n){var r=e.find("input");return"ngModel"in t||r.removeAttr("ng-model"),{pre:this.preLink}},e.prototype.preLink=function(e,t,n,r,o){var a=r[0],s=r[1];if(e.$watch("uifType",function(e,t){void 0===i.ChoicefieldType[e]&&a.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.choicefield - "'+e+'" is not a valid value for uifType. Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/choicefield/choicefieldTypeEnum.ts')}),null!=s){var l=function(){var e=s.getViewValue()===n.value;t.find("input").prop("checked",e)};s.addRender(l),n.$observe("value",l),t.on("$destroy",function(){s.removeRender(l)})}var c=e.$parent.$parent,u=function(){e.disabled="disabled"in n&&n.disabled,e.disabled=e.disabled||null!=c&&c.disabled};e.$watch(function(){return t.attr("disabled")},function(e){u()}),e.$watch(function(){return null==c?"":c.disabled},function(e){u()}),u(),t.on("click",function(t){e.disabled||(null!=s&&s.setTouched(),e.$apply(function(){null!=s&&s.setViewValue(n.value,t)}))})},e}();t.ChoicefieldOptionDirective=a;var s=function(){function e(){this.template='<div class="ms-ChoiceFieldGroup-title"><ng-transclude /></div>',this.transclude=!0}return e.factory=function(){var t=function(){return new e};return t},e}();t.ChoicefieldGroupTitleDirective=s;var l=function(){function e(e,t){this.$element=e,this.$scope=t,this.renderFns=[]}return e.prototype.init=function(){var e=this;"undefined"!=typeof this.$scope.ngModel&&null!=this.$scope.ngModel&&(this.$scope.ngModel.$render=function(){e.render()},this.render())},e.prototype.addRender=function(e){this.renderFns.push(e)},e.prototype.removeRender=function(e){this.renderFns.splice(this.renderFns.indexOf(e))},e.prototype.setViewValue=function(e,t){this.getViewValue()!==e&&this.$scope.ngModel.$setDirty(),this.$scope.ngModel.$setViewValue(e,t),this.render()},e.prototype.setTouched=function(){"undefined"!=typeof this.$scope.ngModel&&null!=this.$scope.ngModel&&this.$scope.ngModel.$setTouched()},e.prototype.getViewValue=function(){if("undefined"!=typeof this.$scope.ngModel&&null!=this.$scope.ngModel)return this.$scope.ngModel.$viewValue},e.prototype.render=function(){for(var e=0;e<this.renderFns.length;e++)this.renderFns[e]()},e.$inject=["$element","$scope"],e}();t.ChoicefieldGroupController=l;var c=function(){function e(){this.template='<div class="ms-ChoiceFieldGroup"><ng-transclude /></div>',this.restrict="E",this.transclude=!0,this.require=["uifChoicefieldGroup","?ngModel"],this.controller=l,this.scope={}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.compile=function(e,t,n){return{pre:this.preLink}},e.prototype.preLink=function(e,t,n,r){var i=r[0],o=r[1];e.ngModel=o,i.init(),e.$watch(function(){return t.attr("disabled")},function(t){e.disabled="undefined"!=typeof t}),e.disabled="disabled"in n},e}();t.ChoicefieldGroupDirective=c,t.module=r.module("officeuifabric.components.choicefield",["officeuifabric.components"]).directive("uifChoicefieldOption",a.factory()).directive("uifChoicefieldGroup",c.factory()).directive("uifChoicefieldGroupTitle",s.factory())},function(e,t){"use strict";!function(e){e[e.radio=0]="radio",e[e.checkbox=1]="checkbox"}(t.ChoicefieldType||(t.ChoicefieldType={})),t.ChoicefieldType},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.restrict="E",this.template='<div class="ms-CommandBar" ng-transclude></div>',this.transclude=!0,this.replace=!0,this.scope={placeholder:"@",uifSearchTerm:"="}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n){e.focusSearchInput=function(){e.isSearchActive=!0,r.element(t[0].querySelector(".ms-CommandBarSearch-input"))[0].focus()},e.clearSearchTerm=function(){e.uifSearchTerm=null,e.isSearchActive=!1}},e}();t.CommandBarDirective=i;var o=function(){function e(){this.restrict="E",this.replace=!0,this.transclude=!0,this.template='<div class="ms-CommandBarSearch" ng-class="$parent.isSearchActive == true ? \'is-active\' : \'\';">\n                             <input class="ms-CommandBarSearch-input"\n                                    type="text"\n                                    placeholder="{{$parent.placeholder}}"\n                                    tabindex="1"\n                                    ng-focus="$parent.isSearchActive = true;"\n                                    ng-blur="$parent.isSearchActive = false;"\n                                    ng-model="$parent.uifSearchTerm">\n                             <div class="ms-CommandBarSearch-iconWrapper ms-CommandBarSearch-iconSearchWrapper"\n                                  ng-click="$parent.focusSearchInput()">\n                                  <uif-icon uif-type="search" />\n                              </div>\n                             <div class="ms-CommandBarSearch-iconWrapper ms-CommandBarSearch-iconClearWrapper ms-font-s"\n                                  ng-mousedown="$parent.clearSearchTerm()">\n                                  <uif-icon uif-type="x"/>\n                              </div>\n                            </div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.CommandBarSearchDirective=o;var a=function(){function e(){this.restrict="E",this.template='<div class="ms-CommandBar-sideCommands" ng-transclude></div>',this.replace=!0,this.transclude=!0}return e.factory=function(){var t=function(){return new e};return t},e}();t.CommandBarSideDirective=a;var s=function(){function e(e){this.$timeout=e,this.restrict="E",this.template='<div class="ms-CommandBar-mainArea">\n                              <ng-transclude></ng-transclude>\n                              <div ng-if="uifShowOverflow"\n                                class="ms-CommandBarItem ms-CommandBarItem--iconOnly ms-CommandBarItem-overflow"\n                                ng-class="overflowVisible == true ? \'is-visible\' : \'\';">\n                                  <div class="ms-CommandBarItem-linkWrapper"\n                                    ng-click="openOverflowMenu()">\n                                    <a class="ms-CommandBarItem-link" tabindex="2">\n                                      <uif-icon uif-type="ellipsis" />\n                                      </a>\n                                    </div>\n                                  </div>\n                                </div>',this.replace=!0,this.transclude=!0,this.controller=l,this.scope={uifShowOverflow:"="}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$timeout"],t},e.prototype.compile=function(e,t,n){return{post:this.postLink}},e.prototype.postLink=function(e,t,n,i){e.openOverflowMenu=function(){e.overflowMenuOpen=!e.overflowMenuOpen;var n;n=' <uif-contextual-menu class="ms-CommandBar-overflowMenu"\n              uif-is-open="overflowMenuOpen"\n              uif-close-on-click="false">',r.element(t[0].querySelector(".ms-CommandBarItem-overflow .ms-CommandBarItem-linkWrapper ul")).remove(),r.forEach(e.hiddenItems,function(e){n+=e.submenu?'<uif-contextual-menu-item ng-model="hiddenItems['+e.i+"]\"\n                                        ng-click='openOverflowItem(hiddenItems["+e.i+"])'\n                                        uif-text='hiddenItems["+e.i+"].text'\n                                        ng-show='hiddenItems["+e.i+"].visible'\n                                        uif-type=\"subMenu\">\n                                          <uif-contextual-menu>\n                                              <uif-contextual-menu-item\n                                               ng-click='openOverflowItem(subitem)'\n                                               uif-text='subitem.text'\n                                               uif-type=\"link\"\n                                               ng-repeat=\"subitem in hiddenItems["+e.i+'].submenuitems track by $index"/>\n                                          </uif-contextual-menu>\n                                      </uif-contextual-menu-item>':'<uif-contextual-menu-item ng-model="hiddenItems['+e.i+"]\"\n                                        ng-click='openOverflowItem(hiddenItems["+e.i+"])'\n                                        uif-text='hiddenItems["+e.i+"].text'\n                                        ng-show='hiddenItems["+e.i+'].visible\'\n                                        uif-type="link">\n                                      </uif-contextual-menu-item>'}),n+="</<uif-contextual-menu>";var o;o=t[0].querySelector(".ms-CommandBarItem-overflow .ms-CommandBarItem-linkWrapper"),r.element(o).append(i.$compile(n)(e))},e.loadMenuItems=function(t){var n=0,i=0;e.commandItems=[],r.forEach(t,function(t){r.element(t).hasClass("ms-CommandBarItem-overflow")!==!0&&(n+=t.offsetWidth,e.commandItems.push({index:i,offset:n}),i++)})},e.openOverflowItem=function(e){e.submenu?(e.submenuitems=[],r.forEach(e.submenu.children,function(t){var n;n={},n.text=t.innerText,n.menuType="item",n.childitem=!0,n.i=e.submenuitems.length,n.parent=e.i,e.submenuitems.push(n)})):i.$timeout(function(){if(e.childitem===!0){var n=void 0;n=t[0].querySelectorAll(".ms-CommandBarItem")[e.parent].querySelectorAll(".ms-ContextualMenu-item")[e.i],r.element(n).triggerHandler("click")}else r.element(t[0].querySelectorAll(".ms-CommandBarItem")[e.i]).triggerHandler("click")},1)},e.toggleItemVisibility=function(){var n;n=r.element(t[0].querySelectorAll(".ms-CommandBar-mainArea .ms-CommandBarItem")),window.innerWidth<640&&e.mobileSwitch===!1?(e.loadMenuItems(n),e.mobileSwitch=!0):window.innerWidth>=640&&e.mobileSwitch===!0&&(e.loadMenuItems(n),e.mobileSwitch=!1),r.forEach(e.commandItems,function(n){n.offset>=t.prop("offsetWidth")-200?(r.element(t[0].querySelectorAll(".ms-CommandBarItem")[n.index]).addClass("is-hidden"),e.hiddenItems[n.index].visible=!0,e.overflowVisible=!0):(r.element(t[0].querySelectorAll(".ms-CommandBarItem")[n.index]).removeClass("is-hidden"),e.hiddenItems[n.index].visible=!1,e.overflowVisible=!1)}),i.$timeout(function(){e.$apply()},1)},e.$on("uif-command-bar-resize",function(){e.overflowMenuOpen=!1,e.toggleItemVisibility()}),r.element(window).bind("resize",function(){e.$broadcast("uif-command-bar-resize")}),r.element(document).ready(function(){e.loadMenuItems(r.element(t[0].querySelectorAll(".ms-CommandBarItem"))),e.toggleItemVisibility()})},e}();t.CommandBarMainDirective=s;var l=function(){function e(e,t,n,r){this.$scope=e,this.$element=t,this.$compile=n,this.$timeout=r}return e.prototype.addOverflowItem=function(e){null==this.$scope.hiddenItems&&(this.$scope.hiddenItems=[]),e.i=this.$scope.hiddenItems.length,this.$scope.hiddenItems.push(e)},e.$inject=["$scope","$element","$compile","$timeout"],e}();t.CommandBarMainController=l;var c=function(){function e(){this.restrict="E",this.template='<div class="ms-CommandBarItem"><div class="ms-CommandBarItem-linkWrapper"> <a class="ms-CommandBarItem-link"> </a></div></div>',this.transclude=!0,this.replace=!0,this.controller=l,this.require="^?uifCommandBarMain"}return e.factory=function(){var t=function(){return new e};return t},e.prototype.compile=function(e,t,n){return{post:this.postLink}},e.prototype.postLink=function(e,t,n,i,o){o(function(e){var n;n={};for(var o=0;o<e.length;o++)"UIF-ICON"===e[o].tagName&&r.element(t[0].querySelector("a.ms-CommandBarItem-link")).append(e[o]),"SPAN"===e[o].tagName&&(e[o].classList.contains("ms-CommandBarItem-commandText")||e[o].classList.add("ms-CommandBarItem-commandText"),e[o].className.indexOf("ms-font-")===-1&&e[o].classList.add("ms-font-m"),r.element(t[0].querySelector("a.ms-CommandBarItem-link")).append(e[o]),n.text=e[o].innerText),"UL"===e[o].tagName&&e[o].classList.contains("ms-ContextualMenu")&&(r.element(t).append(e[o]),n.submenu=e[o]);null!==i&&(null==n.submenu?n.menuType="link":n.menuType="subMenu",i.addOverflowItem(n))}),0===r.element(t[0].querySelector(".ms-CommandBarItem-link > uif-icon")).length&&r.element(t[0].querySelector(".ms-CommandBarItem")).addClass("ms-CommandBarItem-hasTextOnly")},e}();t.CommandBarItemDirective=c,t.module=r.module("officeuifabric.components.commandbar",["officeuifabric.components"]).directive("uifCommandBar",i.factory()).directive("uifCommandBarSearch",o.factory()).directive("uifCommandBarItem",c.factory()).directive("uifCommandBarMain",s.factory()).directive("uifCommandBarSide",a.factory())},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.replace=!0,this.restrict="E",this.transclude=!0,this.scope=!0,this.template='<span class="uif-content" ng-transclude></span>'}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifContent",e}();t.ContentDirective=i,t.module=r.module("officeuifabric.components.content",["officeuifabric.components"]).directive(i.directiveName,i.factory())},function(e,t,n){"use strict";var r,i=n(2);!function(e){e[e.link=0]="link",e[e.divider=1]="divider",e[e.header=2]="header",e[e.subMenu=3]="subMenu"}(r||(r={}));var o=function(){function e(e){var t=this;this.$log=e,this.restrict="E",this.require="^uifContextualMenu",this.transclude=!0,this.controller=a,this.replace=!0,this.scope={isSelected:"=?uifIsSelected",onClick:"&ngClick",text:"=?uifText",type:"@uifType"},this.templateTypes={},this.template=function(e,n){var o=n.uifType;return i.isUndefined(o)?t.templateTypes[r.link]:(void 0===r[o]&&t.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.contextualmenu - unsupported menu type:\nthe type '"+o+"' is not supported by ng-Office UI Fabric as valid type for context menu.Supported types can be found under MenuItemTypes enum here:\nhttps://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/contextualmenu/contextualMenu.ts"),t.templateTypes[r[o]])},this.link=function(e,n,r,o,a){"boolean"!=typeof e.isSelected&&void 0!==e.isSelected&&o.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.contextualmenu - invalid attribute type: 'uif-is-selected'.\nThe type '"+typeof e.isSelected+"' is not supported as valid type for 'uif-is-selected' attribute for <uif-contextual-menu-item />. The valid type is boolean."),r.$observe("disabled",function(t){e.isDisabled=!!t}),t.transcludeChilds(e,n,a),e.selectItem=function(t){o.isMultiSelectionMenu()||o.deselectItems(),i.isUndefined(e.isSelected)&&!e.isDisabled?e.isSelected=!0:e.isSelected=!e.isSelected,e.hasChildMenu?o.closeSubMenus(e.$id):(o.closeSubMenus(null,!0),o.isRootMenu()||o.deselectItems(!0)),e.hasChildMenu&&e.childMenuCtrl.openMenu(),i.isUndefined(e.onClick)||e.onClick(),t.stopPropagation()},e.$on("uif-menu-deselect",function(){e.isSelected=!1}),e.$on("uif-menu-close",function(t,n){e.hasChildMenu&&e.$id!==n&&e.childMenuCtrl.closeMenu()})},this.templateTypes[r.subMenu]='<li class="ms-ContextualMenu-item">\n          <a class="ms-ContextualMenu-link ms-ContextualMenu-link--hasMenu"\n          ng-class="{\'is-selected\': isSelected, \'is-disabled\': isDisabled}" ng-click="selectItem($event)" href>\n            <span class=\'uif-item-content\'></span></a>\n          <i class="ms-ContextualMenu-subMenuIcon ms-Icon ms-Icon--chevronRight"></i>\n          <div class="uif-context-submenu"></div>\n       </li>',this.templateTypes[r.link]='<li class="ms-ContextualMenu-item">\n            <a class="ms-ContextualMenu-link" ng-class="{\'is-selected\': isSelected, \'is-disabled\': isDisabled}"\n            ng-click="selectItem($event)" href><span class=\'uif-item-content\'></span></a>\n        </li>',this.templateTypes[r.header]="\n    <li class=\"ms-ContextualMenu-item ms-ContextualMenu-item--header\">\n      <span class='uif-item-content'></span>\n    </li>",this.templateTypes[r.divider]='<li class="ms-ContextualMenu-item ms-ContextualMenu-item--divider"></li>'}return e.factory=function(){var t=function(t){
return new e(t)};return t.$inject=["$log"],t},e.prototype.transcludeChilds=function(e,t,n){var r=this;n(function(n){var i=r.hasItemContent(n);i||e.text||e.hasChildMenu||"divider"===e.type||r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.contextualmenu - you need to provide a text for a contextual menu item.\nFor <uif-contextual-menu-item> you need to specify either 'uif-text' as attribute or <uif-content> as a child directive"),r.insertItemContent(n,e,t),r.insertSubMenu(n,e,t)})},e.prototype.insertItemContent=function(e,t,n){var r=i.element(n[0].querySelector(".uif-item-content"));if(this.hasItemContent(e))for(var o=0;o<e.length;o++){var a=i.element(e[o]);if(a.hasClass("uif-content")){r.replaceWith(a);break}}else r.replaceWith(i.element("<span>"+t.text+"</span>"))},e.prototype.insertSubMenu=function(e,t,n){for(var r=0;r<e.length;r++){var o=i.element(e[r]);o.hasClass("ms-ContextualMenu")&&i.element(n[0].querySelector(".uif-context-submenu")).replaceWith(o)}},e.prototype.hasItemContent=function(e){for(var t=0;t<e.length;t++){var n=i.element(e[t]);if(n.hasClass("uif-content"))return!0}return!1},e.directiveName="uifContextualMenuItem",e}();t.ContextualMenuItemDirective=o;var a=function(){function e(e,t){this.$scope=e,this.$element=t}return e.prototype.setChildMenu=function(e){this.$scope.hasChildMenu=!0,this.$scope.childMenuCtrl=e},e.$inject=["$scope","$element"],e}();t.ContextualMenuItemController=a;var s=function(){function e(){this.restrict="E",this.require=e.directiveName,this.transclude=!0,this.template='<ul class="ms-ContextualMenu" ng-transclude></ul>',this.replace=!0,this.controller=l,this.scope={closeOnClick:"@uifCloseOnClick",isOpen:"=?uifIsOpen",multiselect:"@uifMultiselect"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){var a=function(t){i.isUndefined(t)?e.closeOnClick=!0:e.closeOnClick="true"===t.toString().toLowerCase()};a(e.closeOnClick),n.$observe("uifCloseOnClick",a);var s=t.controller(o.directiveName);i.isUndefined(s)||s.setChildMenu(r),i.isUndefined(e.multiselect)||"true"!==e.multiselect.toLowerCase()||t.addClass("ms-ContextualMenu--multiselect")},e.directiveName="uifContextualMenu",e}();t.ContextualMenuDirective=s;var l=function(){function e(e,t,n,r){var a=this;this.$scope=e,this.$animate=t,this.$element=n,this.$log=r,this.onRootMenuClosed=[],this.isOpenClassName="is-open",i.isUndefined(n.controller(o.directiveName))&&(e.isRootMenu=!0),e.$watch("isOpen",function(e){"boolean"!=typeof e&&void 0!==e&&a.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.contextualmenu - invalid attribute type: 'uif-is-open'.\nThe type '"+typeof e+"' is not supported as valid type for 'uif-is-open' attribute for <uif-contextual-menu />. The valid type is boolean."),t[e?"addClass":"removeClass"](n,a.isOpenClassName)}),this.onRootMenuClosed.push(function(){a.closeMenu(),a.deselectItems(!0)}),e.$on("uif-menu-close",function(){e.isRootMenu&&e.closeOnClick&&a.onRootMenuClosed.forEach(function(e){e()})})}return e.prototype.deselectItems=function(e){this.$scope.$broadcast("uif-menu-deselect"),e&&this.$scope.$emit("uif-menu-deselect")},e.prototype.closeSubMenus=function(e,t){this.$scope.$broadcast("uif-menu-close",e),t&&this.$scope.$emit("uif-menu-close")},e.prototype.openMenu=function(){this.$scope.isOpen=!0},e.prototype.closeMenu=function(){this.$scope.isOpen=!1},e.prototype.isRootMenu=function(){return this.$scope.isRootMenu},e.prototype.isMultiSelectionMenu=function(){return!i.isUndefined(this.$scope.multiselect)&&"true"===this.$scope.multiselect.toLowerCase()},e.prototype.isMenuOpened=function(){return this.$element.hasClass("is-open")},e.$inject=["$scope","$animate","$element","$log"],e}();t.ContextualMenuController=l,t.module=i.module("officeuifabric.components.contextualmenu",["officeuifabric.components"]).directive(s.directiveName,s.factory()).directive(o.directiveName,o.factory())},function(e,t,n){"use strict";var r=n(2),i=function(){function e(e,t){this.$scope=t,this.isPickingYears=!1,this.isPickingMonths=!1,this.displayDateFormat="d mmmm, yyyy",this.jElement=$(e[0]),this.displayDateFormat=t.uifDateFormat,t.ctrl=this}return e.prototype.range=function(e,t,n){n=n||1;for(var r=[],i=e;i<=t;i+=n)r.push(i);return r},e.prototype.getPicker=function(){return this.jElement.find(".ms-TextField-field").pickadate("picker")},e.prototype.setValue=function(e){this.getPicker().set("select",e),this.changeHighlightedDate(e.getFullYear(),e.getMonth(),e.getDate())},e.prototype.initDatepicker=function(e){var t=this;this.jElement.find(".ms-TextField-field").pickadate({clear:"",close:"",format:t.displayDateFormat,klass:{active:"ms-DatePicker-input--active",box:"ms-DatePicker-dayPicker",day:"ms-DatePicker-day",disabled:"ms-DatePicker-day--disabled",focused:"ms-DatePicker-picker--focused",frame:"ms-DatePicker-frame",header:"ms-DatePicker-header",holder:"ms-DatePicker-holder",infocus:"ms-DatePicker-day--infocus",input:"ms-DatePicker-input",month:"ms-DatePicker-month",now:"ms-DatePicker-day--today",opened:"ms-DatePicker-picker--opened",outfocus:"ms-DatePicker-day--outfocus",picker:"ms-DatePicker-picker",selected:"ms-DatePicker-day--selected",table:"ms-DatePicker-table",weekdays:"ms-DatePicker-weekday",wrap:"ms-DatePicker-wrap",year:"ms-DatePicker-year"},onStart:function(){t.initCustomView()},today:"",weekdaysShort:["S","M","T","W","T","F","S"]});var n=this.getPicker();n.on({open:function(){t.scrollUp(),r.isDefined(e)&&null!==e&&e.$setTouched(),t.$scope.$apply()},set:function(t){var i=n.get("select","yyyy-mm-dd");r.isDefined(e)&&null!==e&&e.$setViewValue(i)}})},e.prototype.initCustomView=function(){var e=this.jElement.find(".ms-DatePicker-monthComponents"),t=this.jElement.find(".ms-DatePicker-goToday"),n=this.jElement.find(".ms-DatePicker-monthPicker"),r=this.jElement.find(".ms-DatePicker-yearPicker"),i=this.jElement.find(".ms-DatePicker-wrap"),o=this.getPicker(),a=this;e.appendTo(i),t.appendTo(i),n.appendTo(i),r.appendTo(i),e.on("click",".js-prevMonth",function(e){e.preventDefault();var t=o.get("highlight").month-1;a.changeHighlightedDate(null,t,null),a.$scope.$apply()}),e.on("click",".js-nextMonth",function(e){e.preventDefault();var t=o.get("highlight").month+1;a.changeHighlightedDate(null,t,null),a.$scope.$apply()}),n.on("click",".js-prevYear",function(e){e.preventDefault();var t=o.get("highlight").year-1;a.changeHighlightedDate(t,null,null),a.$scope.$apply()}),n.on("click",".js-nextYear",function(e){e.preventDefault();var t=o.get("highlight").year+1;a.changeHighlightedDate(t,null,null),a.$scope.$apply()}),r.on("click",".js-prevDecade",function(e){e.preventDefault();var t=o.get("highlight").year-10;a.changeHighlightedDate(t,null,null),a.$scope.$apply()}),r.on("click",".js-nextDecade",function(e){e.preventDefault();var t=o.get("highlight").year+10;a.changeHighlightedDate(t,null,null),a.$scope.$apply()}),t.on("click",function(e){e.preventDefault();var t=new Date;o.set("select",t),a.jElement.removeClass("is-pickingMonths").removeClass("is-pickingYears"),a.$scope.$apply()}),n.on("click",".js-changeDate",function(e){e.preventDefault();var t=o.get("highlight"),n=t.year,r=+$(this).attr("data-month"),i=t.day;a.changeHighlightedDate(n,r,i),a.jElement.hasClass("is-pickingMonths")&&a.jElement.removeClass("is-pickingMonths"),a.$scope.$apply()}),r.on("click",".js-changeDate",function(e){e.preventDefault();var t=o.get("highlight"),n=+$(this).attr("data-year"),r=t.month,i=t.day;a.changeHighlightedDate(n,r,i),a.jElement.hasClass("is-pickingYears")&&a.jElement.removeClass("is-pickingYears"),a.$scope.$apply()}),e.on("click",".js-showMonthPicker",function(e){a.isPickingMonths=!a.isPickingMonths,a.$scope.$apply()}),n.on("click",".js-showYearPicker",function(e){a.isPickingYears=!a.isPickingYears,a.$scope.$apply()}),a.$scope.highlightedValue=o.get("highlight")},e.prototype.scrollUp=function(){$("html, body").animate({scrollTop:this.jElement.offset().top},367)},e.prototype.changeHighlightedDate=function(e,t,n){var r=this.getPicker();null==e&&(e=r.get("highlight").year),null==t&&(t=r.get("highlight").month),null==n&&(n=r.get("highlight").date),r.set("highlight",[e,t,n]),this.$scope.highlightedValue=r.get("highlight")},e.$inject=["$element","$scope"],e}();t.DatepickerController=i;var o=function(){function e(){this.template='<div ng-class="{\'ms-DatePicker\': true, \'is-pickingYears\': ctrl.isPickingYears, \'is-pickingMonths\': ctrl.isPickingMonths}"><div class="ms-TextField"><i class="ms-DatePicker-event ms-Icon ms-Icon--event"></i><input class="ms-TextField-field" type="text" placeholder="{{placeholder}}" ng-disabled="isDisabled"></div><div class="ms-DatePicker-monthComponents"><span class="ms-DatePicker-nextMonth js-nextMonth"><i class="ms-Icon ms-Icon--chevronRight"></i></span><span class="ms-DatePicker-prevMonth js-prevMonth"><i class="ms-Icon ms-Icon--chevronLeft"></i></span><div class="ms-DatePicker-headerToggleView js-showMonthPicker"></div></div><span class="ms-DatePicker-goToday js-goToday">Go to today</span><div class="ms-DatePicker-monthPicker"><div class="ms-DatePicker-header"><div class="ms-DatePicker-yearComponents"><span class="ms-DatePicker-nextYear js-nextYear"><i class="ms-Icon ms-Icon--chevronRight"></i></span><span class="ms-DatePicker-prevYear js-prevYear"><i class="ms-Icon ms-Icon--chevronLeft"></i></span></div><div class="ms-DatePicker-currentYear js-showYearPicker">{{highlightedValue.year}}</div></div><div class="ms-DatePicker-optionGrid" ><span ng-repeat="month in monthsArray"ng-class="{\'ms-DatePicker-monthOption js-changeDate\': true, \'is-highlighted\': highlightedValue.month == $index}"data-month="{{$index}}">{{month}}</span></div></div><div class="ms-DatePicker-yearPicker"><div class="ms-DatePicker-decadeComponents"><span class="ms-DatePicker-nextDecade js-nextDecade"><i class="ms-Icon ms-Icon--chevronRight"></i></span><span class="ms-DatePicker-prevDecade js-prevDecade"><i class="ms-Icon ms-Icon--chevronLeft"></i></span></div><div class="ms-DatePicker-currentDecade">{{highlightedValue.year - 10}} - {{highlightedValue.year}}</div><div class="ms-DatePicker-optionGrid"><span ng-class="{\'ms-DatePicker-yearOption js-changeDate\': true,\'is-highlighted\': highlightedValue.year == year}" ng-repeat="year in ctrl.range(highlightedValue.year - 10, highlightedValue.year)"data-year="{{year}}">{{year}}</span></div></div></div>',this.controller=i,this.restrict="E",this.replace=!0,this.scope={placeholder:"@",uifDateFormat:"@",uifMonths:"@"},this.require=["uifDatepicker","?ngModel"]}return e.factory=function(){var t=function(){return new e};return t},e.prototype.compile=function(e,t,n){return{post:this.postLink,pre:this.preLink}},e.prototype.preLink=function(e,t,n,r){if(e.uifMonths||(e.uifMonths="Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec"),e.placeholder||(e.placeholder="Select a date"),e.uifDateFormat||(e.uifDateFormat="d mmmm, yyyy"),e.monthsArray=e.uifMonths.split(","),12!==e.monthsArray.length)throw"Months setting should have 12 months, separated by a comma";n.$observe("disabled",function(t){e.isDisabled=!!t})},e.prototype.postLink=function(e,t,n,i){var o=i[0],a=i[1];o.initDatepicker(a),r.isDefined(a)&&null!==a&&(a.$render=function(){if(""!==a.$modelValue&&"undefined"!=typeof a.$modelValue){if("string"==typeof a.$modelValue){var e=new Date(a.$modelValue);o.setValue(e)}else o.setValue(a.$modelValue);a.$setPristine()}})},e}();t.DatepickerDirective=o,t.module=r.module("officeuifabric.components.datepicker",["officeuifabric.components"]).directive("uifDatepicker",o.factory())},function(e,t,n){"use strict";var r=n(2),i=n(18),o=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}();t.DialogController=o;var a=function(){function e(){this.restrict="E",this.controller=o,this.replace=!0,this.transclude=!0,this.template="<div class=\"ms-Dialog\"ng-class=\"{ 'ms-Dialog--close': uifClose=='true', 'ms-Dialog--lgHeader': uifType=='header', 'ms-Dialog--multiline': uifType=='multiline' }\"><uif-overlay uif-mode=\"{{uifOverlay}}\"></uif-overlay><div class=\"ms-Dialog-main\" ng-transclude></div></div>",this.scope={uifClose:"@",uifOverlay:"@",uifType:"@"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){e.$watch("uifType",function(t,n){"undefined"!=typeof t&&void 0===i.DialogTypeEnum[t]&&r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.dialog - Unsupported type:The type ('"+e.uifType+"') is not supported by the Office UI Fabric.Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/dialog/dialogEnums.ts")})},e}();t.DialogDirective=a;var s=function(){function e(){this.restrict="E",this.replace=!0,this.transclude=!0,this.require="^^uifDialog",this.template='<div class="ms-Dialog-header"><button ng-if="$parent.uifClose" class="ms-Dialog-button ms-Dialog-button--close"><i class="ms-Icon ms-Icon--x"></i></button><ng-transclude></ng-transclude></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.DialogHeaderDirective=s;var l=function(){function e(){this.restrict="E",this.replace=!0,this.transclude=!0,this.template='<div class="ms-Dialog-content" ng-transclude></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.DialogContentDirective=l;var c=function(){function e(){this.restrict="E",this.replace=!0,this.transclude=!0,this.template='<div class="ms-Dialog-inner" ng-transclude></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.DialogInnerDirective=c;var u=function(){function e(){this.restrict="E",this.replace=!0,this.transclude=!0,this.template='<p class="ms-Dialog-subText" ng-transclude></p>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.DialogSubtextDirective=u;var d=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}();t.DialogActionsController=d;var f=function(){function e(){this.restrict="E",this.replace=!0,this.transclude=!0,this.controller=d,this.template="<div class=\"ms-Dialog-actions\"><div ng-class=\"{ 'ms-Dialog-actionsRight': uifPosition=='right'}\"><ng-transclude></ng-transclude></div></div>",this.scope={uifPosition:"@"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){e.$watch("uifPosition",function(t,n){"undefined"!=typeof t&&void 0===i.DialogActionsPositionEnum[t]&&r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.dialog - Unsupported type:The type ('"+e.uifPosition+"') is not supported by the Office UI Fabric.Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/dialog/dialogEnums.ts")})},e}();t.DialogActionsDirective=f,t.module=r.module("officeuifabric.components.dialog",["officeuifabric.components"]).directive("uifDialog",a.factory()).directive("uifDialogHeader",s.factory()).directive("uifDialogContent",l.factory()).directive("uifDialogInner",c.factory()).directive("uifDialogSubtext",u.factory()).directive("uifDialogActions",f.factory())},function(e,t){"use strict";!function(e){e[e.none=0]="none",e[e.header=1]="header",e[e.multiline=2]="multiline"}(t.DialogTypeEnum||(t.DialogTypeEnum={})),t.DialogTypeEnum,!function(e){e[e.none=0]="none",e[e.left=1]="left",e[e.right=2]="right"}(t.DialogActionsPositionEnum||(t.DialogActionsPositionEnum={})),t.DialogActionsPositionEnum},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.template='<li class="ms-Dropdown-item" ng-transclude></li>',this.restrict="E",this.require="^uifDropdown",this.replace=!0,this.transclude=!0}return e.factory=function(){var t=function(){return new e};return t},e.prototype.compile=function(e,t,n){return{post:this.postLink}},e.prototype.postLink=function(e,t,n,r,i){if(!r)throw"Dropdown controller not found!";t.on("click",function(i){e.$apply(function(){r.setViewValue(t.find("span").html(),n.value,i)})});var o=""+r.getViewValue();o&&o===n.value&&r.setViewValue(n.title,n.value,null)},e}();t.DropdownOptionDirective=i;var o=function(){function e(e,t,n){this.$element=e,this.$scope=t,this.$document=n}return e.prototype.init=function(){var e=this;this.$element.on("click",function(t){if(!e.$scope.disabled){e.$scope.isOpen=!e.$scope.isOpen,e.$scope.$apply();var n=r.element(this.querySelector(".ms-Dropdown"))[0].clientWidth;if(r.element(this.querySelector(".ms-Dropdown-items"))[0].style.width=n+"px",t.stopPropagation(),e.$scope.isOpen){var i=function(){e.$scope.isOpen=!1,e.$scope.$apply(),e.$document.off("click",i)};e.$document.on("click",i),e.$scope.$on("$destroy",function(){e.$document.off("click",i)})}void 0!==e.$scope.ngModel&&null!=e.$scope.ngModel&&e.$scope.ngModel.$setTouched()}}),"undefined"!=typeof this.$scope.ngModel&&null!=this.$scope.ngModel&&(this.$scope.ngModel.$render=function(){for(var t=!1,n=e.$element.find("li"),i=0;i<n.length;i++){var o=n[i],a=o.getAttribute("value");if(a===e.$scope.ngModel.$viewValue){e.$scope.selectedTitle=r.element(o).find("span").html(),t=!0;break}}t||(e.$scope.selectedTitle="")})},e.prototype.setViewValue=function(e,t,n){this.$scope.selectedTitle=e,this.$scope.ngModel.$setViewValue(t,n)},e.prototype.getViewValue=function(){if("undefined"!=typeof this.$scope.ngModel&&null!=this.$scope.ngModel)return this.$scope.ngModel.$viewValue},e.$inject=["$element","$scope","$document"],e}();t.DropdownController=o;var a=function(){function e(){this.template='<div ng-click="dropdownClick" ng-class="{\'ms-Dropdown\' : true, \'is-open\': isOpen, \'is-disabled\': disabled}" tabindex="0"><i class="ms-Dropdown-caretDown ms-Icon ms-Icon--caretDown"></i><span class="ms-Dropdown-title">{{selectedTitle}}</span><ul class="ms-Dropdown-items"><ng-transclude></ng-transclude></ul></div>',this.restrict="E",this.transclude=!0,this.require=["uifDropdown","?ngModel"],this.scope={},this.controller=o}return e.factory=function(){var t=function(){return new e};return t},e.prototype.compile=function(e,t,n){return{pre:this.preLink}},e.prototype.preLink=function(e,t,n,r){var i=r[0],o=r[1];e.ngModel=o,i.init(),e.$watch(function(){return t.attr("disabled")},function(t){e.disabled="undefined"!=typeof t}),e.disabled="disabled"in n},e}();t.DropdownDirective=a,t.module=r.module("officeuifabric.components.dropdown",["officeuifabric.components"]).directive("uifDropdownOption",i.factory()).directive("uifDropdown",a.factory())},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.transclude=!0,this.replace=!0,this.restrict="E",this.template='<div class="ms-Facepile">\n                                <ng-transclude></ng-transclude>\n                                <div class="ms-Facepile-members">\n                                  <div  ng-repeat="member in members track by $index"\n                                        role="button"\n                                        ng-if ="$index < uifOverflowLimit"\n                                        class="ms-Facepile-itemBtn ms-Facepile-itemBtn--member"\n                                        title="{{member.primaryText}}" tabindex="0">\n                                    <uif-persona uif-style="round" uif-size="xsmall" uif-image-url="{{member.icon}}">\n                                      <uif-persona-initials uif-color="{{member.color}}">{{member.initials}}</uif-persona-initials>\n                                    </uif-persona>\n                                  </div>\n                                  <button type="button"\n                                    ng-show="uifOverflowLimit > 0 && members.length > uifOverflowLimit"\n                                    ng-click="overflowPanelIsOpen = true;"\n                                    class="ms-Facepile-itemBtn ms-Facepile-itemBtn--overflow js-overflowPanel is-active">\n                                    <span class="ms-Facepile-overflowText">+{{members.length - uifOverflowLimit}}</span\n                                  </button>\n                                </div>\n                                <uif-panel\n                                  uif-type="medium"\n                                  uif-is-open="overflowPanelIsOpen"\n                                  uif-show-overlay="true"\n                                  uif-show-close="true">\n                                  <uif-panel-header>{{members.length}} {{uifFacepileName}}</uif-panel-header>\n                                  <uif-content>\n                                    <div ng-repeat="member in members track by $index" title="{{member.primaryText}}" tabindex="0">\n                                      <uif-persona uif-style="round" uif-size="medium" uif-image-url="{{member.icon}}">\n                                        <uif-persona-initials uif-color="{{member.color}}">{{member.initials}}</uif-persona-initials>\n                                        <uif-persona-primary-text>{{member.primaryText}}</uif-persona-primary-text>\n                                        <uif-persona-secondary-text>{{member.secondaryText}}</uif-persona-secondary-text>\n                                      </uif-persona>\n                                    </div>\n                                  </uif-content>\n                                </uif-panel>\n                              </div>',this.scope={members:"=ngModel",uifFacepileName:"@uifFacepileName",uifOverflowLimit:"@"}}return e.factory=function(){var t=function(){return new e};return t},e}();t.FacepileDirective=i;var o=function(){function e(){this.transclude=!0,this.restrict="E",this.template='<button type="button"\n                                class="ms-Facepile-itemBtn ms-Facepile-itemBtn--addPerson js-addPerson"\n                                ng-click="peoplepickerPanelIsOpen = true;">\n                                  <i class="ms-Facepile-addPersonIcon ms-Icon ms-Icon--personAdd"></i>\n                             </button>\n                             <uif-panel\n                                uif-type="large"\n                                uif-is-open="peoplepickerPanelIsOpen"\n                                uif-show-overlay="true"\n                                uif-show-close="true">\n                              <uif-panel-header>{{peoplePickerPlaceholder}}</uif-panel-header>\n                              <uif-content>\n                               <uif-people-picker\n                                uif-people="onFacePileSearch"\n                                ng-model="parentScope.members"\n                                uif-search-delay="500"\n                                uif-type="facePile">\n                                 <uif-selected-people-header>\n                                  {{selectedFacePilePeople.length}} selected person(s)\n                                 </uif-selected-people-header>\n                                 <uif-people-search-more>\n                                   <uif-primary-text uif-search-for-text="You are searching for: ">\n                                    Search organization people\n                                  </uif-primary-text>\n                                 </uif-people-search-more>\n                               </uif-people-picker>\n                              </uif-content>\n                             </uif-panel>',this.scope={onFacePileSearch:"=uifPeople",peoplePickerPlaceholder:"@placeholder"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n){e.parentScope=e.$parent.$parent},e}();t.FacepileAddIconDirective=o,t.module=r.module("officeuifabric.components.facepile",["officeuifabric.components"]).directive("uifFacepile",i.factory()).directive("uifFacepileAddIcon",o.factory())},function(e,t,n){"use strict";var r=n(2),i=n(22),o=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}(),a=function(){function e(){this.restrict="E",this.template='<i class="ms-Icon ms-Icon--{{uifType}}" aria-hidden="true"></i>',this.scope={uifType:"@"},this.transclude=!0,this.controller=o,this.controllerAs="icon"}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){e.$watch("uifType",function(t,n){void 0===i.IconEnum[t]&&r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.icon - Unsupported icon: The icon ('"+e.uifType+"') is not supported by the Office UI Fabric. Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/icon/iconEnum.ts")})},e}();t.IconDirective=a,t.module=r.module("officeuifabric.components.icon",["officeuifabric.components"]).directive("uifIcon",a.factory())},function(e,t){"use strict";!function(e){e[e.alert=0]="alert",e[e.alert2=1]="alert2",e[e.alertOutline=2]="alertOutline",e[e.arrowDown=3]="arrowDown",e[e.arrowDown2=4]="arrowDown2",e[e.arrowDownLeft=5]="arrowDownLeft",e[e.arrowDownRight=6]="arrowDownRight",e[e.arrowLeft=7]="arrowLeft",e[e.arrowRight=8]="arrowRight",e[e.arrowUp=9]="arrowUp",e[e.arrowUp2=10]="arrowUp2",e[e.arrowUpLeft=11]="arrowUpLeft",e[e.arrowUpRight=12]="arrowUpRight",e[e.ascending=13]="ascending",e[e.at=14]="at",e[e.attachment=15]="attachment",e[e.bag=16]="bag",e[e.balloon=17]="balloon",e[e.bell=18]="bell",e[e.boards=19]="boards",e[e.bold=20]="bold",e[e.bookmark=21]="bookmark",e[e.books=22]="books",e[e.briefcase=23]="briefcase",e[e.bundle=24]="bundle",e[e.cake=25]="cake",e[e.calendar=26]="calendar",e[e.calendarDay=27]="calendarDay",e[e.calendarPublic=28]="calendarPublic",e[e.calendarWeek=29]="calendarWeek",e[e.calendarWorkWeek=30]="calendarWorkWeek",e[e.camera=31]="camera",e[e.car=32]="car",e[e.caretDown=33]="caretDown",e[e.caretDownLeft=34]="caretDownLeft",e[e.caretDownOutline=35]="caretDownOutline",e[e.caretDownRight=36]="caretDownRight",e[e.caretLeft=37]="caretLeft",e[e.caretLeftOutline=38]="caretLeftOutline",e[e.caretRight=39]="caretRight",e[e.caretRightOutline=40]="caretRightOutline",e[e.caretUp=41]="caretUp",e[e.caretUpLeft=42]="caretUpLeft",e[e.caretUpOutline=43]="caretUpOutline",e[e.caretUpRight=44]="caretUpRight",e[e.cart=45]="cart",e[e.cat=46]="cat",e[e.chart=47]="chart",e[e.chat=48]="chat",e[e.chatAdd=49]="chatAdd",e[e.check=50]="check",e[e.checkbox=51]="checkbox",e[e.checkboxCheck=52]="checkboxCheck",e[e.checkboxEmpty=53]="checkboxEmpty",e[e.checkboxMixed=54]="checkboxMixed",e[e.checkPeople=55]="checkPeople",e[e.chevronDown=56]="chevronDown",e[e.chevronLeft=57]="chevronLeft",e[e.chevronRight=58]="chevronRight",e[e.chevronsDown=59]="chevronsDown",e[e.chevronsLeft=60]="chevronsLeft",e[e.chevronsRight=61]="chevronsRight",e[e.chevronsUp=62]="chevronsUp",e[e.chevronThickDown=63]="chevronThickDown",e[e.chevronThickLeft=64]="chevronThickLeft",e[e.chevronThickRight=65]="chevronThickRight",e[e.chevronThickUp=66]="chevronThickUp",e[e.chevronThinDown=67]="chevronThinDown",e[e.chevronThinLeft=68]="chevronThinLeft",e[e.chevronThinRight=69]="chevronThinRight",e[e.chevronThinUp=70]="chevronThinUp",e[e.chevronUp=71]="chevronUp",e[e.circleBall=72]="circleBall",e[e.circleBalloons=73]="circleBalloons",e[e.circleCar=74]="circleCar",e[e.circleCat=75]="circleCat",e[e.circleCoffee=76]="circleCoffee",e[e.circleDog=77]="circleDog",e[e.circleEmpty=78]="circleEmpty",e[e.circleFill=79]="circleFill",e[e.circleFilled=80]="circleFilled",e[e.circleHalfFilled=81]="circleHalfFilled",e[e.circleInfo=82]="circleInfo",e[e.circleLightning=83]="circleLightning",e[e.circlePill=84]="circlePill",e[e.circlePlane=85]="circlePlane",e[e.circlePlus=86]="circlePlus",e[e.circlePoodle=87]="circlePoodle",e[e.circleUnfilled=88]="circleUnfilled",e[e.classNotebook=89]="classNotebook",e[e.classroom=90]="classroom",e[e.clock=91]="clock",e[e.clutter=92]="clutter",e[e.coffee=93]="coffee",e[e.collapse=94]="collapse",e[e.conflict=95]="conflict",e[e.contact=96]="contact",e[e.contactForm=97]="contactForm",e[e.contactPublic=98]="contactPublic",e[e.copy=99]="copy",e[e.creditCard=100]="creditCard",e[e.creditCardOutline=101]="creditCardOutline",e[e.dashboard=102]="dashboard",e[e.descending=103]="descending",e[e.desktop=104]="desktop",e[e.deviceWipe=105]="deviceWipe",e[e.dialpad=106]="dialpad",e[e.directions=107]="directions",e[e.document=108]="document",e[e.documentAdd=109]="documentAdd",e[e.documentForward=110]="documentForward",e[e.documentLandscape=111]="documentLandscape",e[e.documentPDF=112]="documentPDF",e[e.documentReply=113]="documentReply",e[e.documents=114]="documents",e[e.documentSearch=115]="documentSearch",e[e.dog=116]="dog",e[e.dogAlt=117]="dogAlt",e[e.dot=118]="dot",e[e.download=119]="download",e[e.drm=120]="drm",e[e.drop=121]="drop",e[e.dropdown=122]="dropdown",e[e.editBox=123]="editBox",e[e.ellipsis=124]="ellipsis",e[e.embed=125]="embed",e[e.event=126]="event",e[e.eventCancel=127]="eventCancel",e[e.eventInfo=128]="eventInfo",e[e.eventRecurring=129]="eventRecurring",e[e.eventShare=130]="eventShare",e[e.exclamation=131]="exclamation",e[e.expand=132]="expand",e[e.eye=133]="eye",e[e.favorites=134]="favorites",e[e.fax=135]="fax",e[e.fieldMail=136]="fieldMail",e[e.fieldNumber=137]="fieldNumber",e[e.fieldText=138]="fieldText",e[e.fieldTextBox=139]="fieldTextBox",e[e.fileDocument=140]="fileDocument",e[e.fileImage=141]="fileImage",e[e.filePDF=142]="filePDF",e[e.filter=143]="filter",e[e.filterClear=144]="filterClear",e[e.firstAid=145]="firstAid",e[e.flag=146]="flag",e[e.folder=147]="folder",e[e.folderMove=148]="folderMove",e[e.folderPublic=149]="folderPublic",e[e.folderSearch=150]="folderSearch",e[e.fontColor=151]="fontColor",e[e.fontDecrease=152]="fontDecrease",e[e.fontIncrease=153]="fontIncrease",e[e.frowny=154]="frowny",e[e.fullscreen=155]="fullscreen",e[e.gear=156]="gear",e[e.glasses=157]="glasses",e[e.globe=158]="globe",e[e.graph=159]="graph",e[e.group=160]="group",e[e.header=161]="header",e[e.heart=162]="heart",e[e.heartEmpty=163]="heartEmpty",e[e.hide=164]="hide",e[e.home=165]="home",e[e.inboxCheck=166]="inboxCheck",e[e.info=167]="info",e[e.infoCircle=168]="infoCircle",e[e.italic=169]="italic",e[e.key=170]="key",e[e.late=171]="late",e[e.lifesaver=172]="lifesaver",e[e.lifesaverLock=173]="lifesaverLock",e[e.lightBulb=174]="lightBulb",e[e.lightning=175]="lightning",e[e.link=176]="link",e[e.linkRemove=177]="linkRemove",e[e.listBullets=178]="listBullets",e[e.listCheck=179]="listCheck",e[e.listCheckbox=180]="listCheckbox",e[e.listGroup=181]="listGroup",e[e.listGroup2=182]="listGroup2",e[e.listNumbered=183]="listNumbered",e[e.lock=184]="lock",e[e.mail=185]="mail",e[e.mailCheck=186]="mailCheck",e[e.mailDown=187]="mailDown",e[e.mailEdit=188]="mailEdit",e[e.mailEmpty=189]="mailEmpty",e[e.mailError=190]="mailError",e[e.mailOpen=191]="mailOpen",e[e.mailPause=192]="mailPause",e[e.mailPublic=193]="mailPublic",e[e.mailRead=194]="mailRead",e[e.mailSend=195]="mailSend",e[e.mailSync=196]="mailSync",e[e.mailUnread=197]="mailUnread",e[e.mapMarker=198]="mapMarker",e[e.meal=199]="meal",e[e.menu=200]="menu",e[e.menu2=201]="menu2",e[e.merge=202]="merge",e[e.metadata=203]="metadata",e[e.microphone=204]="microphone",e[e.miniatures=205]="miniatures",e[e.minus=206]="minus",e[e.mobile=207]="mobile",e[e.money=208]="money",e[e.move=209]="move",e[e.multiChoice=210]="multiChoice",e[e.music=211]="music",e[e.navigate=212]="navigate",e[e["new"]=213]="new",e[e.newsfeed=214]="newsfeed",e[e.note=215]="note",e[e.notebook=216]="notebook",e[e.noteEdit=217]="noteEdit",e[e.noteForward=218]="noteForward",e[e.noteReply=219]="noteReply",e[e.notRecurring=220]="notRecurring",e[e.onedrive=221]="onedrive",e[e.onlineAdd=222]="onlineAdd",e[e.onlineJoin=223]="onlineJoin",e[e.oofReply=224]="oofReply",e[e.org=225]="org",e[e.page=226]="page",e[e.paint=227]="paint",e[e.panel=228]="panel",e[e.partner=229]="partner",e[e.pause=230]="pause",e[e.pencil=231]="pencil",e[e.people=232]="people",e[e.peopleAdd=233]="peopleAdd",e[e.peopleCheck=234]="peopleCheck",e[e.peopleError=235]="peopleError",e[e.peoplePause=236]="peoplePause",e[e.peopleRemove=237]="peopleRemove",e[e.peopleSecurity=238]="peopleSecurity",e[e.peopleSync=239]="peopleSync",
e[e.person=240]="person",e[e.personAdd=241]="personAdd",e[e.personRemove=242]="personRemove",e[e.phone=243]="phone",e[e.phoneAdd=244]="phoneAdd",e[e.phoneTransfer=245]="phoneTransfer",e[e.picture=246]="picture",e[e.pictureAdd=247]="pictureAdd",e[e.pictureEdit=248]="pictureEdit",e[e.pictureRemove=249]="pictureRemove",e[e.pill=250]="pill",e[e.pinDown=251]="pinDown",e[e.pinLeft=252]="pinLeft",e[e.placeholder=253]="placeholder",e[e.plane=254]="plane",e[e.play=255]="play",e[e.plus=256]="plus",e[e.plus2=257]="plus2",e[e.pointItem=258]="pointItem",e[e.popout=259]="popout",e[e.post=260]="post",e[e.print=261]="print",e[e.protectionCenter=262]="protectionCenter",e[e.question=263]="question",e[e.questionReverse=264]="questionReverse",e[e.quote=265]="quote",e[e.radioButton=266]="radioButton",e[e.reactivate=267]="reactivate",e[e.receiptCheck=268]="receiptCheck",e[e.receiptForward=269]="receiptForward",e[e.receiptReply=270]="receiptReply",e[e.refresh=271]="refresh",e[e.reload=272]="reload",e[e.reply=273]="reply",e[e.replyAll=274]="replyAll",e[e.replyAllAlt=275]="replyAllAlt",e[e.replyAlt=276]="replyAlt",e[e.ribbon=277]="ribbon",e[e.room=278]="room",e[e.save=279]="save",e[e.scheduling=280]="scheduling",e[e.search=281]="search",e[e.section=282]="section",e[e.sections=283]="sections",e[e.settings=284]="settings",e[e.share=285]="share",e[e.shield=286]="shield",e[e.sites=287]="sites",e[e.smiley=288]="smiley",e[e.soccer=289]="soccer",e[e.socialListening=290]="socialListening",e[e.sort=291]="sort",e[e.sortLines=292]="sortLines",e[e.split=293]="split",e[e.star=294]="star",e[e.starEmpty=295]="starEmpty",e[e.stopwatch=296]="stopwatch",e[e.story=297]="story",e[e.styleRemove=298]="styleRemove",e[e.subscribe=299]="subscribe",e[e.sun=300]="sun",e[e.sunAdd=301]="sunAdd",e[e.sunQuestion=302]="sunQuestion",e[e.support=303]="support",e[e.table=304]="table",e[e.tablet=305]="tablet",e[e.tag=306]="tag",e[e.taskRecurring=307]="taskRecurring",e[e.tasks=308]="tasks",e[e.teamwork=309]="teamwork",e[e.text=310]="text",e[e.textBox=311]="textBox",e[e.tile=312]="tile",e[e.timeline=313]="timeline",e[e.today=314]="today",e[e.toggle=315]="toggle",e[e.toggleMiddle=316]="toggleMiddle",e[e.touch=317]="touch",e[e.trash=318]="trash",e[e.triangleDown=319]="triangleDown",e[e.triangleEmptyDown=320]="triangleEmptyDown",e[e.triangleEmptyLeft=321]="triangleEmptyLeft",e[e.triangleEmptyRight=322]="triangleEmptyRight",e[e.triangleEmptyUp=323]="triangleEmptyUp",e[e.triangleLeft=324]="triangleLeft",e[e.triangleRight=325]="triangleRight",e[e.triangleUp=326]="triangleUp",e[e.trophy=327]="trophy",e[e.underline=328]="underline",e[e.unsubscribe=329]="unsubscribe",e[e.upload=330]="upload",e[e.video=331]="video",e[e.voicemail=332]="voicemail",e[e.voicemailForward=333]="voicemailForward",e[e.voicemailReply=334]="voicemailReply",e[e.waffle=335]="waffle",e[e.work=336]="work",e[e.wrench=337]="wrench",e[e.x=338]="x",e[e.xCircle=339]="xCircle"}(t.IconEnum||(t.IconEnum={})),t.IconEnum},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.scope=!1,this.template='<label class="ms-Label"><ng-transclude/></label>'}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n){r.isDefined(n.disabled)&&t.find("label").eq(0).addClass("is-disabled"),r.isDefined(n.required)&&t.find("label").eq(0).addClass("is-required")},e}();t.LabelDirective=i,t.module=r.module("officeuifabric.components.label",["officeuifabric.components"]).directive("uifLabel",i.factory())},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.restrict="E",this.template='<a ng-href="{{ ngHref }}" class="ms-Link" ng-transclude></a>',this.scope={ngHref:"@"},this.transclude=!0,this.replace=!0}return e.factory=function(){var t=function(){return new e};return t},e}();t.LinkDirective=i,t.module=r.module("officeuifabric.components.link",["officeuifabric.components"]).directive("uifLink",i.factory())},function(e,t,n){"use strict";var r=n(2),i=n(26),o=n(27),a=n(28),s=function(){function e(e,t){this.$scope=e,this.$log=t,this.$scope.items=[],this.$scope.selectedItems||(this.$scope.selectedItems=[])}return Object.defineProperty(e.prototype,"itemSelectMode",{get:function(){return this.$scope.itemSelectMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this.$scope.selectedItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.$scope.items},enumerable:!0,configurable:!0}),e.$inject=["$scope","$log"],e}(),l=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.template='<ul class="ms-List" ng-transclude></ul>',this.controller=s,this.controllerAs="list",this.scope={selectedItems:"=?uifSelectedItems"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){void 0!==n.uifLayout&&null!==n.uifLayout&&(void 0===a.ListLayoutEnum[n.uifLayout]?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. '"+n.uifLayout+"' is not a valid option for 'uif-layout'. Valid options are list|grid."):e.layout=n.uifLayout),void 0===e.layout&&(e.layout=a.ListLayoutEnum[a.ListLayoutEnum.list]),e.layout===a.ListLayoutEnum[a.ListLayoutEnum.grid]&&t.children().eq(0).addClass("ms-List--grid"),void 0!==n.uifItemSelectMode&&null!==n.uifItemSelectMode&&(void 0===i.ListItemSelectModeEnum[n.uifItemSelectMode]?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. '"+n.uifItemSelectMode+"' is not a valid option for 'uif-item-select-mode'. Valid options are none|single|multiple."):e.itemSelectMode=n.uifItemSelectMode),void 0===e.itemSelectMode&&(e.itemSelectMode=i.ListItemSelectModeEnum[i.ListItemSelectModeEnum.none])},e}();t.ListDirective=l;var c=function(){function e(e,t){this.$scope=e,this.$log=t}return e.$inject=["$scope","$log"],e}(),u=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.template='<li class="ms-ListItem" ng-transclude></li>',this.require="^uifList",this.scope={item:"=uifItem"},this.controller=c}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){if(void 0!==n.uifSelected&&null!==n.uifSelected){var a=n.uifSelected.toLowerCase();"true"!==a&&"false"!==a?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. '"+n.uifSelected+"' is not a valid boolean value. Valid options are true|false."):"true"===a&&(e.selected=!0)}if(e.item&&r.selectedItems.length>0)for(var s=0;s<r.selectedItems.length;s++)r.selectedItems[s]===e.item&&(e.selected=!0);switch(void 0!==n.uifType&&null!==n.uifType&&(void 0===o.ListItemTypeEnum[n.uifType]?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. '"+n.uifType+"' is not a valid option for 'uif-type'. Valid options are item|itemWithImage|itemWithIcon."):e.type=o.ListItemTypeEnum[n.uifType]),e.type){case o.ListItemTypeEnum.itemWithIcon:t.children().eq(0).addClass("ms-ListItem--document"),0===t.children().find("uif-list-item-icon").length&&r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. List item type itemWithIcon requires the uif-list-item-icon directive");break;case o.ListItemTypeEnum.itemWithImage:t.children().eq(0).addClass("ms-ListItem--image"),0===t.children().find("uif-list-item-image").length&&r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. List item type itemWithImage requires the uif-list-item-image directive")}if(void 0!==n.uifUnread&&null!==n.uifUnread){var l=n.uifUnread.toLowerCase();"true"!==l&&"false"!==l?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. '"+n.uifUnread+"' is not a valid boolean value. Valid options are true|false."):"true"===l&&(e.unread=!0)}if(void 0!==n.uifUnseen&&null!==n.uifUnseen){var c=n.uifUnseen.toLowerCase();"true"!==c&&"false"!==c?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.list. '"+n.uifUnseen+"' is not a valid boolean value. Valid options are true|false."):"true"===c&&(e.unseen=!0)}void 0!==e.item&&r.items.push(e),e.itemClick=function(t){e.selected=!e.selected,e.$apply()},e.$watch("selected",function(e,n,o){if(e===!0){if(r.itemSelectMode===i.ListItemSelectModeEnum[i.ListItemSelectModeEnum.single]&&(r.selectedItems.length=0,r.items))for(var a=0;a<r.items.length;a++)r.items[a]!==o&&(r.items[a].selected=!1);for(var s=!1,a=0;a<r.selectedItems.length;a++)if(r.selectedItems[a]===o.item){s=!0;break}s||r.selectedItems.push(o.item),t.children().eq(0).addClass("is-selected")}else{for(var a=0;a<r.selectedItems.length;a++)if(r.selectedItems[a]===o.item){r.selectedItems.splice(a,1);break}t.children().eq(0).removeClass("is-selected")}}),e.$watch("unread",function(e,n,r){e===!0?t.children().eq(0).addClass("is-unread"):t.children().eq(0).removeClass("is-unread")}),e.$watch("unseen",function(e,n,r){e===!0?t.children().eq(0).addClass("is-unseen"):t.children().eq(0).removeClass("is-unseen")}),r.itemSelectMode!==i.ListItemSelectModeEnum[i.ListItemSelectModeEnum.none]&&(t.on("click",e.itemClick),t.children().eq(0).addClass("is-selectable"))},e}();t.ListItemDirective=u;var d=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<span class="ms-ListItem-primaryText" ng-transclude></span>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemPrimaryTextDirective=d;var f=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<span class="ms-ListItem-secondaryText" ng-transclude></span>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemSecondaryTextDirective=f;var p=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<span class="ms-ListItem-tertiaryText" ng-transclude></span>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemTertiaryTextDirective=p;var h=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<span class="ms-ListItem-metaText" ng-transclude></span>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemMetaTextDirective=h;var m=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<div class="ms-ListItem-image" ng-transclude></div>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemImageDirective=m;var g=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<div class="ms-ListItem-itemIcon" ng-transclude></div>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemIconDirective=g;var v=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<div class="ms-ListItem-selectionTarget" ng-transclude></div>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemSelectionTargetDirective=v;var b=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<div class="ms-ListItem-actions" ng-transclude></div>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemActionsDirective=b;var y=function(){function e(){this.restrict="E",this.transclude=!0,this.template='<div class="ms-ListItem-action" ng-transclude></div>',this.replace=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.ListItemActionDirective=y,t.module=r.module("officeuifabric.components.list",["officeuifabric.components"]).directive("uifList",l.factory()).directive("uifListItem",u.factory()).directive("uifListItemPrimaryText",d.factory()).directive("uifListItemSecondaryText",f.factory()).directive("uifListItemTertiaryText",p.factory()).directive("uifListItemMetaText",h.factory()).directive("uifListItemImage",m.factory()).directive("uifListItemIcon",g.factory()).directive("uifListItemSelectionTarget",v.factory()).directive("uifListItemActions",b.factory()).directive("uifListItemAction",y.factory())},function(e,t){"use strict";!function(e){e[e.none=0]="none",e[e.single=1]="single",e[e.multiple=2]="multiple"}(t.ListItemSelectModeEnum||(t.ListItemSelectModeEnum={})),t.ListItemSelectModeEnum},function(e,t){"use strict";!function(e){e[e.item=0]="item",e[e.itemWithImage=1]="itemWithImage",e[e.itemWithIcon=2]="itemWithIcon"}(t.ListItemTypeEnum||(t.ListItemTypeEnum={})),t.ListItemTypeEnum},function(e,t){"use strict";!function(e){e[e.list=0]="list",e[e.grid=1]="grid"}(t.ListLayoutEnum||(t.ListLayoutEnum={})),t.ListLayoutEnum},function(e,t,n){"use strict";var r=n(2),i=function(){function e(e,t,n){this.$scope=e,this.$log=t,this.$window=n}return e.$inject=["$scope","$log","$window"],e}();t.MessageBannerController=i;var o=function(){function e(e,t){var n=this;this.$log=e,this.$timeout=t,this.controller=i,this.restrict="E",this.transclude=!0,this.replace=!1,this.require="uifMessageBanner",this.isExpanded=!1,this.template='\n    <div class="ms-MessageBanner" ng-show="uifIsVisible">\n    <div class="ms-MessageBanner-content">\n    <div class="ms-MessageBanner-text">\n    <div class="ms-MessageBanner-clipper"></div>\n    </div>\n    <uif-button type="button" uif-type="command" class="ms-MessageBanner-expand">\n    <uif-icon uif-type="chevronsDown" ng-show="!isExpanded"></uif-icon>\n    <uif-icon uif-type="chevronsUp" ng-show="isExpanded"></uif-icon>\n    </uif-button>\n    <div class="ms-MessageBanner-action">\n    <uif-button type="button" uif-type="primary" class="ms-fontColor-neutralLight" ng-click="uifAction()">{{ uifActionLabel }}</uif-button>\n    </div>\n    </div>\n    <uif-button type="button" uif-type="command" class="ms-MessageBanner-close" ng-click="uifOnClose()" style="height:52px">\n    <uif-icon uif-type="x"></uif-icon>\n    </uif-button>\n    </div>',this.scope={uifAction:"&",uifActionLabel:"@",uifIsVisible:"=?",uifOnClose:"&?"},this._textContainerMaxWidth=700,this._bufferElementsWidth=88,this._bufferElementsWidthSmall=35,this.SMALL_BREAK_POINT=480,this.link=function(e,t,i,o,a){e.uifActionLabel=i.uifActionLabel,e.isExpanded=!1,e.onResize=function(e){void 0===e&&(e=window.innerWidth),n._clientWidth=n._messageBanner[0].offsetWidth,e>=n.SMALL_BREAK_POINT?n._resizeRegular():n._resizeSmall()},n._initLocals(t),n.transcludeChilds(e,t,a),n._initTextWidth=n._clipper.children().eq(0)[0].offsetWidth,r.element(o.$window).bind("resize",function(){e.onResize(),e.$digest()}),r.element(n._chevronButton).bind("click",function(){n._toggleExpansion(e)}),r.element(n._closeButton).bind("click",function(){n._hideBanner(e)}),e.onResize()}}return e.factory=function(){var t=function(t,n){return new e(t,n)};return t.$inject=["$log","$timeout"],t},e.prototype.transcludeChilds=function(e,t,n){var r=this;n(function(n){var i=r.hasItemContent(n);i||r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.messagebanner - you need to provide a text for the message banner.\nFor <uif-message-banner> you need to specify<uif-content> as a child directive"),r.insertItemContent(n,e,t)})},e.prototype.insertItemContent=function(e,t,n){var i=r.element(n[0].querySelector(".ms-MessageBanner-clipper"));if(this.hasItemContent(e))for(var o=0;o<e.length;o++){var a=r.element(e[o]);if(a.hasClass("uif-content")){i.append(a);break}}},e.prototype.hasItemContent=function(e){for(var t=0;t<e.length;t++){var n=r.element(e[t]);if(n.hasClass("uif-content"))return!0}return!1},e.prototype._initLocals=function(e){this._messageBanner=r.element(e[0].querySelector(".ms-MessageBanner")),this._clipper=r.element(e[0].querySelector(".ms-MessageBanner-clipper")),this._chevronButton=r.element(e[0].querySelectorAll(".ms-MessageBanner-expand")),this._actionButton=r.element(e[0].querySelector(".ms-MessageBanner-action")),this._bufferSize=this._actionButton[0].offsetWidth+this._bufferElementsWidth,this._closeButton=r.element(e[0].querySelector(".ms-MessageBanner-close"))},e.prototype._resizeRegular=function(){this._clientWidth-this._bufferSize>this._initTextWidth&&this._initTextWidth<this._textContainerMaxWidth?(this._textWidth="auto",this._chevronButton[0].className="ms-MessageBanner-expand"):(this._textWidth=Math.min(this._clientWidth-this._bufferSize,this._textContainerMaxWidth)+"px",this._chevronButton.hasClass("is-visible")||(this._chevronButton[0].className+=" is-visible")),this._clipper[0].style.width=this._textWidth,this._chevronButton[0].style.height="52px"},e.prototype._resizeSmall=function(){this._clientWidth-(this._bufferElementsWidthSmall+this._closeButton[0].offsetWidth)>this._initTextWidth?this._textWidth="auto":this._textWidth=this._clientWidth-(this._bufferElementsWidthSmall+this._closeButton[0].offsetWidth)+"px",this._clipper[0].style.width=this._textWidth,this._chevronButton[0].style.height="85px"},e.prototype._toggleExpansion=function(e){e.isExpanded=!e.isExpanded,e.$digest(),this._messageBanner.toggleClass("is-expanded")},e.prototype._hideBanner=function(e){var t=this;e.uifIsVisible&&(this._messageBanner.addClass("hide"),this.$timeout(function(){e.uifIsVisible=!1,e.$apply(),t._messageBanner.removeClass("hide")},500))},e}();t.MessageBannerDirective=o,t.module=r.module("officeuifabric.components.messagebanner",["officeuifabric.components"]).directive("uifMessageBanner",o.factory())},function(e,t,n){"use strict";var r=n(2),i=n(31),o=function(){function e(e,t){this.$scope=e,this.$log=t}return e.$inject=["$scope","$log"],e}();t.MessageBarController=o;var a=function(){function e(e,t){var n=this;this.$log=e,this.$timeout=t,this.controller=o,this.restrict="E",this.transclude=!0,this.replace=!1,this.require="uifMessageBar",this.template='<div ng-class="[\'ms-MessageBar\', classType]"><div class="ms-MessageBar-content"><div class="ms-MessageBar-icon"><i ng-class="[\'ms-Icon\', iconType]"></i></div><div class="ms-MessageBar-text" /></div></div>',this.scope={uifType:"@"},this.link=function(e,t,r,o,a){e.iconType="ms-Icon--infoCircle",e.classType="",e.uifType=r.uifType,e.$watch("uifType",function(t,n){if("undefined"!=typeof t)if(void 0===i.MessageBarTypeEnum[t])o.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.messagebar - Unsupported type: The type ('"+e.uifType+"') is not supported by the Office UI Fabric. Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/messagebar/messageBarTypeEnum.ts");else{var r=" ms-MessageBar--";switch(e.classType=r+t,i.MessageBarTypeEnum[t]){case i.MessageBarTypeEnum.error:e.iconType="ms-Icon--xCircle";break;case i.MessageBarTypeEnum.remove:e.iconType="ms-Icon--minus ms-Icon--circle";break;case i.MessageBarTypeEnum.severewarning:e.iconType="ms-Icon--alert";break;case i.MessageBarTypeEnum.success:e.iconType="ms-Icon--checkboxCheck ms-Icon--circle"}}}),n.transcludeChilds(e,t,a)}}return e.factory=function(){var t=function(t,n){return new e(t,n)};return t.$inject=["$log","$timeout"],t},e.prototype.transcludeChilds=function(e,t,n){var r=this;n(function(n){var i=r.hasItemContent(n,"uif-content");i||r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.MessageBar - you need to provide a text for the message bar.\nFor <uif-message-bar> you need to specify<uif-content> as a child directive"),r.insertItemContent(n,e,t)})},e.prototype.insertItemContent=function(e,t,n){var i=r.element(n[0].querySelector(".ms-MessageBar-text"));if(this.hasItemContent(e,"uif-content"))for(var o=0;o<e.length;o++){var a=r.element(e[o]);if(a.hasClass("uif-content")){i.append(a);break}}if(this.hasItemContent(e,"ms-Link"))for(var o=0;o<e.length;o++){var a=r.element(e[o]);if(a.hasClass("ms-Link")){i.append(r.element("<br />")),i.append(a);break}}},e.prototype.hasItemContent=function(e,t){for(var n=0;n<e.length;n++){var i=r.element(e[n]);if(i.hasClass(t))return!0}return!1},e}();t.MessageBarDirective=a,t.module=r.module("officeuifabric.components.messagebar",["officeuifabric.components"]).directive("uifMessageBar",a.factory())},function(e,t){"use strict";!function(e){e[e.error=0]="error",e[e.remove=1]="remove",e[e.severewarning=2]="severewarning",e[e.success=3]="success",e[e.warning=4]="warning"}(t.MessageBarTypeEnum||(t.MessageBarTypeEnum={})),t.MessageBarTypeEnum},function(e,t,n){"use strict";var r=n(2),i=n(15),o=function(){function e(e,t,n,r){this.$scope=e,this.$animate=t,this.$element=n,this.$log=r}return e.prototype.openMobileMenu=function(){var e=this.$element.hasClass("is-open");this.$animate[e?"removeClass":"addClass"](this.$element,"is-open")},e.prototype.closeMobileMenu=function(){this.$element.hasClass("is-open")&&this.$animate.removeClass(this.$element,"is-open")},e.prototype.closeAllContextMenus=function(){for(var e=this.$element[0].querySelectorAll(".ms-NavBar-item"),t=0;t<e.length;t++){var n=r.element(e[t]),i=n.controller(c.directiveName);i&&(i.closeContextualMenu(),i.deselectItem())}},e.prototype.hideSearchTextBox=function(){for(var e=this.$element[0].querySelectorAll(".ms-NavBar-item--search"),t=0;t<e.length;t++){var n=r.element(e[t]),i=n.controller(d.directiveName);i&&i.closeSearch()}},e.$inject=["$scope","$animate","$element","$log"],e}();t.NavBarController=o;var a=function(){function e(e,t,n){var i=this;this.$log=e,this.$animate=t,this.$document=n,this.replace=!0,this.restrict="E",this.transclude=!0,this.controller=o,this.controllerAs="nav",this.template='\n  <div class="ms-NavBar">\n    <div class="ms-NavBar-openMenu js-openMenu" ng-click="nav.openMobileMenu()">\n      <uif-icon uif-type="menu"></uif-icon>\n    </div>\n    <uif-overlay uif-mode="{{overlay}}" ng-click="nav.closeMobileMenu()"></uif-overlay>\n    <ul class="ms-NavBar-items">\n      <div class=\'uif-nav-items\'></div>\n    </ul>\n  </div>',this.scope={overlay:"@?uifOverlay"},this.link=function(e,t,n,o,a){i.$document.on("click",function(){o.closeAllContextMenus(),o.hideSearchTextBox()}),a(function(e){var n=r.element(t[0].querySelector(".uif-nav-items"));n.replaceWith(e)})}}return e.factory=function(){var t=function(t,n,r){return new e(t,n,r)};return t.$inject=["$log","$animate","$document"],t},e.directiveName="uifNavBar",e.overlayValues=["light","dark"],e}();t.NavBarDirective=a;var s;!function(e){e[e.link=0]="link",e[e.menu=1]="menu"}(s||(s={}));var l=function(){function e(e,t){this.$scope=e,this.$element=t}return e.prototype.closeContextualMenu=function(){this.$scope.hasChildMenu&&this.$scope.contextMenuCtrl.closeMenu()},e.prototype.deselectItem=function(){this.$element.removeClass("is-selected")},e.$inject=["$scope","$element"],e}();t.NavBarItemController=l;var c=function(){function e(e){var t=this;this.$log=e,this.replace=!0,this.restrict="E",this.transclude=!0,this.controller=l,this.require="^"+a.directiveName,this.scope={isDisabled:"@?disabled",position:"@?uifPosition",text:"=?uifText",type:"@?uifType"},this.templateTypes={},this.template=function(e,n){var i=n.uifType;return r.isUndefined(i)?t.templateTypes[s.link]:void 0===s[i]?(t.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.navbar - unsupported nav bar item type:\nthe type '"+i+"' is not supported by ng-Office UI Fabric as valid type for nav bar item.Supported types can be found under NavBarItemTypes enum here:\nhttps://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/navbar/navbarDirective.ts"),"<div></div>"):t.templateTypes[s[i]]},this.link=function(e,n,o,a,l){if(e.isDisabled){var c=r.element(n[0].querySelector(".ms-NavBar-link"));c.removeAttr("href")}r.isUndefined(e.type)&&(e.type=s[s.link]),e.selectItem=function(t){t.stopPropagation(),n.hasClass("is-disabled")||(n.parent().find("li").removeClass("is-selected"),a.closeAllContextMenus(),a.hideSearchTextBox(),n.toggleClass("is-selected"),e.hasChildMenu&&e.contextMenuCtrl.isMenuOpened()?(e.contextMenuCtrl.closeMenu(),n.removeClass("is-selected")):e.hasChildMenu&&!e.contextMenuCtrl.isMenuOpened()?(e.contextMenuCtrl.openMenu(),n.addClass("is-selected")):e.hasChildMenu||a.closeMobileMenu(),e.$apply())},n.on("click",e.selectItem),t.transcludeChilds(e,n,l);var u=r.element(n[0].querySelector(".ms-ContextualMenu")).controller(i.ContextualMenuDirective.directiveName);u&&(e.hasChildMenu=!0,e.contextMenuCtrl=u,e.contextMenuCtrl.onRootMenuClosed.push(function(){a.closeMobileMenu(),n.removeClass("is-selected")}))},this.templateTypes[s.link]="\n    <li class=\"ms-NavBar-item\"\n    ng-class=\"{'is-disabled': isDisabled, 'ms-NavBar-item--right': position === 'right'}\">\n      <a class=\"ms-NavBar-link\" href=\"\"><span class='uif-nav-item-content'></span></a>\n    </li>",this.templateTypes[s.menu]='\n    <li class="ms-NavBar-item ms-NavBar-item--hasMenu" ng-class="{\'is-disabled\': isDisabled}">\n      <a class="ms-NavBar-link" href=""><span class=\'uif-nav-item-content\'></span></a>\n      <i class="ms-NavBar-chevronDown ms-Icon ms-Icon--chevronDown"></i>\n      <div class=\'uif-submenu\'></div>\n    </li>'}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$log"],t},e.prototype.transcludeChilds=function(e,t,n){var r=this;n(function(n){var i=r.hasItemContent(n);i||e.text||r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.navbar - you need to provide a text for a nav bar menu item.\nFor <uif-nav-bar-item> you need to specify either 'uif-text' as attribute or <uif-nav-item-content> as a child directive"),r.insertLink(n,e,t),r.insertMenu(n,e,t)})},e.prototype.insertLink=function(e,t,n){var i=r.element(n[0].querySelector(".uif-nav-item-content"));if(this.hasItemContent(e))for(var o=0;o<e.length;o++){var a=r.element(e[o]);if(a.hasClass("uif-content")){i.replaceWith(a);break}}else i.replaceWith(r.element("<span>"+t.text+"</span>"))},e.prototype.insertMenu=function(e,t,n){for(var i=0;i<e.length;i++){var o=r.element(e[i]);o.hasClass("ms-ContextualMenu")&&r.element(n[0].querySelector(".uif-submenu")).replaceWith(o)}},e.prototype.hasItemContent=function(e){for(var t=0;t<e.length;t++){var n=r.element(e[t]);if(n.hasClass("uif-content"))return!0}return!1},e.directiveName="uifNavBarItem",e}();t.NavBarItemDirective=c;var u=function(){function e(e,t,n,r,i){this.$scope=e,this.$element=t,this.$document=n,this.$animate=r,this.$timeout=i}return e.prototype.closeSearch=function(){var e=this;this.$timeout(function(){e.$scope.searchText||e.$animate.removeClass(e.$element,"is-open"),e.$animate.removeClass(e.$element,"is-selected")})},e.$inject=["$scope","$element","$document","$animate","$timeout"],e}();t.NavBarSearchController=u;var d=function(){function e(t,n,r){var i=this;this.$document=t,this.$animate=n,this.$timeout=r,this.replace=!0,this.restrict="E",this.controller=u,this.require=["^"+a.directiveName,""+e.directiveName],this.transclude=!0,this.scope={onSearchCallback:"&?uifOnSearch",placeholder:"@?placeholder"},this.template='\n    <li class="ms-NavBar-item ms-NavBar-item--search ms-u-hiddenSm" ng-click="onSearch($event)">\n      <div class="ms-TextField" ng-click="skipOnClick($event)">\n        <input placeholder={{placeholder}} class="ms-TextField-field" type="text" ng-keypress="onSearch($event)" ng-model="searchText">\n      </div>\n    </li>',this.link=function(e,t,n,r,o){i.$document.on("click",function(){r[1].closeSearch()}),e.skipOnClick=function(e){i.applyCssClasses(t),e.stopPropagation()},e.onSearch=function(n){r[0].closeAllContextMenus(),n instanceof KeyboardEvent&&13===n.which&&e.onSearchCallback?e.onSearchCallback({search:e.searchText}):n instanceof MouseEvent&&t.hasClass("is-open")&&e.onSearchCallback&&e.onSearchCallback({search:e.searchText}),i.applyCssClasses(t),n.stopPropagation()}}}return e.factory=function(){var t=function(t,n,r){return new e(t,n,r)};return t.$inject=["$document","$animate","$timeout"],t},e.prototype.applyCssClasses=function(e){e.hasClass("is-open")||(this.$animate.addClass(e,"is-open"),this.$timeout(function(){r.element(e[0].querySelector(".ms-TextField-field"))[0].focus()},1)),e.parent().find("li").removeClass("is-selected"),this.$animate.addClass(e,"is-selected")},e.directiveName="uifNavBarSearch",e}();t.NavBarSearch=d,t.module=r.module("officeuifabric.components.navbar",["officeuifabric.components"]).directive(a.directiveName,a.factory()).directive(c.directiveName,c.factory()).directive(d.directiveName,d.factory())},function(e,t,n){"use strict";var r=n(2),i=n(34),o=(function(){function e(e){this.log=e}return e.$inject=["$log"],e}(),function(){function e(t){this.log=t,this.restrict="E",this.template="<div class=\"ms-Overlay\" ng-class=\"{'ms-Overlay--dark': uifMode == 'dark'}\" ng-transclude></div>",this.scope={uifMode:"@"},this.transclude=!0,e.log=t}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$log"],t},e.prototype.link=function(t){t.$watch("uifMode",function(n,r){void 0===i.OverlayMode[n]&&e.log.error("Error [ngOfficeUiFabric] officeuifabric.components.overlay - Unsupported overlay mode: The overlay mode ('"+t.uifMode+"') is not supported by the Office UI Fabric. Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/overlay/overlayModeEnum.ts")})},e}());t.OverlayDirective=o,t.module=r.module("officeuifabric.components.overlay",["officeuifabric.components"]).directive("uifOverlay",o.factory())},function(e,t){"use strict";!function(e){e[e.light=0]="light",e[e.dark=1]="dark"}(t.OverlayMode||(t.OverlayMode={})),t.OverlayMode},function(e,t,n){"use strict";var r=n(2),i=n(36),o=function(){function e(e,t,n){this.$log=e,this.$animate=t,this.$timeout=n,this.restrict="E",this.template='<div class="ms-Panel">\n                              <div  class="ms-Overlay"\n                                    ng-click="closePanel()"\n                                    ng-class="uifShowOverlay === true ? \'ms-Overlay--dark\' : \'\';"></div>\n                              <div class="ms-Panel-main">\n                                <div class="ms-Panel-commands">\n                                  <button type="button" ng-if="uifShowClose" class=\'ms-Panel-closeButton\' ng-click="closePanel()">\n                                    <uif-icon uif-type=\'x\'></uif-icon>\n                                  </button>\n                                </div>\n                                <div class="ms-Panel-contentInner">\n                                </div>\n                              </div>\n                             </div>',this.transclude=!0,this.replace=!0,this.controller=a,this.scope={uifIsOpen:"=",uifShowClose:"=",uifShowOverlay:"=",uifType:"@"}}return e.factory=function(){var t=function(t,n,r){return new e(t,n,r)};return t.$inject=["$log","$animate","$timeout"],t},e.prototype.compile=function(e,t,n){return{pre:this.preLink}},e.prototype.preLink=function(e,t,n,i,o){o(function(n){for(var i=0;i<n.length;i++)r.element(n[i]).hasClass("ms-CommandBar")?r.element(t[0].querySelector("div.ms-Panel-commands")).prepend(n[i]):"left"===e.uifType?r.element(t[0].querySelector("div.ms-Panel-main")).append(n[i]):r.element(t[0].querySelector("div.ms-Panel-contentInner")).append(n[i])}),e.closePanel=function(){e.uifIsOpen=!1}},e}();t.PanelDirective=o;var a=function(){function e(e,t,n,o,a){var s=this;this.$scope=e,this.$animate=t,this.$element=n,this.$log=o,this.$timeout=a,this.uifPanelSizeClasses=(c={},c[i.PanelTypes.small]="ms-Panel--sm",c[i.PanelTypes.medium]="ms-Panel--md",c[i.PanelTypes.large]="ms-Panel--lg",c[i.PanelTypes.extralarge]="ms-Panel--xl",c[i.PanelTypes.extraextralarge]="ms-Panel--xxl",c[i.PanelTypes.left]="ms-Panel--left",c),e.uifType||(e.uifType="medium"),void 0===i.PanelTypes[e.uifType]&&(this.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.panel - unsupported panel type:\nthe type '"+e.uifType+"' is not supported by ng-Office UI Fabric as valid type for panels.Supported types can be found under PanelTypes enum here:\nhttps://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/panel/panel.ts"),e.uifType="medium");var l=i.PanelTypes[e.uifType];n.addClass(this.uifPanelSizeClasses[l]),e.$watch("uifIsOpen",function(e){
"boolean"!=typeof e&&void 0!==e&&s.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.panel - invalid attribute type: 'uif-is-open'.\nThe type '"+typeof e+"' is not supported as valid type for 'uif-is-open' attribute for <uif-panel/>. The valid type is boolean."),e===!0?(t.addClass(s.$element,"ms-Panel-animateIn"),n.addClass("is-open"),n[0].querySelector(".ms-CommandBar")&&r.element(n[0].querySelector(".ms-CommandBar")).scope().$broadcast("uif-command-bar-resize")):(t.addClass(s.$element,"ms-Panel-animateOut"),a(function(){n.removeClass("ms-Panel-animateIn ms-Panel-animateOut"),n.removeClass("is-open")},500))});var c}return e.$inject=["$scope","$animate","$element","$log","$timeout"],e}();t.PanelController=a;var s=function(){function e(){this.restrict="E",this.template='<p class="ms-Panel-headerText" ng-transclude></div>',this.transclude=!0,this.replace=!0,this.scope={uifHeaderText:"@"}}return e.factory=function(){var t=function(){return new e};return t},e}();t.PanelHeaderDirective=s,t.module=r.module("officeuifabric.components.panel",["officeuifabric.components"]).directive("uifPanel",o.factory()).directive("uifPanelHeader",s.factory())},function(e,t){"use strict";!function(e){e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large",e[e.extralarge=3]="extralarge",e[e.extraextralarge=4]="extraextralarge",e[e.left=5]="left"}(t.PanelTypes||(t.PanelTypes={})),t.PanelTypes},function(e,t,n){"use strict";var r=n(2),i=n(38),o=n(39),a=n(40),s=n(41),l=function(){function e(){var e=this;this.restrict="E",this.transclude=!0,this.replace=!0,this.require=["uifPersonaCard"],this.controller=c,this.scope={uifImageUrl:"@",uifPresence:"@",uifSize:"@"},this.template='<div class="ms-PersonaCard" ng-class="getPersonaCardClasses()"><div class="ms-PersonaCard-persona"><div class="ms-Persona" ng-class="getPersonaClasses()"><div class="ms-Persona-imageArea"><uif-icon uif-type="person"></uif-icon><img class="ms-Persona-image" ng-src="{{uifImageUrl}}" ng-if="uifImageUrl"></div><div class="ms-Persona-presence"></div><div class="ms-Persona-details"></div></div></div><ul class="ms-PersonaCard-actions"><li ng-repeat="action in personaCardActions" ng-class="getActionClasses(action)" ng-click="selectAction($event, action)"><uif-icon uif-type={{action.icon}} ng-if="action.placeholder != \'overflow\'"></uif-icon></li></ul><div class="ms-PersonaCard-actionDetailBox"><ul ng-class="detailClass"></ul></div></div>',this.link=function(t,n,l,c,u){var d=c[0],f=n.find("uif-icon");return f.addClass("ms-Persona-placeholder"),r.isDefined(l.uifSize)&&r.isUndefined(i.PersonaSize[l.uifSize])?void d.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.personacard - "'+l.uifSize+'" is not a valid value for uifSize. It should be xsmall, small, medium, large, xlarge.'):r.isDefined(l.uifStyle)&&r.isUndefined(a.PersonaStyleEnum[l.uifStyle])?void d.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.personacard - "'+l.uifStyle+'" is not a valid value for uifStyle. It should be round or square.'):r.isDefined(l.uifPresence)&&r.isUndefined(s.PresenceEnum[l.uifPresence])?void d.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.personacard - "'+l.uifPresence+'" is not a valid value for uifPresence. It should be available, away, blocked, busy, dnd or offline.'):(t.getActionClasses=function(e){var t=[],n=o.PlaceholderEnum[e.placeholder];switch(n){case o.PlaceholderEnum.topright:t.push("ms-PersonaCard-action"),t.push("ms-PersonaCard-orgChart");break;case o.PlaceholderEnum.regular:t.push("ms-PersonaCard-action")}return e.isActive&&t.push("is-active"),t.join(" ")},t.getPersonaClasses=function(){var e=[];switch(a.PersonaStyleEnum[l.uifStyle]===a.PersonaStyleEnum.square&&e.push("ms-Persona--square"),i.PersonaSize[l.uifSize]){case i.PersonaSize.xsmall:e.push("ms-Persona--xs");break;case i.PersonaSize.small:e.push("ms-Persona--sm");break;case i.PersonaSize.large:e.push("ms-Persona--lg");break;case i.PersonaSize.xlarge:e.push("ms-Persona--xl")}switch(s.PresenceEnum[l.uifPresence]){case s.PresenceEnum.available:e.push("ms-Persona--available");break;case s.PresenceEnum.away:e.push("ms-Persona--away");break;case s.PresenceEnum.blocked:e.push("ms-Persona--blocked");break;case s.PresenceEnum.busy:e.push("ms-Persona--busy");break;case s.PresenceEnum.dnd:e.push("ms-Persona--dnd");break;default:e.push("ms-Persona--offline")}return e.join(" ")},t.getPersonaCardClasses=function(){return a.PersonaStyleEnum[l.uifStyle]===a.PersonaStyleEnum.square?"ms-PersonaCard--square":""},void u(function(i){for(var a=r.element(n[0].getElementsByClassName("ms-Persona-details")),s=r.element(n[0].getElementsByClassName("ms-PersonaCard-actionDetailBox")).find("ul").eq(0),l=r.element(n[0].getElementsByClassName("ms-PersonaCard-actions")),c=0;c<i.length;c++){var u=i[c].tagName;switch(u){case"UIF-PERSONA-CARD-PRIMARY-TEXT":case"UIF-PERSONA-CARD-SECONDARY-TEXT":case"UIF-PERSONA-CARD-TERTIARY-TEXT":case"UIF-PERSONA-CARD-OPTIONAL-TEXT":a.append(i[c]);break;case"UIF-PERSONA-CARD-ACTION":var f=r.element(i[c]),p=f.attr("uif-placeholder");o.PlaceholderEnum[p]===o.PlaceholderEnum.overflow?l.append(f):s.append(e.processAction(f,t,d))}}}))}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.processAction=function(e,t,n){var r="",i=e.attr("uif-placeholder"),a=e.attr("uif-icon"),s=new u(a,i);switch(i){case o.PlaceholderEnum[o.PlaceholderEnum.regular]:r="detail-"+ ++t.regularActionsCount;break;case o.PlaceholderEnum[o.PlaceholderEnum.topright]:r="detail-5"}return e.find("li").eq(0).addClass(r),s.detailClass=r,n.addAction(s),e},e}();t.PersonaCardDirective=l;var c=function(){function e(e,t){var n=this;this.$log=e,this.$scope=t,this.detailCss={1:"Chat",2:"Phone",3:"Video",4:"Mail",5:"Org"},t.personaCardActions=new Array,t.regularActionsCount=0,t.detailClass="ms-PersonaCard-detailChat",t.selectAction=function(e,r){t.personaCardActions.forEach(function(e){e.isActive=!1}),r.isActive=!0;var i=+r.detailClass.charAt(r.detailClass.length-1);t.detailClass="ms-PersonaCard-detail"+n.detailCss[i]}}return e.prototype.addAction=function(e){0===this.$scope.personaCardActions.length&&(e.isActive=!0),this.$scope.personaCardActions.push(e)},e.$inject=["$log","$scope"],e}();t.PersonaCardController=c;var u=function(){function e(e,t){this.icon=e,this.placeholder=t}return e}(),d=function(){function e(e){var t=this;this.directiveType=e,this.restrict="E",this.transclude=!0,this.replace=!1,this.scope=!1,this.availableClasses={optional:"ms-Persona-optionalText",primary:"ms-Persona-primaryText",secondary:"ms-Persona-secondaryText",tertiary:"ms-Persona-tertiaryText"},this.template=function(e,n){var r='<div class="'+t.availableClasses[t.directiveType]+'" ng-transclude></div>';return r},r.isUndefined(this.availableClasses[this.directiveType])&&(this.directiveType="optional")}return e.factory=function(t){var n=function(){return new e(t)};return n},e}();t.PersonaCardTextDirective=d;var f=function(){function e(e){var t=this;this.$log=e,this.restrict="E",this.transclude=!0,this.replace=!1,this.require="^?uifPersonaCard",this.scope=!1,this.template=function(e,n){return r.isDefined(n.uifPlaceholder)&&r.isUndefined(o.PlaceholderEnum[n.uifPlaceholder])?(t.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.personacard - "'+n.uifPlaceholder+'" is not a valid value for uifPlaceholder. It should be regular, topright or overflow.'),""):o.PlaceholderEnum[n.uifPlaceholder]===o.PlaceholderEnum.overflow?'<li class="ms-PersonaCard-overflow" ng-transclude></li>':'<li class="ms-PersonaCard-actionDetails" ng-transclude></li>'}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$log"],t},e}();t.PersonaCardActionDirective=f;var p=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.scope=!1,this.template='<span class="ms-PersonaCard-detailLabel" ng-transclude></span>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.PersonaCardDetailLabelDirective=p;var h=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.scope=!1,this.template='<div class="ms-PersonaCard-detailLine" ng-transclude></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.PersonaCardDetailLineDirective=h,t.module=r.module("officeuifabric.components.personacard",["officeuifabric.components"]).directive("uifPersonaCard",l.factory()).directive("uifPersonaCardAction",f.factory()).directive("uifPersonaCardDetailLabel",p.factory()).directive("uifPersonaCardDetailLine",h.factory()).directive("uifPersonaCardPrimaryText",d.factory("primary")).directive("uifPersonaCardSecondaryText",d.factory("secondary")).directive("uifPersonaCardTertiaryText",d.factory("tertiary")).directive("uifPersonaCardOptionalText",d.factory(""))},function(e,t){"use strict";!function(e){e[e.xsmall=0]="xsmall",e[e.small=1]="small",e[e.medium=2]="medium",e[e.large=3]="large",e[e.xlarge=4]="xlarge"}(t.PersonaSize||(t.PersonaSize={})),t.PersonaSize},function(e,t){"use strict";!function(e){e[e.regular=0]="regular",e[e.topright=1]="topright",e[e.overflow=2]="overflow"}(t.PlaceholderEnum||(t.PlaceholderEnum={})),t.PlaceholderEnum},function(e,t){"use strict";!function(e){e[e.round=0]="round",e[e.square=1]="square"}(t.PersonaStyleEnum||(t.PersonaStyleEnum={})),t.PersonaStyleEnum},function(e,t){"use strict";!function(e){e[e.available=0]="available",e[e.away=1]="away",e[e.blocked=2]="blocked",e[e.busy=3]="busy",e[e.dnd=4]="dnd",e[e.offline=5]="offline"}(t.PresenceEnum||(t.PresenceEnum={})),t.PresenceEnum},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(41),a=n(43),s=n(44),l=function(){function e(e){var t=this;this.directiveType=e,this.restrict="E",this.transclude=!0,this.replace=!1,this.scope=!1,this.availableClasses={optional:"ms-Persona-optionalText",primary:"ms-Persona-primaryText",secondary:"ms-Persona-secondaryText",tertiary:"ms-Persona-tertiaryText"},this.template=function(e,n){var r='<div class="'+t.availableClasses[t.directiveType]+'" ng-transclude></div>';return r},r.isUndefined(this.availableClasses[this.directiveType])&&(this.directiveType="optional")}return e.factory=function(t){var n=function(){return new e(t)};return n},e}();t.PersonaTextDirective=l;var c=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.require=["^uifPersona"],this.scope={uifColor:"@"},this.template='<div class="ms-Persona-initials ms-Persona-initials--{{uifColor}}" ng-transclude></div> ',this.link=function(e,t,n,i){var o=i[0];r.isUndefined(n.uifColor)&&(e.uifColor=a.PersonaInitialsColor[a.PersonaInitialsColor.blue]),e.$watch("uifColor",function(e){r.isUndefined(a.PersonaInitialsColor[e])&&o.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.persona - "'+e+'" is not a valid value for uifColor. It should be lightBlue, blue, darkBlue, teal, lightGreen, green, darkGreen, lightPink, pink, magenta, purple, black, orange, red or darkRed.')})}}return e.factory=function(){var t=function(){return new e};return t},e}();t.PersonaInitialsDirective=c;var u=function(){function e(){var e=this;this.restrict="E",this.transclude=!0,this.replace=!0,this.require=["uifPersona"],this.controller=d,this.scope={uifImageUrl:"@",uifPresence:"@",uifSize:"@"},this.template='<div class="ms-Persona" ng-class="getPersonaClasses()"><div class="ms-Persona-imageArea" ng-show="getImageAreaVisibility()"><img class="ms-Persona-image" ng-src="{{uifImageUrl}}" ng-if="uifImageUrl"></div><div class="ms-Persona-presence"></div><div class="ms-Persona-details"></div></div>',this.uifSizeClasses=(t={},t[s.PersonaSize.tiny]="ms-Persona--tiny",t[s.PersonaSize.xsmall]="ms-Persona--xs",t[s.PersonaSize.small]="ms-Persona--sm",t[s.PersonaSize.large]="ms-Persona--lg",t[s.PersonaSize.xlarge]="ms-Persona--xl",t),this.uifPresenceClasses=(n={},n[o.PresenceEnum.available]="ms-Persona--available",n[o.PresenceEnum.away]="ms-Persona--away",n[o.PresenceEnum.blocked]="ms-Persona--blocked",n[o.PresenceEnum.busy]="ms-Persona--busy",n[o.PresenceEnum.dnd]="ms-Persona--dnd",n[o.PresenceEnum.offline]="ms-Persona--offline",n),this.link=function(t,n,a,l,c){var u=l[0];return r.isDefined(a.uifSize)&&r.isUndefined(s.PersonaSize[a.uifSize])?void u.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.persona - "'+a.uifSize+'" is not a valid value for uifSize. It should be tiny, xsmall, small, medium, large, xlarge.'):r.isDefined(a.uifStyle)&&r.isUndefined(i.PersonaStyleEnum[a.uifStyle])?void u.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.persona - "'+a.uifStyle+'" is not a valid value for uifStyle. It should be round or square.'):r.isDefined(a.uifPresence)&&r.isUndefined(o.PresenceEnum[a.uifPresence])?void u.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.persona - "'+a.uifPresence+'" is not a valid value for uifPresence. It should be available, away, blocked, busy, dnd or offline.'):(t.getImageAreaVisibility=function(){return s.PersonaSize[a.uifSize]!==s.PersonaSize.tiny},t.getPersonaClasses=function(){var t=[],n=s.PersonaSize[a.uifSize],l=r.isDefined(a.uifPresence)?o.PresenceEnum[a.uifPresence]:o.PresenceEnum.offline;i.PersonaStyleEnum[a.uifStyle]===i.PersonaStyleEnum.square&&t.push("ms-Persona--square");var c=e.uifSizeClasses[n];return r.isDefined(c)&&t.push(c),t.push(e.uifPresenceClasses[l]),t.join(" ")},void c(function(e){for(var t=r.element(n[0].getElementsByClassName("ms-Persona-details")),i=r.element(n[0].getElementsByClassName("ms-Persona-imageArea")),o=0;o<e.length;o++){var a=e[o].tagName;switch(a){case"UIF-PERSONA-PRIMARY-TEXT":case"UIF-PERSONA-SECONDARY-TEXT":case"UIF-PERSONA-TERTIARY-TEXT":case"UIF-PERSONA-OPTIONAL-TEXT":t.append(e[o]);break;case"UIF-PERSONA-INITIALS":i.prepend(e[o])}}}))};var t,n}return e.factory=function(){var t=function(){return new e};return t},e}();t.PersonaDirective=u;var d=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}();t.PersonaController=d,t.module=r.module("officeuifabric.components.persona",["officeuifabric.components"]).directive("uifPersona",u.factory()).directive("uifPersonaInitials",c.factory()).directive("uifPersonaPrimaryText",l.factory("primary")).directive("uifPersonaSecondaryText",l.factory("secondary")).directive("uifPersonaTertiaryText",l.factory("tertiary")).directive("uifPersonaOptionalText",l.factory(""))},function(e,t){"use strict";!function(e){e[e.lightBlue=0]="lightBlue",e[e.blue=1]="blue",e[e.darkBlue=2]="darkBlue",e[e.teal=3]="teal",e[e.lightGreen=4]="lightGreen",e[e.green=5]="green",e[e.darkGreen=6]="darkGreen",e[e.lightPink=7]="lightPink",e[e.pink=8]="pink",e[e.magenta=9]="magenta",e[e.purple=10]="purple",e[e.black=11]="black",e[e.orange=12]="orange",e[e.red=13]="red",e[e.darkRed=14]="darkRed"}(t.PersonaInitialsColor||(t.PersonaInitialsColor={})),t.PersonaInitialsColor},function(e,t){"use strict";!function(e){e[e.tiny=0]="tiny",e[e.xsmall=1]="xsmall",e[e.small=2]="small",e[e.medium=3]="medium",e[e.large=4]="large",e[e.xlarge=5]="xlarge"}(t.PersonaSize||(t.PersonaSize={})),t.PersonaSize},function(e,t,n){"use strict";var r=n(2),i=n(46),o=n(47),a=function(){function e(e,t){this.$log=e,this.$scope=t,t.pivotClick=function(e){t.uifPivots.forEach(function(n,r){n.selected=r===e,n.selected&&(t.uifSelected=n)})}}return e.$inject=["$log","$scope"],e}();t.PivotController=a;var s=function(){function e(e){this.title=e}return e}();t.PivotItem=s;var l=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.template='<li class="ms-Pivot-link ms-Pivot-link--overflow"><uif-icon uif-type="ellipsis" class="ms-Pivot-ellipsis"></uif-icon><ng-transclude></ng-transclude></li>',this.scope=!1}return e.factory=function(){var t=function(){return new e};return t},e}();t.PivotEllipsisDirective=l;var c=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!1,this.controller=a,this.require=["uifPivot"],this.template='<ul class="ms-Pivot" ng-class="getClasses()" ><span ng-repeat-start="pivot in uifPivots"></span><li class="ms-Pivot-link" ng-click="pivotClick($index)" ng-class="{\'is-selected\': pivot.selected}">{{pivot.title}}</li> <span ng-repeat-end></span><ng-transclude></ng-transclude></ul>',this.scope={uifPivots:"=?",uifSelected:"=?",uifSize:"@",uifType:"@"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,a){var s=a[0];e.$watch("uifSize",function(e){r.isDefined(e)&&r.isUndefined(i.PivotSize[e])&&s.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.pivot - Unsupported size: "'+e+'" is not a valid value for uifSize. It should be regular or large.')}),e.$watch("uifType",function(e){r.isDefined(e)&&r.isUndefined(o.PivotType[e])&&s.$log.error('Error [ngOfficeUiFabric] officeuifabric.components.pivot - Unsupported size: "'+e+'" is not a valid value for uifType. It should be regular or tabs.')}),e.$watch("uifSelected",function(t,n){if(r.isDefined(t)){e.uifPivots.forEach(function(e){e.selected=e.title===t.title});var i=e.uifPivots.filter(function(e){return e.selected});if(i.length>1)for(var o=1;o<i.length;o++)i[o].selected=!1}}),e.getClasses=function(){var t="";return t+=o.PivotType[e.uifType]===o.PivotType.tabs?"ms-Pivot--tabs":"",t+=i.PivotSize[e.uifSize]===i.PivotSize.large?" ms-Pivot--large":""}},e}();t.PivotDirective=c,t.module=r.module("officeuifabric.components.pivot",["officeuifabric.components"]).directive("uifPivot",c.factory()).directive("uifPivotEllipsis",l.factory())},function(e,t){"use strict";!function(e){e[e.regular=0]="regular",e[e.large=1]="large"}(t.PivotSize||(t.PivotSize={})),t.PivotSize},function(e,t){"use strict";!function(e){e[e.regular=0]="regular",e[e.tabs=1]="tabs"}(t.PivotType||(t.PivotType={})),t.PivotType},function(e,t,n){"use strict";var r=n(2),i=function(){function e(t){this.log=t,this.restrict="E",this.template='<div class="ms-ProgressIndicator"><div class="ms-ProgressIndicator-itemName">{{uifName}}</div><div class="ms-ProgressIndicator-itemProgress"><div class="ms-ProgressIndicator-progressTrack"></div><div class="ms-ProgressIndicator-progressBar" ng-style="{width: uifPercentComplete+\'%\'}"></div></div><div class="ms-ProgressIndicator-itemDescription">{{uifDescription}}</div></div>',this.scope={uifDescription:"@",uifName:"@",uifPercentComplete:"@"},e.log=t}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$log"],t},e.prototype.link=function(t){t.$watch("uifPercentComplete",function(n,r){if(null==n||""===n)return void(t.uifPercentComplete=0);var i=parseFloat(n);(isNaN(i)||i<0||i>100)&&(e.log.error("Error [ngOfficeUiFabric] officeuifabric.components.progressindicator - Percent complete must be a valid number between 0 and 100."),t.uifPercentComplete=Math.max(Math.min(i,100),0))})},e}();t.ProgressIndicatorDirective=i,t.module=r.module("officeuifabric.components.progressindicator",["officeuifabric.components"]).directive("uifProgressIndicator",i.factory())},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.template='<div class="ms-SearchBox" ng-class="{\'is-active\':isActive, \'is-disabled\':isDisabled}"><input class="ms-SearchBox-field" ng-focus="inputFocus()" ng-blur="inputBlur()" ng-model="value" ng-change="inputChange()" id="{{::\'searchBox_\'+$id}}" ng-disabled="isDisabled" /><label class="ms-SearchBox-label" for="{{::\'searchBox_\'+$id}}" ng-hide="isLabelHidden"><i class="ms-SearchBox-icon ms-Icon ms-Icon--search" ></i> {{placeholder}}</label><button class="ms-SearchBox-closeButton" ng-mousedown="btnMousedown()" type="button"><i class="ms-Icon ms-Icon--x"></i></button></div>',this.require=["?ngModel"],this.scope={placeholder:"=?",value:"=?ngModel"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,i){var o;r.isDefined(i)&&i.length>0&&(o=i[0]),e.isFocus=!1,e.isCancel=!1,e.isLabelHidden=!1,e.isActive=!1,e.inputFocus=function(){e.isFocus=!0,e.isLabelHidden=!0,e.isActive=!0},e.inputChange=function(){null!==o&&o.$setDirty()},e.inputBlur=function(){e.isCancel&&(null!==o?o.$setViewValue(""):e.value="",e.isLabelHidden=!1),e.isActive=!1,"undefined"!=typeof e.value&&""!==e.value||(e.isLabelHidden=!1),e.isFocus=e.isCancel=!1,null!==o&&o.$setTouched()},e.btnMousedown=function(){e.isCancel=!0},e.$watch("value",function(t){e.isFocus||(t&&""!==t?e.isLabelHidden=!0:e.isLabelHidden=!1,e.value=t,null!==o?o.$setViewValue(t):e.value=t)}),e.$watch("placeholder",function(t){e.placeholder=t}),n.$observe("disabled",function(t){e.isDisabled=!!t})},e}();t.SearchBoxDirective=i,t.module=r.module("officeuifabric.components.searchbox",["officeuifabric.components"]).directive("uifSearchbox",i.factory())},function(e,t,n){"use strict";var r=n(2),i=n(51),o=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-Spinner"></div>',this.controller=a,this.scope={ngShow:"=",uifSize:"@"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,o,a){r.isDefined(n.uifSize)&&(r.isUndefined(i.SpinnerSize[n.uifSize])&&o.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.spinner - Unsupported size: Spinner size ('"+n.uifSize+"') is not supported by the Office UI Fabric."),i.SpinnerSize[n.uifSize]===i.SpinnerSize.large&&t.addClass("ms-Spinner--large")),null!=n.ngShow?e.$watch("ngShow",function(e,t,n){e?n.start():n.stop()}):e.start(),a(function(e){if(e.length>0){var n=r.element("<div></div>");n.addClass("ms-Spinner-label").append(e),t.append(n)}}),e.init()},e}();t.SpinnerDirective=o;var a=function(){function e(e,t,n,r){var o=this;this.$scope=e,this.$element=t,this.$interval=n,this.$log=r,this._offsetSize=.179,this._numCircles=8,this._animationSpeed=90,this._circles=[],e.init=function(){o._parentSize=i.SpinnerSize[o.$scope.uifSize]===i.SpinnerSize.large?28:20,o.createCirclesAndArrange(),o.setInitialOpacity()},e.start=function(){o._animationInterval=n(function(){for(var e=o._circles.length;e--;)o.fadeCircle(o._circles[e])},o._animationSpeed)},e.stop=function(){n.cancel(o._animationInterval)}}return e.prototype.createCirclesAndArrange=function(){for(var e=0,t=this._parentSize*this._offsetSize,n=2*Math.PI/this._numCircles,r=this._numCircles,i=.5*(this._parentSize-t);r--;){var o=this.createCircle(),a=Math.round(.5*this._parentSize+i*Math.cos(e)-.5*o[0].clientWidth)-.5*t,l=Math.round(.5*this._parentSize+i*Math.sin(e)-.5*o[0].clientHeight)-.5*t;this.$element.append(o),o.css("left",a+"px"),o.css("top",l+"px"),e+=n;var c=new s(o,r);this._circles.push(c)}},e.prototype.createCircle=function(){var e=r.element("<div></div>"),t=this._parentSize*this._offsetSize+"px";return e.addClass("ms-Spinner-circle").css("width",t).css("height",t),e},e.prototype.setInitialOpacity=function(){var e,t=this;this._fadeIncrement=1/this._numCircles,this._circles.forEach(function(n,r){e=t._fadeIncrement*(r+1),n.opacity=e})},e.prototype.fadeCircle=function(e){var t=e.opacity-this._fadeIncrement;t<=0&&(t=1),e.opacity=t},e.$inject=["$scope","$element","$interval","$log"],e}(),s=function(){function e(e,t){this.circleElement=e,this.circleIndex=t}return Object.defineProperty(e.prototype,"opacity",{get:function(){return+this.circleElement.css("opacity")},set:function(e){this.circleElement.css("opacity",e)},enumerable:!0,configurable:!0}),e}();t.module=r.module("officeuifabric.components.spinner",["officeuifabric.components"]).directive("uifSpinner",o.factory())},function(e,t){"use strict";!function(e){e[e.small=0]="small",e[e.large=1]="large"}(t.SpinnerSize||(t.SpinnerSize={})),t.SpinnerSize},function(e,t,n){"use strict";var r=n(2),i=n(53),o=n(54),a=function(){function e(e,t){this.$scope=e,this.$log=t,this.$scope.orderBy=null,this.$scope.orderAsc=!0,this.$scope.rows=[]}return Object.defineProperty(e.prototype,"orderBy",{get:function(){return this.$scope.orderBy},set:function(e){this.$scope.orderBy=e,this.$scope.$digest()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderAsc",{get:function(){return this.$scope.orderAsc},set:function(e){this.$scope.orderAsc=e,this.$scope.$digest()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowSelectMode",{get:function(){return this.$scope.rowSelectMode},set:function(e){void 0===i.TableRowSelectModeEnum[e]&&this.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.table. '"+e+"' is not a valid option for 'uif-row-select-mode'. Valid options are none|single|multiple."),this.$scope.rowSelectMode=e,this.$scope.$digest()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this.$scope.rows},set:function(e){this.$scope.rows=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){for(var e=[],t=0;t<this.rows.length;t++)this.rows[t].selected===!0&&e.push(this.rows[t].item);return e},enumerable:!0,configurable:!0}),e.$inject=["$scope","$log"],e}(),s=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template="<table ng-class=\"['ms-Table', tableTypeClass]\" ng-transclude></table>",this.controller=a,this.controllerAs="table"}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){void 0!==n.uifRowSelectMode&&null!==n.uifRowSelectMode&&(void 0===i.TableRowSelectModeEnum[n.uifRowSelectMode]?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.table. '"+n.uifRowSelectMode+"' is not a valid option for 'uif-row-select-mode'. Valid options are none|single|multiple."):e.rowSelectMode=n.uifRowSelectMode),void 0===e.rowSelectMode&&(e.rowSelectMode=i.TableRowSelectModeEnum[i.TableRowSelectModeEnum.none]),void 0!==n.uifTableType&&null!==n.uifTableType&&(void 0===o.TableTypeEnum[n.uifTableType]?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.table. '"+n.uifTableType+"' is not a valid option for 'uif-table-type'. Valid options are fixed|fluid."):e.tableType=n.uifTableType),void 0===e.tableType&&(e.tableType=o.TableTypeEnum[o.TableTypeEnum.fluid]),e.tableType===o.TableTypeEnum[o.TableTypeEnum.fixed]&&(e.tableTypeClass="ms-Table--fixed")},e}();t.TableDirective=s;var l=function(){function e(e,t){this.$scope=e,this.$log=t}return Object.defineProperty(e.prototype,"item",{get:function(){return this.$scope.item},set:function(e){this.$scope.item=e,this.$scope.$digest()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.$scope.selected},set:function(e){this.$scope.selected=e,this.$scope.$digest()},enumerable:!0,configurable:!0}),e.$inject=["$scope","$log"],e}(),c=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template="<tr ng-transclude></tr>",this.require="^uifTable",this.scope={item:"=uifItem"},this.controller=l}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){if(void 0!==n.uifSelected&&null!==n.uifSelected){var o=n.uifSelected.toLowerCase();"true"!==o&&"false"!==o?r.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.table. '"+n.uifSelected+"' is not a valid boolean value. Valid options are true|false."):"true"===o&&(e.selected=!0)}void 0!==e.item&&r.rows.push(e),e.rowClick=function(t){e.selected=!e.selected,e.$apply()},e.$watch("selected",function(e,n,o){if(e===!0){if(r.rowSelectMode===i.TableRowSelectModeEnum[i.TableRowSelectModeEnum.single]&&r.rows)for(var a=0;a<r.rows.length;a++)r.rows[a]!==o&&(r.rows[a].selected=!1);t.addClass("is-selected")}else t.removeClass("is-selected")}),r.rowSelectMode!==i.TableRowSelectModeEnum[i.TableRowSelectModeEnum.none]&&void 0!==e.item&&t.on("click",e.rowClick),r.rowSelectMode===i.TableRowSelectModeEnum[i.TableRowSelectModeEnum.none]&&t.css("cursor","default")},e}();t.TableRowDirective=c;var u=function(){function e(){this.restrict="E",this.template='<td class="ms-Table-rowCheck"></td>',this.replace=!0,this.require=["^uifTable","?^uifTableHead","^uifTableRow"]}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,o){var a=o[1];if(a){var s=r.element('<th class="ms-Table-rowCheck"></th>');t.replaceWith(s),t=s}e.rowSelectClick=function(t){var n=o[0],r=o[2];if(n.rowSelectMode===i.TableRowSelectModeEnum[i.TableRowSelectModeEnum.multiple]&&(void 0===r.item||null===r.item)){for(var a=!1,s=0;s<n.rows.length;s++)if(n.rows[s].selected!==!0){a=!0;break}for(var s=0;s<n.rows.length;s++)n.rows[s].selected!==a&&(n.rows[s].selected=a);e.$apply()}},t.on("click",e.rowSelectClick)},e}();t.TableRowSelectDirective=u;var d=function(){function e(){this.restrict="E",this.transclude=!0,this.template="<td ng-transclude></td>",this.replace=!0}return e.factory=function(){var t=function(){return new e};return t},e}();t.TableCellDirective=d;var f=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template="<th ng-transclude></th>",this.require="^uifTable"}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){e.headerClick=function(e){r.orderBy===n.uifOrderBy?r.orderAsc=!r.orderAsc:(r.orderBy=n.uifOrderBy,r.orderAsc=!0)},e.$watch("table.orderBy",function(e,r,i){if(r!==e&&e===n.uifOrderBy){for(var o=t.parent().children(),a=0;a<o.length;a++)2===o.eq(a).children().length&&o.eq(a).children().eq(1).remove();t.append('<span class="uif-sort-order">&nbsp;\t                <i class="ms-Icon ms-Icon--caretDown" aria-hidden="true"></i></span>')}}),e.$watch("table.orderAsc",function(e,n,r){if(2===t.children().length){var i=n?"ms-Icon--caretDown":"ms-Icon--caretUp",o=e?"ms-Icon--caretDown":"ms-Icon--caretUp";t.children().eq(1).children().eq(0).removeClass(i).addClass(o)}}),"uifOrderBy"in n&&t.on("click",e.headerClick)},e}();t.TableHeaderDirective=f;var p=function(){function e(){}return e}(),h=function(){function e(){this.restrict="E",this.transclude=!0,this.template="<thead ng-transclude></thead>",this.replace=!0,this.controller=p}return e.factory=function(){var t=function(){return new e};return t},e}();t.TableHeadDirective=h;var m=function(){function e(){this.restrict="E",this.transclude=!0,this.template="<tbody ng-transclude></tbody>",this.replace=!0}return e.factory=function(){var t=function(){return new e};return t},e}();t.TableBodyDirective=m,t.module=r.module("officeuifabric.components.table",["officeuifabric.components"]).directive("uifTable",s.factory()).directive("uifTableRow",c.factory()).directive("uifTableRowSelect",u.factory()).directive("uifTableCell",d.factory()).directive("uifTableHeader",f.factory()).directive("uifTableHead",h.factory()).directive("uifTableBody",m.factory())},function(e,t){"use strict";!function(e){e[e.none=0]="none",e[e.single=1]="single",e[e.multiple=2]="multiple"}(t.TableRowSelectModeEnum||(t.TableRowSelectModeEnum={})),t.TableRowSelectModeEnum},function(e,t){"use strict";!function(e){e[e.fluid=0]="fluid",e[e.fixed=1]="fixed"}(t.TableTypeEnum||(t.TableTypeEnum={})),t.TableTypeEnum},function(e,t,n){"use strict";var r=n(2),i=n(56),o=function(){function e(e){this.$log=e}return e.$inject=["$log"],e}(),a=function(){function e(){this.controller=o,this.template="<div ng-class=\"{'is-active': isActive, 'ms-TextField': true, 'ms-TextField--underlined': uifUnderlined, 'ms-TextField--placeholder': placeholder, 'is-required': required, 'is-disabled': disabled, 'ms-TextField--multiline' : uifMultiline }\">"+'<label ng-show="labelShown" class="ms-Label" ng-click="labelClick()">{{uifLabel || placeholder}}</label><input ng-model="ngModel" ng-change="inputChange()" ng-blur="inputBlur()" ng-focus="inputFocus()" ng-click="inputClick()" class="ms-TextField-field" ng-show="!uifMultiline" ng-disabled="disabled" type="{{uifType}}"min="{{min}}" max="{{max}}" step="{{step}}" /><textarea ng-model="ngModel" ng-blur="inputBlur()" ng-focus="inputFocus()" ng-click="inputClick()" class="ms-TextField-field" ng-show="uifMultiline" ng-disabled="disabled"></textarea><span class="ms-TextField-description">{{uifDescription}}</span></div>',this.scope={max:"@",min:"@",ngChange:"=?",
ngModel:"=?",placeholder:"@",step:"@",uifDescription:"@",uifLabel:"@"},this.require=["uifTextfield","?ngModel"],this.restrict="E"}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,o){var a=o[0],s=o[1];e.disabled="disabled"in n,e.$watch(function(){return t.attr("disabled")},function(t){e.disabled="undefined"!=typeof t}),e.labelShown=!0,e.required="required"in n,e.uifMultiline="true"===n.uifMultiline,e.uifType=n.uifType,e.$watch("uifType",function(t,n){"undefined"!=typeof t?void 0===i.InputTypeEnum[t]&&a.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.textfield - Unsupported type: The type ('"+e.uifType+"') is not supported by the Office UI Fabric. Supported options are listed here: https://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/textfield/uifTypeEnum.ts"):e.uifType=i.InputTypeEnum.text}),e.uifUnderlined="uifUnderlined"in n,e.inputFocus=function(t){e.placeholder&&(e.labelShown=!1),e.isActive=!0},e.inputBlur=function(n){var i=t.find("input");e.placeholder&&0===i.val().length&&(e.labelShown=!0),e.isActive=!1,r.isDefined(s)&&null!=s&&s.$setTouched()},e.labelClick=function(n){if(e.placeholder){var r=e.uifMultiline?t.find("textarea"):t.find("input");r[0].focus()}},e.inputChange=function(e){r.isDefined(s)&&null!=s&&s.$setDirty()},null!=s&&(s.$render=function(){e.placeholder&&(e.labelShown=!s.$viewValue)})},e}();t.TextFieldDirective=a,t.module=r.module("officeuifabric.components.textfield",["officeuifabric.components"]).directive("uifTextfield",a.factory())},function(e,t){"use strict";!function(e){e[e.text=0]="text",e[e.password=1]="password",e[e.email=2]="email",e[e.url=3]="url",e[e.tel=4]="tel",e[e.range=5]="range",e[e.number=6]="number"}(t.InputTypeEnum||(t.InputTypeEnum={})),t.InputTypeEnum},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.template='<div ng-class="[\'ms-Toggle\', textLocation, {\'is-disabled\': disabled}]"><span class="ms-Toggle-description"><ng-transclude/></span><input type="checkbox" id="{{::$id}}" class="ms-Toggle-input" ng-model="ngModel" ng-change="checkboxChange();ngChange()" ng-disabled="disabled" ng-attr-ng-true-value="{{ngTrueValue || undefined}}" ng-attr-ng-false-value="{{ngFalseValue || undefined}}" /><label for="{{::$id}}" class="ms-Toggle-field"><span class="ms-Label ms-Label--off">{{uifLabelOff}}</span><span class="ms-Label ms-Label--on">{{uifLabelOn}}</span></label></div>',this.restrict="E",this.transclude=!0,this.require=["?ngModel"],this.scope={ngChange:"&?",ngFalseValue:"@?",ngModel:"=?",ngTrueValue:"@?",uifLabelOff:"@",uifLabelOn:"@",uifTextLocation:"@"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,i){var o;if(r.isDefined(i)&&i.length>0&&(o=i[0]),e.uifTextLocation){var a=e.uifTextLocation;a=a.charAt(0).toUpperCase()+a.slice(1),e.textLocation=" ms-Toggle--text"+a}e.$watch(function(){return t.attr("disabled")},function(t){e.disabled="undefined"!=typeof t}),e.disabled="disabled"in n,e.checkboxChange=function(){r.isDefined(o)&&null!==o&&(o.$setDirty(),o.$setTouched())}},e}();t.ToggleDirective=i,t.module=r.module("officeuifabric.components.toggle",["officeuifabric.components"]).directive("uifToggle",i.factory())},function(e,t,n){"use strict";var r=n(2),i=n(59),o=n(60),a=n(61),s=function(){function e(e,t){this.$scope=e,this.$log=t,this.$scope.selectMode=null,this.$scope.items=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this.$scope.items},set:function(e){this.$scope.items=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this.$scope.selectedItems},set:function(e){this.$scope.selectedItems=e},enumerable:!0,configurable:!0}),e.$inject=["$scope","$log"],e}(),l=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-OrgChart" ng-transclude ></div>',this.controller=s,this.scope={selectedItems:"=?uifSelectedItems"}}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){if(n.uifSelectMode)switch(a.OrgChartSelectModeEnum[n.uifSelectMode]){case a.OrgChartSelectModeEnum.single:case a.OrgChartSelectModeEnum.multiple:r.selectMode=a.OrgChartSelectModeEnum[n.uifSelectMode];break;default:r.$log.error("Error [ngOfficeUIFabric] officeuifabric.components.orgchart - Unsupported select-mode: The select-mode ('"+n.uifSelectMode+") is not supperted. Supported options are: single, multiple")}},e}();t.OrgChartDirective=l;var c=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-OrgChart-group" ng-transclude ></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartGroupDirective=c;var u=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-OrgChart-groupTitle" ng-transclude ></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartGroupTitleDirective=u;var d=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<ul class="ms-OrgChart-list" ng-transclude ></ul>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartListDirective=d;var f=function(){function e(e){this.$log=e,this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<li class="ms-OrgChart-listItem"><div class="ms-Persona" ng-transclude ></div></li>',this.require="^uifOrgChart",this.scope={item:"=?uifItem",presence:"=?uifPresence",selected:"=?uifSelected"}}return e.factory=function(){var t=function(t){return new e(t)};return t.$inject=["$log"],t},e.prototype.compile=function(e,t,n){return{post:this.postLink}},e.prototype.postLink=function(e,t,n,r,s){if(void 0===e.selected&&(e.selected=!1),e.presence)switch(i.OrgChartPresenceEnum[e.presence]){case i.OrgChartPresenceEnum.available:t.children().eq(0).addClass("ms-Persona--available");break;case i.OrgChartPresenceEnum.busy:t.children().eq(0).addClass("ms-Persona--busy");break;case i.OrgChartPresenceEnum.away:t.children().eq(0).addClass("ms-Persona--away");break;case i.OrgChartPresenceEnum.blocked:t.children().eq(0).addClass("ms-Persona--blocked");break;case i.OrgChartPresenceEnum.dnd:t.children().eq(0).addClass("ms-Persona--dnd");break;case i.OrgChartPresenceEnum.offline:t.children().eq(0).addClass("ms-Persona--offline");break;default:r.$log.error("Error [ngOfficeUIFabric] officeuifabric.components.orgchart - Unsupported presence: The presence ('"+e.presence+"') is not supperted by the Office UI Fabric. Supported options are: available, busy, away, blocked, dnd, offline.")}if(n.uifStyle)switch(o.OrgChartStyleEnum[n.uifStyle]){case o.OrgChartStyleEnum.square:t.children().eq(0).addClass("ms-Persona--square");break;case o.OrgChartStyleEnum.standard:break;default:r.$log.error("Error [ngOfficeUIFabric] officeuifabric.components.orgchart - Unsupported style: The style ('"+n.uifStyle+") is not supperted by the Office UI Fabric. Supported options are: standard(default), square")}if(void 0!==r.selectMode&&t.children().eq(0).addClass("ms-Persona--selectable"),e.$watch("selected",function(e,n){void 0!==r.selectMode&&(e===!0?t.children().eq(0).addClass("is-selected"):t.children().eq(0).removeClass("is-selected"))}),e.item&&r.items.push(e),(r.selectMode===a.OrgChartSelectModeEnum.single||r.selectMode===a.OrgChartSelectModeEnum.multiple)&&e.selected){if(r.selectMode===a.OrgChartSelectModeEnum.single){r.selectedItems&&(r.selectedItems=[]);for(var l=0;l<r.items.length;l++)r.items[l]!==e&&(r.items[l].selected=!1)}t.children().eq(0).addClass("is-selected"),r.selectedItems&&r.selectedItems.push(e.item)}e.personaClick=function(n){if(e.selected=!e.selected,e.selected){if(r.selectMode===a.OrgChartSelectModeEnum.single){if(r.items)for(var i=0;i<r.items.length;i++)r.items[i]!==e&&(r.items[i].selected=!1);t.children().eq(0).addClass("is-selected"),r.selectedItems=[],r.selectedItems.push(e.item)}r.selectMode===a.OrgChartSelectModeEnum.multiple&&(t.children().eq(0).addClass("is-selected"),r.selectedItems&&r.selectedItems.push(e.item))}else if(t.children().eq(0).removeClass("is-selected"),r.selectedItems){var o=r.selectedItems.indexOf(e.item);o>-1&&r.selectedItems.splice(o,1)}e.$apply()},r.selectMode!==a.OrgChartSelectModeEnum.single&&r.selectMode!==a.OrgChartSelectModeEnum.multiple||!e.item||t.children().eq(0).on("click",e.personaClick)},e}();t.OrgChartPersonaDirective=f;var p=function(){function e(){this.restrict="E",this.replace=!0,this.template='\n    <div class="ms-Persona-imageArea">\n      <i class="ms-Persona-placeholder ms-Icon ms-Icon--person"></i>\n      <img class="ms-Persona-image" ng-src="{{ngSrc}}" />\n    </div>\n    ',this.scope={ngSrc:"="}}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartImageDirective=p;var h=function(){function e(){this.restrict="E",this.replace=!0,this.template='<div class="ms-Persona-presence" ></div>'}return e.factory=function(){var t=function(){return new e};return t},e.prototype.link=function(e,t,n,r){e.$parent.presence||t.css("display","none")},e}();t.OrgChartPresenceDirective=h;var m=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-Persona-details" ng-transclude ></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartDetailsDirective=m;var g=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-Persona-primaryText" ng-transclude ></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartPrimaryTextDirective=g;var v=function(){function e(){this.restrict="E",this.transclude=!0,this.replace=!0,this.template='<div class="ms-Persona-secondaryText" ng-transclude ></div>'}return e.factory=function(){var t=function(){return new e};return t},e}();t.OrgChartSecondaryTextDirective=v;var b=function(){function e(){}return e.factory=function(){return function(e,t){var n=[];if(e){for(var r=0;r<e.length;r++){var i=e[r][t];n.indexOf(i)===-1&&n.push(i)}return n}}},e}();t.OrgChartGroupByFilter=b,t.module=r.module("officeuifabric.components.orgchart",["officeuifabric.components"]).directive("uifOrgChart",l.factory()).directive("uifOrgChartGroup",c.factory()).directive("uifOrgChartGroupTitle",u.factory()).directive("uifOrgChartList",d.factory()).directive("uifOrgChartPersona",f.factory()).directive("uifOrgChartImage",p.factory()).directive("uifOrgChartPresence",h.factory()).directive("uifOrgChartDetails",m.factory()).directive("uifOrgChartPrimaryText",g.factory()).directive("uifOrgChartSecondaryText",v.factory()).filter("uifOrgChartGroupBy",b.factory)},function(e,t){"use strict";!function(e){e[e.available=0]="available",e[e.busy=1]="busy",e[e.away=2]="away",e[e.blocked=3]="blocked",e[e.dnd=4]="dnd",e[e.offline=5]="offline"}(t.OrgChartPresenceEnum||(t.OrgChartPresenceEnum={})),t.OrgChartPresenceEnum},function(e,t){"use strict";!function(e){e[e.standard=0]="standard",e[e.square=1]="square"}(t.OrgChartStyleEnum||(t.OrgChartStyleEnum={})),t.OrgChartStyleEnum},function(e,t){"use strict";!function(e){e[e.single=0]="single",e[e.multiple=1]="multiple"}(t.OrgChartSelectModeEnum||(t.OrgChartSelectModeEnum={})),t.OrgChartSelectModeEnum},function(e,t,n){"use strict";var r=n(2),i=n(40),o=n(44),a=n(22),s="uif-people-search",l=function(){function e(){this.people=[]}return e}();t.GroupedPeopleData=l;var c=function(){function e(e,t,n){this.$scope=e,this.$filter=t,this.$element=n}return e.prototype.getSelectedPersons=function(){return this.$scope.selectedPersons},e.prototype.pickerType=function(){var e=this.$scope.type;return r.isUndefined(e)?u[u.grouped]:this.$scope.type},e.prototype.searchQuery=function(){return this.$scope.searchQuery},e.prototype.search=function(){this.bindPeople(this.$scope.searchQuery),this.$scope.$broadcast(s,this.searchQuery())},e.prototype.bindPeople=function(e){var t=this,n=this.$scope.peopleCallback()(e);if(n=n||[],n instanceof Array)this.$scope.groups=this.createPeopleDataStructure(n);else if("function"==typeof n.then){var i=r.element(this.$element[0].querySelector(".ms-PeoplePicker-searchMore")).controller(""+h.directiveName);i&&i.isSearching(!0);var o=this;n.then(function(e){o.$scope.groups=t.createPeopleDataStructure(e)})["finally"](function(){i&&i.isSearching(!1)})}},e.prototype.createPeopleDataStructure=function(e){var t=this,n=[];return r.forEach(e,function(e){var r=t.$filter("filter")(n,{group:e.group}),i=1===r.length;if(i){var o=r[0];o.people.push(e)}else{var a=new l;a.group=e.group,a.people.push(e),n.push(a)}}),n},e.$inject=["$scope","$filter","$element"],e}();t.PeoplePickerController=c;var u;!function(e){e[e.grouped=0]="grouped",e[e.compact=1]="compact",e[e.memberList=2]="memberList",e[e.facePile=3]="facePile"}(u||(u={}));var d=function(){function e(t,n,s,l){var d=this;this.$document=t,this.$timeout=n,this.$log=s,this.$window=l,this.replace=!0,this.require=["ngModel",""+e.directiveName],this.restrict="E",this.transclude=!0,this.controller=c,this.scope={delay:"@uifSearchDelay",facePileHeader:"@?uifFacepileHeader",ngDisabled:"=?",ngModel:"=",onSelectedPersonClick:"&?uifSelectedPersonClick",peopleCallback:"&uifPeople",placeholder:"@?",type:"@?uifType"},this.templateTypes={},this.template=function(e,t){var n=t.uifType;if(r.isUndefined(n))return d.templateTypes[u.grouped];if(void 0===u[n])throw d.$log.error("Error [ngOfficeUiFabric] officeuifabric.components.peoplepicker - unsupported people picker type:\nthe type '"+n+"' is not supported by ng-Office UI Fabric as valid type for people picker.Supported types can be found under PeoplePickerTypes enum here:\nhttps://github.com/ngOfficeUIFabric/ng-officeuifabric/blob/master/src/components/peoplepicker/peoplePickerDirective.ts"),"[ngOfficeUiFabric] - Error";return d.templateTypes[u[n]]},this.link=function(e,t,n,i,o){var a=i[0],s=i[1];d.initDisabledState(t,e,n),e.facePileHeader=e.facePileHeader||"Suggested contacts",e.$watchCollection("selectedPersons",function(e,n,r){d.resizeSearchField(t)}),a.$render=function(){a.$viewValue?e.selectedPersons=a.$viewValue:e.selectedPersons=[],d.resizeSearchField(t)},s.search();var l=null;e.onSearchKeyUp=function(n){var i=r.element(t[0].querySelector(".ms-PeoplePicker-searchMore"));0!==i.length&&(e.searchQuery?t.addClass("is-searching"):t.removeClass("is-searching"),e.searchQuery?i.addClass("is-active"):i.removeClass("is-active"),d.animateSelectedPeople(t)),e.delay&&(null!=l&&d.$timeout.cancel(l),l=d.$timeout(function(){s.search()},e.delay))},e.onPeoplePickerActive=function(n){if(d.smoothScrollTo(t[0]),e.type!==u[u.facePile]){var i=r.element(t[0].querySelector(".ms-PeoplePicker-results"));i[0].style.width=t[0].clientWidth-2+"px"}else e.type===u[u.facePile]&&d.animateSelectedPeople(t);n.stopPropagation(),t.addClass("is-active")},e.addPersonToSelectedPeople=function(t){e.selectedPersons.indexOf(t)===-1&&(e.selectedPersons.push(t),a.$setViewValue(e.selectedPersons))},e.removePersonFromSelectedPeople=function(t,n){var r=e.selectedPersons.indexOf(t);e.selectedPersons.splice(r,1),a.$setViewValue(e.selectedPersons),n.stopPropagation()},e.removePersonFromSearchResults=function(e,t,n){n.stopPropagation();var r=e.indexOf(t);e.splice(r,1)},d.$document.on("click",function(){t.removeClass("is-active")}),e.type===u[u.facePile]&&o(function(n){d.insertFacePileHeader(n,e,t),d.insertFacePileSearchMore(n,e,t)})},this.templateTypes[u.grouped]='<div class="ms-PeoplePicker">\n        <div class="ms-PeoplePicker-searchBox">\n            <div class="ms-PeoplePicker-persona" ng-repeat="person in selectedPersons track by $index">\n              <uif-persona ng-click="onSelectedPersonClick()(person)"\n                uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.square]+'"\n                uif-size="'+o.PersonaSize[o.PersonaSize.xsmall]+'"\n                uif-presence="{{person.presence}}"\n                uif-image-url="{{person.icon}}">\n                <uif-persona-initials uif-color="{{person.color}}">{{person.initials}}</uif-persona-initials>\n                <uif-persona-primary-text>{{person.primaryText}}</uif-persona-primary-text>\n              </uif-persona>\n              <button type="button" ng-click="removePersonFromSelectedPeople(person, $event)" class="ms-PeoplePicker-personaRemove">\n                <uif-icon uif-type="'+a.IconEnum[a.IconEnum.x]+'"></uif-icon>\n              </button>\n            </div>\n            <input ng-click="onPeoplePickerActive($event)"\n            placeholder="{{placeholder}}"\n            ng-model="searchQuery"\n            class="ms-PeoplePicker-searchField"\n            ng-focus="onPeoplePickerActive($event)"\n            ng-keyup="onSearchKeyUp($event)"\n            type="text">\n        </div>\n        <div class="ms-PeoplePicker-results">\n          <div class="ms-PeoplePicker-resultGroups">\n            <div class="ms-PeoplePicker-resultGroup" ng-repeat="groupData in groups | orderBy:\'-order\'">\n              <div class="ms-PeoplePicker-resultGroupTitle">{{groupData.group.name}}</div>\n              <uif-people-picker-result-list\n              ng-model="groupData.people"\n              uif-person-click="addPersonToSelectedPeople"\n              uif-person-close-click="removePersonFromSearchResults"\n              uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.square]+'"\n              uif-size="'+o.PersonaSize[o.PersonaSize.medium]+'"></uif-people-picker-result-list>\n            </div>\n          </div>\n          <ng-transclude />\n        </div>\n      </div>',this.templateTypes[u.compact]='<div class="ms-PeoplePicker ms-PeoplePicker--compact">\n        <div class="ms-PeoplePicker-searchBox">\n            <div class="ms-PeoplePicker-persona" ng-repeat="person in selectedPersons track by $index">\n              <uif-persona ng-click="onSelectedPersonClick()(person)"\n                uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.square]+'"\n                uif-size="'+o.PersonaSize[o.PersonaSize.xsmall]+'"\n                uif-presence="{{person.presence}}"\n                uif-image-url="{{person.icon}}">\n                <uif-persona-initials uif-color="{{person.color}}">{{person.initials}}</uif-persona-initials>\n                <uif-persona-primary-text>{{person.primaryText}}</uif-persona-primary-text>\n              </uif-persona>\n              <button type="button" ng-click="removePersonFromSelectedPeople(person, $event)" class="ms-PeoplePicker-personaRemove">\n                <uif-icon uif-type="'+a.IconEnum[a.IconEnum.x]+'"></uif-icon>\n              </button>\n            </div>\n            <input ng-click="onPeoplePickerActive($event)"\n            ng-model="searchQuery"\n            placeholder="{{placeholder}}"\n            class="ms-PeoplePicker-searchField"\n            ng-focus="onPeoplePickerActive($event)"\n            ng-keyup="onSearchKeyUp($event)"\n            type="text">\n        </div>\n        <div class="ms-PeoplePicker-results">\n          <div class="ms-PeoplePicker-resultGroups">\n            <div class="ms-PeoplePicker-resultGroup" ng-repeat="groupData in groups | orderBy:\'-order\'">\n              <div class="ms-PeoplePicker-resultGroupTitle">{{groupData.group.name}}</div>\n              <uif-people-picker-result-list\n              ng-model="groupData.people"\n              uif-picker-type="'+u[u.compact]+'"\n              uif-person-click="addPersonToSelectedPeople"\n              uif-person-close-click="removePersonFromSearchResults"\n              uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.square]+'"\n              uif-size="'+o.PersonaSize[o.PersonaSize.xsmall]+'"></uif-people-picker-result-list>\n            </div>\n          </div>\n          <ng-transclude />\n        </div>\n      </div>',this.templateTypes[u.memberList]='\n      <div class="ms-PeoplePicker ms-PeoplePicker--membersList">\n        <div class="ms-PeoplePicker-searchBox">\n            <input ng-click="onPeoplePickerActive($event)"\n            placeholder="{{placeholder}}"\n            ng-model="searchQuery"\n            class="ms-PeoplePicker-searchField"\n            ng-focus="onPeoplePickerActive($event)"\n            ng-keyup="onSearchKeyUp($event)"\n            type="text">\n        </div>\n        <div class="ms-PeoplePicker-results">\n          <div class="ms-PeoplePicker-resultGroups">\n            <div class="ms-PeoplePicker-resultGroup" ng-repeat="groupData in groups | orderBy:\'-order\'">\n              <uif-people-picker-result-list\n              ng-model="groupData.people"\n              uif-person-click="addPersonToSelectedPeople"\n              uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.round]+'"\n              uif-size="'+o.PersonaSize[o.PersonaSize.medium]+'"></uif-people-picker-result-list>\n            </div>\n          </div>\n        </div>\n        <uif-people-picker-selected ng-model="selectedPersons"\n        uif-selected-person-click="onSelectedPersonClick()"\n        uif-person-close="removePersonFromSelectedPeople">\n          <ng-transclude></ng-transclude>\n        </uif-people-picker-selected>\n      </div>',this.templateTypes[u.facePile]='\n      <div class="ms-PeoplePicker ms-PeoplePicker--Facepile">\n        <div class="ms-PeoplePicker-searchBox">\n            <input ng-click="onPeoplePickerActive($event)"\n            placeholder="{{placeholder}}"\n            ng-model="searchQuery"\n            class="ms-PeoplePicker-searchField"\n            ng-focus="onPeoplePickerActive($event)"\n            ng-keyup="onSearchKeyUp($event)"\n            type="text">\n        </div>\n        <div class="ms-PeoplePicker-results">\n          <div class="ms-PeoplePicker-peopleListHeader">\n              <span>{{facePileHeader}}</span>\n          </div>\n          <div ng-repeat="groupData in groups | orderBy:\'-order\'">\n            <uif-people-picker-result-list\n            ng-model="groupData.people"\n            uif-person-click="addPersonToSelectedPeople"\n            uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.round]+'"\n            uif-size="'+o.PersonaSize[o.PersonaSize.small]+'"></uif-people-picker-result-list>\n          </div>\n          <div class="uif-search-more"></div>\n        </div>\n        <uif-people-picker-selected ng-model="selectedPersons"\n        uif-selected-person-click="onSelectedPersonClick()"\n        uif-person-close="removePersonFromSelectedPeople">\n          <div class="uif-people-header"></div>\n        </uif-people-picker-selected>\n\n      </div>'}return e.factory=function(){var t=function(t,n,r,i){return new e(t,n,r,i)};return t.$inject=["$document","$timeout","$log","$window"],t},e.prototype.initDisabledState=function(e,t,n){var i=r.element(e[0].querySelector(".ms-PeoplePicker-searchField"));n.$observe("disabled",function(e){e?i.attr("disabled","disabled"):i.removeAttr("disabled")})},e.prototype.animateSelectedPeople=function(e){var t=r.element(e[0].querySelector(".ms-PeoplePicker-selectedPeople"));t.addClass("ms-u-slideDownIn20"),setTimeout(function(){t.removeClass("ms-u-slideDownIn20")},1e3)},e.prototype.currentYPosition=function(){if(this.$window.pageYOffset)return this.$window.pageYOffset;var e=r.element(this.$document[0]).find("body")[0];return e.scrollTop?e.scrollTop:0},e.prototype.elmYPosition=function(e){for(var t=e.offsetTop,n=e;n.offsetParent&&n.offsetParent!==document.body;)n=n.offsetParent,t+=n.offsetTop;return t},e.prototype.smoothScrollTo=function(e){var t=this.currentYPosition(),n=this.elmYPosition(e),r=n>t?n-t:t-n;if(r<100)return void window.scrollTo(0,n);var i=Math.round(r/30);i>=20&&(i=20);var o=Math.round(r/25),a=n>t?t+o:t-o,s=0;if(n>t)for(var l=t;l<n;l+=o)!function(e,t){setTimeout(function(){window.scrollTo(0,e)},t*i)}(a,s),a+=o,a>n&&(a=n),s++;else for(var l=t;l>n;l-=o)!function(e,t){setTimeout(function(){window.scrollTo(0,e)},t*i)}(a,s),a-=o,a<n&&(a=n),s++},e.prototype.insertFacePileHeader=function(e,t,n){for(var i=r.element(n[0].querySelector(".uif-people-header")),o=0;o<e.length;o++){var a=r.element(e[o]);if(a.hasClass("ms-PeoplePicker-selectedCount")){i.replaceWith(a);break}}},e.prototype.insertFacePileSearchMore=function(e,t,n){for(var i=r.element(n[0].querySelector(".uif-search-more")),o=0;o<e.length;o++){var a=r.element(e[o]);if(a.hasClass("ms-PeoplePicker-searchMore")){i.replaceWith(a);break}}},e.prototype.resizeSearchField=function(e){var t=r.element(e[0].querySelector(".ms-PeoplePicker-searchBox")),n=r.element(e[0].querySelector(".ms-PeoplePicker-searchField")),i=t.prop("offsetLeft"),o=t[0].clientWidth,a=i+o,s=t[0].querySelectorAll(".ms-PeoplePicker-persona");if(0===s.length)return void(n[0].style.width="100%");var l=r.element(s[s.length-1]),c=l.prop("offsetLeft"),u=l[0].clientWidth,d=c+u,f=a-d-5;f<100?(f="100%",n[0].style.width="100%"):n[0].style.width=f+"px"},e.directiveName="uifPeoplePicker",e}();t.PeoplePickerDirective=d;var f=function(){function e(){this.replace=!0,this.restrict="E",this.transclude=!0,this.template='\n  <ul class="ms-PeoplePicker-resultList">\n    <li class="ms-PeoplePicker-result" ng-repeat="person in people track by $index">\n      <div role="button" class="ms-PeoplePicker-resultBtn"\n      ng-class="{\'ms-PeoplePicker-resultBtn--compact\': pickerType === \'compact\'}" ng-click="onPersonClick()(person)">\n        <uif-persona\n          uif-style="{{personStyle}}"\n          uif-size="{{personSize}}"\n          uif-presence="{{person.presence}}"\n          uif-image-url="{{person.icon}}">\n          <uif-persona-initials uif-color="{{person.color}}">{{person.initials}}</uif-persona-initials>\n          <uif-persona-primary-text>{{person.primaryText}}</uif-persona-primary-text>\n          <uif-persona-secondary-text>{{person.secondaryText}}</uif-persona-secondary-text>\n        </uif-persona>\n        <button type="button"\n          ng-if="!person.additionalData && onPersonCloseClick()"\n          ng-click="onPersonCloseClick()(people, person, $event)"\n          class="ms-PeoplePicker-resultAction js-resultRemove">\n          <uif-icon uif-type="'+a.IconEnum[a.IconEnum.x]+'"></uif-icon>\n        </button>\n        <button type="button"\n          ng-if="person.additionalData"\n          ng-click="expandAdditionalData($event)"\n          class="ms-PeoplePicker-resultAction js-resultRemove">\n          <uif-icon uif-type="'+a.IconEnum[a.IconEnum.chevronsDown]+'"></uif-icon>\n        </button>\n      </div>\n      <div ng-if="person.additionalData" class="ms-PeoplePicker-resultAdditionalContent">\n        <uif-people-picker-result-list\n        ng-model="person.additionalData"\n        uif-person-click="onPersonClick()"\n        uif-person-close-click="onPersonCloseClick()"\n        uif-picker-type="{{pickerType}}"\n        uif-style="{{personStyle}}"\n        uif-size="{{personSize}}"></uif-people-picker-result-list>\n      </div>\n    </li>\n  </ul>',this.scope={onPersonClick:"&uifPersonClick",onPersonCloseClick:"&uifPersonCloseClick",people:"=ngModel",personSize:"@uifSize",personStyle:"@uifStyle",pickerType:"@uifPickerType"},this.link=function(e,t,n,i,o){e.expandAdditionalData=function(e){e.stopPropagation();for(var t=r.element(e.target),n=0;n<10;n++){var i=t.parent();if(i.hasClass("ms-PeoplePicker-result")){i.toggleClass("is-expanded");break}t=i}}}}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifPeoplePickerResultList",e}();t.PeoplePickerResultListDirective=f;var p=function(){function e(e,t){this.$scope=e,this.$element=t,this.searchCallbacks=[]}return e.prototype.isSearching=function(e){this.$scope.processing=e,e?this.$element.addClass("is-searching"):this.$element.removeClass("is-searching")},e.$inject=["$scope","$element"],e}();t.PeopleSearchMoreController=p;var h=function(){function e(){this.replace=!0,this.restrict="E",this.transclude=!0,this.require="^^"+d.directiveName,this.controller=p,this.template='\n  <div class="ms-PeoplePicker-searchMore js-searchMore"\n    ng-class="{\'ms-PeoplePicker-searchMore--disconnected\': disconnected}">\n    <button type="button" ng-if="pickerType === \''+u[u.grouped]+'\' && !disconnected"\n      ng-click="onSearch($event)" class="ms-PeoplePicker-searchMoreBtn">\n      <div class="ms-PeoplePicker-searchMoreIcon">\n        <uif-icon ng-if="!disconnected" uif-type="'+a.IconEnum[a.IconEnum.search]+'"></uif-icon>\n        <uif-icon ng-if="disconnected" uif-type="'+a.IconEnum[a.IconEnum.alert]+'"></uif-icon>\n      </div>\n      <ng-transclude />\n    </button>\n    <div role="button" ng-if="pickerType === \''+u[u.compact]+'\' && !disconnected"\n      ng-click="onSearch($event)" class="ms-PeoplePicker-searchMoreBtn ms-PeoplePicker-searchMoreBtn--compact">\n      <div class="ms-PeoplePicker-searchMoreIcon">\n        <uif-icon ng-if="!disconnected" uif-type="'+a.IconEnum[a.IconEnum.search]+'"></uif-icon>\n        <uif-icon ng-if="disconnected" uif-type="'+a.IconEnum[a.IconEnum.alert]+'"></uif-icon>\n      </div>\n      <ng-transclude />\n    </div>\n    <div role="button" ng-if="pickerType === \''+u[u.facePile]+'\' && !disconnected"\n      ng-click="onSearch($event)" class="ms-PeoplePicker-searchMoreBtn ms-PeoplePicker-searchMoreBtn--compact">\n      <div class="ms-PeoplePicker-searchMoreIcon">\n        <uif-icon ng-if="!disconnected" uif-type="'+a.IconEnum[a.IconEnum.search]+'"></uif-icon>\n        <uif-icon ng-if="disconnected" uif-type="'+a.IconEnum[a.IconEnum.alert]+'"></uif-icon>\n      </div>\n      <ng-transclude />\n    </div>\n    <div role="button" ng-if="disconnected" class="ms-PeoplePicker-searchMoreBtn">\n      <div class="ms-PeoplePicker-searchMoreIcon">\n        <uif-icon uif-type="'+a.IconEnum[a.IconEnum.alert]+'"></uif-icon>\n      </div>\n      <ng-transclude />\n    </div>\n    <uif-spinner ng-show="processing"></uif-spinner>\n  </div>',this.scope={disconnected:"=uifDisconnected"},this.link=function(e,t,n,r,i){e.pickerType=r.pickerType(),e.onSearch=function(t){t.stopPropagation(),r.search(),e.$broadcast(s,r.searchQuery())}}}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifPeopleSearchMore",e}();t.PeopleSearchMoreDirective=h;var m=function(){function e(e){var t=this;this.$scope=e,this.$scope.$on(s,function(e,n){t.$scope.searchQuery=n})}return e.$inject=["$scope"],e}();t.PrimaryTextController=m;var g=function(){function e(){this.replace=!0,this.restrict="E",this.require=["^^"+h.directiveName,"^^"+d.directiveName],this.transclude=!0,this.controller=m,this.template='\n  <div ng-show="!$parent.$parent.disconnected" class="ms-PeoplePicker-searchMorePrimary">\n    <div ng-show="$parent.$parent.processing">{{searchingForText}} {{searchQuery}}</div>\n    <ng-transclude ng-show="!$parent.$parent.processing"></ng-transclude>\n  </div>',this.scope={searchingForText:"@?uifSearchForText"},this.link=function(e,t,n,r,i){e.searchingForText=e.searchingForText||"Searching for"}}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifPrimaryText",e}();t.PrimaryTextDirective=g;var v=function(){function e(){this.replace=!0,this.restrict="E",this.transclude=!0,this.template='\n  <div ng-show="!$parent.$parent.disconnected" class="ms-PeoplePicker-searchMoreSecondary">\n    <ng-transclude></ng-transclude>\n  </div>',this.scope=!0}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifSecondaryText",e}();t.SecondaryTextDirective=v;var b=function(){function e(){this.replace=!0,this.restrict="E",this.transclude=!0,this.template='\n  <div ng-show="$parent.$parent.disconnected" class="ms-PeoplePicker-searchMorePrimary">\n    <ng-transclude></ng-transclude>\n  </div>',this.scope=!0}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifDisconnectedText",e}();t.DisconnectedTextDirective=b;var y=function(){function e(){this.replace=!0,this.restrict="E",this.transclude=!0,this.template='\n    <div class="ms-PeoplePicker-selected" ng-class="{\'is-active\': selectedPeople && selectedPeople.length > 0}">\n        <div class="ms-PeoplePicker-selectedHeader">\n            <ng-transclude></ng-transclude>\n        </div>\n        <ul class="ms-PeoplePicker-selectedPeople">\n          <li class="ms-PeoplePicker-selectedPerson" ng-repeat="person in selectedPeople track by $index">\n            <uif-persona ng-click="onSelectedPersonClick()(person)"\n              uif-style="'+i.PersonaStyleEnum[i.PersonaStyleEnum.round]+'"\n              uif-size="'+o.PersonaSize[o.PersonaSize.small]+'"\n              uif-presence="{{person.presence}}"\n              uif-image-url="{{person.icon}}">\n              <uif-persona-initials uif-color="{{person.color}}">{{person.initials}}</uif-persona-initials>\n              <uif-persona-primary-text>{{person.primaryText}}</uif-persona-primary-text>\n              <uif-persona-secondary-text>{{person.secondaryText}}</uif-persona-secondary-text>\n            </uif-persona>\n            <button type="button"\n                    ng-click="removePersonFromSelectedPeople()(person, $event)"\n                    class="ms-PeoplePicker-resultAction js-resultRemove">\n              <uif-icon uif-type="'+a.IconEnum[a.IconEnum.x]+'"></uif-icon>\n            </button>\n          </li>\n        </ul>\n    </div>',
this.scope={onSelectedPersonClick:"&?uifSelectedPersonClick",removePersonFromSelectedPeople:"&uifPersonClose",selectedPeople:"=ngModel"}}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifPeoplePickerSelected",e}();t.PeoplePickerSelectedDirective=y;var E=function(){function e(){this.require="^^"+d.directiveName,this.replace=!0,this.restrict="E",this.transclude=!0,this.scope=!0,this.template='<span class="ms-PeoplePicker-selectedCount" ng-transclude></span>',this.link=function(e,t,n,r,i){e.selectedPersons=r.getSelectedPersons()}}return e.factory=function(){var t=function(){return new e};return t},e.directiveName="uifSelectedPeopleHeader",e}();t.SelectedPeopleHeaderDirective=E,t.module=r.module("officeuifabric.components.peoplepicker",["officeuifabric.components"]).directive(d.directiveName,d.factory()).directive(g.directiveName,g.factory()).directive(v.directiveName,v.factory()).directive(f.directiveName,f.factory()).directive(b.directiveName,b.factory()).directive(y.directiveName,y.factory()).directive(E.directiveName,E.factory()).directive(h.directiveName,h.factory())}])}),function(){function e(e){function t(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}return function(n,r,i,o){r=y(r,o,4);var a=!x(n)&&b.keys(n),s=(a||n).length,l=e>0?0:s-1;return arguments.length<3&&(i=n[a?a[l]:l],l+=e),t(n,r,i,a,l,s)}}function t(e){return function(t,n,r){n=E(n,r);for(var i=S(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function n(e,t,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(u.call(r,a,s),b.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}function r(e,t){var n=R.length,r=e.constructor,i=b.isFunction(r)&&r.prototype||s,o="constructor";for(b.has(e,o)&&!b.contains(t,o)&&t.push(o);n--;)o=R[n],o in e&&e[o]!==i[o]&&!b.contains(t,o)&&t.push(o)}var i=this,o=i._,a=Array.prototype,s=Object.prototype,l=Function.prototype,c=a.push,u=a.slice,d=s.toString,f=s.hasOwnProperty,p=Array.isArray,h=Object.keys,m=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):i._=b,b.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},E=function(e,t,n){return null==e?b.identity:b.isFunction(e)?y(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return E(e,t,1/0)};var w=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,l=0;l<s;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}},C=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},T=function(e){return function(t){return null==t?void 0:t[e]}},$=Math.pow(2,53)-1,S=T("length"),x=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=$};b.each=b.forEach=function(e,t,n){t=y(t,n);var r,i;if(x(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=b.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},b.map=b.collect=function(e,t,n){t=E(t,n);for(var r=!x(e)&&b.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var r;if(r=x(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},b.filter=b.select=function(e,t,n){var r=[];return t=E(t,n),b.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},b.reject=function(e,t,n){return b.filter(e,b.negate(E(t)),n)},b.every=b.all=function(e,t,n){t=E(t,n);for(var r=!x(e)&&b.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},b.some=b.any=function(e,t,n){t=E(t,n);for(var r=!x(e)&&b.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,r){return x(e)||(e=b.values(e)),("number"!=typeof n||r)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=u.call(arguments,2),r=b.isFunction(t);return b.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=x(e)?e:b.values(e);for(var s=0,l=e.length;s<l;s++)r=e[s],r>o&&(o=r)}else t=E(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},b.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=x(e)?e:b.values(e);for(var s=0,l=e.length;s<l;s++)r=e[s],r<o&&(o=r)}else t=E(t,n),b.each(e,function(e,n,r){i=t(e,n,r),(i<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},b.shuffle=function(e){for(var t,n=x(e)?e:b.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=b.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},b.sample=function(e,t,n){return null==t||n?(x(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=E(t,n),b.pluck(b.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,r){var i={};return n=E(n,r),b.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};b.groupBy=A(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=A(function(e,t,n){e[n]=t}),b.countBy=A(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?u.call(e):x(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:x(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=E(t,n);var r=[],i=[];return b.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},b.first=b.head=b.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var _=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=S(e);a<s;a++){var l=e[a];if(x(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=_(l,t,n));var c=0,u=l.length;for(i.length+=u;c<u;)i[o++]=l[c++]}else n||(i[o++]=l)}return i};b.flatten=function(e,t){return _(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,n,r){b.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=E(n,r));for(var i=[],o=[],a=0,s=S(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t?(a&&o===c||i.push(l),o=c):n?b.contains(o,c)||(o.push(c),i.push(l)):b.contains(i,l)||i.push(l)}return i},b.union=function(){return b.uniq(_(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=S(e);r<i;r++){var o=e[r];if(!b.contains(t,o)){for(var a=1;a<n&&b.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},b.difference=function(e){var t=_(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,S).length||0,n=Array(t),r=0;r<t;r++)n[r]=b.pluck(e,r);return n},b.object=function(e,t){for(var n={},r=0,i=S(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,r){n=E(n,r,1);for(var i=n(t),o=0,a=S(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var k=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=C(e.prototype),a=e.apply(o,i);return b.isObject(a)?a:o};b.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),r=function(){return k(e,r,t,this,n.concat(u.call(arguments)))};return r},b.partial=function(e){var t=u.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===b?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return k(e,n,this,this,o)};return n},b.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return b.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:b.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var c=b.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return r=this,i=arguments,u<=0||u>t?(a&&(clearTimeout(a),a=null),s=c,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(l,u)),o}},b.debounce=function(e,t,n){var r,i,o,a,s,l=function(){var c=b.now()-a;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},b.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},b.once=b.partial(b.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return O&&r(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return O&&r(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},b.mapObject=function(e,t,n){t=E(t,n);for(var r,i=b.keys(e),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=t(e[r],r,e);return a},b.pairs=function(e){for(var t=b.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},b.invert=function(e){for(var t={},n=b.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=w(b.allKeys),b.extendOwn=b.assign=w(b.keys),b.findKey=function(e,t,n){t=E(t,n);for(var r,i=b.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r},b.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;b.isFunction(t)?(i=b.allKeys(a),r=y(t,n)):(i=_(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var c=i[s],u=a[c];r(u,c,a)&&(o[c]=u)}return o},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var r=b.map(_(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(r,t)}}return b.pick(e,t,n)},b.defaults=w(b.allKeys,!0),b.create=function(e,t){var n=C(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var N=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var i=d.call(e);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!N(e[l],t[l],n,r))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!N(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(e,t){return N(e,t)},b.isEmpty=function(e){return null==e||(x(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=p||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&f.call(e,t)},b.noConflict=function(){return i._=o,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=T,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(D),L=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};b.escape=L(D),b.unescape=L(I),b.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),b.isFunction(r)?r.call(e):r};var F=0;b.uniqueId=function(e){var t=++F+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+P[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var r=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(B,U),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(e){return a.call(this,e,b)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},b.chain=function(e){var t=b(e);return t._chain=!0,t};var j=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),j(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],j(this,n)}}),b.each(["concat","join","slice"],function(e){var t=a[e];b.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),function(){angular.module("ngCordova",["ngCordova.plugins"]),angular.module("ngCordova.plugins.3dtouch",[]).factory("$cordova3DTouch",["$q",function(e){var t=[],n={},r=function(e){return function(t){for(var n in e)t.type===n&&e[n]()}};return{isAvailable:function(){var t=e.defer();return window.cordova?window.ThreeDeeTouch?window.ThreeDeeTouch.isAvailable(function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject("Could not find 3D touch plugin"):t.reject("Not supported in browser"),t.promise},addQuickAction:function(i,o,a,s,l,c){var u=e.defer(),d={type:i,title:o,subtitle:l};return a&&(d.iconType=a),s&&(d.iconTemplate=s),this.isAvailable().then(function(){t.push(d),n[i]=c,window.ThreeDeeTouch.configureQuickActions(t),window.ThreeDeeTouch.onHomeIconPressed=r(n),u.resolve(t)},function(e){u.reject(e)}),u.promise},addQuickActionHandler:function(t,i){var o=e.defer();return this.isAvailable().then(function(){n[t]=i,window.ThreeDeeTouch.onHomeIconPressed=r(n),o.resolve(!0)},function(e){o.reject(e)}),o.promise},enableLinkPreview:function(){var t=e.defer();return this.isAvailable().then(function(){window.ThreeDeeTouch.enableLinkPreview(),t.resolve(!0)},function(e){t.reject(e)}),t.promise},addForceTouchHandler:function(t){var n=e.defer();return this.isAvailable().then(function(){window.ThreeDeeTouch.watchForceTouches(t),n.resolve(!0)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.actionSheet",[]).factory("$cordovaActionSheet",["$q","$window",function(e,t){return{show:function(n){var r=e.defer();return t.plugins.actionsheet.show(n,function(e){r.resolve(e)}),r.promise},hide:function(){return t.plugins.actionsheet.hide()}}}]),angular.module("ngCordova.plugins.adMob",[]).factory("$cordovaAdMob",["$q","$window",function(e,t){return{createBannerView:function(n){var r=e.defer();return t.plugins.AdMob.createBannerView(n,function(){r.resolve()},function(){r.reject()}),r.promise},createInterstitialView:function(n){var r=e.defer();return t.plugins.AdMob.createInterstitialView(n,function(){r.resolve()},function(){r.reject()}),r.promise},requestAd:function(n){var r=e.defer();return t.plugins.AdMob.requestAd(n,function(){r.resolve()},function(){r.reject()}),r.promise},showAd:function(n){var r=e.defer();return t.plugins.AdMob.showAd(n,function(){r.resolve()},function(){r.reject()}),r.promise},requestInterstitialAd:function(n){var r=e.defer();return t.plugins.AdMob.requestInterstitialAd(n,function(){r.resolve()},function(){r.reject()}),r.promise}}}]),angular.module("ngCordova.plugins.appAvailability",[]).factory("$cordovaAppAvailability",["$q",function(e){return{check:function(t){var n=e.defer();return appAvailability.check(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.appRate",[]).provider("$cordovaAppRate",[function(){this.setPreferences=function(e){e&&angular.isObject(e)&&(AppRate.preferences.useLanguage=e.language||null,AppRate.preferences.displayAppName=e.appName||"",AppRate.preferences.promptAgainForEachNewVersion=e.promptForNewVersion||!0,AppRate.preferences.openStoreInApp=e.openStoreInApp||!1,AppRate.preferences.usesUntilPrompt=e.usesUntilPrompt||3,AppRate.preferences.useCustomRateDialog=e.useCustomRateDialog||!1,AppRate.preferences.storeAppURL.ios=e.iosURL||null,AppRate.preferences.storeAppURL.android=e.androidURL||null,AppRate.preferences.storeAppURL.blackberry=e.blackberryURL||null,AppRate.preferences.storeAppURL.windows8=e.windowsURL||null)},this.setCustomLocale=function(e){var t={title:"Rate %@",message:"If you enjoy using %@, would you mind taking a moment to rate it? It won’t take more than a minute. Thanks for your support!",cancelButtonLabel:"No, Thanks",laterButtonLabel:"Remind Me Later",rateButtonLabel:"Rate It Now"};t=angular.extend(t,e),AppRate.preferences.customLocale=t},this.$get=["$q",function(e){return{promptForRating:function(t){var n=e.defer(),r=AppRate.promptForRating(t);return n.resolve(r),n.promise},navigateToAppStore:function(){var t=e.defer(),n=AppRate.navigateToAppStore();return t.resolve(n),t.promise},onButtonClicked:function(e){AppRate.preferences.callbacks.onButtonClicked=e.bind(this)},onRateDialogShow:function(e){AppRate.preferences.callbacks.onRateDialogShow=e.bind(this)}}}]}]),angular.module("ngCordova.plugins.appVersion",[]).factory("$cordovaAppVersion",["$q",function(e){return{getAppName:function(){var t=e.defer();return cordova.getAppVersion.getAppName(function(e){t.resolve(e)}),t.promise},getPackageName:function(){var t=e.defer();return cordova.getAppVersion.getPackageName(function(e){t.resolve(e)}),t.promise},getVersionNumber:function(){var t=e.defer();return cordova.getAppVersion.getVersionNumber(function(e){t.resolve(e)}),t.promise},getVersionCode:function(){var t=e.defer();return cordova.getAppVersion.getVersionCode(function(e){t.resolve(e)}),t.promise}}}]),angular.module("ngCordova.plugins.backgroundGeolocation",[]).factory("$cordovaBackgroundGeolocation",["$q","$window",function(e,t){return{init:function(){t.navigator.geolocation.getCurrentPosition(function(e){return e})},configure:function(n){this.init();var r=e.defer();return t.plugins.backgroundGeoLocation.configure(function(e){r.notify(e),t.plugins.backgroundGeoLocation.finish()},function(e){r.reject(e)},n),this.start(),r.promise},start:function(){var n=e.defer();return t.plugins.backgroundGeoLocation.start(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},stop:function(){var n=e.defer();return t.plugins.backgroundGeoLocation.stop(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.badge",[]).factory("$cordovaBadge",["$q",function(e){return{hasPermission:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?t.resolve(!0):t.reject("You do not have permission")}),t.promise},promptForPermission:function(){return cordova.plugins.notification.badge.promptForPermission()},set:function(t,n,r){var i=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?i.resolve(cordova.plugins.notification.badge.set(t,n,r)):i.reject("You do not have permission to set Badge")}),i.promise},get:function(){var t=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?cordova.plugins.notification.badge.get(function(e){t.resolve(e)}):t.reject("You do not have permission to get Badge")}),t.promise},clear:function(t,n){var r=e.defer();return cordova.plugins.notification.badge.hasPermission(function(e){e?r.resolve(cordova.plugins.notification.badge.clear(t,n)):r.reject("You do not have permission to clear Badge")}),r.promise},increase:function(t,n,r){var i=e.defer();return this.hasPermission().then(function(){i.resolve(cordova.plugins.notification.badge.increase(t,n,r))},function(){i.reject("You do not have permission to increase Badge")}),i.promise},decrease:function(t,n,r){var i=e.defer();return this.hasPermission().then(function(){i.resolve(cordova.plugins.notification.badge.decrease(t,n,r))},function(){i.reject("You do not have permission to decrease Badge")}),i.promise},configure:function(e){return cordova.plugins.notification.badge.configure(e)}}}]),angular.module("ngCordova.plugins.barcodeScanner",[]).factory("$cordovaBarcodeScanner",["$q",function(e){return{scan:function(t){var n=e.defer();return cordova.plugins.barcodeScanner.scan(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},encode:function(t,n){var r=e.defer();return t=t||"TEXT_TYPE",cordova.plugins.barcodeScanner.encode(t,n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.batteryStatus",[]).factory("$cordovaBatteryStatus",["$rootScope","$window","$timeout",function(e,t,n){var r=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:status",t)})},i=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:critical",t)})},o=function(t){n(function(){e.$broadcast("$cordovaBatteryStatus:low",t)})};return document.addEventListener("deviceready",function(){navigator.battery&&(t.addEventListener("batterystatus",r,!1),t.addEventListener("batterycritical",i,!1),t.addEventListener("batterylow",o,!1))},!1),!0}]).run(["$injector",function(e){e.get("$cordovaBatteryStatus")}]),angular.module("ngCordova.plugins.beacon",[]).factory("$cordovaBeacon",["$window","$rootScope","$timeout","$q",function(e,t,n,r){var i=null,o=null,a=null,s=null,l=null,c=null,u=null,d=null;return document.addEventListener("deviceready",function(){if(e.cordova&&e.cordova.plugins&&e.cordova.plugins.locationManager){var r=new e.cordova.plugins.locationManager.Delegate;r.didDetermineStateForRegion=function(e){n(function(){t.$broadcast("$cordovaBeacon:didDetermineStateForRegion",e)}),i&&i(e)},r.didStartMonitoringForRegion=function(e){n(function(){t.$broadcast("$cordovaBeacon:didStartMonitoringForRegion",e)}),o&&o(e)},r.didExitRegion=function(e){n(function(){t.$broadcast("$cordovaBeacon:didExitRegion",e)}),a&&a(e)},r.didEnterRegion=function(e){n(function(){t.$broadcast("$cordovaBeacon:didEnterRegion",e)}),s&&s(e)},r.didRangeBeaconsInRegion=function(e){n(function(){t.$broadcast("$cordovaBeacon:didRangeBeaconsInRegion",e)}),l&&l(e)},r.peripheralManagerDidStartAdvertising=function(e){n(function(){t.$broadcast("$cordovaBeacon:peripheralManagerDidStartAdvertising",e)}),c&&c(e)},r.peripheralManagerDidUpdateState=function(e){n(function(){t.$broadcast("$cordovaBeacon:peripheralManagerDidUpdateState",e)}),u&&u(e)},r.didChangeAuthorizationStatus=function(e){n(function(){t.$broadcast("$cordovaBeacon:didChangeAuthorizationStatus",e)}),d&&d(e)},e.cordova.plugins.locationManager.setDelegate(r)}},!1),{setCallbackDidDetermineStateForRegion:function(e){i=e},setCallbackDidStartMonitoringForRegion:function(e){o=e},setCallbackDidExitRegion:function(e){a=e},setCallbackDidEnterRegion:function(e){s=e},setCallbackDidRangeBeaconsInRegion:function(e){l=e},setCallbackPeripheralManagerDidStartAdvertising:function(e){c=e},setCallbackPeripheralManagerDidUpdateState:function(e){u=e},setCallbackDidChangeAuthorizationStatus:function(e){d=e},createBeaconRegion:function(t,n,r,i,o){return r=r||void 0,i=i||void 0,new e.cordova.plugins.locationManager.BeaconRegion(t,n,r,i,o)},isBluetoothEnabled:function(){return r.when(e.cordova.plugins.locationManager.isBluetoothEnabled())},enableBluetooth:function(){return r.when(e.cordova.plugins.locationManager.enableBluetooth())},disableBluetooth:function(){return r.when(e.cordova.plugins.locationManager.disableBluetooth())},startMonitoringForRegion:function(t){return r.when(e.cordova.plugins.locationManager.startMonitoringForRegion(t))},stopMonitoringForRegion:function(t){return r.when(e.cordova.plugins.locationManager.stopMonitoringForRegion(t))},requestStateForRegion:function(t){return r.when(e.cordova.plugins.locationManager.requestStateForRegion(t))},startRangingBeaconsInRegion:function(t){return r.when(e.cordova.plugins.locationManager.startRangingBeaconsInRegion(t))},stopRangingBeaconsInRegion:function(t){return r.when(e.cordova.plugins.locationManager.stopRangingBeaconsInRegion(t))},getAuthorizationStatus:function(){return r.when(e.cordova.plugins.locationManager.getAuthorizationStatus())},requestWhenInUseAuthorization:function(){return r.when(e.cordova.plugins.locationManager.requestWhenInUseAuthorization())},requestAlwaysAuthorization:function(){return r.when(e.cordova.plugins.locationManager.requestAlwaysAuthorization())},getMonitoredRegions:function(){return r.when(e.cordova.plugins.locationManager.getMonitoredRegions())},getRangedRegions:function(){return r.when(e.cordova.plugins.locationManager.getRangedRegions())},isRangingAvailable:function(){return r.when(e.cordova.plugins.locationManager.isRangingAvailable())},isMonitoringAvailableForClass:function(t){return r.when(e.cordova.plugins.locationManager.isMonitoringAvailableForClass(t))},startAdvertising:function(t,n){return r.when(e.cordova.plugins.locationManager.startAdvertising(t,n))},stopAdvertising:function(){return r.when(e.cordova.plugins.locationManager.stopAdvertising())},isAdvertisingAvailable:function(){return r.when(e.cordova.plugins.locationManager.isAdvertisingAvailable())},isAdvertising:function(){return r.when(e.cordova.plugins.locationManager.isAdvertising())},disableDebugLogs:function(){return r.when(e.cordova.plugins.locationManager.disableDebugLogs())},enableDebugNotifications:function(){return r.when(e.cordova.plugins.locationManager.enableDebugNotifications())},disableDebugNotifications:function(){return r.when(e.cordova.plugins.locationManager.disableDebugNotifications())},enableDebugLogs:function(){return r.when(e.cordova.plugins.locationManager.enableDebugLogs())},appendToDeviceLog:function(t){return r.when(e.cordova.plugins.locationManager.appendToDeviceLog(t))}}}]),angular.module("ngCordova.plugins.ble",[]).factory("$cordovaBLE",["$q","$timeout","$log",function(e,t,n){return{scan:function(n,r){var i=e.defer();return ble.startScan(n,function(e){i.notify(e)},function(e){i.reject(e)}),t(function(){ble.stopScan(function(){i.resolve()},function(e){i.reject(e)})},1e3*r),i.promise},startScan:function(e,t,n){return ble.startScan(e,t,n)},stopScan:function(){var t=e.defer();return ble.stopScan(function(){t.resolve()},function(e){t.reject(e)}),t.promise},connect:function(t){var n=e.defer();return ble.connect(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},disconnect:function(t){var n=e.defer();return ble.disconnect(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},read:function(t,n,r){var i=e.defer();return ble.read(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},write:function(t,n,r,i){var o=e.defer();return ble.write(t,n,r,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},writeWithoutResponse:function(t,n,r,i){var o=e.defer();return ble.writeWithoutResponse(t,n,r,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},writeCommand:function(e,t,r,i){return n.warning("writeCommand is deprecated, use writeWithoutResponse"),this.writeWithoutResponse(e,t,r,i)},startNotification:function(e,t,n,r,i){return ble.startNotification(e,t,n,r,i)},stopNotification:function(t,n,r){var i=e.defer();return ble.stopNotification(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},isConnected:function(t){var n=e.defer();return ble.isConnected(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},enable:function(){var t=e.defer();return ble.enable(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},isEnabled:function(){var t=e.defer();return ble.isEnabled(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.bluetoothSerial",[]).factory("$cordovaBluetoothSerial",["$q","$window",function(e,t){
return{connect:function(n){var r=e.defer(),i=e.defer(),o=!1;return t.bluetoothSerial.connect(n,function(){o=!0,r.resolve(i)},function(e){o===!1&&i.reject(e),r.reject(e)}),r.promise},connectInsecure:function(n){var r=e.defer();return t.bluetoothSerial.connectInsecure(n,function(){r.resolve()},function(e){r.reject(e)}),r.promise},disconnect:function(){var n=e.defer();return t.bluetoothSerial.disconnect(function(){n.resolve()},function(e){n.reject(e)}),n.promise},list:function(){var n=e.defer();return t.bluetoothSerial.list(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},discoverUnpaired:function(){var n=e.defer();return t.bluetoothSerial.discoverUnpaired(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},setDeviceDiscoveredListener:function(){var n=e.defer();return t.bluetoothSerial.setDeviceDiscoveredListener(function(e){n.notify(e)}),n.promise},clearDeviceDiscoveredListener:function(){t.bluetoothSerial.clearDeviceDiscoveredListener()},showBluetoothSettings:function(){var n=e.defer();return t.bluetoothSerial.showBluetoothSettings(function(){n.resolve()},function(e){n.reject(e)}),n.promise},isEnabled:function(){var n=e.defer();return t.bluetoothSerial.isEnabled(function(){n.resolve()},function(){n.reject()}),n.promise},enable:function(){var n=e.defer();return t.bluetoothSerial.enable(function(){n.resolve()},function(){n.reject()}),n.promise},isConnected:function(){var n=e.defer();return t.bluetoothSerial.isConnected(function(){n.resolve()},function(){n.reject()}),n.promise},available:function(){var n=e.defer();return t.bluetoothSerial.available(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},read:function(){var n=e.defer();return t.bluetoothSerial.read(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},readUntil:function(n){var r=e.defer();return t.bluetoothSerial.readUntil(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},write:function(n){var r=e.defer();return t.bluetoothSerial.write(n,function(){r.resolve()},function(e){r.reject(e)}),r.promise},subscribe:function(n){var r=e.defer();return t.bluetoothSerial.subscribe(n,function(e){r.notify(e)},function(e){r.reject(e)}),r.promise},subscribeRawData:function(){var n=e.defer();return t.bluetoothSerial.subscribeRawData(function(e){n.notify(e)},function(e){n.reject(e)}),n.promise},unsubscribe:function(){var n=e.defer();return t.bluetoothSerial.unsubscribe(function(){n.resolve()},function(e){n.reject(e)}),n.promise},unsubscribeRawData:function(){var n=e.defer();return t.bluetoothSerial.unsubscribeRawData(function(){n.resolve()},function(e){n.reject(e)}),n.promise},clear:function(){var n=e.defer();return t.bluetoothSerial.clear(function(){n.resolve()},function(e){n.reject(e)}),n.promise},readRSSI:function(){var n=e.defer();return t.bluetoothSerial.readRSSI(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.brightness",[]).factory("$cordovaBrightness",["$q","$window",function(e,t){return{get:function(){var n=e.defer();return t.cordova?t.cordova.plugins.brightness.getBrightness(function(e){n.resolve(e)},function(e){n.reject(e)}):n.reject("Not supported without cordova.js"),n.promise},set:function(n){var r=e.defer();return t.cordova?t.cordova.plugins.brightness.setBrightness(n,function(e){r.resolve(e)},function(e){r.reject(e)}):r.reject("Not supported without cordova.js"),r.promise},setKeepScreenOn:function(n){var r=e.defer();return t.cordova?t.cordova.plugins.brightness.setKeepScreenOn(n,function(e){r.resolve(e)},function(e){r.reject(e)}):r.reject("Not supported without cordova.js"),r.promise}}}]),angular.module("ngCordova.plugins.calendar",[]).factory("$cordovaCalendar",["$q","$window",function(e,t){return{createCalendar:function(n){var r=e.defer(),i=t.plugins.calendar.getCreateCalendarOptions();return"string"==typeof n?i.calendarName=n:i=angular.extend(i,n),t.plugins.calendar.createCalendar(i,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},deleteCalendar:function(n){var r=e.defer();return t.plugins.calendar.deleteCalendar(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEvent:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.createEvent(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventWithOptions:function(n){var r=e.defer(),i=[],o=window.plugins.calendar.getCalendarOptions(),a={title:null,location:null,notes:null,startDate:null,endDate:null};i=Object.keys(a);for(var s in n)i.indexOf(s)===-1?o[s]=n[s]:a[s]=n[s];return t.plugins.calendar.createEventWithOptions(a.title,a.location,a.notes,new Date(a.startDate),new Date(a.endDate),o,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventInteractively:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.createEventInteractively(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},createEventInNamedCalendar:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null,calendarName:null};return i=angular.extend(i,n),t.plugins.calendar.createEventInNamedCalendar(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),i.calendarName,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},findEvent:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.findEvent(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},listEventsInRange:function(n,r){var i=e.defer();return t.plugins.calendar.listEventsInRange(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},listCalendars:function(){var n=e.defer();return t.plugins.calendar.listCalendars(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},findAllEventsInNamedCalendar:function(n){var r=e.defer();return t.plugins.calendar.findAllEventsInNamedCalendar(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},modifyEvent:function(n){var r=e.defer(),i={title:null,location:null,notes:null,startDate:null,endDate:null,newTitle:null,newLocation:null,newNotes:null,newStartDate:null,newEndDate:null};return i=angular.extend(i,n),t.plugins.calendar.modifyEvent(i.title,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),i.newTitle,i.newLocation,i.newNotes,new Date(i.newStartDate),new Date(i.newEndDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},deleteEvent:function(n){var r=e.defer(),i={newTitle:null,location:null,notes:null,startDate:null,endDate:null};return i=angular.extend(i,n),t.plugins.calendar.deleteEvent(i.newTitle,i.location,i.notes,new Date(i.startDate),new Date(i.endDate),function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.camera",[]).factory("$cordovaCamera",["$q",function(e){return{getPicture:function(t){var n=e.defer();return navigator.camera?(navigator.camera.getPicture(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},cleanup:function(){var t=e.defer();return navigator.camera.cleanup(function(){t.resolve()},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.capture",[]).factory("$cordovaCapture",["$q",function(e){return{captureAudio:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureAudio(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},captureImage:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureImage(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)},captureVideo:function(t){var n=e.defer();return navigator.device.capture?(navigator.device.capture.captureVideo(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise):(n.resolve(null),n.promise)}}}]),angular.module("ngCordova.plugins.cardIO",[]).provider("$cordovaNgCardIO",[function(){var e=["card_type","redacted_card_number","card_number","expiry_month","expiry_year","short_expiry_year","cvv","zip"],t={expiry:!0,cvv:!0,zip:!1,suppressManual:!1,suppressConfirm:!1,hideLogo:!0};this.setCardIOResponseFields=function(t){t&&angular.isArray(t)&&(e=t)},this.setScanerConfig=function(e){e&&angular.isObject(e)&&(t.expiry=e.expiry||!0,t.cvv=e.cvv||!0,t.zip=e.zip||!1,t.suppressManual=e.suppressManual||!1,t.suppressConfirm=e.suppressConfirm||!1,t.hideLogo=e.hideLogo||!0)},this.$get=["$q",function(n){return{scanCard:function(){var r=n.defer();return CardIO.scan(t,function(t){if(null===t)r.reject(null);else{for(var n={},i=0,o=e.length;i<o;i++){var a=e[i];"short_expiry_year"===a?n[a]=String(t.expiry_year).substr(2,2)||"":n[a]=t[a]||""}r.resolve(n)}},function(){r.reject(null)}),r.promise}}}]}]),angular.module("ngCordova.plugins.clipboard",[]).factory("$cordovaClipboard",["$q","$window",function(e,t){return{copy:function(n){var r=e.defer();return t.cordova.plugins.clipboard.copy(n,function(){r.resolve()},function(){r.reject()}),r.promise},paste:function(){var n=e.defer();return t.cordova.plugins.clipboard.paste(function(e){n.resolve(e)},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.contacts",[]).factory("$cordovaContacts",["$q",function(e){return{save:function(t){var n=e.defer(),r=navigator.contacts.create(t);return r.save(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},remove:function(t){var n=e.defer(),r=navigator.contacts.create(t);return r.remove(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},clone:function(e){var t=navigator.contacts.create(e);return t.clone(e)},find:function(t){var n=e.defer(),r=t.fields||["id","displayName"];return delete t.fields,0===Object.keys(t).length?navigator.contacts.find(r,function(e){n.resolve(e)},function(e){n.reject(e)}):navigator.contacts.find(r,function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},pickContact:function(){var t=e.defer();return navigator.contacts.pickContact(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.datePicker",[]).factory("$cordovaDatePicker",["$window","$q",function(e,t){return{show:function(n){var r=t.defer();return n=n||{date:new Date,mode:"date"},e.datePicker.show(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.device",[]).factory("$cordovaDevice",[function(){return{getDevice:function(){return device},getCordova:function(){return device.cordova},getModel:function(){return device.model},getName:function(){return device.name},getPlatform:function(){return device.platform},getUUID:function(){return device.uuid},getVersion:function(){return device.version},getManufacturer:function(){return device.manufacturer}}}]),angular.module("ngCordova.plugins.deviceMotion",[]).factory("$cordovaDeviceMotion",["$q",function(e){return{getCurrentAcceleration:function(){var t=e.defer();return angular.isUndefined(navigator.accelerometer)||!angular.isFunction(navigator.accelerometer.getCurrentAcceleration)?(t.reject("Device do not support watchAcceleration"),t.promise):(navigator.accelerometer.getCurrentAcceleration(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise)},watchAcceleration:function(t){var n=e.defer();if(angular.isUndefined(navigator.accelerometer)||!angular.isFunction(navigator.accelerometer.watchAcceleration))return n.reject("Device do not support watchAcceleration"),n.promise;var r=navigator.accelerometer.watchAcceleration(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.accelerometer.clearWatch(r)},n.promise.clearWatch=function(e){navigator.accelerometer.clearWatch(e||r)},n.promise.watchID=r,n.promise},clearWatch:function(e){return navigator.accelerometer.clearWatch(e)}}}]),angular.module("ngCordova.plugins.deviceOrientation",[]).factory("$cordovaDeviceOrientation",["$q",function(e){var t={frequency:3e3};return{getCurrentHeading:function(){var t=e.defer();return navigator.compass?(navigator.compass.getCurrentHeading(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise):(t.reject("No compass on Device"),t.promise)},watchHeading:function(n){var r=e.defer();if(!navigator.compass)return r.reject("No compass on Device"),r.promise;var i=angular.extend(t,n),o=navigator.compass.watchHeading(function(e){r.notify(e)},function(e){r.reject(e)},i);return r.promise.cancel=function(){navigator.compass.clearWatch(o)},r.promise.clearWatch=function(e){navigator.compass.clearWatch(e||o)},r.promise.watchID=o,r.promise},clearWatch:function(e){return navigator.compass.clearWatch(e)}}}]),angular.module("ngCordova.plugins.dialogs",[]).factory("$cordovaDialogs",["$q","$window",function(e,t){return{alert:function(n,r,i){var o=e.defer();return t.navigator.notification?navigator.notification.alert(n,function(){o.resolve()},r,i):(t.alert(n),o.resolve()),o.promise},confirm:function(n,r,i){var o=e.defer();return t.navigator.notification?navigator.notification.confirm(n,function(e){o.resolve(e)},r,i):t.confirm(n)?o.resolve(1):o.resolve(2),o.promise},prompt:function(n,r,i,o){var a=e.defer();if(t.navigator.notification)navigator.notification.prompt(n,function(e){a.resolve(e)},r,i,o);else{var s=t.prompt(n,o);null!==s?a.resolve({input1:s,buttonIndex:1}):a.resolve({input1:s,buttonIndex:2})}return a.promise},beep:function(e){return navigator.notification.beep(e)},activityStart:function(t,n){var r=e.defer();return"android"===cordova.platformId?(navigator.notification.activityStart(n,t),r.resolve()):r.reject(t,n),r.promise},activityStop:function(){var t=e.defer();return"android"===cordova.platformId?(navigator.notification.activityStop(),t.resolve()):t.reject(),t.promise},progressStart:function(t,n){var r=e.defer();return"android"===cordova.platformId?(navigator.notification.progressStart(n,t),r.resolve()):r.reject(t,n),r.promise},progressStop:function(){var t=e.defer();return"android"===cordova.platformId?(navigator.notification.progressStop(),t.resolve()):t.reject(),t.promise},progressValue:function(t){var n=e.defer();return"android"===cordova.platformId?(navigator.notification.progressValue(t),n.resolve()):n.reject(t),n.promise}}}]),angular.module("ngCordova.plugins.emailComposer",[]).factory("$cordovaEmailComposer",["$q",function(e){return{isAvailable:function(){var t=e.defer();return cordova.plugins.email.isAvailable(function(e){e?t.resolve():t.reject()}),t.promise},open:function(t){var n=e.defer();return cordova.plugins.email.open(t,function(){n.reject()}),n.promise},addAlias:function(e,t){cordova.plugins.email.addAlias(e,t)}}}]),angular.module("ngCordova.plugins.facebook",[]).provider("$cordovaFacebook",[function(){this.browserInit=function(e,t){this.appID=e,this.appVersion=t||"v2.0",facebookConnectPlugin.browserInit(this.appID,this.appVersion)},this.$get=["$q",function(e){return{login:function(t){var n=e.defer();return facebookConnectPlugin.login(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},showDialog:function(t){var n=e.defer();return facebookConnectPlugin.showDialog(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},api:function(t,n){var r=e.defer();return facebookConnectPlugin.api(t,n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},getAccessToken:function(){var t=e.defer();return facebookConnectPlugin.getAccessToken(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getLoginStatus:function(){var t=e.defer();return facebookConnectPlugin.getLoginStatus(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},logout:function(){var t=e.defer();return facebookConnectPlugin.logout(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]}]),angular.module("ngCordova.plugins.facebookAds",[]).factory("$cordovaFacebookAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.FacebookAds.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.FacebookAds.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.FacebookAds.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.FacebookAds.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.FacebookAds.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.FacebookAds.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.FacebookAds.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.FacebookAds.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.file",[]).constant("$cordovaFileError",{1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR"}).provider("$cordovaFile",[function(){this.$get=["$q","$window","$cordovaFileError",function(e,t,n){return{getFreeDiskSpace:function(){var t=e.defer();return cordova.exec(function(e){t.resolve(e)},function(e){t.reject(e)},"File","getFreeDiskSpace",[]),t.promise},checkDir:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("directory cannot start with /");try{var a=r+i;t.resolveLocalFileSystemURL(a,function(e){e.isDirectory===!0?o.resolve(e):o.reject({code:13,message:"input is not a directory"})},function(e){e.message=n[e.code],o.reject(e)})}catch(s){s.message=n[s.code],o.reject(s)}return o.promise},checkFile:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("directory cannot start with /");try{var a=r+i;t.resolveLocalFileSystemURL(a,function(e){e.isFile===!0?o.resolve(e):o.reject({code:13,message:"input is not a file"})},function(e){e.message=n[e.code],o.reject(e)})}catch(s){s.message=n[s.code],o.reject(s)}return o.promise},createDir:function(r,i,o){var a=e.defer();/^\//.test(i)&&a.reject("directory cannot start with /"),o=!o;var s={create:!0,exclusive:o};try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,s,function(e){a.resolve(e)},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(l){l.message=n[l.code],a.reject(l)}return a.promise},createFile:function(r,i,o){var a=e.defer();/^\//.test(i)&&a.reject("file-name cannot start with /"),o=!o;var s={create:!0,exclusive:o};try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,s,function(e){a.resolve(e)},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(l){l.message=n[l.code],a.reject(l)}return a.promise},removeDir:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,{create:!1},function(e){e.remove(function(){o.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},removeFile:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.remove(function(){o.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},removeRecursively:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,{create:!1},function(e){e.removeRecursively(function(){o.resolve({success:!0,fileRemoved:e})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},writeFile:function(r,i,o,a){var s=e.defer();/^\//.test(i)&&s.reject("file-name cannot start with /"),a=!a;var l={create:!0,exclusive:a};try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,l,function(e){e.createWriter(function(e){l.append===!0&&e.seek(e.length),l.truncate&&e.truncate(l.truncate),e.onwriteend=function(e){this.error?s.reject(this.error):s.resolve(e)},e.write(o),s.promise.abort=function(){e.abort()}})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(c){c.message=n[c.code],s.reject(c)}return s.promise},writeExistingFile:function(r,i,o){var a=e.defer();/^\//.test(i)&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.createWriter(function(e){e.seek(e.length),e.onwriteend=function(e){this.error?a.reject(this.error):a.resolve(e)},e.write(o),a.promise.abort=function(){e.abort()}})},function(e){e.message=n[e.code],a.reject(e)})},function(e){e.message=n[e.code],a.reject(e)})}catch(s){s.message=n[s.code],a.reject(s)}return a.promise},readAsText:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsText(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},readAsDataURL:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsDataURL(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},readAsBinaryString:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsBinaryString(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},readAsArrayBuffer:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1},function(e){e.file(function(e){var t=new FileReader;t.onloadend=function(e){void 0!==e.target.result||null!==e.target.result?o.resolve(e.target.result):void 0!==e.target.error||null!==e.target.error?o.reject(e.target.error):o.reject({code:null,message:"READER_ONLOADEND_ERR"})},t.readAsArrayBuffer(e)})},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(a){a.message=n[a.code],o.reject(a)}return o.promise},moveFile:function(n,r,i,o){var a=e.defer();o=o||r,(/^\//.test(r)||/^\//.test(o))&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(n,function(e){e.getFile(r,{create:!1},function(e){t.resolveLocalFileSystemURL(i,function(t){e.moveTo(t,o,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(s){a.reject(s)}return a.promise},moveDir:function(n,r,i,o){var a=e.defer();o=o||r,(/^\//.test(r)||/^\//.test(o))&&a.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(n,function(e){e.getDirectory(r,{create:!1},function(e){t.resolveLocalFileSystemURL(i,function(t){e.moveTo(t,o,function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})},function(e){a.reject(e)})}catch(s){a.reject(s)}return a.promise},copyDir:function(r,i,o,a){var s=e.defer();a=a||i,(/^\//.test(i)||/^\//.test(a))&&s.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getDirectory(i,{create:!1,exclusive:!1},function(e){t.resolveLocalFileSystemURL(o,function(t){e.copyTo(t,a,function(e){s.resolve(e)},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(l){l.message=n[l.code],s.reject(l)}return s.promise},copyFile:function(r,i,o,a){var s=e.defer();a=a||i,/^\//.test(i)&&s.reject("file-name cannot start with /");try{t.resolveLocalFileSystemURL(r,function(e){e.getFile(i,{create:!1,exclusive:!1},function(e){t.resolveLocalFileSystemURL(o,function(t){e.copyTo(t,a,function(e){s.resolve(e)},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})},function(e){e.message=n[e.code],s.reject(e)})}catch(l){l.message=n[l.code],s.reject(l)}return s.promise},readFileMetadata:function(r,i){var o=e.defer();/^\//.test(i)&&o.reject("directory cannot start with /");try{var a=r+i;t.resolveLocalFileSystemURL(a,function(e){e.file(function(e){o.resolve(e)},function(e){e.message=n[e.code],o.reject(e)})},function(e){e.message=n[e.code],o.reject(e)})}catch(s){s.message=n[s.code],o.reject(s)}return o.promise}}}]}]),angular.module("ngCordova.plugins.fileOpener2",[]).factory("$cordovaFileOpener2",["$q",function(e){return{open:function(t,n){var r=e.defer();return cordova.plugins.fileOpener2.open(t,n,{error:function(e){r.reject(e)},success:function(){r.resolve()}}),r.promise},uninstall:function(t){var n=e.defer();return cordova.plugins.fileOpener2.uninstall(t,{error:function(e){n.reject(e)},success:function(){n.resolve()}}),n.promise},appIsInstalled:function(t){var n=e.defer();return cordova.plugins.fileOpener2.appIsInstalled(t,{success:function(e){n.resolve(e)}}),n.promise}}}]),angular.module("ngCordova.plugins.fileTransfer",[]).factory("$cordovaFileTransfer",["$q","$timeout",function(e,t){return{download:function(n,r,i,o){var a=e.defer(),s=new FileTransfer,l=i&&i.encodeURI===!1?n:encodeURI(n);return i&&void 0!==i.timeout&&null!==i.timeout&&(t(function(){s.abort()},i.timeout),i.timeout=null),s.onprogress=function(e){a.notify(e)},a.promise.abort=function(){s.abort()},s.download(l,r,a.resolve,a.reject,o,i),a.promise},upload:function(n,r,i,o){var a=e.defer(),s=new FileTransfer,l=i&&i.encodeURI===!1?n:encodeURI(n);return i&&void 0!==i.timeout&&null!==i.timeout&&(t(function(){s.abort()},i.timeout),i.timeout=null),s.onprogress=function(e){a.notify(e)},a.promise.abort=function(){s.abort()},s.upload(r,l,a.resolve,a.reject,i,o),a.promise}}}]),angular.module("ngCordova.plugins.flashlight",[]).factory("$cordovaFlashlight",["$q","$window",function(e,t){return{available:function(){var n=e.defer();return t.plugins.flashlight.available(function(e){n.resolve(e)}),n.promise},switchOn:function(){var n=e.defer();return t.plugins.flashlight.switchOn(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},switchOff:function(){var n=e.defer();return t.plugins.flashlight.switchOff(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},toggle:function(){var n=e.defer();return t.plugins.flashlight.toggle(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.flurryAds",[]).factory("$cordovaFlurryAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.FlurryAds.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.FlurryAds.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.FlurryAds.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.FlurryAds.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.FlurryAds.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.FlurryAds.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.FlurryAds.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.FlurryAds.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.ga",[]).factory("$cordovaGA",["$q","$window",function(e,t){return{init:function(n,r){var i=e.defer();return r=r>=0?r:10,t.plugins.gaPlugin.init(function(e){i.resolve(e)},function(e){i.reject(e)},n,r),i.promise},trackEvent:function(n,r,i,o,a,s){var l=e.defer();return t.plugins.gaPlugin.trackEvent(function(e){l.resolve(e)},function(e){l.reject(e)},i,o,a,s),l.promise},trackPage:function(n,r,i){var o=e.defer();return t.plugins.gaPlugin.trackPage(function(e){o.resolve(e)},function(e){o.reject(e)},i),o.promise},setVariable:function(n,r,i,o){var a=e.defer();return t.plugins.gaPlugin.setVariable(function(e){a.resolve(e)},function(e){a.reject(e)},i,o),a.promise},exit:function(){var n=e.defer();return t.plugins.gaPlugin.exit(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.geolocation",[]).factory("$cordovaGeolocation",["$q",function(e){return{getCurrentPosition:function(t){var n=e.defer();return navigator.geolocation.getCurrentPosition(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},watchPosition:function(t){var n=e.defer(),r=navigator.geolocation.watchPosition(function(e){n.notify(e)},function(e){n.reject(e)},t);return n.promise.cancel=function(){navigator.geolocation.clearWatch(r)},n.promise.clearWatch=function(e){navigator.geolocation.clearWatch(e||r)},n.promise.watchID=r,n.promise},clearWatch:function(e){return navigator.geolocation.clearWatch(e)}}}]),angular.module("ngCordova.plugins.globalization",[]).factory("$cordovaGlobalization",["$q",function(e){return{getPreferredLanguage:function(){var t=e.defer();return navigator.globalization.getPreferredLanguage(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getLocaleName:function(){var t=e.defer();return navigator.globalization.getLocaleName(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getFirstDayOfWeek:function(){var t=e.defer();return navigator.globalization.getFirstDayOfWeek(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},dateToString:function(t,n){var r=e.defer();return navigator.globalization.dateToString(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},stringToDate:function(t,n){var r=e.defer();return navigator.globalization.stringToDate(t,function(e){
r.resolve(e)},function(e){r.reject(e)},n),r.promise},getDatePattern:function(t){var n=e.defer();return navigator.globalization.getDatePattern(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},getDateNames:function(t){var n=e.defer();return navigator.globalization.getDateNames(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},isDayLightSavingsTime:function(t){var n=e.defer();return navigator.globalization.isDayLightSavingsTime(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},numberToString:function(t,n){var r=e.defer();return navigator.globalization.numberToString(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},stringToNumber:function(t,n){var r=e.defer();return navigator.globalization.stringToNumber(t,function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},getNumberPattern:function(t){var n=e.defer();return navigator.globalization.getNumberPattern(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},getCurrencyPattern:function(t){var n=e.defer();return navigator.globalization.getCurrencyPattern(t,function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.googleAds",[]).factory("$cordovaGoogleAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.AdMob.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.AdMob.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.AdMob.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.AdMob.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.AdMob.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.AdMob.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.AdMob.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.AdMob.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.googleAnalytics",[]).factory("$cordovaGoogleAnalytics",["$q","$window",function(e,t){return{startTrackerWithId:function(n){var r=e.defer();return t.analytics.startTrackerWithId(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setUserId:function(n){var r=e.defer();return t.analytics.setUserId(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},debugMode:function(){var n=e.defer();return t.analytics.debugMode(function(e){n.resolve(e)},function(){n.reject()}),n.promise},trackView:function(n){var r=e.defer();return t.analytics.trackView(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},addCustomDimension:function(n,r){var i=e.defer(),o=parseInt(n,10);return isNaN(o)&&i.reject('Parameter "key" must be an integer.'),t.analytics.addCustomDimension(o,r,function(){i.resolve()},function(e){i.reject(e)}),i.promise},trackEvent:function(n,r,i,o){var a=e.defer();return t.analytics.trackEvent(n,r,i,o,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},trackException:function(n,r){var i=e.defer();return t.analytics.trackException(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},trackTiming:function(n,r,i,o){var a=e.defer();return t.analytics.trackTiming(n,r,i,o,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},addTransaction:function(n,r,i,o,a,s){var l=e.defer();return t.analytics.addTransaction(n,r,i,o,a,s,function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise},addTransactionItem:function(n,r,i,o,a,s,l){var c=e.defer();return t.analytics.addTransactionItem(n,r,i,o,a,s,l,function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise}}}]),angular.module("ngCordova.plugins.googleMap",[]).factory("$cordovaGoogleMap",["$q","$window",function(e,t){var n=null;return{getMap:function(r){var i=e.defer();if(t.plugin.google.maps){var o=document.getElementById("map_canvas");n=t.plugin.google.maps.Map.getMap(r),n.setDiv(o),i.resolve(n)}else i.reject(null);return i.promise},isMapLoaded:function(){return!!n},addMarker:function(t){var r=e.defer();return n.addMarker(t,function(e){r.resolve(e)}),r.promise},getMapTypeIds:function(){return t.plugin.google.maps.mapTypeId},setVisible:function(t){var r=e.defer();return n.setVisible(t),r.promise},cleanup:function(){n=null}}}]),angular.module("ngCordova.plugins.googlePlayGame",[]).factory("$cordovaGooglePlayGame",["$q",function(e){return{auth:function(){var t=e.defer();return googleplaygame.auth(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},signout:function(){var t=e.defer();return googleplaygame.signout(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},isSignedIn:function(){var t=e.defer();return googleplaygame.isSignedIn(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},showPlayer:function(){var t=e.defer();return googleplaygame.showPlayer(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},submitScore:function(t){var n=e.defer();return googleplaygame.submitScore(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},showAllLeaderboards:function(){var t=e.defer();return googleplaygame.showAllLeaderboards(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise},showLeaderboard:function(t){var n=e.defer();return googleplaygame.showLeaderboard(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},unlockAchievement:function(t){var n=e.defer();return googleplaygame.unlockAchievement(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},incrementAchievement:function(t){var n=e.defer();return googleplaygame.incrementAchievement(t,function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},showAchievements:function(){var t=e.defer();return googleplaygame.showAchievements(function(e){return t.resolve(e)},function(e){return t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.googlePlus",[]).factory("$cordovaGooglePlus",["$q","$window",function(e,t){return{login:function(n){var r=e.defer();return void 0===n&&(n={}),t.plugins.googleplus.login({iOSApiKey:n},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},silentLogin:function(n){var r=e.defer();return void 0===n&&(n={}),t.plugins.googleplus.trySilentLogin({iOSApiKey:n},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},logout:function(){var n=e.defer();t.plugins.googleplus.logout(function(e){n.resolve(e)})},disconnect:function(){var n=e.defer();t.plugins.googleplus.disconnect(function(e){n.resolve(e)})},isAvailable:function(){var n=e.defer();return t.plugins.googleplus.isAvailable(function(e){e?n.resolve(e):n.reject(e)}),n.promise}}}]),angular.module("ngCordova.plugins.healthKit",[]).factory("$cordovaHealthKit",["$q","$window",function(e,t){return{isAvailable:function(){var n=e.defer();return t.plugins.healthkit.available(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},checkAuthStatus:function(n){var r=e.defer();return n=n||"HKQuantityTypeIdentifierHeight",t.plugins.healthkit.checkAuthStatus({type:n},function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},requestAuthorization:function(n,r){var i=e.defer();return n=n||["HKCharacteristicTypeIdentifierDateOfBirth","HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight"],r=r||["HKQuantityTypeIdentifierActiveEnergyBurned","HKQuantityTypeIdentifierHeight","HKQuantityTypeIdentifierDistanceCycling"],t.plugins.healthkit.requestAuthorization({readTypes:n,writeTypes:r},function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},readDateOfBirth:function(){var n=e.defer();return t.plugins.healthkit.readDateOfBirth(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},readGender:function(){var n=e.defer();return t.plugins.healthkit.readGender(function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},saveWeight:function(n,r,i){var o=e.defer();return t.plugins.healthkit.saveWeight({unit:r||"lb",amount:n,date:i||new Date},function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},readWeight:function(n){var r=e.defer();return t.plugins.healthkit.readWeight({unit:n||"lb"},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},saveHeight:function(n,r,i){var o=e.defer();return t.plugins.healthkit.saveHeight({unit:r||"in",amount:n,date:i||new Date},function(e){o.resolve(e)},function(e){o.resolve(e)}),o.promise},readHeight:function(n){var r=e.defer();return t.plugins.healthkit.readHeight({unit:n||"in"},function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},findWorkouts:function(){var n=e.defer();return t.plugins.healthkit.findWorkouts({},function(e){n.resolve(e)},function(e){n.resolve(e)}),n.promise},saveWorkout:function(n){var r=e.defer();return t.plugins.healthkit.saveWorkout(n,function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},querySampleType:function(n){var r=e.defer();return t.plugins.healthkit.querySampleType(n,function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise}}}]),angular.module("ngCordova.plugins.httpd",[]).factory("$cordovaHttpd",["$q",function(e){return{startServer:function(t){var n=e.defer();return cordova.plugins.CorHttpd.startServer(t,function(){n.resolve()},function(){n.reject()}),n.promise},stopServer:function(){var t=e.defer();return cordova.plugins.CorHttpd.stopServer(function(){t.resolve()},function(){t.reject()}),t.promise},getURL:function(){var t=e.defer();return cordova.plugins.CorHttpd.getURL(function(e){t.resolve(e)},function(){t.reject()}),t.promise},getLocalPath:function(){var t=e.defer();return cordova.plugins.CorHttpd.getLocalPath(function(e){t.resolve(e)},function(){t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.iAd",[]).factory("$cordovaiAd",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.iAd.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.iAd.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.iAd.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.iAd.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.iAd.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.iAd.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.iAd.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.iAd.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.imagePicker",[]).factory("$cordovaImagePicker",["$q","$window",function(e,t){return{getPictures:function(n){var r=e.defer();return t.imagePicker.getPictures(function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise}}}]),angular.module("ngCordova.plugins.inAppBrowser",[]).provider("$cordovaInAppBrowser",[function(){var e,t=this.defaultOptions={};this.setDefaultOptions=function(e){t=angular.extend(t,e)},this.$get=["$rootScope","$q","$window","$timeout",function(n,r,i,o){return{open:function(a,s,l){var c=r.defer();if(l&&!angular.isObject(l))return c.reject("options must be an object"),c.promise;var u=angular.extend({},t,l),d=[];angular.forEach(u,function(e,t){d.push(t+"="+e)});var f=d.join();return e=i.open(a,s,f),e.addEventListener("loadstart",function(e){o(function(){n.$broadcast("$cordovaInAppBrowser:loadstart",e)})},!1),e.addEventListener("loadstop",function(e){c.resolve(e),o(function(){n.$broadcast("$cordovaInAppBrowser:loadstop",e)})},!1),e.addEventListener("loaderror",function(e){c.reject(e),o(function(){n.$broadcast("$cordovaInAppBrowser:loaderror",e)})},!1),e.addEventListener("exit",function(e){o(function(){n.$broadcast("$cordovaInAppBrowser:exit",e)})},!1),c.promise},close:function(){e.close(),e=null},show:function(){e.show()},executeScript:function(t){var n=r.defer();return e.executeScript(t,function(e){n.resolve(e)}),n.promise},insertCSS:function(t){var n=r.defer();return e.insertCSS(t,function(e){n.resolve(e)}),n.promise}}}]}]),angular.module("ngCordova.plugins.insomnia",[]).factory("$cordovaInsomnia",["$window",function(e){return{keepAwake:function(){return e.plugins.insomnia.keepAwake()},allowSleepAgain:function(){return e.plugins.insomnia.allowSleepAgain()}}}]),angular.module("ngCordova.plugins.instagram",[]).factory("$cordovaInstagram",["$q",function(e){return{share:function(t){var n=e.defer();return window.Instagram?(Instagram.share(t.image,t.caption,function(e){e?n.reject(e):n.resolve(!0)}),n.promise):(void 0,n.resolve(null),n.promise)},isInstalled:function(){var t=e.defer();return window.Instagram?(Instagram.isInstalled(function(e,n){e?t.reject(e):t.resolve(n)}),t.promise):(void 0,t.resolve(null),t.promise)}}}]),angular.module("ngCordova.plugins.keyboard",[]).factory("$cordovaKeyboard",["$rootScope",function(e){var t=function(){e.$evalAsync(function(){e.$broadcast("$cordovaKeyboard:show")})},n=function(){e.$evalAsync(function(){e.$broadcast("$cordovaKeyboard:hide")})};return document.addEventListener("deviceready",function(){cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",t,!1),window.addEventListener("native.keyboardhide",n,!1))}),{hideAccessoryBar:function(e){return cordova.plugins.Keyboard.hideKeyboardAccessoryBar(e)},close:function(){return cordova.plugins.Keyboard.close()},show:function(){return cordova.plugins.Keyboard.show()},disableScroll:function(e){return cordova.plugins.Keyboard.disableScroll(e)},isVisible:function(){return cordova.plugins.Keyboard.isVisible},clearShowWatch:function(){document.removeEventListener("native.keyboardshow",t),e.$$listeners["$cordovaKeyboard:show"]=[]},clearHideWatch:function(){document.removeEventListener("native.keyboardhide",n),e.$$listeners["$cordovaKeyboard:hide"]=[]}}}]),angular.module("ngCordova.plugins.keychain",[]).factory("$cordovaKeychain",["$q",function(e){return{getForKey:function(t,n){var r=e.defer(),i=new Keychain;return i.getForKey(r.resolve,r.reject,t,n),r.promise},setForKey:function(t,n,r){var i=e.defer(),o=new Keychain;return o.setForKey(i.resolve,i.reject,t,n,r),i.promise},removeForKey:function(t,n){var r=e.defer(),i=new Keychain;return i.removeForKey(r.resolve,r.reject,t,n),r.promise}}}]),angular.module("ngCordova.plugins.launchNavigator",[]).factory("$cordovaLaunchNavigator",["$q",function(e){return{navigate:function(t,n,r){var i=e.defer();return launchnavigator.navigate(t,n,function(){i.resolve()},function(e){i.reject(e)},r),i.promise}}}]),angular.module("ngCordova.plugins.localNotification",[]).factory("$cordovaLocalNotification",["$q","$window","$rootScope","$timeout",function(e,t,n,r){return document.addEventListener("deviceready",function(){t.cordova&&t.cordova.plugins&&t.cordova.plugins.notification&&t.cordova.plugins.notification.local&&(t.cordova.plugins.notification.local.on("schedule",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:schedule",e,t)})}),t.cordova.plugins.notification.local.on("trigger",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:trigger",e,t)})}),t.cordova.plugins.notification.local.on("update",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:update",e,t)})}),t.cordova.plugins.notification.local.on("clear",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:clear",e,t)})}),t.cordova.plugins.notification.local.on("clearall",function(e){r(function(){n.$broadcast("$cordovaLocalNotification:clearall",e)})}),t.cordova.plugins.notification.local.on("cancel",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:cancel",e,t)})}),t.cordova.plugins.notification.local.on("cancelall",function(e){r(function(){n.$broadcast("$cordovaLocalNotification:cancelall",e)})}),t.cordova.plugins.notification.local.on("click",function(e,t){r(function(){n.$broadcast("$cordovaLocalNotification:click",e,t)})}))},!1),{schedule:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.schedule(n,function(e){i.resolve(e)},r),i.promise},add:function(n,r){void 0;var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.schedule(n,function(e){i.resolve(e)},r),i.promise},update:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.update(n,function(e){i.resolve(e)},r),i.promise},clear:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.clear(n,function(e){i.resolve(e)},r),i.promise},clearAll:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.clearAll(function(e){r.resolve(e)},n),r.promise},cancel:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.cancel(n,function(e){i.resolve(e)},r),i.promise},cancelAll:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.cancelAll(function(e){r.resolve(e)},n),r.promise},isPresent:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.isPresent(n,function(e){i.resolve(e)},r),i.promise},isScheduled:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.isScheduled(n,function(e){i.resolve(e)},r),i.promise},isTriggered:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.isTriggered(n,function(e){i.resolve(e)},r),i.promise},hasPermission:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.hasPermission(function(e){e?r.resolve(e):r.reject(e)},n),r.promise},registerPermission:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.registerPermission(function(e){e?r.resolve(e):r.reject(e)},n),r.promise},promptForPermission:function(n){void 0;var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.registerPermission(function(e){e?r.resolve(e):r.reject(e)},n),r.promise},getAllIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAllIds(function(e){r.resolve(e)},n),r.promise},getIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getIds(function(e){r.resolve(e)},n),r.promise},getScheduledIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getScheduledIds(function(e){r.resolve(e)},n),r.promise},getTriggeredIds:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getTriggeredIds(function(e){r.resolve(e)},n),r.promise},get:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.get(n,function(e){i.resolve(e)},r),i.promise},getAll:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAll(function(e){r.resolve(e)},n),r.promise},getScheduled:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.getScheduled(n,function(e){i.resolve(e)},r),i.promise},getAllScheduled:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAllScheduled(function(e){r.resolve(e)},n),r.promise},getTriggered:function(n,r){var i=e.defer();return r=r||null,t.cordova.plugins.notification.local.getTriggered(n,function(e){i.resolve(e)},r),i.promise},getAllTriggered:function(n){var r=e.defer();return n=n||null,t.cordova.plugins.notification.local.getAllTriggered(function(e){r.resolve(e)},n),r.promise},getDefaults:function(){return t.cordova.plugins.notification.local.getDefaults()},setDefaults:function(e){t.cordova.plugins.notification.local.setDefaults(e)}}}]),angular.module("ngCordova.plugins.mMediaAds",[]).factory("$cordovaMMediaAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.mMedia.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.mMedia.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.mMedia.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.mMedia.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.mMedia.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.mMedia.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.mMedia.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.mMedia.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.media",[]).service("NewMedia",["$q","$interval",function(e,t){function n(e){angular.isDefined(c)||(c=t(function(){f<0&&(f=e.getDuration(),a&&f>0&&a.notify({duration:f})),e.getCurrentPosition(function(e){e>-1&&(d=e)},function(e){void 0}),a&&a.notify({position:d})},1e3))}function r(){angular.isDefined(c)&&(t.cancel(c),c=void 0)}function i(){d=-1,f=-1}function o(e){this.media=new Media(e,function(e){r(),i(),a.resolve(e)},function(e){r(),i(),a.reject(e)},function(e){u=e,a.notify({status:u})})}var a,s,l,c,u=null,d=-1,f=-1;return o.prototype.play=function(t){return a=e.defer(),"object"!=typeof t&&(t={}),this.media.play(t),n(this.media),a.promise},o.prototype.pause=function(){r(),this.media.pause()},o.prototype.stop=function(){this.media.stop()},o.prototype.release=function(){this.media.release(),this.media=void 0},o.prototype.seekTo=function(e){this.media.seekTo(e)},o.prototype.setVolume=function(e){this.media.setVolume(e)},o.prototype.startRecord=function(){this.media.startRecord()},o.prototype.stopRecord=function(){this.media.stopRecord()},o.prototype.currentTime=function(){return s=e.defer(),this.media.getCurrentPosition(function(e){s.resolve(e)}),s.promise},o.prototype.getDuration=function(){return l=e.defer(),this.media.getDuration(function(e){l.resolve(e)}),l.promise},o}]).factory("$cordovaMedia",["NewMedia",function(e){return{newMedia:function(t){return new e(t)}}}]),angular.module("ngCordova.plugins.mobfoxAds",[]).factory("$cordovaMobFoxAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.MobFox.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.MobFox.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.MobFox.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.MobFox.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.MobFox.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.MobFox.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.MobFox.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.MobFox.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins",["ngCordova.plugins.3dtouch","ngCordova.plugins.actionSheet","ngCordova.plugins.adMob","ngCordova.plugins.appAvailability","ngCordova.plugins.appRate","ngCordova.plugins.appVersion","ngCordova.plugins.backgroundGeolocation","ngCordova.plugins.badge","ngCordova.plugins.barcodeScanner","ngCordova.plugins.batteryStatus","ngCordova.plugins.beacon","ngCordova.plugins.ble","ngCordova.plugins.bluetoothSerial","ngCordova.plugins.brightness","ngCordova.plugins.calendar","ngCordova.plugins.camera","ngCordova.plugins.capture","ngCordova.plugins.clipboard","ngCordova.plugins.contacts","ngCordova.plugins.datePicker","ngCordova.plugins.device","ngCordova.plugins.deviceMotion","ngCordova.plugins.deviceOrientation","ngCordova.plugins.dialogs","ngCordova.plugins.emailComposer","ngCordova.plugins.facebook","ngCordova.plugins.facebookAds","ngCordova.plugins.file","ngCordova.plugins.fileTransfer","ngCordova.plugins.fileOpener2","ngCordova.plugins.flashlight","ngCordova.plugins.flurryAds","ngCordova.plugins.ga","ngCordova.plugins.geolocation","ngCordova.plugins.globalization","ngCordova.plugins.googleAds","ngCordova.plugins.googleAnalytics","ngCordova.plugins.googleMap","ngCordova.plugins.googlePlayGame","ngCordova.plugins.googlePlus","ngCordova.plugins.healthKit","ngCordova.plugins.httpd","ngCordova.plugins.iAd","ngCordova.plugins.imagePicker","ngCordova.plugins.inAppBrowser","ngCordova.plugins.instagram","ngCordova.plugins.keyboard","ngCordova.plugins.keychain","ngCordova.plugins.launchNavigator","ngCordova.plugins.localNotification","ngCordova.plugins.media","ngCordova.plugins.mMediaAds","ngCordova.plugins.mobfoxAds","ngCordova.plugins.mopubAds","ngCordova.plugins.nativeAudio","ngCordova.plugins.network","ngCordova.plugins.pinDialog","ngCordova.plugins.preferences","ngCordova.plugins.printer","ngCordova.plugins.progressIndicator","ngCordova.plugins.push","ngCordova.plugins.push_v5","ngCordova.plugins.sms","ngCordova.plugins.socialSharing","ngCordova.plugins.spinnerDialog","ngCordova.plugins.splashscreen","ngCordova.plugins.sqlite","ngCordova.plugins.statusbar","ngCordova.plugins.toast","ngCordova.plugins.touchid","ngCordova.plugins.vibration","ngCordova.plugins.videoCapturePlus","ngCordova.plugins.zip","ngCordova.plugins.insomnia"]),angular.module("ngCordova.plugins.mopubAds",[]).factory("$cordovaMoPubAds",["$q","$window",function(e,t){return{setOptions:function(n){var r=e.defer();return t.MoPub.setOptions(n,function(){r.resolve()},function(){r.reject()}),r.promise},createBanner:function(n){var r=e.defer();return t.MoPub.createBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},removeBanner:function(){var n=e.defer();return t.MoPub.removeBanner(function(){n.resolve()},function(){n.reject()}),n.promise},showBanner:function(n){var r=e.defer();return t.MoPub.showBanner(n,function(){r.resolve()},function(){r.reject()}),r.promise},showBannerAtXY:function(n,r){var i=e.defer();return t.MoPub.showBannerAtXY(n,r,function(){i.resolve()},function(){i.reject()}),i.promise},hideBanner:function(){var n=e.defer();return t.MoPub.hideBanner(function(){n.resolve()},function(){n.reject()}),n.promise},prepareInterstitial:function(n){var r=e.defer();return t.MoPub.prepareInterstitial(n,function(){r.resolve()},function(){r.reject()}),r.promise},showInterstitial:function(){var n=e.defer();return t.MoPub.showInterstitial(function(){n.resolve()},function(){n.reject()}),n.promise}}}]),angular.module("ngCordova.plugins.nativeAudio",[]).factory("$cordovaNativeAudio",["$q","$window",function(e,t){return{preloadSimple:function(n,r){var i=e.defer();return t.plugins.NativeAudio.preloadSimple(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise},preloadComplex:function(n,r,i,o,a){var s=e.defer();return t.plugins.NativeAudio.preloadComplex(n,r,i,o,a,function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise},play:function(n,r){var i=e.defer();return t.plugins.NativeAudio.play(n,function(e){i.resolve(e)},function(e){i.reject(e)},r),i.promise},stop:function(n){var r=e.defer();return t.plugins.NativeAudio.stop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},loop:function(n){var r=e.defer();return t.plugins.NativeAudio.loop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},unload:function(n){var r=e.defer();return t.plugins.NativeAudio.unload(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},setVolumeForComplexAsset:function(n,r){var i=e.defer();return t.plugins.NativeAudio.setVolumeForComplexAsset(n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.network",[]).factory("$cordovaNetwork",["$rootScope","$timeout",function(e,t){var n=function(){var n=navigator.connection.type;t(function(){e.$broadcast("$cordovaNetwork:offline",n)})},r=function(){var n=navigator.connection.type;t(function(){e.$broadcast("$cordovaNetwork:online",n)})};return document.addEventListener("deviceready",function(){navigator.connection&&(document.addEventListener("offline",n,!1),document.addEventListener("online",r,!1))}),{getNetwork:function(){return navigator.connection.type},isOnline:function(){var e=navigator.connection.type;return e!==Connection.UNKNOWN&&e!==Connection.NONE},isOffline:function(){var e=navigator.connection.type;return e===Connection.UNKNOWN||e===Connection.NONE},clearOfflineWatch:function(){document.removeEventListener("offline",n),e.$$listeners["$cordovaNetwork:offline"]=[]},clearOnlineWatch:function(){document.removeEventListener("online",r),e.$$listeners["$cordovaNetwork:online"]=[]}}}]).run(["$injector",function(e){e.get("$cordovaNetwork")}]),angular.module("ngCordova.plugins.pinDialog",[]).factory("$cordovaPinDialog",["$q","$window",function(e,t){return{prompt:function(n,r,i){var o=e.defer();return t.plugins.pinDialog.prompt(n,function(e){o.resolve(e)},r,i),o.promise}}}]),angular.module("ngCordova.plugins.preferences",[]).factory("$cordovaPreferences",["$window","$q",function(e,t){return{pluginNotEnabledMessage:"Plugin not enabled",decoratePromise:function(e){e.success=function(t){return e.then(t),e},e.error=function(t){return e.then(null,t),e}},store:function(n,r,i){function o(e){s.resolve(e)}function a(e){s.reject(new Error(e))}var s=t.defer(),l=s.promise;if(e.plugins){var c;c=3===arguments.length?e.plugins.appPreferences.store(i,n,r):e.plugins.appPreferences.store(n,r),c.then(o,a)}else s.reject(new Error(this.pluginNotEnabledMessage));return this.decoratePromise(l),l},fetch:function(n,r){function i(e){a.resolve(e)}function o(e){a.reject(new Error(e))}var a=t.defer(),s=a.promise;if(e.plugins){var l;l=2===arguments.length?e.plugins.appPreferences.fetch(r,n):e.plugins.appPreferences.fetch(n),l.then(i,o)}else a.reject(new Error(this.pluginNotEnabledMessage));return this.decoratePromise(s),s},remove:function(n,r){function i(e){a.resolve(e)}function o(e){a.reject(new Error(e))}var a=t.defer(),s=a.promise;if(e.plugins){var l;l=2===arguments.length?e.plugins.appPreferences.remove(r,n):e.plugins.appPreferences.remove(n),l.then(i,o)}else a.reject(new Error(this.pluginNotEnabledMessage));return this.decoratePromise(s),s},show:function(){function n(e){i.resolve(e)}function r(e){i.reject(new Error(e))}var i=t.defer(),o=i.promise;return e.plugins?e.plugins.appPreferences.show().then(n,r):i.reject(new Error(this.pluginNotEnabledMessage)),this.decoratePromise(o),o}}}]),angular.module("ngCordova.plugins.printer",[]).factory("$cordovaPrinter",["$q","$window",function(e,t){return{isAvailable:function(){var n=e.defer();return t.plugin.printer.isAvailable(function(e){n.resolve(e)}),n.promise},print:function(n,r){var i=e.defer();return t.plugin.printer.print(n,r,function(){i.resolve()}),i.promise}}}]),angular.module("ngCordova.plugins.progressIndicator",[]).factory("$cordovaProgress",[function(){
return{show:function(e){var t=e||"Please wait...";return ProgressIndicator.show(t)},showSimple:function(e){var t=e||!1;return ProgressIndicator.showSimple(t)},showSimpleWithLabel:function(e,t){var n=e||!1,r=t||"Loading...";return ProgressIndicator.showSimpleWithLabel(n,r)},showSimpleWithLabelDetail:function(e,t,n){var r=e||!1,i=t||"Loading...",o=n||"Please wait";return ProgressIndicator.showSimpleWithLabelDetail(r,i,o)},showDeterminate:function(e,t){var n=e||!1,r=t||5e4;return ProgressIndicator.showDeterminate(n,r)},showDeterminateWithLabel:function(e,t,n){var r=e||!1,i=t||5e4,o=n||"Loading...";return ProgressIndicator.showDeterminateWithLabel(r,i,o)},showAnnular:function(e,t){var n=e||!1,r=t||5e4;return ProgressIndicator.showAnnular(n,r)},showAnnularWithLabel:function(e,t,n){var r=e||!1,i=t||5e4,o=n||"Loading...";return ProgressIndicator.showAnnularWithLabel(r,i,o)},showBar:function(e,t){var n=e||!1,r=t||5e4;return ProgressIndicator.showBar(n,r)},showBarWithLabel:function(e,t,n){var r=e||!1,i=t||5e4,o=n||"Loading...";return ProgressIndicator.showBarWithLabel(r,i,o)},showSuccess:function(e,t){var n=e||!1,r=t||"Success";return ProgressIndicator.showSuccess(n,r)},showText:function(e,t,n){var r=e||!1,i=t||"Warning",o=n||"center";return ProgressIndicator.showText(r,i,o)},hide:function(){return ProgressIndicator.hide()}}}]),angular.module("ngCordova.plugins.push",[]).factory("$cordovaPush",["$q","$window","$rootScope","$timeout",function(e,t,n,r){return{onNotification:function(e){r(function(){n.$broadcast("$cordovaPush:notificationReceived",e)})},register:function(n){var r,i=e.defer();return void 0!==n&&void 0===n.ecb&&(r=null===document.querySelector("[ng-app]")?"document.body":"document.querySelector('[ng-app]')",n.ecb="angular.element("+r+").injector().get('$cordovaPush').onNotification"),t.plugins.pushNotification.register(function(e){i.resolve(e)},function(e){i.reject(e)},n),i.promise},unregister:function(n){var r=e.defer();return t.plugins.pushNotification.unregister(function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise},setBadgeNumber:function(n){var r=e.defer();return t.plugins.pushNotification.setApplicationIconBadgeNumber(function(e){r.resolve(e)},function(e){r.reject(e)},n),r.promise}}}]),angular.module("ngCordova.plugins.push_v5",[]).factory("$cordovaPushV5",["$q","$rootScope","$timeout",function(e,t,n){var r;return{initialize:function(t){var n=e.defer();return r=PushNotification.init(t),n.resolve(r),n.promise},onNotification:function(){n(function(){r.on("notification",function(e){t.$emit("$cordovaPushV5:notificationReceived",e)})})},onError:function(){n(function(){r.on("error",function(e){t.$emit("$cordovaPushV5:errorOccurred",e)})})},register:function(){var t=e.defer();return void 0===r?t.reject(new Error("init must be called before any other operation")):r.on("registration",function(e){t.resolve(e.registrationId)}),t.promise},unregister:function(){var t=e.defer();return void 0===r?t.reject(new Error("init must be called before any other operation")):r.unregister(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},getBadgeNumber:function(){var t=e.defer();return void 0===r?t.reject(new Error("init must be called before any other operation")):r.getApplicationIconBadgeNumber(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise},setBadgeNumber:function(t){var n=e.defer();return void 0===r?n.reject(new Error("init must be called before any other operation")):r.setApplicationIconBadgeNumber(function(e){n.resolve(e)},function(e){n.reject(e)},t),n.promise},finish:function(){var t=e.defer();return void 0===r?t.reject(new Error("init must be called before any other operation")):r.finish(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}}]),angular.module("ngCordova.plugins.recentsControl",[]).factory("$cordovaRecents",function(){return{setColor:function(e){return RecentsControl.setColor(e)},setDescription:function(e){return RecentsControl.setDescription(e)},setOptions:function(e,t){return RecentsControl.setOptions(e,t)}}}),angular.module("ngCordova.plugins.screenshot",[]).factory("$cordovaScreenshot",["$q",function(e){return{captureToFile:function(t){var n=t||{},r=n.extension||"jpg",i=n.quality||"100",o=e.defer();return navigator.screenshot?(navigator.screenshot.save(function(e,t){e?o.reject(e):o.resolve(t.filePath)},r,i,n.filename),o.promise):(o.resolve(null),o.promise)},captureToUri:function(t){var n=t||{},r=n.extension||"jpg",i=n.quality||"100",o=e.defer();return navigator.screenshot?(navigator.screenshot.URI(function(e,t){e?o.reject(e):o.resolve(t.URI)},r,i,n.filename),o.promise):(o.resolve(null),o.promise)}}}]),angular.module("ngCordova.plugins.serial",[]).factory("$cordovaSerial",["$q",function(e){var t={};return t.requestPermission=function(t){var n=e.defer();return serial.requestPermission(t,function(){n.resolve()},function(e){n.reject(e)}),n.promise},t.open=function(t){var n=e.defer();return serial.open(t,function(){n.resolve()},function(e){n.reject(e)}),n.promise},t.write=function(t){var n=e.defer();return serial.write(t,function(){n.resolve()},function(e){n.reject(e)}),n.promise},t.writeHex=function(t){var n=e.defer();return serial.writeHex(t,function(){n.resolve()},function(e){n.reject(e)}),n.promise},t.read=function(){var t=e.defer();return serial.read(function(e){var n=new Uint8Array(e);t.resolve(n)},function(e){t.reject(e)}),t.promise},t.registerReadCallback=function(e,t){serial.registerReadCallback(function(t){var n=new Uint8Array(t);e(n)},t)},t.close=function(){var t=e.defer();return serial.close(function(){t.resolve()},function(e){t.reject(e)}),t.promise},t}]),angular.module("ngCordova.plugins.sms",[]).factory("$cordovaSms",["$q",function(e){return{send:function(t,n,r){var i=e.defer();return sms.send(t,n,r,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}]),angular.module("ngCordova.plugins.socialSharing",[]).factory("$cordovaSocialSharing",["$q","$window",function(e,t){return{share:function(n,r,i,o){var a=e.defer();return r=r||null,i=i||null,o=o||null,t.plugins.socialsharing.share(n,r,i,o,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareWithOptions:function(n){var r=e.defer();return t.plugins.socialsharing.shareWithOptions(n,function(){r.resolve(!0)},function(){r.reject(!1)}),r.promise},shareViaTwitter:function(n,r,i){var o=e.defer();return r=r||null,i=i||null,t.plugins.socialsharing.shareViaTwitter(n,r,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaWhatsApp:function(n,r,i){var o=e.defer();return r=r||null,i=i||null,t.plugins.socialsharing.shareViaWhatsApp(n,r,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaFacebook:function(n,r,i){var o=e.defer();return n=n||null,r=r||null,i=i||null,t.plugins.socialsharing.shareViaFacebook(n,r,i,function(){o.resolve(!0)},function(){o.reject(!1)}),o.promise},shareViaFacebookWithPasteMessageHint:function(n,r,i,o){var a=e.defer();return r=r||null,i=i||null,t.plugins.socialsharing.shareViaFacebookWithPasteMessageHint(n,r,i,o,function(){a.resolve(!0)},function(){a.reject(!1)}),a.promise},shareViaSMS:function(n,r){var i=e.defer();return t.plugins.socialsharing.shareViaSMS(n,r,function(){i.resolve(!0)},function(){i.reject(!1)}),i.promise},shareViaEmail:function(n,r,i,o,a,s){var l=e.defer();return i=i||null,o=o||null,a=a||null,s=s||null,t.plugins.socialsharing.shareViaEmail(n,r,i,o,a,s,function(){l.resolve(!0)},function(){l.reject(!1)}),l.promise},shareVia:function(n,r,i,o,a){var s=e.defer();return r=r||null,i=i||null,o=o||null,a=a||null,t.plugins.socialsharing.shareVia(n,r,i,o,a,function(){s.resolve(!0)},function(){s.reject(!1)}),s.promise},canShareViaEmail:function(){var n=e.defer();return t.plugins.socialsharing.canShareViaEmail(function(){n.resolve(!0)},function(){n.reject(!1)}),n.promise},canShareVia:function(n,r,i,o,a){var s=e.defer();return t.plugins.socialsharing.canShareVia(n,r,i,o,a,function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise},available:function(){var t=e.defer();return window.plugins.socialsharing.available(function(e){e?t.resolve():t.reject()}),t.promise}}}]),angular.module("ngCordova.plugins.spinnerDialog",[]).factory("$cordovaSpinnerDialog",["$window",function(e){return{show:function(t,n,r,i){return r=r||!1,e.plugins.spinnerDialog.show(t,n,r,i)},hide:function(){return e.plugins.spinnerDialog.hide()}}}]),angular.module("ngCordova.plugins.splashscreen",[]).factory("$cordovaSplashscreen",[function(){return{hide:function(){return navigator.splashscreen.hide()},show:function(){return navigator.splashscreen.show()}}}]),angular.module("ngCordova.plugins.sqlite",[]).factory("$cordovaSQLite",["$q","$window",function(e,t){return{openDB:function(e,n){return angular.isObject(e)&&!angular.isString(e)?("undefined"!=typeof n&&(e.bgType=n),t.sqlitePlugin.openDatabase(e)):t.sqlitePlugin.openDatabase({name:e,bgType:n})},execute:function(t,n,r){var i=e.defer();return t.transaction(function(e){e.executeSql(n,r,function(e,t){i.resolve(t)},function(e,t){i.reject(t)})}),i.promise},insertCollection:function(t,n,r){var i=e.defer(),o=r.slice(0);return t.transaction(function(e){!function t(){var r=o.splice(0,1)[0];try{e.executeSql(n,r,function(e,n){0===o.length?i.resolve(n):t()},function(e,t){i.reject(t)})}catch(a){i.reject(a)}}()}),i.promise},nestedExecute:function(t,n,r,i,o){var a=e.defer();return t.transaction(function(e){e.executeSql(n,i,function(e,t){a.resolve(t),e.executeSql(r,o,function(e,t){a.resolve(t)})})},function(e,t){a.reject(t)}),a.promise},deleteDB:function(n){var r=e.defer();return t.sqlitePlugin.deleteDatabase(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}]),angular.module("ngCordova.plugins.statusbar",[]).factory("$cordovaStatusbar",[function(){return{overlaysWebView:function(e){return StatusBar.overlaysWebView(!!e)},STYLES:{DEFAULT:0,LIGHT_CONTENT:1,BLACK_TRANSLUCENT:2,BLACK_OPAQUE:3},style:function(e){switch(e){case 0:return StatusBar.styleDefault();case 1:return StatusBar.styleLightContent();case 2:return StatusBar.styleBlackTranslucent();case 3:return StatusBar.styleBlackOpaque();default:return StatusBar.styleDefault()}},styleColor:function(e){return StatusBar.backgroundColorByName(e)},styleHex:function(e){return StatusBar.backgroundColorByHexString(e)},hide:function(){return StatusBar.hide()},show:function(){return StatusBar.show()},isVisible:function(){return StatusBar.isVisible}}}]),angular.module("ngCordova.plugins.toast",[]).factory("$cordovaToast",["$q","$window",function(e,t){return{showShortTop:function(n){var r=e.defer();return t.plugins.toast.showShortTop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showShortCenter:function(n){var r=e.defer();return t.plugins.toast.showShortCenter(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showShortBottom:function(n){var r=e.defer();return t.plugins.toast.showShortBottom(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongTop:function(n){var r=e.defer();return t.plugins.toast.showLongTop(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongCenter:function(n){var r=e.defer();return t.plugins.toast.showLongCenter(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showLongBottom:function(n){var r=e.defer();return t.plugins.toast.showLongBottom(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},showWithOptions:function(n){var r=e.defer();return t.plugins.toast.showWithOptions(n,function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},show:function(n,r,i){var o=e.defer();return t.plugins.toast.show(n,r,i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},hide:function(){var n=e.defer();try{t.plugins.toast.hide(),n.resolve()}catch(r){n.reject(r&&r.message)}return n.promise}}}]),angular.module("ngCordova.plugins.touchid",[]).factory("$cordovaTouchID",["$q",function(e){return{checkSupport:function(){var t=e.defer();return window.cordova?touchid.checkSupport(function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject("Not supported without cordova.js"),t.promise},authenticate:function(t){var n=e.defer();return window.cordova?touchid.authenticate(function(e){n.resolve(e)},function(e){n.reject(e)},t):n.reject("Not supported without cordova.js"),n.promise}}}]),angular.module("ngCordova.plugins.tts",[]).factory("$cordovaTTS",function(){return{speak:function(e,t,n){return TTS.speak(e,t,n)}}}),angular.module("ngCordova.plugins.upsPush",[]).factory("$cordovaUpsPush",["$q","$window","$rootScope","$timeout",function(e,t,n,r){return{register:function(i){var o=e.defer();return t.push.register(function(e){r(function(){n.$broadcast("$cordovaUpsPush:notificationReceived",e)})},function(){o.resolve()},function(e){o.reject(e)},i),o.promise},unregister:function(n){var r=e.defer();return t.push.unregister(function(){r.resolve()},function(e){r.reject(e)},n),r.promise},setBadgeNumber:function(n){var r=e.defer();return t.push.setApplicationIconBadgeNumber(function(){r.resolve()},n),r.promise}}}]),angular.module("ngCordova.plugins.vibration",[]).factory("$cordovaVibration",[function(){return{vibrate:function(e){return navigator.notification.vibrate(e)},vibrateWithPattern:function(e,t){return navigator.notification.vibrateWithPattern(e,t)},cancelVibration:function(){return navigator.notification.cancelVibration()}}}]),angular.module("ngCordova.plugins.videoCapturePlus",[]).provider("$cordovaVideoCapturePlus",[function(){var e={};this.setLimit=function(t){e.limit=t},this.setMaxDuration=function(t){e.duration=t},this.setHighQuality=function(t){e.highquality=t},this.useFrontCamera=function(t){e.frontcamera=t},this.setPortraitOverlay=function(t){e.portraitOverlay=t},this.setLandscapeOverlay=function(t){e.landscapeOverlay=t},this.setOverlayText=function(t){e.overlayText=t},this.$get=["$q","$window",function(t,n){return{captureVideo:function(r){var i=t.defer();return n.plugins.videocaptureplus?(n.plugins.videocaptureplus.captureVideo(i.resolve,i.reject,angular.extend({},e,r)),i.promise):(i.resolve(null),i.promise)}}}]}]),angular.module("ngCordova.plugins.zip",[]).factory("$cordovaZip",["$q","$window",function(e,t){return{unzip:function(n,r){var i=e.defer();return t.zip.unzip(n,r,function(e){0===e?i.resolve():i.reject()},function(e){i.notify(e)}),i.promise}}}])}(),function(){"use strict";function e(e){var t='<div class="ngn" ng-class="ngNotify.notifyClass"><span ng-if="ngNotify.notifyHtml" class="ngn-message" ng-bind-html="ngNotify.notifyMessage"></span><span ng-if="!ngNotify.notifyHtml" class="ngn-message" ng-bind="ngNotify.notifyMessage"></span><span ng-show="ngNotify.notifyButton" class="ngn-dismiss" ng-click="dismiss()">&times;</span></div>';e.put(o,t)}function t(e){function t(e,t,n){this.scope=e,this.options=n,this.template=r(t)}var n;t.prototype={show:function(e){this.template.fadeIn(g,e)},dismiss:function(){this.template.fadeOut(f,this.destroy.bind(this))},destroy:function(){e.cancel(n),this.options&&this.options.userCallback&&this.options.userCallback(),this.scope&&this.scope.$destroy(),this.template&&this.template.el.remove(),this.scope=null,this.options=null,this.template=null}};var r=function(e){return new r.fn(e)};return r.fn=function(e){this.el=e},r.fn.prototype._fade=function(t,r,i,o){var a=p/i,s=this.el;s.css("opacity",r);var l=function(){r+=t*a,s.css("opacity",r),(r<=v||r>=b)&&(e.cancel(n),r<=v&&s.css("display","none"),o&&o())};n=e(l,p)},r.fn.prototype.fadeIn=function(e,t){this.el.css("display","block"),this._fade(h,v,e,t)},r.fn.prototype.fadeOut=function(e,t){this._fade(m,b,e,t)},t}function n(){this.$get=["$document","$compile","$log","$rootScope","$timeout","$templateCache","NgNotifyFactory",function(e,t,n,r,f,p,h){var m,g,v={theme:"pure",position:"bottom",duration:d,type:"info",sticky:!1,button:!0,html:!1,target:u},b={notifyClass:"",notifyMessage:""},y={pure:a,prime:"ngn-prime",pastel:"ngn-pastel",pitchy:"ngn-pitchy"},E={info:"ngn-info",error:"ngn-error",success:"ngn-success",warn:"ngn-warn",grimace:"ngn-grimace"},w={bottom:"ngn-bottom",top:"ngn-top"},C=function(){var e=r.$new();return e.ngNotify=angular.extend({},b),e.dismiss=function(){L()},e},T=function(e,n,r){var i={},a=C();"object"==typeof n?i=n:i.type=n;var s=D(i),l={isSticky:_(i),duration:A(i),userCallback:r};angular.extend(a.ngNotify,{notifyHtml:R(i),notifyClass:N(i,l.isSticky,s.found),notifyButton:k(i,l.isSticky),notifyMessage:e});var c=t(p.get(o))(a);return s.target.append(c),new h(a,c,l)},$=function(e){var t=e.type||v.type;return(E[t]||E.info)+s},S=function(e){var t=e.theme||v.theme;return(y[t]||y.pure)+s},x=function(e){var t=e.position||v.position;return(w[t]||w.bottom)+s},A=function(e){var t=e.duration||v.duration;return angular.isNumber(t)?t:d},_=function(e){var t=void 0!==e.sticky?e.sticky:v.sticky;return!!t},k=function(e,t){var n=void 0!==e.button?e.button:v.button;return n&&t},O=function(e){return e.target||v.target},R=function(e){if((e.html||v.html)&&!i)return n.debug("ngNotify warning:\nngSanitize couldn't be located.  In order to use the 'html' option, be sure the ngSanitize source is included in your project."),!1;var t=void 0!==e.html?e.html:v.html;return!!t},N=function(e,t,n){var r=$(e)+S(e)+x(e);return r+=t?l+s:a,r+=O(e)!==u&&n?c+s:a},D=function(e){var t=document.querySelector(O(e));return t?{target:angular.element(t),found:!0}:{target:angular.element(document.querySelector(u)),found:!1}},I=function(){m.options.isSticky||(g=f(function(){m.dismiss()},m.options.duration))},L=function(){m&&m.dismiss()},F=function(e){f.cancel(g),e&&(e.scope&&e.destroy(),e=null)};return{config:function(e){e=e||{},angular.extend(v,e)},set:function(e,t,n){e&&(F(m),m=T(e,t,n),m.show(I))},dismiss:function(){L()},addTheme:function(e,t){e&&t&&(y[e]=t)},addType:function(e,t){e&&t&&(E[e]=t)}}}]}var r=angular.module("ngNotify",[]);r.run(["$templateCache",e]),r.factory("NgNotifyFactory",["$interval",t]),r.provider("ngNotify",n);var i=!1,o="templates/ng-notify/ng-notify.html",a="",s=" ",l="ngn-sticky",c="ngn-component",u="body",d=3e3,f=500,p=25,h=1,m=-1,g=200,v=0,b=1;try{angular.module("ngSanitize")&&(angular.module("ngNotify").requires.push("ngSanitize"),i=!0)}catch(y){}}(),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){var t=function(n,r){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof r&&r));var i=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[i]=e.FE.OPTS_MAPPING[i]||this.id,this.sid=e.FE.OPTS_MAPPING[i],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var o=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("touchstart.init",function(){e(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){e(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",e.proxy(function(t){if("touchend"==t.type&&!this.$el.data("touched"))return!0;if(1===t.which||!t.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),"touchend"==t.type&&this.image&&t.originalEvent&&t.originalEvent.target&&e(t.originalEvent.target).is("img")&&setTimeout(e.proxy(function(){this.image.edit(e(t.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this))):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(o),"undefined"==typeof this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.4.1",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName"),n=e.proxy(function(){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.el=this.$el.get(0),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),r=e.proxy(function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,e.proxy(function(){this.events.trigger("form.reset")},this)),n()},this),i=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),o=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),a=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?a():"TEXTAREA"==t?r():"A"==t?i():"IMG"==t?o():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,a()):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var n in this.shared)this.shared.hasOwnProperty(n)&&(null==this.shared[n],e.FE.SHARED[this.sid][n]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);if("string"==typeof n){var o=[];return this.each(function(){var t=e(this),i=t.data("froala.editor");if(i){var a,s;if(n.indexOf(".")>0&&i[n.split(".")[0]]?(i[n.split(".")[0]]&&(a=i[n.split(".")[0]]),s=n.split(".")[1]):(a=i,s=n.split(".")[0]),!a[s])return e.error("Method "+n+" does not exist in Froala Editor.");var l=a[s].apply(i,r.slice(1));void 0===l?o.push(this):0===o.length&&o.push(l)}}),1==o.length?o[0]:o}if("object"==typeof n||!n)return this.each(function(){var r=e(this).data("froala.editor");if(!r){var i=this;new t(i,n)}})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3,e.FE.MODULES.helpers=function(t){function n(){var e,t,n=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))),n}function r(){var e={},t=n();if(t>0)e.msie=!0;else{var r=navigator.userAgent.toLowerCase(),i=/(edge)[ \/]([\w.]+)/.exec(r)||/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[],o={browser:i[1]||"",version:i[2]||"0"};i[1]&&(e[o.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function i(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!s()}function o(){return/(Android)/g.test(navigator.userAgent)&&!s()}function a(){return/(Blackberry)/g.test(navigator.userAgent)}function s(){return/(Windows Phone)/gi.test(navigator.userAgent)}function l(){return o()||i()||a()}function c(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function u(e){return parseInt(e,10)||0}function d(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body"),n=u(t.css("margin-left"));return t.remove(),n}function f(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function p(e){if(!/^(https?:|ftps?:|)\/\//i.test(e))return!1;e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var t=/(http|ftp|https):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#-_{}])?/gi;return t.test(e)}function h(e){if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!p(e)&&!p("http:"+e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}");return e}function m(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function g(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(n){return null}}function v(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function b(t){var n=(t.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(n)<0){if(!$){var r=e('<div dir="auto" style="text-align: initial; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body").append(r);var i=r.find("#s1").get(0).getBoundingClientRect().left,o=r.find("#s2").get(0).getBoundingClientRect().left;r.remove(),$=i<o?"left":"right"}n=$}return n}function y(){return null==S&&(S=navigator.platform.toUpperCase().indexOf("MAC")>=0),S}function E(){function e(e,t){var r=e[t];e[t]=function(e){var t,o=!1,a=!1;if(e.match(i)){e=e.replace(i,""),this.parentNode||(n.appendChild(this),a=!0);var s=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),o=!0),t=r.call(s,"#"+this.id+" "+e),o&&(this.id=""),a&&n.removeChild(this),t}return r.call(this,e)}}var n=t.o_doc.createElement("div");try{n.querySelectorAll(":scope *")}catch(r){var i=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll")}}function w(){return t.o_win.pageYOffset?t.o_win.pageYOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollTop?t.o_doc.documentElement.scrollTop:t.o_doc.body.scrollTop?t.o_doc.body.scrollTop:0}function C(){return t.o_win.pageXOffset?t.o_win.pageXOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollLeft?t.o_doc.documentElement.scrollLeft:t.o_doc.body.scrollLeft?t.o_doc.body.scrollLeft:0}function T(){t.browser=r(),E()}var $,S=null;return{_init:T,isIOS:i,isMac:y,isAndroid:o,isBlackberry:a,isWindowsPhone:s,isMobile:l,requestAnimationFrame:c,getPX:u,screenSize:d,isTouch:f,sanitizeURL:h,isArray:m,RGBToHex:g,HEXtoRGB:v,isURL:p,getAlignment:b,scrollTop:w,scrollLeft:C}},e.FE.MODULES.events=function(t){function n(e,t,n){b(e,t,n)}function r(){n(t.$el,"cut copy paste beforepaste",function(e){w(e.type,[e])})}function i(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){w(e.type,[e])}),v("mousedown",function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()})}function o(){n(t.$el,"keydown keypress keyup input",function(e){w(e.type,[e])})}function a(){n(t.$win,t._mousedown,function(e){w("window.mousedown",[e]),p()}),n(t.$win,t._mouseup,function(e){w("window.mouseup",[e])}),n(t.$win,"cut copy keydown keyup touchmove touchend",function(e){w("window."+e.type,[e])})}function s(){n(t.$doc,"dragend drop",function(e){w("document."+e.type,[e])})}function l(n){if("undefined"==typeof n&&(n=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&n){var r=t.$win.scrollTop();return t.browser.msie&&t.$box&&t.$box.css("position","fixed"),t.$el.focus(),t.browser.msie&&t.$box&&t.$box.css("position",""),r!=t.$win.scrollTop()&&t.$win.scrollTop(r),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;var i=t.selection.info(t.el);if(i.atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var o=t.markers.insert();if(o&&!t.node.blockParent(o)){e(o).remove();var a=t.$el.find(t.html.blockTagsQuery()).get(0);a&&(e(a).prepend(e.FE.MARKERS),t.selection.restore())}else o&&e(o).remove()}}function c(){n(t.$el,"focus",function(e){m()&&(l(!1),_===!1&&w(e.type,[e]))}),n(t.$el,"blur",function(e){m()&&_===!0&&(w(e.type,[e]),p())}),v("focus",function(){_=!0}),v("blur",function(){_=!1})}function u(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function d(n){var r=e(n.currentTarget);return t.edit.isDisabled()||t.node.hasClass(r.get(0),"fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which||(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===r.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),r.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[r]))}function f(n,r){var i=e(n.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(i.get(0),"fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!t.node.hasClass(i.get(0),"fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!t.node.hasClass(i.get(0),"fr-selected"))return e(".fr-selected").removeClass("fr-selected"),!1;if(e(".fr-selected").removeClass("fr-selected"),i.data("dragging")||i.attr("disabled"))return i.removeData("dragging"),
!1;var o=i.data("timeout");o&&(clearTimeout(o),i.removeData("timeout")),r.apply(t,[n])}else i.data("timeout")||i.data("timeout",setTimeout(function(){i.data("dragging",!0)},100))}function p(){x=!0}function h(){x=!1}function m(){return x}function g(e,n,r){b(e,t._mousedown,n,function(e){t.edit.isDisabled()||d(e)},!0),b(e,t._mouseup+" "+t._move,n,function(e){t.edit.isDisabled()||f(e,r)},!0),b(e,"mousedown click mouseup",n,function(e){t.edit.isDisabled()||e.stopPropagation()},!0),v("window.mouseup",function(){t.edit.isDisabled()||(e.find(n).removeClass("fr-selected"),p())})}function v(e,n,r){var i=e.split(" ");if(i.length>1){for(var o=0;o<i.length;o++)v(i[o],n,r);return!0}"undefined"==typeof r&&(r=!1);var a;a=0!=e.indexOf("shared.")?A[e]=A[e]||[]:t.shared._events[e]=t.shared._events[e]||[],r?a.unshift(n):a.push(n)}function b(e,n,r,i,o){"function"==typeof r&&(o=i,i=r,r=!1);var a=o?t.shared.$_events:k,s=o?t.sid:t.id;r?e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,r,i):e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,i),a.indexOf(e.get(0))<0&&a.push(e.get(0))}function y(t,n){for(var r=0;r<t.length;r++)e(t[r]).off(".ed"+n)}function E(){y(k,t.id),k=[],0==t.shared.count&&(y(t.shared.$_events,t.sid),t.shared.$_events=null)}function w(n,r,i){if(!t.edit.isDisabled()||i){var o;if(0!=n.indexOf("shared."))o=A[n];else{if(t.shared.count>0)return!1;o=t.shared._events[n]}var a;if(o)for(var s=0;s<o.length;s++)if(a=o[s].apply(t,r),a===!1)return!1;return a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],r||[])),a!==!1&&a}}function C(n,r,i){if(!t.edit.isDisabled()||i){var o;if(0!=n.indexOf("shared."))o=A[n];else{if(t.shared.count>0)return!1;o=t.shared._events[n]}var a;if(o)for(var s=0;s<o.length;s++)a=o[s].apply(t,[r]),"undefined"!=typeof a&&(r=a);return a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[r])),"undefined"!=typeof a&&(r=a),r}}function T(){for(var e in A)A.hasOwnProperty(e)&&delete A[e]}function $(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}function S(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},u(),i(),a(),s(),o(),c(),p(),r(),v("destroy",T),v("shared.destroy",$)}var x,A={},_=!1,k=[];return{_init:S,on:v,trigger:w,bindClick:g,disableBlur:h,enableBlur:p,blurActive:m,focus:l,chainTrigger:C,$on:b,$off:E}},e.FE.MODULES.node=function(t){function n(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function r(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function i(i,o){if(!i)return!0;if(i.querySelector("table"))return!1;var a=n(i);1==a.length&&r(a[0])&&(a=n(a[0]));for(var s=!1,l=0;l<a.length;l++){var c=a[l];if(!(o&&t.node.hasClass(c,"fr-marker")||c.nodeType==Node.TEXT_NODE&&0==c.textContent.length)){if("BR"!=c.tagName&&(c.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(s)return!1;"BR"==c.tagName&&(s=!0)}}return!(i.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-i.querySelectorAll("br").length||i.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||i.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||i.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function o(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(e=e.parentNode,r(e))return e;return null}function a(n,i,o){if("undefined"==typeof i&&(i=[]),"undefined"==typeof o&&(o=!0),i.push(t.el),i.indexOf(n.parentNode)>=0||n.parentNode&&t.node.hasClass(n.parentNode,"fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&o)return null;for(;i.indexOf(n.parentNode)<0&&n.parentNode&&!t.node.hasClass(n.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!o)&&(!r(n)||!r(n.parentNode)||!o);)n=n.parentNode;return n}function s(e){var t={},n=e.attributes;if(n)for(var r=0;r<n.length;r++){var i=n[r];t[i.nodeName]=i.value}return t}function l(e){for(var t="",n=s(e),r=Object.keys(n).sort(),i=0;i<r.length;i++){var o=r[i],a=n[o];t+=a.indexOf('"')<0?" "+o+'="'+a+'"':" "+o+"='"+a+"'"}return t}function c(e){for(var t=e.attributes,n=0;n<t.length;n++){var r=t[n];e.removeAttribute(r.nodeName)}}function u(e){return"<"+e.tagName.toLowerCase()+l(e)+">"}function d(e){return"</"+e.tagName.toLowerCase()+">"}function f(e,n){"undefined"==typeof n&&(n=!0);for(var r=e.previousSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.previousSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&f(r)}function p(e,n){"undefined"==typeof n&&(n=!0);for(var r=e.nextSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.nextSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&p(r)}function h(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function m(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0}function g(e){return e===t.el}function v(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0}function b(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(g(e)||e.type||e.href||~e.tabIndex)}function y(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function E(t,n){return t instanceof e&&(t=t.get(0)),t&&t.classList&&t.classList.contains(n)}function w(e){return t.browser.msie?e:{acceptNode:e}}return{isBlock:r,isEmpty:i,blockParent:o,deepestParent:a,rawAttributes:s,attributes:l,clearAttributes:c,openTagString:u,closeTagString:d,isFirstSibling:f,isLastSibling:p,isList:m,isElement:g,contents:n,isVoid:h,hasFocus:b,isEditable:y,isDeletable:v,hasClass:E,filter:w}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(n,r){return e('<span class="fr-marker" data-id="'+r+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function r(r,i,o){try{var a=r.cloneRange();if(a.collapse(i),a.insertNode(n(i,o)),i===!0&&r.collapsed)for(var s=t.$el.find('span.fr-marker[data-type="true"][data-id="'+o+'"]'),l=s.get(0).nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=s.nextSibling;if(i===!0&&!r.collapsed){var s=t.$el.find('span.fr-marker[data-type="true"][data-id="'+o+'"]').get(0),l=s.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do l=c[0],c=t.node.contents(l);while(c[0]&&t.node.isBlock(c[0]));e(l).prepend(e(s))}}if(i===!1&&!r.collapsed){var s=t.$el.find('span.fr-marker[data-type="false"][data-id="'+o+'"]').get(0),l=s.previousSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do l=c[c.length-1],c=t.node.contents(l);while(c[c.length-1]&&t.node.isBlock(c[c.length-1]));e(l).append(e(s))}s.parentNode&&["TD","TH"].indexOf(s.parentNode.tagName)>=0&&s.parentNode.previousSibling&&!s.previousSibling&&e(s.parentNode.previousSibling).append(s)}var u=t.$el.find('span.fr-marker[data-type="'+i+'"][data-id="'+o+'"]').get(0);return u&&(u.style.display="none"),u}catch(d){return null}}function i(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),r=n.commonAncestorContainer;if(r!=t.el&&0==t.$el.find(r).length)return null;var i=n.cloneRange(),o=n.cloneRange();i.collapse(!0);var a=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(i.insertNode(a),a=t.$el.find("span.fr-marker").get(0)){for(var s=a.nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)e(s).remove(),s=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(o),a}return null}catch(l){}}function o(){t.selection.isCollapsed()||t.selection.remove();var n=t.$el.find(".fr-marker").get(0);if(null==n&&(n=i()),null==n)return null;var r=t.node.deepestParent(n);if(r||(r=t.node.blockParent(n),r&&"LI"!=r.tagName&&(r=null)),r)if(t.node.isBlock(r)&&t.node.isEmpty(r))e(r).replaceWith('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(n,r))e(r).before('<span class="fr-marker"></span>'),e(n).remove();else if(t.cursor.isAtEnd(n,r))e(r).after('<span class="fr-marker"></span>'),e(n).remove();else{var o=n,a="",s="";do o=o.parentNode,a+=t.node.closeTagString(o),s=t.node.openTagString(o)+s;while(o!=r);e(n).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);l=l.replace(/<span id="fr-break"><\/span>/g,a+'<span class="fr-marker"></span>'+s),e(r).replaceWith(l)}return t.$el.find(".fr-marker").get(0)}function a(e){var n=e.clientX,r=e.clientY;s();var o,a=null;if("undefined"!=typeof t.doc.caretPositionFromPoint?(o=t.doc.caretPositionFromPoint(n,r),a=t.doc.createRange(),a.setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)):"undefined"!=typeof t.doc.caretRangeFromPoint&&(o=t.doc.caretRangeFromPoint(n,r),a=t.doc.createRange(),a.setStart(o.startContainer,o.startOffset),a.setEnd(o.startContainer,o.startOffset)),null!==a&&"undefined"!=typeof t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(a)}else if("undefined"!=typeof t.doc.body.createTextRange)try{a=t.doc.body.createTextRange(),a.moveToPoint(n,r);var c=a.duplicate();c.moveToPoint(n,r),a.setEndPoint("EndToEnd",c),a.select()}catch(u){return!1}i()}function s(){t.$el.find(".fr-marker").remove()}return{place:r,insert:i,split:o,insertAtPoint:a,remove:s}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function r(){var e="";return e=t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function i(e){var n=r(),i=[];if(n&&n.getRangeAt&&n.rangeCount)for(var i=[],o=0;o<n.rangeCount;o++)i.push(n.getRangeAt(o));else i=t.doc.createRange?[t.doc.createRange()]:[];return"undefined"!=typeof e?i[e]:i}function o(){var e=r();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(t){}}function a(){var o=r();try{if(o.rangeCount){var a=i(0),s=a.startContainer;if(s.nodeType==Node.TEXT_NODE&&a.startOffset==(s.textContent||"").length&&s.nextSibling&&(s=s.nextSibling),s.nodeType==Node.ELEMENT_NODE){var l=!1;if(s.childNodes.length>0&&s.childNodes[a.startOffset]){for(var c=s.childNodes[a.startOffset];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;if(c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0),!l&&s.childNodes.length>1&&a.startOffset>0&&s.childNodes[a.startOffset-1]){for(var c=s.childNodes[a.startOffset-1];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}}else if(!a.collapsed&&s.nextSibling&&s.nextSibling.nodeType==Node.ELEMENT_NODE){var c=s.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}!l&&s.childNodes.length>0&&e(s.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(s.childNodes[0].tagName)<0&&(s=s.childNodes[0])}for(;s.nodeType!=Node.ELEMENT_NODE&&s.parentNode;)s=s.parentNode;for(var u=s;u&&"HTML"!=u.tagName;){if(u==t.el)return s;u=e(u).parent()[0]}}}catch(d){}return t.el}function s(){var o=r();try{if(o.rangeCount){var a=i(0),s=a.endContainer;if(s.nodeType==Node.ELEMENT_NODE){var l=!1;if(s.childNodes.length>0&&s.childNodes[a.endOffset]&&e(s.childNodes[a.endOffset]).text()===n())s=s.childNodes[a.endOffset],l=!0;else if(!a.collapsed&&s.previousSibling&&s.previousSibling.nodeType==Node.ELEMENT_NODE){var c=s.previousSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}else if(!a.collapsed&&s.childNodes.length>0&&s.childNodes[a.endOffset]){var c=s.childNodes[a.endOffset].previousSibling;c.nodeType==Node.ELEMENT_NODE&&c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}!l&&s.childNodes.length>0&&e(s.childNodes[s.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(s.childNodes[s.childNodes.length-1].tagName)<0&&(s=s.childNodes[s.childNodes.length-1])}for(s.nodeType==Node.TEXT_NODE&&0==a.endOffset&&s.previousSibling&&s.previousSibling.nodeType==Node.ELEMENT_NODE&&(s=s.previousSibling);s.nodeType!=Node.ELEMENT_NODE&&s.parentNode;)s=s.parentNode;for(var u=s;u&&"HTML"!=u.tagName;){if(u==t.el)return s;u=e(u).parent()[0]}}}catch(d){}return t.el}function l(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function c(){var n=[],o=r();if(y()&&o.rangeCount)for(var a=i(),s=0;s<a.length;s++){var c=a[s],u=l(c.startContainer,c.startOffset),d=l(c.endContainer,c.endOffset);t.node.isBlock(u)&&n.indexOf(u)<0&&n.push(u);var f=t.node.blockParent(u);f&&n.indexOf(f)<0&&n.push(f);for(var p=[],h=u;h!==d&&h!==t.el;)p.indexOf(h)<0&&h.children&&h.children.length?(p.push(h),h=h.children[0]):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,p.push(h)),t.node.isBlock(h)&&p.indexOf(h)<0&&n.indexOf(h)<0&&(h!==d||c.endOffset>0)&&n.push(h);t.node.isBlock(d)&&n.indexOf(d)<0&&c.endOffset>0&&n.push(d);var f=t.node.blockParent(d);f&&n.indexOf(f)<0&&n.push(f)}for(var s=n.length-1;s>0;s--)e(n[s]).find(n).length&&("LI"!=n[s].tagName||1==n[s].children.length&&n.indexOf(n[s].children[0])>=0)&&n.splice(s,1);return n}function u(){if(t.$wp){t.markers.remove();for(var e=i(),n=[],r=0;r<e.length;r++)if(e[r].startContainer!==t.doc){var o=e[r],a=o.collapsed,s=t.markers.place(o,!0,r),l=t.markers.place(o,!1,r);if(t.el.normalize(),t.browser.safari&&!a){var o=t.doc.createRange();o.setStartAfter(s),o.setEndBefore(l),n.push(o)}}if(t.browser.safari&&n.length){t.selection.clear();for(var r=0;r<n.length;r++)t.selection.get().addRange(n[r])}}}function d(){var n=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===n.length)return!1;if(t.browser.msie||t.browser.edge)for(var i=0;i<n.length;i++)n[i].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),o();for(var a=r(),i=0;i<n.length;i++){var s=e(n[i]).data("id"),l=n[i],c=t.doc.createRange(),u=t.$el.find('.fr-marker[data-type="false"][data-id="'+s+'"]');(t.browser.msie||t.browser.edge)&&u.css("display","inline-block");var d=null;if(u.length>0){u=u[0];try{for(var p=!1,h=l.nextSibling;h&&h.nodeType==Node.TEXT_NODE&&0==h.textContent.length;){var m=h;h=h.nextSibling,e(m).remove()}for(var g=u.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0==g.textContent.length;){var m=g;g=g.nextSibling,e(m).remove()}if(l.nextSibling==u||u.nextSibling==l){for(var v=l.nextSibling==u?l:u,b=v==l?u:l,y=v.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0==y.length;){var m=y;y=y.previousSibling,e(m).remove()}if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var E=b.nextSibling;E&&E.nodeType==Node.TEXT_NODE&&0==E.length;){var m=E;E=E.nextSibling,e(m).remove()}if(E&&E.nodeType==Node.TEXT_NODE)for(;E&&E.nextSibling&&E.nextSibling.nodeType==Node.TEXT_NODE;)E.nextSibling.textContent=E.textContent+E.nextSibling.textContent,E=E.nextSibling,e(E.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),E&&(t.node.isVoid(E)||t.node.isBlock(E))&&(E=null),y&&E&&y.nodeType==Node.TEXT_NODE&&E.nodeType==Node.TEXT_NODE){e(l).remove(),e(u).remove();var w=y.textContent.length;y.textContent=y.textContent+E.textContent,e(E).remove(),t.spaces.normalize(y),c.setStart(y,w),c.setEnd(y,w),p=!0}else!y&&E&&E.nodeType==Node.TEXT_NODE?(e(l).remove(),e(u).remove(),t.spaces.normalize(E),d=e(t.doc.createTextNode("​")),e(E).before(d),c.setStart(E,0),c.setEnd(E,0),p=!0):!E&&y&&y.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(u).remove(),t.spaces.normalize(y),d=e(t.doc.createTextNode("​")),e(y).after(d),c.setStart(y,y.textContent.length),c.setEnd(y,y.textContent.length),p=!0)}if(!p){var C,T;if((t.browser.chrome||t.browser.edge)&&l.nextSibling==u)C=f(u,c,!0)||c.setStartAfter(u),T=f(l,c,!1)||c.setEndBefore(l);else{l.previousSibling==u&&(l=u,u=l.nextSibling),u.nextSibling&&"BR"===u.nextSibling.tagName||!u.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",u.style.display="inline",d=e(t.doc.createTextNode("​")));var $=l.previousSibling;$&&$.style&&"block"==t.win.getComputedStyle($).display&&!t.opts.enter==e.FE.ENTER_BR?(c.setEndAfter($),c.setStartAfter($)):(C=f(l,c,!0)||e(l).before(d)&&c.setStartBefore(l),T=f(u,c,!1)||e(u).after(d)&&c.setEndAfter(u))}"function"==typeof C&&C(),"function"==typeof T&&T()}}catch(S){}}d&&d.remove();try{a.addRange(c)}catch(S){}}t.markers.remove()}function f(n,r,i){var o=n.previousSibling,a=n.nextSibling;if(o&&a&&o.nodeType==Node.TEXT_NODE&&a.nodeType==Node.TEXT_NODE){var s=o.textContent.length;return i?(a.textContent=o.textContent+a.textContent,e(o).remove(),e(n).remove(),t.spaces.normalize(a),function(){r.setStart(a,s)}):(o.textContent=o.textContent+a.textContent,e(a).remove(),e(n).remove(),t.spaces.normalize(o),function(){r.setEnd(o,s)})}if(o&&!a&&o.nodeType==Node.TEXT_NODE){var s=o.textContent.length;return i?(t.spaces.normalize(o),function(){r.setStart(o,s)}):(t.spaces.normalize(o),function(){r.setEnd(o,s)})}return!(!a||o||a.nodeType!=Node.TEXT_NODE)&&(i?(t.spaces.normalize(a),function(){r.setStart(a,0)}):(t.spaces.normalize(a),function(){r.setEnd(a,0)}))}function p(){return!0}function h(){for(var e=i(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function m(e){var n,r,i=!1,o=!1;if(t.win.getSelection){var a=t.win.getSelection();a.rangeCount&&(n=a.getRangeAt(0),r=n.cloneRange(),r.selectNodeContents(e),r.setEnd(n.startContainer,n.startOffset),i=""===r.toString(),r.selectNodeContents(e),r.setStart(n.endContainer,n.endOffset),o=""===r.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&(n=t.doc.selection.createRange(),r=n.duplicate(),r.moveToElementText(e),r.setEndPoint("EndToStart",n),i=""===r.text,r.moveToElementText(e),r.setEndPoint("StartToEnd",n),o=""===r.text);return{atStart:i,atEnd:o}}function g(){if(h())return!1;t.$el.find("td, th, img").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,r=m(t.el);return r.atStart&&r.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n}function v(n,r){"undefined"==typeof r&&(r=!0);var i=e(n).html();i&&i.replace(/\u200b/g,"").length!=i.length&&e(n).html(i.replace(/\u200b/g,""));for(var o=t.node.contents(n),a=0;a<o.length;a++)o[a].nodeType!=Node.ELEMENT_NODE?e(o[a]).remove():(v(o[a],0==a),0==a&&(r=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):r&&e(n).attr("data-first",!0)}function b(n,r){var i=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&t.node.hasClass(i[0],"fr-marker")&&n.attr("data-del-cell",!0);for(var o=0;o<i.length;o++){var a=i[o];t.node.hasClass(a,"fr-marker")?r=(r+1)%2:r?e(a).find(".fr-marker").length>0?r=b(e(a),r):["TD","TH"].indexOf(a.tagName)<0&&!t.node.hasClass(a,"fr-inner")?!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0?e(a).remove():v(a):t.node.hasClass(a,"fr-inner")?0==e(a).find(".fr-inner").length?e(a).html("<br>"):e(a).find(".fr-inner").filter(function(){return 0==e(this).find("fr-inner").length}).html("<br>"):(e(a).empty(),e(a).attr("data-del-cell",!0)):e(a).find(".fr-marker").length>0&&(r=b(e(a),r))}return r}function y(){try{if(!t.$wp)return!1;for(var e=i(0),n=e.commonAncestorContainer;n&&!t.node.isElement(n);)n=n.parentNode;return!!t.node.isElement(n)}catch(r){return!1}}function E(){if(h())return!0;u();for(var n=function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var r=n,n=n.previousSibling;e(r).remove()}return n},r=function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var r=n,n=n.nextSibling;e(r).remove()}return n},i=t.$el.find('.fr-marker[data-type="true"]'),o=0;o<i.length;o++)for(var a=i[o];!n(a)&&!t.node.isBlock(a.parentNode)&&!t.$el.is(a.parentNode);)e(a.parentNode).before(a);for(var s=t.$el.find('.fr-marker[data-type="false"]'),o=0;o<s.length;o++){for(var l=s[o];!r(l)&&!t.node.isBlock(l.parentNode)&&!t.$el.is(l.parentNode);)e(l.parentNode).after(l);l.parentNode&&t.node.isBlock(l.parentNode)&&t.node.isEmpty(l.parentNode)&&!t.$el.is(l.parentNode)&&t.opts.keepFormatOnDelete&&e(l.parentNode).after(l)}if(p()){b(t.$el,0);var c=t.$el.find('[data-first="true"]');if(c.length)t.$el.find(".fr-marker").remove(),c.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),c.attr("data-text")&&c.replaceWith(c.html());else{t.$el.find("table").filter(function(){var t=e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length;return t}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell");for(var i=t.$el.find('.fr-marker[data-type="true"]'),o=0;o<i.length;o++){var f=i[o],m=f.nextSibling,g=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(f).data("id")+'"]').get(0);if(g){if(m&&m==g);else if(f){var v=t.node.blockParent(f),y=t.node.blockParent(g),E=!1,w=!1;if(v&&["UL","OL"].indexOf(v.tagName)>=0&&(v=null,E=!0),y&&["UL","OL"].indexOf(y.tagName)>=0&&(y=null,w=!0),e(f).after(g),v==y);else if(null!=v||E)if(null!=y||w||0!=e(v).parentsUntil(t.$el,"table").length)v&&y&&0==e(v).parentsUntil(t.$el,"table").length&&0==e(y).parentsUntil(t.$el,"table").length&&(e(v).append(e(y).html()),e(y).remove());else{for(var m=v;!m.nextSibling&&m.parentNode!=t.el;)m=m.parentNode;for(m=m.nextSibling;m&&"BR"!=m.tagName;){var C=m.nextSibling;e(v).append(m),m=C}m&&"BR"==m.tagName&&e(m).remove()}else{var T=t.node.deepestParent(f);T?(e(T).after(e(y).html()),e(y).remove()):0==e(y).parentsUntil(t.$el,"table").length&&(e(f).next().after(e(y).html()),e(y).remove())}}}else g=e(f).clone().attr("data-type",!1),e(f).after(g)}}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var $=t.$el.find(".fr-marker:last").get(0),S=t.$el.find(".fr-marker:first").get(0);!$.nextSibling&&S.previousSibling&&"BR"==S.previousSibling.tagName&&t.node.isElement($.parentNode)&&t.node.isElement(S.parentNode)&&t.$el.append("<br>"),d()}function w(n){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var r=n.firstChild;r&&t.node.isBlock(r);)n=r,r=r.firstChild;n.innerHTML=e.FE.MARKERS+n.innerHTML}function C(n){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var r=n.lastChild;r&&t.node.isBlock(r);)n=r,r=r.lastChild;n.innerHTML=n.innerHTML+e.FE.MARKERS}function T(n,r){"undefined"==typeof r&&(r=!0);for(var i=n.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;)i=i.previousSibling;return i?(t.node.isBlock(i)?C(i):"BR"==i.tagName?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?w(n):e(n).before(e.FE.MARKERS),!0)}function $(n,r){"undefined"==typeof r&&(r=!0);for(var i=n.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;)i=i.nextSibling;return i?(t.node.isBlock(i)?w(i):e(i).before(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?C(n):e(n).after(e.FE.MARKERS),!0)}return{text:n,get:r,ranges:i,clear:o,element:a,endElement:s,save:u,restore:d,isCollapsed:h,isFull:g,inEditor:y,remove:E,blocks:c,info:m,setAtEnd:C,setAtStart:w,setBefore:T,setAfter:$,rangeElement:l}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function n(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var r,i=t.node.contents(e),o=[];for(r=0;r<i.length;r++)i[r].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(i[r])?i[r].nodeType==Node.TEXT_NODE&&(i[r].textContent=i[r].textContent.replace(/\u200b/g,"").replace(/&/g,"&amp;")):i[r].textContent.replace(/\u200b/g,"").length!=i[r].textContent.length&&n(i[r]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),i=t.node.contents(e),o=e.querySelectorAll(".fr-marker"),i.length-o.length==0)){for(r=0;r<i.length;r++)if((i[r].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(r=0;r<o.length;r++)e.parentNode.insertBefore(o[r].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function r(e){if(e.nodeType==Node.COMMENT_NODE)return"<!--"+e.nodeValue+"-->";if(e.nodeType==Node.TEXT_NODE)return e.textContent.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\u00A0/g,"&nbsp;");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var n=document.createElement("div"),i=e.cloneNode(!0);return n.appendChild(i),n.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML;var o=e.childNodes;if(0===o.length)return e.outerHTML;for(var a="",s=0;s<o.length;s++)a+=r(o[s]);return t.node.openTagString(e)+a+t.node.closeTagString(e)}function i(e){return D=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return D.push(e),"[FROALA.EDITOR.SCRIPT "+(D.length-1)+"]"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function o(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":D[parseInt(n,10)]}),e=e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function a(e){var t;for(t in e)e.hasOwnProperty(t)&&(t.match(N)||delete e[t]);for(var n="",r=Object.keys(e).sort(),i=0;i<r.length;i++)t=r[i],n+=e[t].indexOf('"')<0?" "+t+'="'+e[t]+'"':" "+t+"='"+e[t]+"'";return n}function s(e,n,r){if(t.opts.fullPage){var i=t.html.extractDoctype(r),o=a(t.html.extractNodeAttrs(r,"html"));n=null==n?t.html.extractNode(r,"head")||"<title></title>":n;var s=a(t.html.extractNodeAttrs(r,"head")),l=a(t.html.extractNodeAttrs(r,"body"));return i+"<html"+o+"><head"+s+">"+n+"</head><body"+l+">"+e+"</body></html>"}return e}function l(n,i){var o=e("<div>"+n+"</div>"),a="";if(o){for(var s=t.node.contents(o.get(0)),l=0;l<s.length;l++)i(s[l]);s=t.node.contents(o.get(0));for(var l=0;l<s.length;l++)a+=r(s[l])}return a}function c(e,n,r){e=i(e);var a=e,c=null;if(t.opts.fullPage){var a=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e);r&&(c=t.html.extractNode(e,"head")||"")}a=l(a,n),c&&(c=l(c,n));var u=s(a,c,e);return o(u)}function u(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)}function d(){var n=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){var r=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),r=!0);for(var i=0;i<n.length;i++)""===t.node.attributes(n[i])&&e(n[i]).replaceWith("<"+e.FE.HTML5Map[n[i].tagName]+">"+n[i].innerHTML+"</"+e.FE.HTML5Map[n[i].tagName]+">");r&&t.selection.restore()}}function f(n){if("SPAN"==n.tagName&&(n.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==n.tagName&&h(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-fr-src")&&n.setAttribute("data-fr-src",t.helpers.sanitizeURL(n.getAttribute("data-fr-src"))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(n.getAttribute("href"))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-fr-src")&&0==n.getAttribute("data-fr-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var r=e.FE.HTML5Map[n.tagName],i="<"+r+">"+n.innerHTML+"</"+r+">";n.insertAdjacentHTML("beforebegin",i),n=n.previousSibling,n.parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(R))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(O))n.outerHTML=n.innerHTML;else{var o=n.attributes;if(o)for(var a=o.length-1;a>=0;a--){var s=o[a];s.nodeName.match(N)||n.removeAttribute(s.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function p(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&p(n[r]);f(e)}function h(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function m(n,r,i,o){"undefined"==typeof r&&(r=[]),"undefined"==typeof i&&(i=[]),"undefined"==typeof o&&(o=!1),n=n.replace(/\u0009/g,""),n=n.replace(/<br> */g,"<br>");var a,s=e.merge([],t.opts.htmlAllowedTags);for(a=0;a<r.length;a++)s.indexOf(r[a])>=0&&s.splice(s.indexOf(r[a]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(a=0;a<i.length;a++)l.indexOf(i[a])>=0&&l.splice(l.indexOf(i[a]),1);return l.push("data-fr-.*"),l.push("fr-.*"),O=new RegExp("^"+s.join("$|^")+"$","gi"),N=new RegExp("^"+l.join("$|^")+"$","gi"),R=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),n=c(n,p,!0)}function g(){for(var n=t.el.querySelectorAll("blockquote + blockquote"),r=0;r<n.length;r++){var i=n[r];t.node.attributes(i)==t.node.attributes(i.previousSibling)&&(e(i).prev().append(e(i).html()),e(i).remove())}}function v(){for(var e=t.el.querySelectorAll("tr"),n=0;n<e.length;n++){for(var r=e[n].children,i=!0,o=0;o<r.length;o++)if("TH"!=r[o].tagName){i=!1;break}if(0!=i&&0!=r.length){for(var a=e[n];a&&"TABLE"!=a.tagName&&"THEAD"!=a.tagName;)a=a.parentNode;
var s=a;"THEAD"!=s.tagName&&(s=t.doc.createElement("THEAD"),a.insertBefore(s,a.firstChild)),s.appendChild(e[n])}}}function b(){var n=t.html.defaultTag();if(n)for(var r=t.el.querySelectorAll("td > "+n+", th > "+n),i=0;i<r.length;i++)""===t.node.attributes(r[i])&&e(r[i]).replaceWith(r[i].innerHTML+"<br>")}function y(){v(),b()}function E(){var e=[],n=function(e){return!t.node.isList(e.parentNode)};do{if(e.length){var r=e[0],i=t.doc.createElement("ul");r.parentNode.insertBefore(i,r);do{var o=r;r=r.nextSibling,i.appendChild(o)}while(r&&"LI"==r.tagName)}e=[];for(var a=t.el.querySelectorAll("li"),s=0;s<a.length;s++)n(a[s])&&e.push(a[s])}while(e.length>0)}function w(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var r=e[n];if(t.node.isList(r.previousSibling)&&t.node.openTagString(r)==t.node.openTagString(r.previousSibling)){for(var i=t.node.contents(r),o=0;o<i.length;o++)r.previousSibling.appendChild(i[o]);r.parentNode.removeChild(r)}}}function C(){var e,n=function(t){t.querySelector("LI")||(e=!0,t.parentNode.removeChild(t))};do{e=!1;for(var r=t.el.querySelectorAll("li:empty"),i=0;i<r.length;i++)r[i].parentNode.removeChild(r[i]);for(var o=t.el.querySelectorAll("ul, ol"),i=0;i<o.length;i++)n(o[i])}while(e===!0)}function T(){for(var n=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),r=0;r<n.length;r++){var i=n[r],o=i.previousSibling;o&&("LI"==o.tagName?o.appendChild(i):e(i).wrap("<li></li>"))}}function $(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var i=n[r];if(i.nextSibling){var o=i.nextSibling,a=e("<li>");e(i.parentNode).after(a);do{var s=o;o=o.nextSibling,a.append(s)}while(o)}}}function S(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var i=n[r];if(t.node.isFirstSibling(i))e(i).before("<br/>");else if(i.previousSibling&&"BR"==i.previousSibling.tagName){for(var o=i.previousSibling.previousSibling;o&&t.node.hasClass(o,"fr-marker");)o=o.previousSibling;o&&"BR"!=o.tagName&&e(i.previousSibling).remove()}}}function x(){for(var n=t.el.querySelectorAll("li:empty"),r=0;r<n.length;r++)e(n[r]).remove()}function A(){for(var n=t.el.querySelectorAll("ul, ol"),r=0;r<n.length;r++)for(var i=t.node.contents(n[r]),o=null,a=i.length-1;a>=0;a--)"LI"!=i[a].tagName?(o||(o=e("<li>"),o.insertBefore(i[a])),o.prepend(i[a])):o=null}function _(){E(),w(),C(),T(),$(),S(),A(),x()}function k(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var O,R,N,D=[],D=[];return{_init:k,html:m,toHTML5:d,tables:y,lists:_,quotes:g,invisibleSpaces:u,exec:c}},e.FE.MODULES.spaces=function(t){function n(n,r){var i=n.previousSibling,o=n.nextSibling,a=n.textContent,s=n.parentNode;r&&(a=a.replace(/[\f\n\r\t\v ]{2,}/g," "),o&&"BR"!==o.tagName&&!t.node.isBlock(o)||!t.node.isBlock(s)||(a=a.replace(/[\f\n\r\t\v ]{1,}$/g,"")),i&&"BR"!==i.tagName&&!t.node.isBlock(i)||!t.node.isBlock(s)||(a=a.replace(/^[\f\n\r\t\v ]{1,}/g,""))),a=a.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",c=0;c<a.length;c++)l+=32!=a.charCodeAt(c)||0!==c&&32!=l.charCodeAt(c-1)?a[c]:e.FE.UNICODE_NBSP;(!o||t.node.isBlock(o)||o.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(o)&&"block"==t.win.getComputedStyle(o).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!i||t.node.isVoid(i)||t.node.isBlock(i)||(l=l.replace(/^\u00A0([^ $])/," $1"),1!==l.length||160!==l.charCodeAt(0)||!o||t.node.isVoid(o)||t.node.isBlock(o)||(l=" ")),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=l&&(n.textContent=l)}function r(e,r){if("undefined"!=typeof e&&e||(e=t.el),"undefined"==typeof r&&(r=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)n(e,r);else if(e.nodeType==Node.ELEMENT_NODE)for(var i=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")}),!1);i.nextNode();)n(i.currentNode,r)}function i(){for(var e=[],n=t.el.querySelectorAll(".fr-marker"),i=0;i<n.length;i++){var o=null,a=t.node.blockParent(n[i]);o=a?a:n[i];for(var s=o.nextSibling,l=o.previousSibling;s&&"BR"==s.tagName;)s=s.nextSibling;for(;l&&"BR"==l.tagName;)l=l.previousSibling;o&&e.indexOf(o)<0&&e.push(o),l&&e.indexOf(l)<0&&e.push(l),s&&e.indexOf(s)<0&&e.push(s)}for(var c=0;c<e.length;c++)r(e[c])}return{normalize:r,normalizeAroundCursor:i}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[]}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function r(n){var r=[],i=[];if(n)for(var a=t.el.querySelectorAll(".fr-marker"),s=0;s<a.length;s++){var l=t.node.blockParent(a[s])||a[s];if(l){var c=l.nextSibling,u=l.previousSibling;l&&i.indexOf(l)<0&&t.node.isBlock(l)&&i.push(l),u&&t.node.isBlock(u)&&i.indexOf(u)<0&&i.push(u),c&&t.node.isBlock(c)&&i.indexOf(c)<0&&i.push(c)}}else i=t.el.querySelectorAll(o());var d=o();d+=","+e.FE.VOID_ELEMENTS.join(","),d+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)";for(var s=i.length-1;s>=0;s--)if(!(i[s].textContent&&i[s].textContent.replace(/\u200B|\n/g,"").length>0||i[s].querySelectorAll(d).length>0)){for(var f=t.node.contents(i[s]),p=!1,h=0;h<f.length;h++)if(f[h].nodeType!=Node.COMMENT_NODE&&f[h].textContent&&f[h].textContent.replace(/\u200B|\n/g,"").length>0){p=!0;break}p||r.push(i[s])}return r}function i(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function o(){return e.FE.BLOCK_TAGS.join(", ")}function a(n){var r=e.merge([],e.FE.VOID_ELEMENTS);r=e.merge(r,t.opts.htmlAllowedEmptyTags),"undefined"==typeof n&&(r=e.merge(r,e.FE.BLOCK_TAGS));var i,o;i=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)");do{o=!1;for(var a=0;a<i.length;a++)0!==i[a].attributes.length&&"undefined"==typeof i[a].getAttribute("href")||(i[a].parentNode.removeChild(i[a]),o=!0);i=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)")}while(i.length&&o)}function s(e,r){var i=n();if(r&&(i="div"),i){for(var o=t.doc.createDocumentFragment(),a=null,s=!1,l=e.firstChild;l;){var c=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))a=null,o.appendChild(l);else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)a=null,o.appendChild(l);else if("BR"==l.tagName)null==a?(a=t.doc.createElement(i),r&&a.setAttribute("data-empty",!0),a.appendChild(l),o.appendChild(a)):s===!1&&(a.appendChild(t.doc.createElement("br")),a.setAttribute("data-empty",!0)),a=null;else{var u=l.textContent;l.nodeType==Node.TEXT_NODE&&0==u.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==a&&(a=t.doc.createElement(i),r&&a.setAttribute("class","fr-temp-div"),o.appendChild(a),s=!1),a.appendChild(l),s||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===u.replace(/ /g,"").length||(s=!0))}l=c}e.innerHTML="",e.appendChild(o)}}function l(e,t){for(var n=0;n<e.length;n++)s(e[n],t)}function c(e,n,r,i){return!!t.$wp&&("undefined"==typeof e&&(e=!1),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=!1),"undefined"==typeof i&&(i=!1),s(t.el,e),i&&l(t.el.querySelectorAll(".fr-inner"),e),n&&l(t.el.querySelectorAll("td, th"),e),void(r&&l(t.el.querySelectorAll("blockquote"),e)))}function u(){t.$el.find("div.fr-temp-div").each(function(){e(this).data("empty")||"LI"==this.parentNode.tagName||t.node.isBlock(this.nextSibling)&&!e(this.nextSibling).hasClass("fr-temp-div")?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""==e(this).attr("class")}).removeAttr("class")}function d(n){for(var i=r(n),o=0;o<i.length;o++){var a=i[o];"false"==a.getAttribute("contenteditable")||a.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(a)||"TABLE"!=a.tagName&&"TBODY"!=a.tagName&&"TR"!=a.tagName&&a.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var s=t.node.contents(t.el);s.length&&s[s.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}}function f(){return t.$el.get(0).querySelectorAll(o())}function p(e){if("undefined"==typeof e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);n.nextNode();){var r=n.currentNode,i=t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode),o=r.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(i){var a=r.previousSibling,s=r.nextSibling;a&&s&&" "==o?o=t.node.isBlock(a)&&t.node.isBlock(s)?"":"\n":(a||(o=o.replace(/^ */,"")),s||(o=o.replace(/ *$/,"")))}r.textContent=o}}function h(e,t,n){var r=new RegExp(t,"gi"),i=r.exec(e);return i?i[n]:null}function m(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function g(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function v(n,r){var i=n.parentNode;if(i&&(t.node.isBlock(i)||t.node.isElement(i))&&["TD","TH"].indexOf(i.tagName)<0){var o=n.previousSibling,a=n.nextSibling;o&&i&&"BR"!=o.tagName&&!t.node.isBlock(o)&&!a&&i.textContent.replace(/\u200B/g,"").length>0&&o.textContent.length>0&&!t.node.hasClass(o,"fr-marker")&&(t.el==i&&!a&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(r&&t.selection.save(),n.parentNode.removeChild(n),r&&t.selection.restore()))}}function b(){var e,n=t.selection.element();e=t.node.isBlock(n)?n:t.node.blockParent(n);var r=[];if(e){var i=e.nextSibling,o=e.previousSibling;e&&r.indexOf(e)<0&&r.push(e),o&&t.node.isBlock(o)&&r.indexOf(o)<0&&r.push(o),i&&t.node.isBlock(i)&&r.indexOf(i)<0&&r.push(i)}for(var a=[],s=0;s<r.length;s++)for(var l=r[s].querySelectorAll("br"),c=0;c<l.length;c++)a.indexOf(l[c])<0&&a.push(l[c]);if(n.parentNode==t.el)for(var u=t.el.children,s=0;s<u.length;s++)"BR"==u[s].tagName&&a.indexOf(u[s])<0&&a.push(u[s]);return a}function y(e,n){var r;if(e){r=b();for(var i=0;i<r.length;i++)v(r[i],n)}else{r=t.el.getElementsByTagName("br");for(var i=0;i<r.length;i++)v(r[i],n)}}function E(){t.opts.htmlUntouched||(a(),c()),p(),t.opts.htmlUntouched||(t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs()),t.selection.restore(),w(),t.placeholder.refresh()}function w(){t.core.isEmpty()&&(null!=n()?t.el.querySelector(o())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function C(e,t){return h(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function T(n,r){var i=e("<div "+(h(n,"<"+r+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(i.get(0))}function $(e){return h(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function S(n){var r=t.clean.html(n||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var i=C(r,"body")||(r.indexOf("<body")>=0?"":r),o=T(r,"body"),a=C(r,"head")||"<title></title>",s=T(r,"head"),l=e("<div>").append(a).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)}).end().html().trim();a=e("<div>").append(a).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"<!--"+this.nodeValue+"-->":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""}).toArray().join("");var c=$(r),u=T(r,"html");t.$el.html(l+"\n"+i),t.node.clearAttributes(t.el),t.$el.attr(o),t.$el.addClass("fr-view"),t.$el.attr("spellcheck",t.opts.spellcheck),t.$el.attr("dir",t.opts.direction),t.$head.html(a),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(s),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(u),t.iframe_document.doctype.parentNode.replaceChild(m(c,t.iframe_document),t.iframe_document.doctype)}else t.$el.html(r);var d=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),E(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),d&&t.edit.off(),t.events.trigger("html.set")}function x(e){var t=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,r=/(\.[^\s\+>~\.\[:]+)/g,i=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,o=/(:[\w-]+\([^\)]*\))/gi,a=/(:[^\s\+>~\.\[:]+)/g,s=/([^\s\+>~\.\[:]+)/g;!function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}();var l=100*(e.match(t)||[]).length+10*(e.match(n)||[]).length+10*(e.match(r)||[]).length+10*(e.match(o)||[]).length+10*(e.match(a)||[]).length+(e.match(i)||[]).length;return e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),l+=(e.match(s)||[]).length}function A(e){if(t.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""==e.getAttribute("class")&&e.removeAttribute("class"),e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll('[class=""]'),r=0;r<n.length;r++)n[r].removeAttribute("class")}function _(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var r="";t.events.trigger("html.beforeGet");var i,o=[],a={};if(!t.opts.useClasses&&!n){var s=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(i=0;i<t.doc.styleSheets.length;i++){var l,c=0;try{l=t.doc.styleSheets[i].cssRules,t.doc.styleSheets[i].ownerNode&&"STYLE"==t.doc.styleSheets[i].ownerNode.nodeType&&(c=1)}catch(u){}if(l)for(var d=0,f=l.length;d<f;d++)if(l[d].selectorText&&l[d].style.cssText.length>0){var p,h=l[d].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{p=t.el.querySelectorAll(h)}catch(u){p=[]}for(var m=0;m<p.length;m++){!p[m].getAttribute("fr-original-style")&&p[m].getAttribute("style")?(p[m].setAttribute("fr-original-style",p[m].getAttribute("style")),o.push(p[m])):p[m].getAttribute("fr-original-style")||o.push(p[m]),a[p[m]]||(a[p[m]]={});for(var v=1e3*c+x(l[d].selectorText),b=l[d].style.cssText.split(";"),y=0;y<b.length;y++){var E=b[y].trim().split(":")[0];E.match(s)||(a[p[m]][E]||(a[p[m]][E]=0,(p[m].getAttribute("fr-original-style")||"").indexOf(E+":")>=0&&(a[p[m]][E]=1e4)),v>=a[p[m]][E]&&(a[p[m]][E]=v,b[y].trim().length&&(p[m].style[E.trim()]=b[y].trim().split(":")[1].trim())))}}}}for(i=0;i<o.length;i++)if(o[i].getAttribute("class")&&(o[i].setAttribute("fr-original-class",o[i].getAttribute("class")),o[i].removeAttribute("class")),(o[i].getAttribute("fr-original-style")||"").trim().length>0)for(var w=o[i].getAttribute("fr-original-style").split(";"),m=0;m<w.length;m++)w[m].indexOf(":")>0&&(o[i].style[w[m].split(":")[0].trim()]=w[m].split(":")[1].trim())}if(t.core.isEmpty()?t.opts.fullPage&&(r=g(t.iframe_document),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):("undefined"==typeof e&&(e=!1),t.opts.fullPage?(r=g(t.iframe_document),t.$el.removeClass("fr-view"),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>",t.$el.addClass("fr-view")):r=t.$el.html()),!t.opts.useClasses&&!n)for(i=0;i<o.length;i++)o[i].getAttribute("fr-original-class")&&(o[i].setAttribute("class",o[i].getAttribute("fr-original-class")),o[i].removeAttribute("fr-original-class")),o[i].getAttribute("fr-original-style")?(o[i].setAttribute("style",o[i].getAttribute("fr-original-style")),o[i].removeAttribute("fr-original-style")):o[i].removeAttribute("style");t.opts.fullPage&&(r=r.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),r=r.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),r=r.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),r=r.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(r=r.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(r=r.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),r=t.clean.invisibleSpaces(r),r=t.clean.exec(r,A);var C=t.events.chainTrigger("html.get",r);return"string"==typeof C&&(r=C),r=r.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function k(){var n=function(n,r){for(;r&&(r.nodeType==Node.TEXT_NODE||!t.node.isBlock(r))&&!t.node.isElement(r);)r&&r.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(r)+t.node.closeTagString(r)),r=r.parentNode;r&&n.innerHTML==r.innerHTML&&(n.innerHTML=r.outerHTML)},r=function(){var n,r=null;return t.win.getSelection?(n=t.win.getSelection(),n&&n.rangeCount&&(r=n.getRangeAt(0).commonAncestorContainer,r.nodeType!=Node.ELEMENT_NODE&&(r=r.parentNode))):(n=t.doc.selection)&&"Control"!=n.type&&(r=n.createRange().parentElement()),null!=r&&(e.inArray(t.el,e(r).parents())>=0||r==t.el)?r:null},i="";if("undefined"!=typeof t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var o=t.selection.ranges(),a=0;a<o.length;a++){var s=document.createElement("div");s.appendChild(o[a].cloneContents()),n(s,r()),e(s).find(".fr-element").length>0&&(s=t.el),i+=s.innerHTML}}else"undefined"!=typeof t.doc.selection&&"Text"==t.doc.selection.type&&(i=t.doc.selection.createRange().htmlText);return i}function O(e){var n=t.doc.createElement("div");return n.innerHTML=e,null!==n.querySelector(o())}function R(e){var n=t.doc.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function N(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function D(e,n,r){t.selection.isCollapsed()||t.selection.remove();var i;if(i=n?e:t.clean.html(e),i=i.replace(/\r|\n/g," "),e.indexOf('class="fr-marker"')<0&&(i=R(i)),t.core.isEmpty()&&!t.opts.keepFormatOnDelete)t.el.innerHTML=i;else{var o=t.markers.insert();if(o){var a,s=t.node.blockParent(o);if((O(i)||r)&&(a=t.node.deepestParent(o)||s&&"LI"==s.tagName)){var o=t.markers.split();if(!o)return!1;o.outerHTML=i}else o.outerHTML=i}else t.el.innerHTML=t.el.innerHTML+i}E(),t.events.trigger("html.inserted")}function I(n){var r=null;if("undefined"==typeof n&&(r=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var i=r?(r.textContent.match(/\u200B/g)||[]).length-r.querySelectorAll(".fr-marker").length:0,o=(t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length;if(o==i)return!1;var a,s;do{s=!1,a=t.el.querySelectorAll("*:not(.fr-marker)");for(var l=0;l<a.length;l++){var c=a[l];if(r!=c){var u=c.textContent;0===c.children.length&&1===u.length&&8203==u.charCodeAt(0)&&(e(c).remove(),s=!0)}}}while(s)}function L(){var e=function(){I(),t.placeholder&&t.placeholder.refresh()};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",w)}return{defaultTag:n,emptyBlocks:r,emptyBlockTagsQuery:i,blockTagsQuery:o,fillEmptyBlocks:d,cleanEmptyTags:a,cleanWhiteTags:I,cleanBlankSpaces:p,blocks:f,getDoctype:g,set:S,get:_,getSelected:k,insert:D,wrap:c,unwrap:u,escapeEntities:N,checkIfEmpty:w,extractNode:C,extractNodeAttrs:T,extractDoctype:$,cleanBRs:y,_init:L}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$wp.css("overflow","auto")):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function r(){return!!e.$wp&&(n(),void(e.$iframe&&(e.events.on("keyup",t),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t))))}return{_init:r,syncIframe:t,refresh:n}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){function n(e){return i&&i.translation[e]?i.translation[e]:e}function r(){e.FE.LANGUAGE&&(i=e.FE.LANGUAGE[t.opts.language]),i&&i.direction&&(t.opts.direction=i.direction)}var i;return{_init:r,translate:n}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.placeholder=function(t){function n(){t.$placeholder||a();var n=0,r=0,i=0,o=0,s=0,l=0,c=t.node.contents(t.el),u=e(t.selection.element()).css("text-align");if(c.length&&c[0].nodeType==Node.ELEMENT_NODE){var d=e(c[0]);!t.opts.toolbarInline&&t.ready&&(n=t.helpers.getPX(d.css("margin-top")),o=t.helpers.getPX(d.css("padding-top")),r=t.helpers.getPX(d.css("margin-left")),i=t.helpers.getPX(d.css("margin-right")),s=t.helpers.getPX(d.css("padding-left")),l=t.helpers.getPX(d.css("padding-right"))),t.$placeholder.css("font-size",d.css("font-size")),t.$placeholder.css("line-height",d.css("line-height"))}else t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"));t.$wp.addClass("show-placeholder"),t.$placeholder.css({marginTop:Math.max(t.helpers.getPX(t.$el.css("margin-top")),n),paddingTop:Math.max(t.helpers.getPX(t.$el.css("padding-top")),o),paddingLeft:Math.max(t.helpers.getPX(t.$el.css("padding-left")),s),marginLeft:Math.max(t.helpers.getPX(t.$el.css("margin-left")),r),paddingRight:Math.max(t.helpers.getPX(t.$el.css("padding-right")),l),marginRight:Math.max(t.helpers.getPX(t.$el.css("margin-right")),i),textAlign:u}).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||"")),t.$placeholder.html(t.$placeholder.text().replace(/\n/g,"<br>"))}function r(){t.$wp.removeClass("show-placeholder")}function i(){return!t.$wp||t.node.hasClass(t.$wp.get(0),"show-placeholder")}function o(){return!!t.$wp&&void(t.core.isEmpty()?n():r())}function a(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}function s(){return!!t.$wp&&void t.events.on("init input keydown keyup contentChanged initialized",o)}return{_init:s,show:n,hide:r,refresh:o,isVisible:i}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(t){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(t){}}function n(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),o=!1}function r(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),o=!0}function i(){return o}var o=!1;return{on:n,off:r,disableDesign:t,isDisabled:i}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function n(n){if(t.opts.iframe){t.$head.find("style[data-fr-style], link[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+n+"</style>");for(var r=0;r<t.opts.iframeStyleFiles.length;r++){var i=e('<link data-fr-style="true" rel="stylesheet" href="'+t.opts.iframeStyleFiles[r]+'">');i.get(0).addEventListener("load",t.size.syncIframe),t.$head.append(i)}}}function r(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function i(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),r(),t.opts.iframe){t.$iframe.addClass("fr-iframe"),t.$el.addClass("fr-view");for(var e=0;e<t.o_doc.styleSheets.length;e++){var n;try{n=t.o_doc.styleSheets[e].cssRules}catch(i){}if(n)for(var o=0,a=n.length;o<a;o++)!n[o].selectorText||0!==n[o].selectorText.indexOf(".fr-view")&&0!==n[o].selectorText.indexOf(".fr-element")||n[o].style.cssText.length>0&&(0===n[o].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-view/g,"body")+"{"+n[o].style.cssText+"}":t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-element/g,"body")+"{"+n[o].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")}function o(){return t.node.isEmpty(t.el)}function a(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}function s(e,n){var r=new XMLHttpRequest;r.open(n,e,!0),t.opts.requestWithCredentials&&(r.withCredentials=!0);for(var i in t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,t.opts.requestHeaders[i]);return r}function l(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function c(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0}function u(e){if(!e)return!1;var n=e.data("instance");return!!n&&n.id==t.id}function d(){if(e.FE.INSTANCES.push(t),a(),t.$wp){i(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",function(e){if(2==e.button)return!1});try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(n){}}"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",function(){t.$oel.val(t.html.get())}),t.events.on("form.submit",function(){t.$oel.val(t.html.get())}),t.events.on("form.reset",function(){t.html.set(t._original_html)}),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()}),t.events.trigger("init")}return{_init:d,destroy:l,isEmpty:o,getXHR:s,injectStyle:n,hasFocus:c,sameInstance:u}},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function r(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function i(i){var o,a=n(i),s=a.nextSibling,l=a.previousSibling,c=t.html.defaultTag();if(t.node.isEmpty(a,!0)&&s){for(var u="",d="",f=i.parentNode;!t.node.isList(f)&&f.parentNode&&"LI"!==f.parentNode.tagName;)u=t.node.openTagString(f)+u,d+=t.node.closeTagString(f),f=f.parentNode;u=t.node.openTagString(f)+u,d+=t.node.closeTagString(f);var p="";for(p=f.parentNode&&"LI"==f.parentNode.tagName?d+"<li>"+e.FE.MARKERS+"<br>"+u:c?d+"<"+c+">"+e.FE.MARKERS+"<br></"+c+">"+u:d+e.FE.MARKERS+"<br>"+u,e(a).html('<span id="fr-break"></span>');["UL","OL"].indexOf(f.tagName)<0||f.parentNode&&"LI"===f.parentNode.tagName;)f=f.parentNode;var h=t.node.openTagString(f)+e(f).html()+t.node.closeTagString(f);h=h.replace(/<span id="fr-break"><\/span>/g,p),e(f).replaceWith(h),t.$el.find("li:empty").remove()}else l&&s||!t.node.isEmpty(a,!0)?(e(a).before("<li><br></li>"),e(i).remove()):l?(o=r(a),o.parentNode&&"LI"==o.parentNode.tagName?e(o.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(o).after("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(o).after(e.FE.MARKERS+"<br>"),e(a).remove()):(o=r(a),o.parentNode&&"LI"==o.parentNode.tagName?s?e(o.parentNode).before("<li>"+e.FE.MARKERS+"<br></li>"):e(o.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(o).before("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(o).before(e.FE.MARKERS+"<br>"),e(a).remove())}function o(r){for(var i=n(r),o="",a=r,s="",l="";a!=i;){a=a.parentNode;var c="A"==a.tagName&&t.cursor.isAtEnd(r,a)?"fr-to-remove":"";s=t.node.openTagString(e(a).clone().addClass(c).get(0))+s,l=t.node.closeTagString(a)+l}o=l+o+s+e.FE.MARKERS,e(r).replaceWith('<span id="fr-break"></span>');var u=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);u=u.replace(/<span id="fr-break"><\/span>/g,o),e(i).replaceWith(u)}function a(r){for(var i=n(r),o=e.FE.MARKERS,a="",s=r,l=!1;s!=i;){s=s.parentNode;var c="A"==s.tagName&&t.cursor.isAtEnd(r,s)?"fr-to-remove":"";l||s==i||t.node.isBlock(s)||(l=!0,a+=e.FE.INVISIBLE_SPACE),a=t.node.openTagString(e(s).clone().addClass(c).get(0))+a,o+=t.node.closeTagString(s)}var u=a+o;e(r).remove(),e(i).after(u)}function s(i){var o=n(i),a=o.previousSibling;if(a){a=e(a).find(t.html.blockTagsQuery()).get(-1)||a,e(i).replaceWith(e.FE.MARKERS);var s=t.node.contents(a);s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){
this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,c=t.node.contents(o)[0];c&&!t.node.isList(c);)l=c.nextSibling,e(a).append(c),c=l;for(a=o.previousSibling;c;)l=c.nextSibling,e(a).append(c),c=l;e(o).remove()}else{var u=r(o);if(e(i).replaceWith(e.FE.MARKERS),u.parentNode&&"LI"==u.parentNode.tagName){var d=u.previousSibling;t.node.isBlock(d)?(e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(d).append(e(o).html())):e(u).before(e(o).html())}else{var f=t.html.defaultTag();f&&0===e(o).find(t.html.blockTagsQuery()).length?e(u).before("<"+f+">"+e(o).html()+"</"+f+">"):e(u).before(e(o).html())}e(o).remove(),0===e(u).find("li").length&&e(u).remove()}}function l(r){var i,o=n(r),a=o.nextSibling;if(a){i=t.node.contents(a),i.length&&"BR"==i[0].tagName&&e(i[0]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var s,l=r,c=t.node.contents(a)[0];c&&!t.node.isList(c);)s=c.nextSibling,e(l).after(c),l=c,c=s;for(;c;)s=c.nextSibling,e(o).append(c),c=s;e(r).replaceWith(e.FE.MARKERS),e(a).remove()}else{for(var u=o;!u.nextSibling&&u!=t.el;)u=u.parentNode;if(u==t.el)return!1;if(u=u.nextSibling,t.node.isBlock(u))e.FE.NO_DELETE_TAGS.indexOf(u.tagName)<0&&(e(r).replaceWith(e.FE.MARKERS),i=t.node.contents(o),i.length&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),e(o).append(e(u).html()),e(u).remove());else for(i=t.node.contents(o),i.length&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),e(r).replaceWith(e.FE.MARKERS);u&&!t.node.isBlock(u)&&"BR"!=u.tagName;)e(o).append(e(u)),u=u.nextSibling}}return{_startEnter:i,_middleEnter:o,_endEnter:a,_backspace:s,_del:l}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0==e.nextSibling.textContent.replace(/\u200b/g,"").length?n(e.nextSibling):!e.nextSibling&&n(e.parentNode)))}function r(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0==e.previousSibling.textContent.replace(/\u200b/g,"").length?r(e.previousSibling):!e.previousSibling&&r(e.parentNode)))}function i(e,n){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0==e.previousSibling.textContent.replace(/\u200b/g,"").length?i(e.previousSibling,n):!e.previousSibling&&(e.parentNode==n||i(e.parentNode,n)))}function o(e,n){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0==e.nextSibling.textContent.replace(/\u200b/g,"").length?o(e.nextSibling,n):!e.nextSibling&&(e.parentNode==n||o(e.parentNode,n)))}function a(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function s(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,i=t.node.deepestParent(n,[],!r);if(i&&"BLOCKQUOTE"==i.tagName){var o=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);o&&o.previousSibling&&(i=o)}if(null!==i){var a,s=i.previousSibling;if(t.node.isBlock(i)&&t.node.isEditable(i)&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(s))if(t.node.isBlock(s))if(t.node.isEmpty(s)&&!t.node.isList(s))e(s).remove();else{if(t.node.isList(s)&&(s=e(s).find("li:last").get(0)),a=t.node.contents(s),a.length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),"BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[a.length-1]);)s=a[a.length-1],a=t.node.contents(s);else if("BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(a=t.node.contents(i);a.length&&t.node.isBlock(a[0]);)i=a[0],a=t.node.contents(i);e(n).replaceWith(e.FE.MARKERS),e(s).append(t.node.isEmpty(i)?e.FE.MARKERS:i.innerHTML),e(i).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==i.tagName&&s.nodeType==Node.ELEMENT_NODE?e(s).remove():(e(s).after(t.node.isEmpty(i)?"":e(i).html()),e(i).remove(),"BR"==s.tagName&&e(s).remove())}}function l(n){for(var r=n;!r.previousSibling;)if(r=r.parentNode,t.node.isElement(r))return!1;r=r.previousSibling;var i;if(!t.node.isBlock(r)&&t.node.isEditable(r)){for(i=t.node.contents(r);r.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(r)&&i.length&&t.node.isEditable(r);)r=i[i.length-1],i=t.node.contents(r);if(r.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;var o=r.textContent,a=o.length-1;if(t.opts.tabSpaces&&o.length>=t.opts.tabSpaces){var s=o.substr(o.length-t.opts.tabSpaces,o.length-1);0==s.replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(a=o.length-t.opts.tabSpaces)}r.textContent=o.substring(0,a),r.textContent.length&&55357==r.textContent.charCodeAt(r.textContent.length-1)&&(r.textContent=r.textContent.substr(0,r.textContent.length-1));var l=o.length!=r.textContent.length;0==r.textContent.length?l&&t.opts.keepFormatOnDelete?e(r).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):2!=r.parentNode.childNodes.length||r.parentNode!=n.parentNode||t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode)?(e(r).after(e.FE.MARKERS),t.node.isElement(r.parentNode)&&!n.nextSibling&&r.previousSibling&&"BR"==r.previousSibling.tagName&&e(n).after("<br>"),r.parentNode.removeChild(r)):(e(r.parentNode).after(e.FE.MARKERS),e(r.parentNode).remove()):e(r).after(e.FE.MARKERS)}else t.node.isDeletable(r)?(e(r).after(e.FE.MARKERS),e(r).remove()):t.events.trigger("node.remove",[e(r)])!==!1&&(e(r).after(e.FE.MARKERS),e(r).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0&&(t.node.isEditable(r)||t.node.isDeletable(r)))if(t.node.isDeletable(r))e(n).replaceWith(e.FE.MARKERS),e(r).remove();else if(t.node.isEmpty(r)&&!t.node.isList(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(r)&&(r=e(r).find("li:last").get(0)),i=t.node.contents(r),i&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),i=t.node.contents(r);i&&t.node.isBlock(i[i.length-1]);)r=i[i.length-1],i=t.node.contents(r);e(r).append(e.FE.MARKERS);for(var c=n;!c.previousSibling;)c=c.parentNode;for(;c&&"BR"!==c.tagName&&!t.node.isBlock(c);){var u=c;c=c.nextSibling,e(r).append(u)}c&&"BR"==c.tagName&&e(c).remove(),e(n).remove()}else n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove()}function c(){var o=!1,c=t.markers.insert();if(!c)return!0;for(var u=c.parentNode;u&&!t.node.isElement(u);){if("false"===u.getAttribute("contenteditable"))return e(c).replaceWith(e.FE.MARKERS),t.selection.restore(),!1;if("true"===u.getAttribute("contenteditable"))break;u=u.parentNode}t.el.normalize();var d=c.previousSibling;if(d){var f=d.textContent;f&&f.length&&8203==f.charCodeAt(f.length-1)&&(1==f.length?e(d).remove():(d.textContent=d.textContent.substr(0,f.length-1),d.textContent.length&&55357==d.textContent.charCodeAt(d.textContent.length-1)&&(d.textContent=d.textContent.substr(0,d.textContent.length-1))))}return n(c)?o=l(c):r(c)?a(c)&&i(c,e(c).parents("li:first").get(0))?t.cursorLists._backspace(c):s(c):o=l(c),e(c).remove(),p(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore(),o}function u(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,i=t.node.deepestParent(n,[],!r);if(i&&"BLOCKQUOTE"==i.tagName){var o=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);o&&o.nextSibling&&(i=o)}if(null!==i){var a,s=i.nextSibling;if(t.node.isBlock(i)&&(t.node.isEditable(i)||t.node.isDeletable(i))&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(s)&&t.node.isEditable(s))if(t.node.isList(s))if(t.node.isEmpty(i,!0))e(i).remove(),e(s).find("li:first").prepend(e.FE.MARKERS);else{var l=e(s).find("li:first");"BLOCKQUOTE"==i.tagName&&(a=t.node.contents(i),a.length&&t.node.isBlock(a[a.length-1])&&(i=a[a.length-1])),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(i).append(t.node.contents(l.get(0))),l.remove(),0===e(s).find("li").length&&e(s).remove())}else{if(a=t.node.contents(s),a.length&&"BR"==a[0].tagName&&e(a[0]).remove(),"BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(a=t.node.contents(i);a.length&&t.node.isBlock(a[a.length-1]);)i=a[a.length-1],a=t.node.contents(i);else if("BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[0]);)s=a[0],a=t.node.contents(s);e(n).replaceWith(e.FE.MARKERS),e(i).append(s.innerHTML),e(s).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);s&&"BR"!==s.tagName&&!t.node.isBlock(s)&&t.node.isEditable(s);){var c=s;s=s.nextSibling,e(i).append(c)}s&&"BR"==s.tagName&&t.node.isEditable(s)&&e(s).remove()}}}function d(r){for(var i=r;!i.nextSibling;)if(i=i.parentNode,t.node.isElement(i))return!1;if(i=i.nextSibling,"BR"==i.tagName&&t.node.isEditable(i))if(i.nextSibling){if(t.node.isBlock(i.nextSibling)&&t.node.isEditable(i.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(i.nextSibling.tagName)<0))return void e(i).remove();i=i.nextSibling,e(i.previousSibling).remove()}}else if(n(i)){if(a(r))t.cursorLists._del(r);else{var o=t.node.deepestParent(i);o&&(e(i).remove(),u(r))}return}var s;if(!t.node.isBlock(i)&&t.node.isEditable(i)){for(s=t.node.contents(i);i.nodeType!=Node.TEXT_NODE&&s.length&&!t.node.isDeletable(i)&&t.node.isEditable(i);)i=s[0],s=t.node.contents(i);i.nodeType==Node.TEXT_NODE?(e(i).before(e.FE.MARKERS),i.textContent.length&&55357==i.textContent.charCodeAt(0)?i.textContent=i.textContent.substring(2,i.textContent.length):i.textContent=i.textContent.substring(1,i.textContent.length)):t.node.isDeletable(i)?(e(i).before(e.FE.MARKERS),e(i).remove()):t.events.trigger("node.remove",[e(i)])!==!1&&(e(i).before(e.FE.MARKERS),e(i).remove()),e(r).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0&&(t.node.isEditable(i)||t.node.isDeletable(i)))if(t.node.isDeletable(i))e(r).replaceWith(e.FE.MARKERS),e(i).remove();else if(t.node.isList(i))r.previousSibling?(e(i).find("li:first").prepend(r),t.cursorLists._backspace(r)):(e(i).find("li:first").prepend(e.FE.MARKERS),e(r).remove());else if(s=t.node.contents(i),s&&"BR"==s[0].tagName&&e(s[0]).remove(),s&&"BLOCKQUOTE"==i.tagName){var l=s[0];for(e(r).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var c=l;l=l.nextSibling,e(r).before(c)}l&&"BR"==l.tagName&&e(l).remove()}else e(r).after(e(i).html()).after(e.FE.MARKERS),e(i).remove()}function f(){var i=t.markers.insert();if(!i)return!1;if(t.el.normalize(),n(i))if(a(i))if(0===e(i).parents("li:first").find("ul, ol").length)t.cursorLists._del(i);else{var o=e(i).parents("li:first").find("ul:first, ol:first").find("li:first");o=o.find(t.html.blockTagsQuery()).get(-1)||o,o.prepend(i),t.cursorLists._backspace(i)}else u(i);else d(r(i)?i:i);e(i).remove(),p(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}function p(){for(var e=t.el.querySelectorAll("blockquote:empty"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function h(){t.$el.find(".fr-to-remove").each(function(){for(var n=t.node.contents(this),r=0;r<n.length;r++)n[r].nodeType==Node.TEXT_NODE&&(n[r].textContent=n[r].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function m(n,r,i){var a,s=t.node.deepestParent(n,[],!i);if(s&&"BLOCKQUOTE"==s.tagName)return o(n,s)?(a=t.html.defaultTag(),a?e(s).after("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(s).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(v(n,r,i),!1);if(null==s)a=t.html.defaultTag(),a&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(n).replaceWith((t.node.isEmpty(n.parentNode,!0)?"":"<br/>")+e.FE.MARKERS+"<br/>");else{var l=n,c="";t.node.isBlock(s)&&!r||(c="<br/>");var u="",d="";a=t.html.defaultTag();var f="",p="";a&&t.node.isBlock(s)&&(f="<"+a+">",p="</"+a+">",s.tagName==a.toUpperCase()&&(f=t.node.openTagString(e(s).clone().removeAttr("id").get(0))));do if(l=l.parentNode,!r||l!=s||r&&!t.node.isBlock(s))if(u+=t.node.closeTagString(l),l==s&&t.node.isBlock(s))d=f+d;else{var h="A"==l.tagName&&o(n,l)?"fr-to-remove":"";d=t.node.openTagString(e(l).clone().addClass(h).get(0))+d}while(l!=s);c=u+c+d+(n.parentNode==s&&t.node.isBlock(s)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(s)&&!e(s).find("*:last").is("br")&&e(s).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),s.nextSibling&&!t.node.isBlock(s.nextSibling)||t.node.isBlock(s)||e(s).after("<br>");var m;m=!r&&t.node.isBlock(s)?t.node.openTagString(s)+e(s).html()+p:t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s),m=m.replace(/<span id="fr-break"><\/span>/g,c),e(s).replaceWith(m)}}function g(n,r,a){var s,l=t.node.deepestParent(n,[],!a);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(n),g(n,r,a);if(l&&"BLOCKQUOTE"==l.tagName){if(i(n,l))return s=t.html.defaultTag(),s?e(l).before("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(l).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1;o(n,l)?m(n,r,!0):v(n,r,!0)}if(null==l)s=t.html.defaultTag(),s&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(r)e(n).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return m(n,r,a);e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function v(n,r,a){var s=t.node.deepestParent(n,[],!a);if(null==s)t.html.defaultTag()&&n.parentNode===t.el?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(n.nextSibling&&!t.node.isBlock(n.nextSibling)||e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,c="";"PRE"==s.tagName&&(r=!0),t.node.isBlock(s)&&!r||(c="<br>");var u="",d="";do{var f=l;if(l=l.parentNode,"BLOCKQUOTE"==s.tagName&&t.node.isEmpty(f)&&!t.node.hasClass(f,"fr-marker")&&e(f).find(n).length>0&&e(f).after(n),("BLOCKQUOTE"!=s.tagName||!o(n,l)&&!i(n,l))&&(!r||l!=s||r&&!t.node.isBlock(s))){u+=t.node.closeTagString(l);var p="A"==l.tagName&&o(n,l)?"fr-to-remove":"";d=t.node.openTagString(e(l).clone().addClass(p).removeAttr("id").get(0))+d}}while(l!=s);var h=s==n.parentNode&&t.node.isBlock(s)||n.nextSibling;if("BLOCKQUOTE"==s.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var m=t.html.defaultTag();c=u+c+(m?"<"+m+">":"")+e.FE.MARKERS+"<br>"+(m?"</"+m+">":"")+d}else c=u+c+d+(h?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var g=t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s);g=g.replace(/<span id="fr-break"><\/span>/g,c),e(s).replaceWith(g)}}function b(i){var o=t.markers.insert();if(!o)return!0;t.el.normalize();var s=!1;e(o).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(i=!1,s=!0),e(o).parentsUntil(t.$el,"TD, TH").length&&(s=!1),n(o)?!a(o)||i||s?m(o,i,s):t.cursorLists._endEnter(o):r(o)?!a(o)||i||s?g(o,i,s):t.cursorLists._startEnter(o):!a(o)||i||s?v(o,i,s):t.cursorLists._middleEnter(o),h(),t.opts.htmlUntouched||(t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}return{enter:b,backspace:c,del:f,isAtEnd:o,isAtStart:i}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function n(e){t.opts.multiLine?t.helpers.isIOS()||(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function r(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function i(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),S=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(),S=!1),t.placeholder.refresh()}function o(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function a(n){var r=t.selection.element();if(!t.helpers.isMobile()&&(t.browser.mozilla||r&&"A"==r.tagName)){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var i=t.markers.insert();if(i){var o=i.previousSibling,a=i.nextSibling;!a&&i.parentNode&&"A"==i.parentNode.tagName?(i.parentNode.insertAdjacentHTML("afterend","&nbsp;"+e.FE.MARKERS),i.parentNode.removeChild(i)):(o&&o.nodeType==Node.TEXT_NODE&&1==o.textContent.length&&160==o.textContent.charCodeAt(0)?o.textContent=o.textContent+" ":i.insertAdjacentHTML("beforebegin","&nbsp;"),i.outerHTML=e.FE.MARKERS),t.selection.restore()}}}function s(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!_){var e=t.selection.ranges(0),n=e.startContainer,r=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&r<=n.textContent.length&&r>0&&32==n.textContent.charCodeAt(r-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function l(){t.selection.isFull()&&setTimeout(function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function c(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var n="",r=0;r<t.opts.tabSpaces;r++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh(),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function u(e){_=!1}function d(){return _}function f(s){t.events.disableBlur(),S=!0;var l=s.which;if(16===l)return!0;if(229===l)return _=!0,!0;_=!1;var u=y(l)&&!v(s),d=l==e.FE.KEYCODE.BACKSPACE||l==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||d&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(u||d)){var f=t.html.defaultTag();if(f?t.$el.html("<"+f+">"+e.FE.MARKERS+"<br/></"+f+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!y(l))return s.preventDefault(),!0}l==e.FE.KEYCODE.ENTER?s.shiftKey?r(s):n(s):l!=e.FE.KEYCODE.BACKSPACE||v(s)||s.altKey?l!=e.FE.KEYCODE.DELETE||v(s)||s.altKey?l==e.FE.KEYCODE.SPACE?a(s):l==e.FE.KEYCODE.TAB?c(s):v(s)||!y(s.which)||t.selection.isCollapsed()||s.ctrlKey||t.selection.remove():t.placeholder.isVisible()?(s.preventDefault(),s.stopPropagation()):o(s):t.placeholder.isVisible()?(s.preventDefault(),s.stopPropagation()):i(s),t.events.enableBlur()}function p(e){for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);n.nextNode();){var r=n.currentNode;r.textContent=r.textContent.replace(/\u200B/gi,"")}}function h(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-t.helpers.scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+t.helpers.scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(n+=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n+=t.opts.toolbarStickyOffset,n>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.toolbarBottom||(n-=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n<t.$tb.height()+20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.$tb.height()-20))}function m(){var n=t.selection.element(),r=t.node.blockParent(n);if(r&&"DIV"==r.tagName&&t.selection.info(r).atStart){var i=t.html.defaultTag();r.previousSibling&&"DIV"!=r.previousSibling.tagName&&i&&"div"!=i&&(t.selection.save(),e(r).replaceWith("<"+i+">"+r.innerHTML+"</"+i+">"),t.selection.restore())}}function g(n){if(t.helpers.isAndroid&&t.browser.mozilla)return!0;if(_)return _=!1,!1;if(!t.selection.isCollapsed())return!0;if(n&&(n.which===e.FE.KEYCODE.META||n.which==e.FE.KEYCODE.CTRL))return!0;if(n&&b(n.which))return!0;n&&n.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&m(),n&&(n.which==e.FE.KEYCODE.ENTER||n.which==e.FE.KEYCODE.BACKSPACE||n.which>=37&&n.which<=40&&!t.browser.msie)&&(n.which==e.FE.KEYCODE.BACKSPACE&&S||h()),t.html.cleanBRs(!0,!0);var r=function(e){if(!e)return!1;var t=e.innerHTML;return t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""),!!(t&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)},i=function(e){var n=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!t.helpers.isIOS()||0===((e.textContent||"").match(n)||[]).length},o=t.selection.element();r(o)&&!t.node.hasClass(o,"fr-marker")&&"IFRAME"!=o.tagName&&i(o)&&(t.selection.save(),p(o),t.selection.restore())}function v(e){if(navigator.userAgent.indexOf("Mac OS X")!=-1){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function b(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function y(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function E(n){var r=n.which;return!!(v(n)||r>=37&&r<=40||!y(r)&&r!=e.FE.KEYCODE.DELETE&&r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.ENTER)||(x||(A=t.snapshot.get()),clearTimeout(x),void(x=setTimeout(function(){x=null,t.undo.saveStep()},Math.max(250,t.opts.typingTimer))))}function w(e){var n=e.which;return!!(v(e)||n>=37&&n<=40)||void(A&&x&&(t.undo.saveStep(A),A=null))}function C(){x&&(clearTimeout(x),t.undo.saveStep(),A=null)}function T(t){var n=t.which;return v(t)||n==e.FE.KEYCODE.F5}function $(){if(t.events.on("keydown",E),t.events.on("input",s),t.events.on("keyup input",w),t.events.on("keypress",u),t.events.on("keydown",f),t.events.on("keyup",g),t.events.on("html.inserted",g),t.events.on("cut",l),!t.browser.edge&&t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){_=!0}),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){_=!1,g()})}catch(e){}}var S,x,A,_=!1;return{_init:$,ctrlKey:v,isCharacter:y,isArrow:b,forceUndo:C,isIME:d,isBrowserAction:T}},e.FE.MODULES.accessibility=function(t){function n(e){if(e&&e.length){e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",function(n){var r=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;r.events.blurActive()&&r.events.trigger("blur"),r.events.enableBlur()},!0),e.data("blur-event-set",!0));var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.disableBlur(),e.focus(),t.shared.$f_el=e}}function r(e,t){var r=t?"last":"first",i=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[r]();if(i.length)return n(i),!0}function i(e){return e.is("input, textarea")&&a(),t.events.disableBlur(),e.focus(),!0}function o(e,n){var r=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(n?":last":":first");if(r.length)return i(r);if(t.shared.with_kb){var o=e.find(".fr-active-item:visible:first");if(o.length)return i(o);var a=e.find("[tabIndex]:visible:first");if(a.length)return i(a)}}function a(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function s(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function l(e){var n=e.children().not(".fr-buttons");n.data("mouseenter-event-set")||(t.events.$on(n,"mouseenter","[tabIndex]",function(r){var i=e.data("instance")||t;if(!R)return r.stopPropagation(),void r.preventDefault();var o=n.find(":focus:first");o.length&&!o.is("input, button, textarea")&&(i.events.disableBlur(),o.blur(),i.events.disableBlur(),i.events.focus())}),n.data("mouseenter-event-set",!0)),!o(n)&&t.shared.with_kb&&r(e.find(".fr-buttons"))}function c(e){t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),t.shared.with_kb?e.find(".fr-command[tabIndex]:first").focus():e.find("[tabIndex]:first").focus()}function u(){var e=t.popups.areVisible();if(e){var n=e.find(".fr-buttons");return n.find("button:focus, .fr-group span:focus").length?!r(e.data("instance").$tb):!r(n)}return!r(t.$tb)}function d(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function f(i,a,s){if(t.shared.$f_el){var l=d();l&&(t.button.click(l),t.shared.$f_el=l);var c=i.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),u=c.index(t.shared.$f_el);if(0==u&&!s||u==c.length-1&&s){var f;if(a){if(i.parent().is(".fr-popup")){var p=i.parent().children().not(".fr-buttons");f=!o(p,!s)}f===!1&&(t.shared.$f_el=null)}a&&f===!1||r(i,!s)}else n(e(c.get(u+(s?1:-1))));return!1}}function p(e,t){return f(e,t,!0)}function h(e,t){return f(e,t)}function m(e){if(t.shared.$f_el){if(t.shared.$f_el.is(".fr-dropdown.fr-active")){var r;return r=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),n(r),!1}if(t.shared.$f_el.is("a.fr-command")){var r;return r=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first(),r.length||(r=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),n(r),!1}}}function g(){return t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?b():m(!0)}function v(){return m()}function b(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus());var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),S(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var n=t.popups.areVisible(t);n&&n.data("popup-button",t.shared.$f_el)}else if(t.shared.$f_el.attr("data-modal")){var r=t.modals.areVisible(t);r&&r.data("modal-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function y(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),t.events.trigger("toolbar.focusEditor")!==!1&&(t.events.disableBlur(),t.events.focus())}function E(e){if(t.shared.$f_el){var r=d();return r?(t.button.click(r),n(r)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(e.parent().find(".fr-back:visible:first")),S(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(s(t),t.shared.$f_el=null,t.events.trigger("toolbar.esc")!==!1&&(t.popups.hide(e.parent()),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),S(e.parent()))):y()),!1}}function w(n,r){var i=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,o=n.which,a=!1;return o!=e.FE.KEYCODE.TAB||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_RIGHT||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.TAB||i||!n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_LEFT||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_UP||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_DOWN||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ENTER||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ESC||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.F10||i||n.shiftKey||!n.altKey||(a=u()):a=E(r):a=b():a=g():a=v():a=h(r):a=h(r,!0):a=p(r):a=p(r,!0),t.shared.$f_el||void 0!==a||(a=!0),!a&&t.keys.isBrowserAction(n)&&(a=!0),!!a||(n.preventDefault(),n.stopPropagation(),!1)}function C(n){n&&n.length&&(t.events.$on(n,"keydown",function(r){if(!e(r.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var i=n.parents(".fr-popup").data("instance")||n.data("instance")||t;t.shared.with_kb=!0;var o=i.accessibility.exec(r,n);return t.shared.with_kb=!1,o},!0),t.events.$on(n,"mouseenter","[tabIndex]",function(r){var i=n.parents(".fr-popup").data("instance")||n.data("instance")||t;if(!R)return r.stopPropagation(),void r.preventDefault();var o=e(r.currentTarget);i.shared.$f_el&&i.shared.$f_el.not(o)&&i.accessibility.focusEditor()},!0))}function T(e){var n=t.popups.get(e),r=$(e);C(n.find(".fr-buttons")),t.events.$on(n,"mouseenter","tabIndex",r._tiMouseenter,!0),t.events.$on(n.children().not(".fr-buttons"),"keydown","[tabIndex]",r._tiKeydown,!0),t.popups.onHide(e,function(){s(n.data("instance")||t)}),t.popups.onShow(e,function(){R=!1,setTimeout(function(){R=!0},0)})}function $(n){var i=t.popups.get(n);return{_tiKeydown:function(a){var l=i.data("instance")||t;if(l.events.trigger("popup.tab",[a])===!1)return!1;var c=a.which,u=i.find(":focus:first");if(e.FE.KEYCODE.TAB==c){a.preventDefault();var d=i.children().not(".fr-buttons"),f=d.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),p=f.indexOf(this)+(a.shiftKey?-1:1);if(0<=p&&p<f.length)return l.events.disableBlur(),e(f[p]).focus(),a.stopPropagation(),!1;var h=i.find(".fr-buttons");if(h.length&&r(h,!!a.shiftKey))return a.stopPropagation(),!1;if(o(d))return a.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=c)return e.FE.KEYCODE.ESC==c?(a.preventDefault(),a.stopPropagation(),s(l),l.popups.isVisible(n)&&i.find(".fr-back:visible").length?(l.opts.toolbarInline&&(l.events.disableBlur(),
l.events.focus()),l.button.exec(i.find(".fr-back:visible:first")),S(i)):l.popups.isVisible(n)&&i.find(".fr-dismiss:visible").length?l.button.exec(i.find(".fr-dismiss:visible:first")):(l.popups.hide(n),l.opts.toolbarInline&&l.toolbar.showInline(null,!0),S(i)),!1):e.FE.KEYCODE.SPACE==c&&(u.is(".fr-submit")||u.is(".fr-dismiss"))?(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(u),!0):l.keys.isBrowserAction(a)?void a.stopPropagation():u.is("input[type=text], textarea")?void a.stopPropagation():e.FE.KEYCODE.SPACE==c&&(u.is(".fr-link-attr")||u.is("input[type=file]"))?void a.stopPropagation():(a.stopPropagation(),a.preventDefault(),!1);var m=null;i.find(".fr-submit:visible").length>0?m=i.find(".fr-submit:visible:first"):i.find(".fr-dismiss:visible").length&&(m=i.find(".fr-dismiss:visible:first")),m&&(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(m))}},_tiMouseenter:function(e){var n=i.data("instance")||t;_(n)}}}function S(e){var t=e.data("popup-button");t&&setTimeout(function(){n(t),e.data("popup-button",null)},0)}function x(e){var t=e.data("modal-button");t&&setTimeout(function(){n(t),e.data("modal-button",null)},0)}function A(){return null!=t.shared.$f_el}function _(e){var n=t.popups.areVisible(e);n&&n.data("popup-button",null)}function k(n){var r=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,i=n.which;if(i==e.FE.KEYCODE.F10&&!r&&!n.shiftKey&&n.altKey){t.shared.with_kb=!0;var a=t.popups.areVisible(t),s=!1;return a&&(s=o(a.children().not(".fr-buttons"))),s||u(),t.shared.with_kb=!1,n.preventDefault(),n.stopPropagation(),!1}return!0}function O(){t.$wp?t.events.on("keydown",k,!0):t.events.$on(t.$win,"keydown",k,!0),t.events.on("mousedown",function(e){_(t),t.shared.$f_el&&(s(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)},!0),t.events.on("blur",function(e){t.shared.$f_el=null,_(t)},!0)}var R=!0;return{_init:O,registerPopup:T,registerToolbar:C,focusToolbarElement:n,focusToolbar:r,focusContent:o,focusPopup:l,focusModal:c,focusEditor:y,focusPopupButton:S,focusModalButton:x,hasFocus:A,exec:w,saveSelection:a,restoreSelection:s}},e.FE.MODULES.format=function(t){function n(e,t){var n="<"+e;for(var r in t)t.hasOwnProperty(r)&&(n+=" "+r+'="'+t[r]+'"');return n+=">"}function r(e){return"</"+e+">"}function i(e,t){var n=e;for(var r in t)t.hasOwnProperty(r)&&(e+="id"==r?"#"+t[r]:"class"==r?"."+t[r]:"["+r+'="'+t[r]+'"]');return n}function o(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function a(r,i,o){if(r){if(t.node.isBlock(r))return a(r.firstChild,i,o),!1;for(var s=e(n(i,o)).insertBefore(r),l=r;l&&!e(l).is(".fr-marker")&&0==e(l).find(".fr-marker").length;){var c=l;l=l.nextSibling,s.append(c)}if(l)e(l).find(".fr-marker").length&&a(l.firstChild,i,o);else{for(var u=s.get(0).parentNode;u&&!u.nextSibling&&!t.node.isElement(u);)u=u.parentNode;if(u){var d=u.nextSibling;d&&(t.node.isBlock(d)?a(d.firstChild,i,o):a(d,i,o))}}s.is(":empty")&&s.remove()}}function s(s,l){if("undefined"==typeof l&&(l={}),l.style&&delete l.style,t.selection.isCollapsed()){t.markers.insert();var c=t.$el.find(".fr-marker");c.replaceWith(n(s,l)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+r(s)),t.selection.restore()}else{t.selection.save();var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling;a(u,s,l);var d;do d=t.$el.find(i(s,l)+" > "+i(s,l)),d.each(function(){e(this).replaceWith(this.innerHTML)});while(d.length);t.el.normalize();for(var f=t.el.querySelectorAll(".fr-marker"),p=0;p<f.length;p++){var h=e(f[p]);1==h.data("type")?o(h.get(0).nextSibling,i(s,l))&&h.next().prepend(h):o(h.get(0).previousSibling,i(s,l))&&h.prev().append(h)}t.selection.restore()}}function l(e,n,r,a){if(!a){var s=!1;if(e.data("type")===!0)for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el);)e.parent().before(e),s=!0;else if(e.data("type")===!1)for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el);)e.parent().after(e),s=!0;if(s)return!0}if(e.parents(n).length||"undefined"==typeof n){var l="",c="",u=e.parent();if(u.is(t.$el)||t.node.isBlock(u.get(0)))return!1;for(;"undefined"==typeof n&&!t.node.isBlock(u.parent().get(0))||"undefined"!=typeof n&&!o(u.get(0),i(n,r));)l+=t.node.closeTagString(u.get(0)),c=t.node.openTagString(u.get(0))+c,u=u.parent();var d=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var f=u.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(u.get(0))+c+d+l+t.node.openTagString(u.get(0))+c);return u.replaceWith(t.node.openTagString(u.get(0))+f+t.node.closeTagString(u.get(0))),!0}return!1}function c(n,r,a,s){for(var l=t.node.contents(n.get(0)),u=0;u<l.length;u++){var d=l[u];t.node.hasClass(d,"fr-marker")?r=(r+1)%2:r?e(d).find(".fr-marker").length>0?r=c(e(d),r,a,s):(e(e(d).find(a||"*").get().reverse()).each(function(){t.node.isBlock(this)||t.node.isVoid(this)||e(this).replaceWith(this.innerHTML)}),"undefined"==typeof a&&d.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(d)&&!t.node.isBlock(d)||o(d,i(a,s))?e(d).replaceWith(d.innerHTML):"undefined"==typeof a&&d.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(d)&&t.node.clearAttributes(d)):e(d).find(".fr-marker").length>0&&(r=c(e(d),r,a,s))}return r}function u(n,r){"undefined"==typeof r&&(r={}),r.style&&delete r.style;var i=t.selection.isCollapsed();t.selection.save();for(var o=!0;o;){o=!1;for(var a=t.$el.find(".fr-marker"),s=0;s<a.length;s++)if(l(e(a[s]),n,r,i)){o=!0;break}}c(t.$el,0,n,r),i&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function d(e,t){g(e,t)?u(e,t):s(e,t)}function f(t,n){var r=e(t);r.css(n,""),""===r.attr("style")&&r.replaceWith(r.html())}function p(t,n){return 0===e(t).attr("style").indexOf(n+":")||e(t).attr("style").indexOf(";"+n+":")>=0||e(t).attr("style").indexOf("; "+n+":")>=0}function h(n,r){if(t.selection.isCollapsed()){t.markers.insert();var i=t.$el.find(".fr-marker"),o=i.parent();if(t.node.openTagString(o.get(0))=='<span style="'+n+": "+o.css(n)+';">')if(t.node.isEmpty(o.get(0)))o.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var s={};s[n]=r,l(i,"span",s,!0),i=t.$el.find(".fr-marker"),i.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}else t.node.isEmpty(o.get(0))&&o.is("span")?(i.replaceWith(e.FE.MARKERS),o.css(n,r)):i.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{t.selection.save();for(var c=t.$el.find(".fr-marker"),u=0;u<c.length;u++){var i=e(c[u]);if(i.data("type")===!0)for(;t.node.isFirstSibling(i.get(0))&&!i.parent().is(t.$el);)i.parent().before(i);else for(;t.node.isLastSibling(i.get(0))&&!i.parent().is(t.$el);)i.parent().after(i)}var d=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,h={"class":"fr-unprocessed"};for(r&&(h.style=n+": "+r+";"),a(d,"span",h),t.$el.find(".fr-marker + .fr-unprocessed").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-unprocessed + .fr-marker").each(function(){e(this).prev().append(this)});t.$el.find("span.fr-unprocessed").length>0;){var m=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(m.parent().get(0).normalize(),m.parent().is("span")&&1==m.parent().get(0).childNodes.length){m.parent().css(n,r);var g=m;m=m.parent(),g.replaceWith(g.html())}for(var v=m.find("span"),u=v.length-1;u>=0;u--)f(v[u],n);var b=m.parentsUntil(t.$el,"span[style]").filter(function(){return p(this,n)});if(b.length){var y="",E="",w="",C="",T=m.get(0);do T=T.parentNode,e(T).addClass("fr-split"),y+=t.node.closeTagString(T),E=t.node.openTagString(e(T).clone().addClass("fr-split").get(0))+E,b.get(0)!=T&&(w+=t.node.closeTagString(T),C=t.node.openTagString(e(T).clone().addClass("fr-split").get(0))+C);while(b.get(0)!=T);var $=y+t.node.openTagString(e(b.get(0)).clone().css(n,r||"").get(0))+C+m.css(n,"").get(0).outerHTML+w+"</span>"+E;m.replaceWith('<span id="fr-break"></span>');var S=b.get(0).outerHTML;e(b.get(0)).replaceWith(S.replace(/<span id="fr-break"><\/span>/g,$))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each(function(){this.attributes&&0!=this.attributes.length||e(this).replaceWith(this.innerHTML)}),t.el.normalize();var x=t.$el.find("span[style] + span[style]");for(u=0;u<x.length;u++){var A=e(x[u]),_=e(x[u]).prev();A.get(0).previousSibling==_.get(0)&&t.node.openTagString(A.get(0))==t.node.openTagString(_.get(0))&&(A.prepend(_.html()),_.remove())}t.el.normalize(),t.selection.restore()}}function m(e){h(e,null)}function g(e,n){"undefined"==typeof n&&(n={}),n.style&&delete n.style;var r=t.selection.ranges(0),a=r.startContainer;a.nodeType==Node.ELEMENT_NODE&&a.childNodes.length>0&&a.childNodes[r.startOffset]&&(a=a.childNodes[r.startOffset]);for(var s=a;s&&s.nodeType==Node.ELEMENT_NODE&&!o(s,i(e,n));)s=s.firstChild;if(s&&s.nodeType==Node.ELEMENT_NODE&&o(s,i(e,n)))return!0;var l=a;for(l&&l.nodeType!=Node.ELEMENT_NODE&&(l=l.parentNode);l&&l.nodeType==Node.ELEMENT_NODE&&l!=t.el&&!o(l,i(e,n));)l=l.parentNode;return!(!l||l.nodeType!=Node.ELEMENT_NODE||l==t.el||!o(l,i(e,n)))}return{is:g,toggle:d,apply:s,remove:u,applyStyle:h,removeStyle:m}},e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(n,r){if(t.events.trigger("commands.before",e.merge([n],r||[]))!==!1){var i=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||s[n],o=!0,a=!1;e.FE.COMMANDS[n]&&("undefined"!=typeof e.FE.COMMANDS[n].focus&&(o=e.FE.COMMANDS[n].focus),"undefined"!=typeof e.FE.COMMANDS[n].accessibilityFocus&&(a=e.FE.COMMANDS[n].accessibilityFocus)),(!t.core.hasFocus()&&o&&!t.popups.areVisible()||!t.core.hasFocus()&&a&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].undo!==!1&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),i&&i.apply(t,e.merge([n],r||[])),t.events.trigger("commands.after",e.merge([n],r||[])),e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].undo!==!1&&t.undo.saveStep()}}function r(e,n){t.format.toggle(n)}function i(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),i=0;i<r.length;i++)if("LI"!=r[i].tagName&&"LI"!=r[i].parentNode.tagName){var o=e(r[i]),a="rtl"==t.opts.direction||"rtl"==o.css("direction")?"margin-right":"margin-left",s=t.helpers.getPX(o.css(a));o.css(a,Math.max(s+20*n,0)||""),o.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function o(e){return function(){n(e)}}function a(){t.events.on("keydown",function(e){var n=t.selection.element();if(n&&"HR"==n.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1}),t.events.on("keyup",function(n){var r=t.selection.element();if(r&&"HR"==r.tagName)if(n.which==e.FE.KEYCODE.ARROW_LEFT||n.which==e.FE.KEYCODE.ARROW_UP){if(r.previousSibling)return t.node.isBlock(r.previousSibling)?t.selection.setAtEnd(r.previousSibling):e(r).before(e.FE.MARKERS),t.selection.restore(),!1}else if((n.which==e.FE.KEYCODE.ARROW_RIGHT||n.which==e.FE.KEYCODE.ARROW_DOWN)&&r.nextSibling)return t.node.isBlock(r.nextSibling)?t.selection.setAtStart(r.nextSibling):e(r).after(e.FE.MARKERS),t.selection.restore(),!1}),t.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),t.events.on("mouseup",function(n){var r=t.selection.element(),i=t.selection.endElement();r==i&&r&&"HR"==r.tagName&&(r.nextSibling&&(t.node.isBlock(r.nextSibling)?t.selection.setAtStart(r.nextSibling):e(r).after(e.FE.MARKERS)),t.selection.restore())})}var s={bold:function(){r("bold","strong")},subscript:function(){r("subscript","sub")},superscript:function(){r("superscript","sup")},italic:function(){r("italic","em")},strikeThrough:function(){r("strikeThrough","s")},underline:function(){r("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){i(1)},outdent:function(){i(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove();var e="";t.core.isEmpty()&&(e="<br>",t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">")),t.html.insert('<hr id="fr-just">'+e);var n=t.$el.find("hr#fr-just");n.removeAttr("id"),t.selection.setAfter(n.get(0),!1)||t.selection.setBefore(n.get(0),!1),t.selection.restore()},clearFormatting:function(){t.format.remove()},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},l={};for(var c in s)s.hasOwnProperty(c)&&(l[c]=o(c));return e.extend(l,{exec:n,_init:a})},e.FE.MODULES.data=function(e){function t(e){return e}function n(e){if(!e)return e;for(var n="",o=t("charCodeAt"),a=t("fromCharCode"),s=d.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=r(++s),u=e[o](l),f="";/[0-9-]/.test(e[l+1]);)f+=e[++l];f=parseInt(f,10)||0,u=i(u,c,f),u^=s-1&31,n+=String[a](u)}return n}function r(e){for(var t=e.toString(),n=0,r=0;r<t.length;r++)n+=parseInt(t.charAt(r),10);return n>10?n%9+1:n}function i(e,t,n){for(var r=Math.abs(n);r-- >0;)e-=t;return n<0&&(e+=123),e}function o(e){return!(!e||"none"!=e.css("display")||(e.remove(),0))}function a(){return o(c)||o(u)}function s(){return!!e.$box&&(e.$box.append(p(t(p("kTDD4spmKD1klaMB1C7A5RA1G3RA10YA5qhrjuvnmE1D3FD2bcG-7noHE6B2JB4C3xXA8WF6F-10RG2C3G3B-21zZE3C3H3xCA16NC4DC1f1hOF1MB3B-21whzQH5UA2WB10kc1C2F4D3XC2YD4D1C4F3GF2eJ2lfcD-13HF1IE1TC11TC7WE4TA4d1A2YA6XA4d1A3yCG2qmB-13GF4A1B1KH1HD2fzfbeQC3TD9VE4wd1H2A20A2B-22ujB3nBG2A13jBC10D3C2HD5D1H1KB11uD-16uWF2D4A3F-7C9D-17c1E4D4B3d1D2CA6B2B-13qlwzJF2NC2C-13E-11ND1A3xqUA8UE6bsrrF-7C-22ia1D2CF2H1E2akCD2OE1HH1dlKA6PA5jcyfzB-22cXB4f1C3qvdiC4gjGG2H2gklC3D-16wJC1UG4dgaWE2D5G4g1I2H3B7vkqrxH1H2EC9C3E4gdgzKF1OA1A5PF5C4WWC3VA6XA4e1E3YA2YA5HE4oGH4F2H2IB10D3D2NC5G1B1qWA9PD6PG5fQA13A10XA4C4A3e1H2BA17kC-22cmOB1lmoA2fyhcptwWA3RA8A-13xB-11nf1I3f1B7GB3aD3pavFC10D5gLF2OG1LSB2D9E7fQC1F4F3wpSB5XD3NkklhhaE-11naKA9BnIA6D1F5bQA3A10c1QC6Kjkvitc2B6BE3AF3E2DA6A4JD2IC1jgA-64MB11D6C4==")))),c=e.$box.find("> div:last"),u=c.find("> a"),void("rtl"==e.opts.direction&&c.css("left","auto").css("right",0)))}function l(){var n=e.opts.key||[""];"string"==typeof n&&(n=[n]),e.ul=!0;for(var r=0;r<n.length;r++){var i=p(n[r])||"";if(!(i!==p(t(p("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&i.indexOf(f,i.length-f.length)<0&&[p("9qqG-7amjlwq=="),p("KA3B3C2A6D1D5H5H1A3=="),p("QzbzvxyB2yA-9m=="),p("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(f)<0)){e.ul=!1;break}}e.ul===!0&&s(),e.events.on("contentChanged",function(){e.ul===!0&&a()&&s()}),e.events.on("destroy",function(){c&&c.length&&c.remove()},!0)}var c,u,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",f=function(){for(var e=0,t=document.domain,n=t.split("."),r="_gd"+(new Date).getTime();e<n.length-1&&document.cookie.indexOf(r+"="+r)==-1;)t=n.slice(-1-++e).join("."),document.cookie=r+"="+r+";domain="+t+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),p=t(n);return{_init:l}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function n(n){e.FE.copied_html=t.html.getSelected(),e.FE.copied_text=e("<div>").html(e.FE.copied_html).text(),"cut"==n.type&&(t.undo.saveStep(),setTimeout(function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()},0))}function r(e){if(h)return!1;if(e.originalEvent&&(e=e.originalEvent),t.events.trigger("paste.before",[e])===!1)return e.preventDefault(),!1;if(d=t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",r=e.clipboardData.types;if(t.helpers.isArray(r))for(var o=0;o<r.length;o++)n+=r[o]+";";else n=r;if(f="",/text\/html/.test(n)?f=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?f=e.clipboardData.getData("text/rtf"):/text\/plain/.test(n)&&!this.browser.mozilla&&(f=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==f)return s(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;f=null}i()}function i(){t.selection.save(),t.events.disableBlur(),f=null,p?p.html(""):(p=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabIndex="-1"></div>'),t.$box.after(p),t.events.on("destroy",function(){p.remove()})),p.focus(),t.win.setTimeout(s,1)}function o(e){e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),e=e.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),e=e.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),e=e.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),e=e.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var n=["style","script","applet","embed","noframes","noscript"],r=0;r<n.length;r++){var i=new RegExp("<"+n[r]+".*?"+n[r]+"(.*?)>","gi");e=e.replace(i,"")}e=e.replace(/&nbsp;/gi," "),e=e.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),e=e.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var o;do o=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(e!=o);e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),e=e.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),e=e.replace(/<a>(.[^<]+)<\/a>/gi,"$1"),e=e.replace(/<br> */g,"<br>");var a=t.o_doc.createElement("div");a.innerHTML=e;for(var s=a.querySelectorAll("li[data-indent]"),r=0;r<s.length;r++){var l=s[r],c=l.previousElementSibling;if(c&&"LI"==c.tagName){var u=c.querySelector(":scope > ul, :scope > ol");u||(u=document.createElement("ul"),c.appendChild(u)),u.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(a),e=a.innerHTML}function a(e){var n=t.doc.createElement("div");n.innerHTML=e;for(var r=n.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote"),i=0;i<r.length;i++){var o=r[i];o.outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+o.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">"}r=n.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")");for(var i=r.length-1;i>=0;i--){var o=r[i];o.outerHTML=o.innerHTML}var a=function(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&n[r].nodeType!=Node.ELEMENT_NODE?n[r].parentNode.removeChild(n[r]):a(n[r])};return a(n),n.innerHTML}function s(){t.keys.forceUndo();var n=t.snapshot.get();null===f&&(f=p.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var r=t.events.chainTrigger("paste.beforeCleanup",f);"string"==typeof r&&(f=r);var i=!1;f.match(/(class=\"?Mso|class=\'?Mso|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi)&&(i=!0),f.indexOf("<body")>=0&&(f=f.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)\s]*<\/body>[.\s\S\w\W<>]*/g,"$1"),f=f.replace(/([^>])\n([^<])/g,"$1 $2"));var s=!1;if(f.indexOf('id="docs-internal-guid')>=0&&(f=f.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1"),s=!0),i)f=f.replace(/^\n*/g,"").replace(/^ /g,""),0===f.indexOf("<colgroup>")&&(f="<table>"+f+"</table>"),f=o(f),f=c(f);else{t.opts.htmlAllowComments=!1,f=t.clean.html(f,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowComments=!0,f=c(f),f=f.replace(/\r|\n|\t/g,"");var u=t.doc.createElement("div");u.innerHTML=f,e.FE.copied_text&&u.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==e.FE.copied_text.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")&&(f=e.FE.copied_html),f=f.replace(/^ */g,"").replace(/ *$/g,"")}if(t.opts.pastePlain&&(f=a(f)),r=t.events.chainTrigger("paste.afterCleanup",f),"string"==typeof r&&(f=r),""!==f){var d=t.o_doc.createElement("div");d.innerHTML=f,t.spaces.normalize(d);for(var h=d.getElementsByTagName("span"),m=0;m<h.length;m++){var g=h[m];0===g.attributes.length&&(g.outerHTML=g.innerHTML)}var v=d.children;if(1==v.length&&["OL","UL"].indexOf(v[0].tagName)>=0&&(v[0].outerHTML=v[0].innerHTML),!s)for(var b=d.getElementsByTagName("br"),m=0;m<b.length;m++){var y=b[m];t.node.isBlock(y.previousSibling)&&y.parentNode.removeChild(y)}if(t.opts.enter==e.FE.ENTER_BR)for(var E=d.querySelectorAll("p, div"),m=0;m<E.length;m++){var w=E[m];w.outerHTML=w.innerHTML+(w.nextSibling&&!t.node.isEmpty(w)?"<br>":"")}else if(t.opts.enter==e.FE.ENTER_DIV)for(var E=d.getElementsByTagName("p"),m=0;m<E.length;m++){var w=E[m];w.outerHTML="<div>"+w.innerHTML+"</div>"}f=d.innerHTML,t.html.insert(f,!0)}l(),t.undo.saveStep(n),t.undo.saveStep()}function l(){t.events.trigger("paste.after")}function c(e){var n=t.o_doc.createElement("div");n.innerHTML=e;for(var r=n.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");r.length;){for(var i=0;i<r.length;i++)r[i].parentNode.removeChild(r[i]);r=n.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var o=n.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div");o.length;){var a=o[o.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())a.querySelector(t.html.blockTagsQuery())?a.outerHTML=a.innerHTML:a.outerHTML="<"+t.html.defaultTag()+">"+a.innerHTML+"</"+t.html.defaultTag()+">";else{var s=a.querySelectorAll("*");s.length&&"BR"===s[s.length-1].tagName?a.outerHTML=a.innerHTML:a.outerHTML=a.innerHTML+"<br>"}o=n.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div")}for(o=n.querySelectorAll("div:not([style])");o.length;){for(i=0;i<o.length;i++){var l=o[i],c=l.innerHTML.replace(/\u0009/gi,"").trim();l.outerHTML=c}o=n.querySelectorAll("div:not([style])")}return n.innerHTML}function u(){t.events.on("copy",n),t.events.on("cut",n),t.events.on("paste",r),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){h=!1},50),h=!0)},!0),t.events.on("beforepaste",r))}var d,f,p,h=!1;return{_init:u}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:["show","bold","italic","underline","strikeThrough","indent","outdent","undo","redo"],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,n,r,i,o,a){e.FE.SHORTCUTS_MAP[(o?"^":"")+(a?"@":"")+t]={cmd:n,val:r,letter:i,shift:o,option:a},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){function n(n){if(!t.opts.shortcutsHint)return null;if(!o){o={};for(var r in e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(r)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[r].cmd)>=0&&(o[e.FE.SHORTCUTS_MAP[r].cmd+"."+(e.FE.SHORTCUTS_MAP[r].val||"")]={shift:e.FE.SHORTCUTS_MAP[r].shift,option:e.FE.SHORTCUTS_MAP[r].option,letter:e.FE.SHORTCUTS_MAP[r].letter})}var i=o[n];return i?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(i.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(i.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+i.letter:null}function r(n){if(!t.core.hasFocus())return!0;var r=n.which,i=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey;if("keyup"==n.type&&a&&r!=e.FE.KEYCODE.META)return a=!1,!1;"keydown"==n.type&&(a=!1);var o=(n.shiftKey?"^":"")+(n.altKey?"@":"")+r;if(i&&e.FE.SHORTCUTS_MAP[o]){var s=e.FE.SHORTCUTS_MAP[o].cmd;if(s&&t.opts.shortcutsEnabled.indexOf(s)>=0){var l,c=e.FE.SHORTCUTS_MAP[o].val;if(s&&!c?l=t.$tb.find('.fr-command[data-cmd="'+s+'"]'):s&&c&&(l=t.$tb.find('.fr-command[data-cmd="'+s+'"][data-param1="'+c+'"]')),l.length)return n.preventDefault(),n.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&(t.button.exec(l),a=!0),!1;if(s&&t.commands[s])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&(t.commands[s](),a=!0),!1}}}function i(){t.events.on("keydown",r,!0),t.events.on("keyup",r,!0)}var o=null,a=!1;return{_init:i,get:n}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,r=null,i=0;i<t.length;i++){if(r){var o=t[i].nodeType===Node.TEXT_NODE&&""===t[i].textContent,a=r.nodeType===Node.TEXT_NODE&&t[i].nodeType===Node.TEXT_NODE;o||a||n++}if(t[i]==e)return n;r=t[i]}}function n(n){var r=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)r.push(t(n)),n=n.parentNode;return r.reverse()}function r(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function i(e){return{scLoc:n(e.startContainer),scOffset:r(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:r(e.endContainer,e.endOffset)}}function o(){var t={};if(e.events.trigger("snapshot.before"),t.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),r=0;r<n.length;r++)t.ranges.push(i(n[r]));return e.events.trigger("snapshot.after"),t}function a(t){for(var n=e.el,r=0;r<t.length;r++)n=n.childNodes[t[r]];return n}function s(t,n){try{var r=a(n.scLoc),i=n.scOffset,o=a(n.ecLoc),s=n.ecOffset,l=e.doc.createRange();l.setStart(r,i),l.setEnd(o,s),t.addRange(l)}catch(c){}}function l(t){e.$el.html()!=t.html&&e.$el.html(t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var r=0;r<t.ranges.length;r++)s(n,t.ranges[r])}function c(t,n){return t.html==n.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges))}return{get:o,restore:l,equal:c}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which,r=e.keys.ctrlKey(t);r&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){return!(0===e.undo_stack.length||e.undo_index<=1)}function r(){return e.undo_index!=e.undo_stack.length}function i(t){return!(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))&&void("undefined"==typeof t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(o(),e.undo_stack.push(t),e.undo_index++,t.html!=d&&(e.events.trigger("contentChanged"),d=t.html))):(o(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++)))}function o(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function a(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),d=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function s(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),d=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function c(){e.undo_stack=[]}function u(){l(),e.events.on("initialized",function(){d=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),e.events.on("blur",function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()}),e.events.on("keydown",t),e.events.on("destroy",c)}var d=null;return{_init:u,run:a,redo:s,canDo:n,canRedo:r,dropRedo:o,reset:l,saveStep:i}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(t){function n(t){var n=null,r=e.FE.ICONS[t];if("undefined"!=typeof r){var i=r.template||e.FE.ICON_DEFAULT_TEMPLATE;i&&(i=e.FE.ICON_TEMPLATES[i])&&(n=i.replace(/\[([a-zA-Z]*)\]/g,function(e,n){return"NAME"==n?r[n]||t:r[n]}))}return n||t}function r(t){var n=e.FE.ICONS[t],r=e.FE.ICON_DEFAULT_TEMPLATE;if("undefined"!=typeof n){var r=n.template||e.FE.ICON_DEFAULT_TEMPLATE;return r}return r}return{create:n,getTemplate:r}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function r(n,r){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||o(),n.removeAttr("title"),t.$tooltip.text(n.data("title")),t.$tooltip.addClass("fr-visible");var i=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;
i<0&&(i=0),i+t.$tooltip.outerWidth()>e(t.o_win).width()&&(i=e(t.o_win).width()-t.$tooltip.outerWidth()),"undefined"==typeof r&&(r=t.opts.toolbarBottom);var a=r?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",i),t.$tooltip.css("top",Math.ceil(a)),"static"!=e(t.o_doc).find("body").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}function i(i,o,a){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(i,"mouseenter",o,function(n){t.node.hasClass(n.currentTarget,"fr-disabled")||t.edit.isDisabled()||r(e(n.currentTarget),a)},!0),t.events.$on(i,"mouseleave "+t._mousedown+" "+t._mouseup,o,function(e){n()},!0))}function o(){t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body").append(t.$tooltip)),t.events.on("shared.destroy",function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null},!0))}return{hide:n,to:r,bind:i}},e.FE.MODULES.button=function(t){function n(n){var r=n.next(),i=t.node.hasClass(n.get(0),"fr-active"),o=(t.helpers.isMobile(),e(".fr-dropdown.fr-active").not(n)),a=n.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(a.helpers.isIOS()&&!a.el.querySelector(".fr-marker")&&(a.selection.save(),a.selection.clear(),a.selection.restore()),!i){var s=n.data("cmd");r.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].refreshOnShow&&e.FE.COMMANDS[s].refreshOnShow.apply(a,[n,r]),r.css("left",n.offset().left-n.parent().offset().left-("rtl"==t.opts.direction?r.width()-n.outerWidth():0)),t.opts.toolbarBottom?r.css("bottom",t.$tb.height()-n.position().top):r.css("top",n.position().top+n.outerHeight())}n.addClass("fr-blink").toggleClass("fr-active"),n.hasClass("fr-active")?(r.attr("aria-hidden",!1),n.attr("aria-expanded",!0)):(r.attr("aria-hidden",!0),n.attr("aria-expanded",!1)),setTimeout(function(){n.removeClass("fr-blink")},300),r.offset().left+r.outerWidth()>t.$sc.offset().left+t.$sc.outerWidth()&&r.css("margin-left",-(r.offset().left+r.outerWidth()-t.$sc.offset().left-t.$sc.outerWidth())),o.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!=n.parents(".fr-popup").length||t.opts.toolbarInline||(t.node.hasClass(n.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var l=r.find("a.fr-command.fr-active");l.length?t.accessibility.focusToolbarElement(l):t.accessibility.focusToolbarElement(n)}function r(t){t.addClass("fr-blink"),setTimeout(function(){t.removeClass("fr-blink")},500);for(var n=t.data("cmd"),r=[];"undefined"!=typeof t.data("param"+(r.length+1));)r.push(t.data("param"+(r.length+1)));var i=e(".fr-dropdown.fr-active");i.length&&(i.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),i.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),t.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(n,r)}function i(e){r(e)}function o(r){var o=r.parents(".fr-popup, .fr-toolbar").data("instance");if(0!=r.parents(".fr-popup").length||r.data("popup")||o.popups.hideAll(),o.popups.areVisible()&&!o.popups.areVisible(o)){for(var a=0;a<e.FE.INSTANCES.length;a++)e.FE.INSTANCES[a]!=o&&e.FE.INSTANCES[a].popups&&e.FE.INSTANCES[a].popups.areVisible()&&e.FE.INSTANCES[a].$el.find(".fr-marker").remove();o.popups.hideAll()}t.node.hasClass(r.get(0),"fr-dropdown")?n(r):(i(r),e.FE.COMMANDS[r.data("cmd")]&&0!=e.FE.COMMANDS[r.data("cmd")].refreshAfterCallback&&o.button.bulkRefresh())}function a(t){var n=e(t.currentTarget);o(n)}function s(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function l(e){e.preventDefault(),e.stopPropagation()}function c(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function u(n,r){t.events.bindClick(n,".fr-command:not(.fr-disabled)",a),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",l,!0),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",c,!0);var i=n.get(0).ownerDocument,o="defaultView"in i?i.defaultView:i.parentWindow,u=function(r){(!r||r.type==t._mouseup&&r.target!=e("html").get(0)||"keydown"==r.type&&(t.keys.isCharacter(r.which)&&!t.keys.ctrlKey(r)||r.which==e.FE.KEYCODE.ESC))&&s(n)};t.events.$on(e(o),t._mouseup+" resize keydown",u,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,u,!0),t.node.hasClass(n.get(0),"fr-popup")?e.merge(E,n.find(".fr-btn").toArray()):e.merge(y,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",r)}function d(e,n){var r="";if(n.html)r+="function"==typeof n.html?n.html.call(t):n.html;else{var i=n.options;"function"==typeof i&&(i=i()),r+='<ul class="fr-dropdown-list" role="presentation">';for(var o in i)if(i.hasOwnProperty(o)){var a=t.shortcuts.get(e+"."+o);a=a?'<span class="fr-shortcut">'+a+"</span>":"",r+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+o+'" title="'+i[o]+'">'+t.language.translate(i[o])+"</a></li>"}r+="</ul>"}return r}function f(e,n,r){if(t.helpers.isMobile()&&n.showOnMobile===!1)return"";var i=n.displaySelection;"function"==typeof i&&(i=i(t));var o;if(i){var a="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;o='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+(a||t.language.translate(n.title))+"</span>"}else o=t.icon.create(n.icon||e),o+='<span class="fr-sr-only">'+(t.language.translate(n.title)||"")+"</span>";var s=n.popup?' data-popup="true"':"",l=n.modal?' data-modal="true"':"",c=t.shortcuts.get(e+".");c=c?" ("+c+")":"";var u=e+"-"+t.id,f='<button id="'+u+'"type="button" tabIndex="-1" role="button"'+(n.toggle?' aria-pressed="false"':"")+("dropdown"==n.type?' aria-controls="drop" aria-expanded="false" aria-haspopup="true"':"")+(n.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(n.title)||"")+c+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+(" fr-btn-"+t.icon.getTemplate(n.icon))+(n.displaySelection?" fr-selection":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(r?"":" fr-hidden")+'" data-cmd="'+e+'"'+s+l+">"+o+"</button>";if("dropdown"==n.type){var p='<div class="fr-dropdown-menu" role="listbox" aria-labelledby="'+u+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';p+=d(e,n),p+="</div></div></div>",f+=p}return f}function p(n,r){for(var i="",o=0;o<n.length;o++){var a=n[o],s=e.FE.COMMANDS[a];if(!(s&&"undefined"!=typeof s.plugin&&t.opts.pluginsEnabled.indexOf(s.plugin)<0))if(s){var l="undefined"==typeof r||r.indexOf(a)>=0;i+=f(a,s,l)}else"|"==a?i+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==a&&(i+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return i}function h(n){var r,i=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,o=n.data("cmd");t.node.hasClass(n.get(0),"fr-dropdown")?r=n.next():(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)),e.FE.COMMANDS[o]&&e.FE.COMMANDS[o].refresh?e.FE.COMMANDS[o].refresh.apply(i,[n,r]):t.refresh[o]&&i.refresh[o](n,r)}function m(n){var r=t.$tb?t.$tb.data("instance")||t:t;return 0==t.events.trigger("buttons.refresh")||void setTimeout(function(){for(var i=r.selection.inEditor()&&r.core.hasFocus(),o=0;o<n.length;o++){var a=e(n[o]),s=a.data("cmd");0==a.parents(".fr-popup").length?i||e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].forcedRefresh?r.button.refresh(a):t.node.hasClass(a.get(0),"fr-dropdown")||(a.removeClass("fr-active"),a.attr("aria-pressed")&&a.attr("aria-pressed",!1)):a.parents(".fr-popup").is(":visible")&&r.button.refresh(a)}},0)}function g(){m(y),m(E)}function v(){y=[],E=[]}function b(){t.opts.toolbarInline?t.events.on("toolbar.show",g):(t.events.on("mouseup",g),t.events.on("keyup",g),t.events.on("blur",g),t.events.on("focus",g),t.events.on("contentChanged",g)),t.events.on("shared.destroy",v)}var y=[];(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),y=t.shared.buttons);var E=[];return t.shared.popup_buttons||(t.shared.popup_buttons=[]),E=t.shared.popup_buttons,{_init:b,buildList:p,bindCommands:u,refresh:h,bulkRefresh:g,exec:r,click:o,hideActiveDropdowns:s}},e.FE.MODULES.modals=function(t){function n(e){return p[e]}function r(n,r){var i='<div tabIndex="-1" class="fr-modal'+(t.opts.theme?" "+t.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">',o='<i title="'+t.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i>';return i+='<div class="fr-modal-head">'+n+o+"</div>",i+='<div tabIndex="-1" class="fr-modal-body">'+r+"</div>",i+="</div></div>",e(i)}function i(n,i,o){if(t.shared.$overlay||(t.shared.$overlay=e('<div class="fr-overlay">').appendTo("body")),f=t.shared.$overlay,t.opts.theme&&f.addClass(t.opts.theme+"-theme"),!p[n]){var a=r(i,o);p[n]={$modal:a,$head:a.find(".fr-modal-head"),$body:a.find(".fr-modal-body")},t.helpers.isMobile()||a.addClass("fr-desktop"),a.appendTo("body"),t.events.bindClick(a,"i.fr-modal-close",function(){s(n)}),p[n].$body.css("margin-top",p[n].$head.outerHeight()),t.events.$on(a,"keydown",function(r){var i=r.which;return i==e.FE.KEYCODE.ESC?(s(n),t.accessibility.focusModalButton(a),!1):!(!e(r.currentTarget).is("input[type=text], textarea")&&i!=e.FE.KEYCODE.ARROW_UP&&i!=e.FE.KEYCODE.ARROW_DOWN&&!t.keys.isBrowserAction(r)&&(r.preventDefault(),r.stopPropagation(),1))},!0),s(n)}return p[n]}function o(){for(var e in p){var t=p[e];t&&t.$modal&&t.$modal.removeData().remove()}f&&f.removeData().remove(),p={}}function a(e){if(p[e]){var n=p[e].$modal;n.data("instance",t),n.show(),f.show(),t.$doc.find("body").addClass("prevent-scroll"),t.helpers.isMobile()&&t.$doc.find("body").addClass("fr-mobile"),n.addClass("fr-active"),t.accessibility.focusModal(n)}}function s(e){if(p[e]){var n=p[e].$modal,r=n.data("instance")||t;r.events.enableBlur(),n.hide(),f.hide(),r.$doc.find("body").removeClass("prevent-scroll fr-mobile"),n.removeClass("fr-active"),t.accessibility.restoreSelection(r)}}function l(e){if(p[e]){var n=p[e],r=n.$modal,i=n.$body,o=t.$win.height(),a=r.find(".fr-modal-wrapper"),s=a.outerHeight(!0),l=a.height()-(i.outerHeight(!0)-i.height()),c=o-s+l,u=i.get(0).scrollHeight,d="auto";u>c&&(d=c),i.height(d)}}function c(e){var n;if("string"==typeof e){if(!p[e])return;n=p[e].$modal}else n=e;return n&&t.node.hasClass(n,"fr-active")&&t.core.sameInstance(n)||!1}function u(e){for(var t in p)if(p.hasOwnProperty(t)&&c(t)&&("undefined"==typeof e||p[t].$modal.data("instance")==e))return p[t].$modal;return!1}function d(){t.events.on("shared.destroy",o,!0)}t.shared.modals||(t.shared.modals={});var f,p=t.shared.modals;return{_init:d,get:n,create:i,show:a,hide:s,resize:l,isVisible:c,areVisible:u}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){function n(e,n){n.is(":visible")||(n=t.$sc),n.is(T[e].data("container"))||(T[e].data("container",n),n.append(T[e]))}function r(r,i,s,l){if(a()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus(),t.events.enableBlur()),f([r]),!T[r])return!1;var c=e(".fr-dropdown.fr-active");c.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),c.next().attr("aria-hidden",!0),T[r].data("instance",t),t.$tb&&t.$tb.data("instance",t);var u=T[r].outerWidth(),d=(T[r].outerHeight(),o(r));T[r].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var p=T[r].data("container");t.opts.toolbarInline&&p&&t.$tb&&p.get(0)==t.$tb.get(0)&&(n(r,t.$sc),s=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top")),i=t.$tb.offset().left+t.$tb.outerWidth()/2+(parseFloat(t.$tb.find(".fr-arrow").css("margin-left"))||0)+t.$tb.find(".fr-arrow").outerWidth()/2,t.node.hasClass(t.$tb.get(0),"fr-above")&&s&&(s+=t.$tb.outerHeight()),l=0),p=T[r].data("container"),!t.opts.iframe||l||d||(i&&(i-=t.$iframe.offset().left),s&&(s-=t.$iframe.offset().top)),p.is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):T[r].css("zIndex",(t.opts.zIndex||1)+4),i&&(i-=u/2),t.opts.toolbarBottom&&p&&t.$tb&&p.get(0)==t.$tb.get(0)&&(T[r].addClass("fr-above"),s&&(s-=T[r].outerHeight())),T[r].removeClass("fr-active"),t.position.at(i,s,T[r],l||0),T[r].addClass("fr-active"),d||t.accessibility.focusPopup(T[r]),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+r),b(r)._repositionPopup(),h()}function i(e,n){t.events.on("popups.show."+e,n)}function o(e){return T[e]&&t.node.hasClass(T[e],"fr-active")&&t.core.sameInstance(T[e])||!1}function a(e){for(var t in T)if(T.hasOwnProperty(t)&&o(t)&&("undefined"==typeof e||T[t].data("instance")==e))return T[t];return!1}function s(e){var n=null;n="string"!=typeof e?e:T[e],n&&t.node.hasClass(n,"fr-active")&&(n.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),n.find("input, textarea, button").filter(":focus").blur(),n.find("input, textarea").attr("disabled","disabled"))}function l(e,n){t.events.on("popups.hide."+e,n)}function c(e){var n=T[e];if(n&&!n.data("inst"+t.id)){var r=b(e);y(r,e)}return n}function u(e,n){t.events.on("popups.refresh."+e,n)}function d(n){t.events.trigger("popups.refresh."+n);for(var r=T[n].find(".fr-command"),i=0;i<r.length;i++){var o=e(r[i]);0==o.parents(".fr-dropdown-menu").length&&t.button.refresh(o)}}function f(e){"undefined"==typeof e&&(e=[]);for(var t in T)T.hasOwnProperty(t)&&e.indexOf(t)<0&&s(t)}function p(){t.shared.exit_flag=!0}function h(){t.shared.exit_flag=!1}function m(){return t.shared.exit_flag}function g(n,r){var i=e.FE.POPUP_TEMPLATES[n];"function"==typeof i&&(i=i.apply(t));for(var o in r)r.hasOwnProperty(o)&&(i=i.replace("[_"+o.toUpperCase()+"_]",r[o]));return i}function v(n,r){var i=g(n,r),o=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+i+"</div>");t.opts.theme&&o.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&o.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),o.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var a=e("body");return a.append(o),o.data("container",a),T[n]=o,t.button.bindCommands(o,!1),o}function b(n){var r=T[n];return{_windowResize:function(){var e=r.data("instance")||t;!e.helpers.isMobile()&&r.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(n){var i=r.data("instance")||t,o=e(n.currentTarget);if(o.is("input:file")&&o.closest(".fr-layer").addClass("fr-input-focus"),n.preventDefault(),n.stopPropagation(),setTimeout(function(){i.events.enableBlur()},0),i.helpers.isMobile()){var a=e(i.o_win).scrollTop();setTimeout(function(){e(i.o_win).scrollTop(a)},0)}},_inputBlur:function(n){var i=r.data("instance")||t,o=e(n.currentTarget);o.is("input:file")&&o.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(i.events.blurActive()&&i.events.trigger("blur"),i.events.enableBlur())},_editorKeydown:function(i){var a=r.data("instance")||t;a.keys.ctrlKey(i)||i.which==e.FE.KEYCODE.ALT||i.which==e.FE.KEYCODE.ESC||(o(n)&&r.find(".fr-back:visible").length?a.button.exec(r.find(".fr-back:visible:first")):i.which!=e.FE.KEYCODE.ALT&&a.popups.hide(n))},_preventFocus:function(n){var i=r.data("instance")||t;"mouseup"==n.type&&t.button.hideActiveDropdowns(r);var o=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null;"mouseup"==n.type||e(o).is(":focus")||i.events.disableBlur();var a="input, textarea, button, select, label, .fr-command";return o&&!e(o).is(a)&&0===e(o).parents(a).length?(n.stopPropagation(),!1):(o&&e(o).is(a)&&n.stopPropagation(),void h())},_editorMouseup:function(e){r.is(":visible")&&m()&&r.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(r))return!0;var i=r.data("instance")||t;r.is(":visible")&&m()&&(e.stopPropagation(),i.markers.remove(),i.popups.hide(n),h())},_windowKeydown:function(i){if(!t.core.sameInstance(r))return!0;var o=r.data("instance")||t,a=i.which;if(e.FE.KEYCODE.ESC==a){if(o.popups.isVisible(n)&&o.opts.toolbarInline)return i.stopPropagation(),o.popups.isVisible(n)&&(r.find(".fr-back:visible").length?(o.button.exec(r.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?o.button.exec(r.find(".fr-dismiss:visible:first")):(o.popups.hide(n),o.toolbar.showInline(null,!0),o.accessibility.FocusPopupButton(r))),!1;if(o.popups.isVisible(n))return r.find(".fr-back:visible").length?(o.button.exec(r.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?o.button.exec(r.find(".fr-dismiss:visible:first")):(o.popups.hide(n),o.accessibility.focusPopupButton(r)),!1}},_doPlaceholder:function(t){var n=e(this).next();0==n.length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!=e(this).val())},_repositionPopup:function(e){if(!t.opts.height&&!t.opts.heightMax||t.opts.toolbarInline)return!0;if(t.$wp&&o(n)&&r.parent().get(0)==t.$sc.get(0)){var i=r.offset().top-t.$wp.offset().top,a=t.$wp.outerHeight();t.node.hasClass(r.get(0),"fr-above")&&(i+=r.outerHeight()),i>a||i<0?r.addClass("fr-hidden"):r.removeClass("fr-hidden")}}}}function y(e,n){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",function(e){a()&&t.markers.remove(),f()}),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+n,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),T[n].data("inst"+t.id,!0),t.events.on("destroy",function(){t.core.sameInstance(T[n])&&T[n].removeClass("fr-active").appendTo("body")},!0)}function E(n,r){var i=v(n,r),o=b(n);return y(o,n),t.events.$on(i,"mousedown mouseup touchstart touchend touch","*",o._preventFocus,!0),t.events.$on(i,"focus","input, textarea, button, select",o._inputFocus,!0),t.events.$on(i,"blur","input, textarea, button, select",o._inputBlur,!0),t.accessibility.registerPopup(n),t.events.$on(i,"keydown keyup change input","input, textarea",o._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(i,"touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})},!0),t.events.$on(e(t.o_win),"resize",o._windowResize,!0),i}function w(){for(var e in T)if(T.hasOwnProperty(e)){var t=T[e];t.html("").removeData().remove(),T[e]=null}T=[]}function C(){t.events.on("shared.destroy",w,!0),t.events.on("window.mousedown",p),t.events.on("window.touchmove",h),t.events.on("mousedown",function(e){a()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),p(),t.events.disableBlur())})}t.shared.popups||(t.shared.popups={});var T=t.shared.popups;return t.shared.exit_flag=!1,{_init:C,create:E,get:c,show:r,hide:s,onHide:l,hideAll:f,setContainer:n,refresh:d,onRefresh:u,onShow:i,isVisible:o,areVisible:a}},e.FE.MODULES.position=function(t){function n(){var e=t.selection.ranges(0),n=e.getBoundingClientRect();if(0==n.top&&0==n.left&&0==n.width||0==n.height){var r=!1;0==t.$el.find(".fr-marker").length&&(t.selection.save(),r=!0);var i=t.$el.find(".fr-marker:first");i.css("display","inline"),i.css("line-height","");var o=i.offset(),a=i.outerHeight();i.css("display","none"),i.css("line-height",0),n={},n.left=o.left,n.width=0,n.height=a,n.top=o.top-(t.helpers.isMobile()?0:t.helpers.scrollTop()),n.right=1,n.bottom=1,n.ok=!0,r&&t.selection.restore()}return n}function r(e,n,r){var i=e.get(0).offsetHeight;if(!t.helpers.isMobile()&&t.$tb&&e.parent().get(0)!=t.$tb.get(0)){var o=(e.get(0).parentNode.clientHeight-20-(t.opts.toolbarBottom?t.$tb.get(0).offsetHeight:0),e.parent().offset().top),a=n-i-(r||0);e.parent().get(0)==t.$sc.get(0)&&(o-=e.parent().position().top);var s=t.$sc.get(0).scrollHeight;o+n+i>t.$sc.offset().top+s&&e.parent().offset().top+a>0?(n=a,e.addClass("fr-above")):e.removeClass("fr-above")}return n}function i(e,n){var r=e.get(0).offsetWidth;return n+r>t.$sc.get(0).clientWidth-10&&(n=t.$sc.get(0).clientWidth-r-10),n<0&&(n=10),n}function o(e){var r=n();e.css({top:0,left:0});var i=r.top+r.height,o=r.left+r.width/2-e.get(0).offsetWidth/2+t.helpers.scrollLeft();t.opts.iframe||(i+=t.helpers.scrollTop()),a(o,i,e,r.height)}function a(e,n,o,a){var s=o.data("container");!s||"BODY"===s.get(0).tagName&&"static"==s.css("position")||(e&&(e-=s.offset().left),n&&(n-=s.offset().top),"BODY"!=s.get(0).tagName?(e&&(e+=s.get(0).scrollLeft),n&&(n+=s.get(0).scrollTop)):"absolute"==s.css("position")&&(e&&(e+=s.position().left),n&&(n+=s.position().top))),t.opts.iframe&&s&&t.$tb&&s.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var l=i(o,e);if(e){o.css("left",l);var c=o.data("fr-arrow");c||(c=o.find(".fr-arrow"),o.data("fr-arrow",c)),c.data("margin-left")||c.data("margin-left",t.helpers.getPX(c.css("margin-left"))),c.css("margin-left",e-l+c.data("margin-left"))}n&&o.css("top",r(o,n,a))}function s(n){var r=e(n),i=r.is(".fr-sticky-on"),o=r.data("sticky-top"),a=r.data("sticky-scheduled");if("undefined"==typeof o){r.data("sticky-top",0);var s=e('<div class="fr-sticky-dummy" style="height: '+r.outerHeight()+'px;"></div>');t.$box.prepend(s)}else t.$box.find(".fr-sticky-dummy").css("height",r.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=t.helpers.scrollTop(),c=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());c!=o&&c!=a&&(clearTimeout(r.data("sticky-timeout")),r.data("sticky-scheduled",c),r.outerHeight()<l-t.$tb.parent().offset().top&&r.addClass("fr-opacity-0"),r.data("sticky-timeout",setTimeout(function(){var e=t.helpers.scrollTop(),n=Math.min(Math.max(e-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());n>0&&"BODY"==t.$tb.parent().get(0).tagName&&(n+=t.$tb.parent().position().top),n!=o&&(r.css("top",Math.max(n,0)),r.data("sticky-top",n),r.data("sticky-scheduled",n)),r.removeClass("fr-opacity-0")},100))),i||(r.css("top","0"),r.width(t.$tb.parent().width()),r.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(n).css("sticky-timeout")),r.css("top","0"),r.css("position",""),r.width(""),r.data("sticky-top",0),r.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function l(n){if(n.offsetWidth){var r,i,o=e(n),a=o.outerHeight(),s=o.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),c=0,u=0;"body"!==t.opts.scrollableContainer&&(c=t.$sc.offset().top,u=e(t.o_win).outerHeight()-c-l);var d="body"==t.opts.scrollableContainer?t.helpers.scrollTop():c,f=o.is(".fr-sticky-on");o.data("sticky-parent")||o.data("sticky-parent",o.parent());var p=o.data("sticky-parent"),h=p.offset().top,m=p.outerHeight();if(o.data("sticky-offset")||(o.data("sticky-offset",!0),o.after('<div class="fr-sticky-dummy" style="height: '+a+'px;"></div>')),!s){var g="auto"!==o.css("top")||"auto"!==o.css("bottom");g||o.css("position","fixed"),s={top:t.node.hasClass(o.get(0),"fr-top"),bottom:t.node.hasClass(o.get(0),"fr-bottom")},g||o.css("position",""),o.data("sticky-position",s),o.data("top",t.node.hasClass(o.get(0),"fr-top")?o.css("top"):"auto"),o.data("bottom",t.node.hasClass(o.get(0),"fr-bottom")?o.css("bottom"):"auto")}var v=function(){return h<d+r&&h+m-a>=d+r},b=function(){return h+a<d+l-i&&h+m>d+l-i};r=t.helpers.getPX(o.data("top")),i=t.helpers.getPX(o.data("bottom"));var y=s.top&&v(),E=s.bottom&&b();y||E?(o.css("width",p.width()+"px"),f||(o.addClass("fr-sticky-on"),o.removeClass("fr-sticky-off"),o.css("top")&&("auto"!=o.data("top")?o.css("top",t.helpers.getPX(o.data("top"))+c):o.data("top","auto")),o.css("bottom")&&("auto"!=o.data("bottom")?o.css("bottom",t.helpers.getPX(o.data("bottom"))+u):o.css("bottom","auto")))):t.node.hasClass(o.get(0),"fr-sticky-off")||(o.width(""),o.removeClass("fr-sticky-on"),o.addClass("fr-sticky-off"),o.css("top")&&"auto"!=o.data("top")&&s.top&&o.css("top",0),o.css("bottom")&&"auto"!=o.data("bottom")&&s.bottom&&o.css("bottom",0))}}function c(){var e=document.createElement("test"),n=e.style;return n.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",n.position.indexOf("sticky")!==-1&&!t.helpers.isIOS()&&!t.helpers.isAndroid()}function u(){if(!c())if(t._stickyElements=[],t.helpers.isIOS()){var n=function(){t.helpers.requestAnimationFrame()(n);for(var e=0;e<t._stickyElements.length;e++)s(t._stickyElements[e])};n(),t.events.$on(e(t.o_win),"scroll",function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var r=e(t._stickyElements[n]),i=r.parent(),o=t.helpers.scrollTop();r.outerHeight()<o-i.offset().top&&(r.addClass("fr-opacity-0"),r.data("sticky-top",-1),r.data("sticky-scheduled",-1))}},!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",d,!0),t.events.$on(e(t.o_win),"resize",d,!0),t.events.on("initialized",d),t.events.on("focus",d),t.events.$on(e(t.o_win),"resize","textarea",d,!0);t.events.on("destroy",function(e){t._stickyElements=[]})}function d(){if(t._stickyElements)for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])}function f(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),c()||t._stickyElements.push(e.get(0))}function p(){u()}return{_init:p,forSelection:o,addSticky:f,refresh:d,at:a,getBoundingRect:n}},e.FE.MODULES.refresh=function(t){function n(e){a(e,!t.undo.canDo())}function r(e){a(e,!t.undo.canRedo())}function i(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var n=t.selection.blocks(),r=0;r<n.length;r++){for(var i=n[r].previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.previousSibling;if("LI"!=n[r].tagName||i)return a(e,!1),!0;a(e,!0)}}function o(n){if(t.node.hasClass(n.get(0),"fr-no-refresh"))return!1;for(var r=t.selection.blocks(),i=0;i<r.length;i++){var o="rtl"==t.opts.direction||"rtl"==e(r[i]).css("direction")?"margin-right":"margin-left";if("LI"==r[i].tagName||"LI"==r[i].parentNode.tagName)return a(n,!1),!0;if(t.helpers.getPX(e(r[i]).css(o))>0)return a(n,!1),!0}a(n,!0)}function a(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:n,redo:r,outdent:o,indent:i}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(t){function n(){var e='<div id="fr-text-edit-'+t.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+t.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>",n={edit:e};t.popups.create("text.edit",n)}function r(){var n,r=t.popups.get("text.edit");n="INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder"):t.$el.text(),r.find("input").val(n).trigger("change"),t.popups.setContainer("text.edit",e("body")),t.popups.show("text.edit",t.$el.offset().left+t.$el.outerWidth()/2,t.$el.offset().top+t.$el.outerHeight(),t.$el.outerHeight())}function i(){t.events.$on(t.$el,t._mouseup,function(e){setTimeout(function(){r()},10)})}function o(){var e=t.popups.get("text.edit"),n=e.find("input").val();0==n.length&&(n=t.opts.placeholderText),"INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder",n):t.$el.text(n),t.events.trigger("contentChanged"),t.popups.hide("text.edit")}function a(){t.opts.editInPopup&&(n(),i())}return{_init:a,update:o}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","print","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","specialCharacters","color","emoticons","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","selectAll","html","applyFormat","removeFormat","help"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:["fullscreen","bold","italic","underline","fontFamily","fontSize","color","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting"],toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function r(){var r=e.merge([],i());n(r,t.opts.toolbarButtonsXS||[]),n(r,t.opts.toolbarButtonsSM||[]),n(r,t.opts.toolbarButtonsMD||[]),n(r,t.opts.toolbarButtons);for(var o=r.length-1;o>=0;o--)"-"!=r[o]&&"|"!=r[o]&&r.indexOf(r[o])<o&&r.splice(o,1);var a=t.button.buildList(r,i());t.$tb.append(a),t.button.bindCommands(t.$tb)}function i(){var e=t.helpers.screenSize();return w[e]}function o(){var e=i();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var r=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),o=null;t.node.hasClass(r.next().get(0),"fr-dropdown-menu")&&(o=r.next()),r.removeClass("fr-hidden").appendTo(t.$tb),o&&o.appendTo(t.$tb)}}function a(){t.events.$on(e(t.o_win),"resize",o),t.events.$on(e(t.o_win),"orientationchange",o)}function s(n,r){setTimeout(function(){if(n&&n.which==e.FE.KEYCODE.ESC);else if(t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection||!t.selection.isCollapsed()&&!t.keys.isIME()||r)){if(t.$tb.data("instance",t),0==t.events.trigger("toolbar.show",[n]))return!1;t.$tb.show(),t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.opts.zIndex>1?t.$tb.css("z-index",t.opts.zIndex+1):t.$tb.css("z-index",null)}},0)}function l(n){var r=e(".fr-dropdown.fr-active");return!!r.next().find(t.o_doc.activeElement).length||void(t.events.trigger("toolbar.hide")!==!1&&t.$tb.hide())}function c(){return 0!=t.events.trigger("toolbar.show")&&void t.$tb.show()}function u(n){clearTimeout(C),n&&n.which==e.FE.KEYCODE.ESC||(C=setTimeout(s,t.opts.typingTimer))}function d(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",s),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",s),t.browser.mozilla&&setInterval(s,200)):t.events.on("window.keyup",u),t.events.on("keydown",function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()}),t.events.on("keydown",function(t){if(t.which==e.FE.KEYCODE.ALT)return t.stopPropagation(),!1},!0),t.events.$on(t.$wp,"scroll.toolbar",s),t.events.on("commands.after",s),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",u),
t.events.$on(t.$doc,"orientationchange",s))}function f(){t.opts.toolbarInline?(t.$sc.append(t.$tb),t.$tb.data("container",t.$sc),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),d(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function p(){t.$tb.html("").removeData().remove(),t.$tb=null}function h(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function m(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(d(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):f(),y=t.$tb.get(0).ownerDocument,E="defaultView"in y?y.defaultView:y.parentWindow,r(),a(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,function(e){var n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(n&&"INPUT"!=n.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}function g(){return t.$sc=e(t.opts.scrollableContainer),!!t.$wp&&(t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&d()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),m(),t.$tb.data("instance",t)),t.opts.toolbarInline?t.$box.addClass("fr-inline"):t.$box.addClass("fr-basic"),t.events.on("focus",function(){t.$tb.data("instance",t)},!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,d()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,m())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),m(),t.$tb.data("instance",t)),t.events.on("destroy",h,!0),void t.events.on(t.opts.toolbarInline||t.opts.toolbarContainer?"shared.destroy":"destroy",p,!0))}function v(){!T&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),T=!0)}function b(){T&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),T=!1),t.button.bulkRefresh()}var y,E,w=[];w[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,w[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,w[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,w[e.FE.LG]=t.opts.toolbarButtons;var C=null,T=!1;return{_init:g,hide:l,show:c,showInline:s,disable:v,enable:b}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){var t=function(n,r){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof r&&r));var i=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[i]=e.FE.OPTS_MAPPING[i]||this.id,this.sid=e.FE.OPTS_MAPPING[i],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var o=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("touchstart.init",function(){e(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){e(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",e.proxy(function(t){if("touchend"==t.type&&!this.$el.data("touched"))return!0;if(1===t.which||!t.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),"touchend"==t.type&&this.image&&t.originalEvent&&t.originalEvent.target&&e(t.originalEvent.target).is("img")&&setTimeout(e.proxy(function(){this.image.edit(e(t.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this))):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(o),"undefined"==typeof this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};if(t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.4.1",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName"),n=e.proxy(function(){"TEXTAREA"!=t&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.el=this.$el.get(0),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),r=e.proxy(function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,e.proxy(function(){this.events.trigger("form.reset")},this)),n()},this),i=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),o=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),a=e.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?a():"TEXTAREA"==t?r():"A"==t?i():"IMG"==t?o():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,a()):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){this.shared.count--,this.events.$off();var t=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var n in this.shared)this.shared.hasOwnProperty(n)&&(null==this.shared[n],e.FE.SHARED[this.sid][n]=null);e.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(t),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);if("string"==typeof n){var o=[];return this.each(function(){var t=e(this),i=t.data("froala.editor");if(i){var a,s;if(n.indexOf(".")>0&&i[n.split(".")[0]]?(i[n.split(".")[0]]&&(a=i[n.split(".")[0]]),s=n.split(".")[1]):(a=i,s=n.split(".")[0]),!a[s])return e.error("Method "+n+" does not exist in Froala Editor.");var l=a[s].apply(i,r.slice(1));void 0===l?o.push(this):0===o.length&&o.push(l)}}),1==o.length?o[0]:o}if("object"==typeof n||!n)return this.each(function(){var r=e(this).data("froala.editor");if(!r){var i=this;new t(i,n)}})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3,e.FE.MODULES.helpers=function(t){function n(){var e,t,n=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))),n}function r(){var e={},t=n();if(t>0)e.msie=!0;else{var r=navigator.userAgent.toLowerCase(),i=/(edge)[ \/]([\w.]+)/.exec(r)||/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[],o={browser:i[1]||"",version:i[2]||"0"};i[1]&&(e[o.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function i(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!s()}function o(){return/(Android)/g.test(navigator.userAgent)&&!s()}function a(){return/(Blackberry)/g.test(navigator.userAgent)}function s(){return/(Windows Phone)/gi.test(navigator.userAgent)}function l(){return o()||i()||a()}function c(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function u(e){return parseInt(e,10)||0}function d(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body"),n=u(t.css("margin-left"));return t.remove(),n}function f(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function p(e){if(!/^(https?:|ftps?:|)\/\//i.test(e))return!1;e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var t=/(http|ftp|https):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#-_{}])?/gi;return t.test(e)}function h(e){if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!p(e)&&!p("http:"+e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}");return e}function m(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function g(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(n){return null}}function v(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function b(t){var n=(t.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(n)<0){if(!$){var r=e('<div dir="auto" style="text-align: initial; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body").append(r);var i=r.find("#s1").get(0).getBoundingClientRect().left,o=r.find("#s2").get(0).getBoundingClientRect().left;r.remove(),$=i<o?"left":"right"}n=$}return n}function y(){return null==S&&(S=navigator.platform.toUpperCase().indexOf("MAC")>=0),S}function E(){function e(e,t){var r=e[t];e[t]=function(e){var t,o=!1,a=!1;if(e.match(i)){e=e.replace(i,""),this.parentNode||(n.appendChild(this),a=!0);var s=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),o=!0),t=r.call(s,"#"+this.id+" "+e),o&&(this.id=""),a&&n.removeChild(this),t}return r.call(this,e)}}var n=t.o_doc.createElement("div");try{n.querySelectorAll(":scope *")}catch(r){var i=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll")}}function w(){return t.o_win.pageYOffset?t.o_win.pageYOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollTop?t.o_doc.documentElement.scrollTop:t.o_doc.body.scrollTop?t.o_doc.body.scrollTop:0}function C(){return t.o_win.pageXOffset?t.o_win.pageXOffset:t.o_doc.documentElement&&t.o_doc.documentElement.scrollLeft?t.o_doc.documentElement.scrollLeft:t.o_doc.body.scrollLeft?t.o_doc.body.scrollLeft:0}function T(){t.browser=r(),E()}var $,S=null;return{_init:T,isIOS:i,isMac:y,isAndroid:o,isBlackberry:a,isWindowsPhone:s,isMobile:l,requestAnimationFrame:c,getPX:u,screenSize:d,isTouch:f,sanitizeURL:h,isArray:m,RGBToHex:g,HEXtoRGB:v,isURL:p,getAlignment:b,scrollTop:w,scrollLeft:C}},e.FE.MODULES.events=function(t){function n(e,t,n){b(e,t,n)}function r(){n(t.$el,"cut copy paste beforepaste",function(e){w(e.type,[e])})}function i(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){w(e.type,[e])}),v("mousedown",function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()})}function o(){n(t.$el,"keydown keypress keyup input",function(e){w(e.type,[e])})}function a(){n(t.$win,t._mousedown,function(e){w("window.mousedown",[e]),p()}),n(t.$win,t._mouseup,function(e){w("window.mouseup",[e])}),n(t.$win,"cut copy keydown keyup touchmove touchend",function(e){w("window."+e.type,[e])})}function s(){n(t.$doc,"dragend drop",function(e){w("document."+e.type,[e])})}function l(n){if("undefined"==typeof n&&(n=!0),!t.$wp)return!1;if(t.helpers.isIOS()&&t.$win.get(0).focus(),!t.core.hasFocus()&&n){var r=t.$win.scrollTop();return t.browser.msie&&t.$box&&t.$box.css("position","fixed"),t.$el.focus(),t.browser.msie&&t.$box&&t.$box.css("position",""),r!=t.$win.scrollTop()&&t.$win.scrollTop(r),!1}if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;var i=t.selection.info(t.el);if(i.atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var o=t.markers.insert();if(o&&!t.node.blockParent(o)){e(o).remove();var a=t.$el.find(t.html.blockTagsQuery()).get(0);a&&(e(a).prepend(e.FE.MARKERS),t.selection.restore())}else o&&e(o).remove()}}function c(){n(t.$el,"focus",function(e){m()&&(l(!1),_===!1&&w(e.type,[e]))}),n(t.$el,"blur",function(e){m()&&_===!0&&(w(e.type,[e]),p())}),v("focus",function(){_=!0}),v("blur",function(){_=!1})}function u(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function d(n){var r=e(n.currentTarget);return t.edit.isDisabled()||t.node.hasClass(r.get(0),"fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which||(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===r.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),r.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[r]))}function f(n,r){var i=e(n.currentTarget);if(t.edit.isDisabled()||t.node.hasClass(i.get(0),"fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!t.node.hasClass(i.get(0),"fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!t.node.hasClass(i.get(0),"fr-selected"))return e(".fr-selected").removeClass("fr-selected"),!1;if(e(".fr-selected").removeClass("fr-selected"),i.data("dragging")||i.attr("disabled"))return i.removeData("dragging"),!1;var o=i.data("timeout");o&&(clearTimeout(o),i.removeData("timeout")),r.apply(t,[n])}else i.data("timeout")||i.data("timeout",setTimeout(function(){i.data("dragging",!0)},100))}function p(){x=!0}function h(){x=!1}function m(){return x}function g(e,n,r){b(e,t._mousedown,n,function(e){t.edit.isDisabled()||d(e)},!0),b(e,t._mouseup+" "+t._move,n,function(e){t.edit.isDisabled()||f(e,r)},!0),b(e,"mousedown click mouseup",n,function(e){t.edit.isDisabled()||e.stopPropagation()},!0),v("window.mouseup",function(){t.edit.isDisabled()||(e.find(n).removeClass("fr-selected"),p())})}function v(e,n,r){var i=e.split(" ");if(i.length>1){for(var o=0;o<i.length;o++)v(i[o],n,r);return!0}"undefined"==typeof r&&(r=!1);var a;a=0!=e.indexOf("shared.")?A[e]=A[e]||[]:t.shared._events[e]=t.shared._events[e]||[],r?a.unshift(n):a.push(n)}function b(e,n,r,i,o){"function"==typeof r&&(o=i,i=r,r=!1);var a=o?t.shared.$_events:k,s=o?t.sid:t.id;r?e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,r,i):e.on(n.split(" ").join(".ed"+s+" ")+".ed"+s,i),a.indexOf(e.get(0))<0&&a.push(e.get(0))}function y(t,n){for(var r=0;r<t.length;r++)e(t[r]).off(".ed"+n)}function E(){y(k,t.id),k=[],0==t.shared.count&&(y(t.shared.$_events,t.sid),t.shared.$_events=null)}function w(n,r,i){if(!t.edit.isDisabled()||i){var o;if(0!=n.indexOf("shared."))o=A[n];else{if(t.shared.count>0)return!1;o=t.shared._events[n]}var a;if(o)for(var s=0;s<o.length;s++)if(a=o[s].apply(t,r),a===!1)return!1;return a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],r||[])),a!==!1&&a}}function C(n,r,i){if(!t.edit.isDisabled()||i){var o;if(0!=n.indexOf("shared."))o=A[n];else{if(t.shared.count>0)return!1;o=t.shared._events[n]}var a;if(o)for(var s=0;s<o.length;s++)a=o[s].apply(t,[r]),"undefined"!=typeof a&&(r=a);return a=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[r])),"undefined"!=typeof a&&(r=a),r}}function T(){for(var e in A)A.hasOwnProperty(e)&&delete A[e]}function $(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}function S(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},u(),i(),a(),s(),o(),c(),p(),r(),v("destroy",T),v("shared.destroy",$)}var x,A={},_=!1,k=[];return{_init:S,on:v,trigger:w,bindClick:g,disableBlur:h,enableBlur:p,blurActive:m,focus:l,chainTrigger:C,$on:b,$off:E}},e.FE.MODULES.node=function(t){function n(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function r(t){return!!t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0}function i(i,o){if(!i)return!0;if(i.querySelector("table"))return!1;var a=n(i);1==a.length&&r(a[0])&&(a=n(a[0]));for(var s=!1,l=0;l<a.length;l++){var c=a[l];if(!(o&&t.node.hasClass(c,"fr-marker")||c.nodeType==Node.TEXT_NODE&&0==c.textContent.length)){if("BR"!=c.tagName&&(c.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(s)return!1;"BR"==c.tagName&&(s=!0)}}return!(i.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-i.querySelectorAll("br").length||i.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||i.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1||i.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function o(e){for(;e&&e.parentNode!==t.el&&(!e.parentNode||!t.node.hasClass(e.parentNode,"fr-inner"));)if(e=e.parentNode,r(e))return e;return null}function a(n,i,o){if("undefined"==typeof i&&(i=[]),"undefined"==typeof o&&(o=!0),i.push(t.el),i.indexOf(n.parentNode)>=0||n.parentNode&&t.node.hasClass(n.parentNode,"fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&o)return null;for(;i.indexOf(n.parentNode)<0&&n.parentNode&&!t.node.hasClass(n.parentNode,"fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!o)&&(!r(n)||!r(n.parentNode)||!o);)n=n.parentNode;return n}function s(e){var t={},n=e.attributes;if(n)for(var r=0;r<n.length;r++){var i=n[r];t[i.nodeName]=i.value}return t}function l(e){for(var t="",n=s(e),r=Object.keys(n).sort(),i=0;i<r.length;i++){var o=r[i],a=n[o];t+=a.indexOf('"')<0?" "+o+'="'+a+'"':" "+o+"='"+a+"'"}return t}function c(e){for(var t=e.attributes,n=0;n<t.length;n++){var r=t[n];e.removeAttribute(r.nodeName)}}function u(e){return"<"+e.tagName.toLowerCase()+l(e)+">"}function d(e){return"</"+e.tagName.toLowerCase()+">"}function f(e,n){"undefined"==typeof n&&(n=!0);for(var r=e.previousSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.previousSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&f(r)}function p(e,n){"undefined"==typeof n&&(n=!0);for(var r=e.nextSibling;r&&n&&t.node.hasClass(r,"fr-marker");)r=r.nextSibling;return!r||r.nodeType==Node.TEXT_NODE&&""===r.textContent&&p(r)}function h(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function m(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0}function g(e){return e===t.el}function v(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&(e.getAttribute("class")||"").indexOf("fr-deletable")>=0}function b(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(g(e)||e.type||e.href||~e.tabIndex)}function y(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function E(t,n){return t instanceof e&&(t=t.get(0)),t&&t.classList&&t.classList.contains(n)}function w(e){return t.browser.msie?e:{acceptNode:e}}return{isBlock:r,isEmpty:i,blockParent:o,deepestParent:a,rawAttributes:s,attributes:l,clearAttributes:c,openTagString:u,closeTagString:d,isFirstSibling:f,isLastSibling:p,isList:m,isElement:g,contents:n,isVoid:h,hasFocus:b,isEditable:y,isDeletable:v,hasClass:E,filter:w}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(n,r){return e('<span class="fr-marker" data-id="'+r+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function r(r,i,o){try{var a=r.cloneRange();if(a.collapse(i),a.insertNode(n(i,o)),i===!0&&r.collapsed)for(var s=t.$el.find('span.fr-marker[data-type="true"][data-id="'+o+'"]'),l=s.get(0).nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=s.nextSibling;if(i===!0&&!r.collapsed){var s=t.$el.find('span.fr-marker[data-type="true"][data-id="'+o+'"]').get(0),l=s.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do l=c[0],c=t.node.contents(l);while(c[0]&&t.node.isBlock(c[0]));e(l).prepend(e(s))}}if(i===!1&&!r.collapsed){var s=t.$el.find('span.fr-marker[data-type="false"][data-id="'+o+'"]').get(0),l=s.previousSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do l=c[c.length-1],c=t.node.contents(l);while(c[c.length-1]&&t.node.isBlock(c[c.length-1]));e(l).append(e(s))}s.parentNode&&["TD","TH"].indexOf(s.parentNode.tagName)>=0&&s.parentNode.previousSibling&&!s.previousSibling&&e(s.parentNode.previousSibling).append(s)}var u=t.$el.find('span.fr-marker[data-type="'+i+'"][data-id="'+o+'"]').get(0);return u&&(u.style.display="none"),u}catch(d){return null}}function i(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),r=n.commonAncestorContainer;if(r!=t.el&&0==t.$el.find(r).length)return null;var i=n.cloneRange(),o=n.cloneRange();i.collapse(!0);var a=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(i.insertNode(a),a=t.$el.find("span.fr-marker").get(0)){for(var s=a.nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)e(s).remove(),s=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(o),a}return null}catch(l){}}function o(){t.selection.isCollapsed()||t.selection.remove();var n=t.$el.find(".fr-marker").get(0);if(null==n&&(n=i()),null==n)return null;var r=t.node.deepestParent(n);if(r||(r=t.node.blockParent(n),r&&"LI"!=r.tagName&&(r=null)),r)if(t.node.isBlock(r)&&t.node.isEmpty(r))e(r).replaceWith('<span class="fr-marker"></span>');else if(t.cursor.isAtStart(n,r))e(r).before('<span class="fr-marker"></span>'),e(n).remove();else if(t.cursor.isAtEnd(n,r))e(r).after('<span class="fr-marker"></span>'),e(n).remove();else{var o=n,a="",s="";do o=o.parentNode,a+=t.node.closeTagString(o),s=t.node.openTagString(o)+s;while(o!=r);e(n).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(r)+e(r).html()+t.node.closeTagString(r);l=l.replace(/<span id="fr-break"><\/span>/g,a+'<span class="fr-marker"></span>'+s),e(r).replaceWith(l)}return t.$el.find(".fr-marker").get(0)}function a(e){var n=e.clientX,r=e.clientY;s();var o,a=null;if("undefined"!=typeof t.doc.caretPositionFromPoint?(o=t.doc.caretPositionFromPoint(n,r),a=t.doc.createRange(),a.setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)):"undefined"!=typeof t.doc.caretRangeFromPoint&&(o=t.doc.caretRangeFromPoint(n,r),a=t.doc.createRange(),a.setStart(o.startContainer,o.startOffset),a.setEnd(o.startContainer,o.startOffset)),null!==a&&"undefined"!=typeof t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(a)}else if("undefined"!=typeof t.doc.body.createTextRange)try{a=t.doc.body.createTextRange(),a.moveToPoint(n,r);var c=a.duplicate();c.moveToPoint(n,r),a.setEndPoint("EndToEnd",c),a.select()}catch(u){return!1}i()}function s(){t.$el.find(".fr-marker").remove()}return{place:r,insert:i,split:o,insertAtPoint:a,remove:s}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function r(){var e="";return e=t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function i(e){var n=r(),i=[];if(n&&n.getRangeAt&&n.rangeCount)for(var i=[],o=0;o<n.rangeCount;o++)i.push(n.getRangeAt(o));else i=t.doc.createRange?[t.doc.createRange()]:[];return"undefined"!=typeof e?i[e]:i}function o(){var e=r();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(t){}}function a(){var o=r();try{if(o.rangeCount){var a=i(0),s=a.startContainer;if(s.nodeType==Node.TEXT_NODE&&a.startOffset==(s.textContent||"").length&&s.nextSibling&&(s=s.nextSibling),s.nodeType==Node.ELEMENT_NODE){var l=!1;if(s.childNodes.length>0&&s.childNodes[a.startOffset]){for(var c=s.childNodes[a.startOffset];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;if(c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0),!l&&s.childNodes.length>1&&a.startOffset>0&&s.childNodes[a.startOffset-1]){for(var c=s.childNodes[a.startOffset-1];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}}else if(!a.collapsed&&s.nextSibling&&s.nextSibling.nodeType==Node.ELEMENT_NODE){var c=s.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}!l&&s.childNodes.length>0&&e(s.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(s.childNodes[0].tagName)<0&&(s=s.childNodes[0])}for(;s.nodeType!=Node.ELEMENT_NODE&&s.parentNode;)s=s.parentNode;for(var u=s;u&&"HTML"!=u.tagName;){if(u==t.el)return s;u=e(u).parent()[0]}}}catch(d){}return t.el}function s(){var o=r();try{if(o.rangeCount){var a=i(0),s=a.endContainer;if(s.nodeType==Node.ELEMENT_NODE){var l=!1;if(s.childNodes.length>0&&s.childNodes[a.endOffset]&&e(s.childNodes[a.endOffset]).text()===n())s=s.childNodes[a.endOffset],l=!0;else if(!a.collapsed&&s.previousSibling&&s.previousSibling.nodeType==Node.ELEMENT_NODE){var c=s.previousSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}else if(!a.collapsed&&s.childNodes.length>0&&s.childNodes[a.endOffset]){var c=s.childNodes[a.endOffset].previousSibling;c.nodeType==Node.ELEMENT_NODE&&c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(s=c,l=!0)}!l&&s.childNodes.length>0&&e(s.childNodes[s.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(s.childNodes[s.childNodes.length-1].tagName)<0&&(s=s.childNodes[s.childNodes.length-1])}for(s.nodeType==Node.TEXT_NODE&&0==a.endOffset&&s.previousSibling&&s.previousSibling.nodeType==Node.ELEMENT_NODE&&(s=s.previousSibling);s.nodeType!=Node.ELEMENT_NODE&&s.parentNode;)s=s.parentNode;for(var u=s;u&&"HTML"!=u.tagName;){if(u==t.el)return s;u=e(u).parent()[0]}}}catch(d){}return t.el}function l(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function c(){var n=[],o=r();if(y()&&o.rangeCount)for(var a=i(),s=0;s<a.length;s++){var c=a[s],u=l(c.startContainer,c.startOffset),d=l(c.endContainer,c.endOffset);t.node.isBlock(u)&&n.indexOf(u)<0&&n.push(u);var f=t.node.blockParent(u);f&&n.indexOf(f)<0&&n.push(f);for(var p=[],h=u;h!==d&&h!==t.el;)p.indexOf(h)<0&&h.children&&h.children.length?(p.push(h),h=h.children[0]):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,p.push(h)),t.node.isBlock(h)&&p.indexOf(h)<0&&n.indexOf(h)<0&&(h!==d||c.endOffset>0)&&n.push(h);t.node.isBlock(d)&&n.indexOf(d)<0&&c.endOffset>0&&n.push(d);var f=t.node.blockParent(d);f&&n.indexOf(f)<0&&n.push(f)}for(var s=n.length-1;s>0;s--)e(n[s]).find(n).length&&("LI"!=n[s].tagName||1==n[s].children.length&&n.indexOf(n[s].children[0])>=0)&&n.splice(s,1);return n}function u(){if(t.$wp){t.markers.remove();for(var e=i(),n=[],r=0;r<e.length;r++)if(e[r].startContainer!==t.doc){var o=e[r],a=o.collapsed,s=t.markers.place(o,!0,r),l=t.markers.place(o,!1,r);if(t.el.normalize(),t.browser.safari&&!a){var o=t.doc.createRange();o.setStartAfter(s),o.setEndBefore(l),n.push(o)}}if(t.browser.safari&&n.length){t.selection.clear();for(var r=0;r<n.length;r++)t.selection.get().addRange(n[r])}}}function d(){var n=t.el.querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===n.length)return!1;if(t.browser.msie||t.browser.edge)for(var i=0;i<n.length;i++)n[i].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),o();for(var a=r(),i=0;i<n.length;i++){var s=e(n[i]).data("id"),l=n[i],c=t.doc.createRange(),u=t.$el.find('.fr-marker[data-type="false"][data-id="'+s+'"]');(t.browser.msie||t.browser.edge)&&u.css("display","inline-block");var d=null;if(u.length>0){u=u[0];try{for(var p=!1,h=l.nextSibling;h&&h.nodeType==Node.TEXT_NODE&&0==h.textContent.length;){var m=h;h=h.nextSibling,e(m).remove()}for(var g=u.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0==g.textContent.length;){
var m=g;g=g.nextSibling,e(m).remove()}if(l.nextSibling==u||u.nextSibling==l){for(var v=l.nextSibling==u?l:u,b=v==l?u:l,y=v.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0==y.length;){var m=y;y=y.previousSibling,e(m).remove()}if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var E=b.nextSibling;E&&E.nodeType==Node.TEXT_NODE&&0==E.length;){var m=E;E=E.nextSibling,e(m).remove()}if(E&&E.nodeType==Node.TEXT_NODE)for(;E&&E.nextSibling&&E.nextSibling.nodeType==Node.TEXT_NODE;)E.nextSibling.textContent=E.textContent+E.nextSibling.textContent,E=E.nextSibling,e(E.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),E&&(t.node.isVoid(E)||t.node.isBlock(E))&&(E=null),y&&E&&y.nodeType==Node.TEXT_NODE&&E.nodeType==Node.TEXT_NODE){e(l).remove(),e(u).remove();var w=y.textContent.length;y.textContent=y.textContent+E.textContent,e(E).remove(),t.spaces.normalize(y),c.setStart(y,w),c.setEnd(y,w),p=!0}else!y&&E&&E.nodeType==Node.TEXT_NODE?(e(l).remove(),e(u).remove(),t.spaces.normalize(E),d=e(t.doc.createTextNode("​")),e(E).before(d),c.setStart(E,0),c.setEnd(E,0),p=!0):!E&&y&&y.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(u).remove(),t.spaces.normalize(y),d=e(t.doc.createTextNode("​")),e(y).after(d),c.setStart(y,y.textContent.length),c.setEnd(y,y.textContent.length),p=!0)}if(!p){var C,T;if((t.browser.chrome||t.browser.edge)&&l.nextSibling==u)C=f(u,c,!0)||c.setStartAfter(u),T=f(l,c,!1)||c.setEndBefore(l);else{l.previousSibling==u&&(l=u,u=l.nextSibling),u.nextSibling&&"BR"===u.nextSibling.tagName||!u.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",u.style.display="inline",d=e(t.doc.createTextNode("​")));var $=l.previousSibling;$&&$.style&&"block"==t.win.getComputedStyle($).display&&!t.opts.enter==e.FE.ENTER_BR?(c.setEndAfter($),c.setStartAfter($)):(C=f(l,c,!0)||e(l).before(d)&&c.setStartBefore(l),T=f(u,c,!1)||e(u).after(d)&&c.setEndAfter(u))}"function"==typeof C&&C(),"function"==typeof T&&T()}}catch(S){}}d&&d.remove();try{a.addRange(c)}catch(S){}}t.markers.remove()}function f(n,r,i){var o=n.previousSibling,a=n.nextSibling;if(o&&a&&o.nodeType==Node.TEXT_NODE&&a.nodeType==Node.TEXT_NODE){var s=o.textContent.length;return i?(a.textContent=o.textContent+a.textContent,e(o).remove(),e(n).remove(),t.spaces.normalize(a),function(){r.setStart(a,s)}):(o.textContent=o.textContent+a.textContent,e(a).remove(),e(n).remove(),t.spaces.normalize(o),function(){r.setEnd(o,s)})}if(o&&!a&&o.nodeType==Node.TEXT_NODE){var s=o.textContent.length;return i?(t.spaces.normalize(o),function(){r.setStart(o,s)}):(t.spaces.normalize(o),function(){r.setEnd(o,s)})}return!(!a||o||a.nodeType!=Node.TEXT_NODE)&&(i?(t.spaces.normalize(a),function(){r.setStart(a,0)}):(t.spaces.normalize(a),function(){r.setEnd(a,0)}))}function p(){return!0}function h(){for(var e=i(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function m(e){var n,r,i=!1,o=!1;if(t.win.getSelection){var a=t.win.getSelection();a.rangeCount&&(n=a.getRangeAt(0),r=n.cloneRange(),r.selectNodeContents(e),r.setEnd(n.startContainer,n.startOffset),i=""===r.toString(),r.selectNodeContents(e),r.setStart(n.endContainer,n.endOffset),o=""===r.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&(n=t.doc.selection.createRange(),r=n.duplicate(),r.moveToElementText(e),r.setEndPoint("EndToStart",n),i=""===r.text,r.moveToElementText(e),r.setEndPoint("StartToEnd",n),o=""===r.text);return{atStart:i,atEnd:o}}function g(){if(h())return!1;t.$el.find("td, th, img").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,r=m(t.el);return r.atStart&&r.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n}function v(n,r){"undefined"==typeof r&&(r=!0);var i=e(n).html();i&&i.replace(/\u200b/g,"").length!=i.length&&e(n).html(i.replace(/\u200b/g,""));for(var o=t.node.contents(n),a=0;a<o.length;a++)o[a].nodeType!=Node.ELEMENT_NODE?e(o[a]).remove():(v(o[a],0==a),0==a&&(r=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):r&&e(n).attr("data-first",!0)}function b(n,r){var i=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&t.node.hasClass(i[0],"fr-marker")&&n.attr("data-del-cell",!0);for(var o=0;o<i.length;o++){var a=i[o];t.node.hasClass(a,"fr-marker")?r=(r+1)%2:r?e(a).find(".fr-marker").length>0?r=b(e(a),r):["TD","TH"].indexOf(a.tagName)<0&&!t.node.hasClass(a,"fr-inner")?!t.opts.keepFormatOnDelete||t.$el.find("[data-first]").length>0?e(a).remove():v(a):t.node.hasClass(a,"fr-inner")?0==e(a).find(".fr-inner").length?e(a).html("<br>"):e(a).find(".fr-inner").filter(function(){return 0==e(this).find("fr-inner").length}).html("<br>"):(e(a).empty(),e(a).attr("data-del-cell",!0)):e(a).find(".fr-marker").length>0&&(r=b(e(a),r))}return r}function y(){try{if(!t.$wp)return!1;for(var e=i(0),n=e.commonAncestorContainer;n&&!t.node.isElement(n);)n=n.parentNode;return!!t.node.isElement(n)}catch(r){return!1}}function E(){if(h())return!0;u();for(var n=function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var r=n,n=n.previousSibling;e(r).remove()}return n},r=function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var r=n,n=n.nextSibling;e(r).remove()}return n},i=t.$el.find('.fr-marker[data-type="true"]'),o=0;o<i.length;o++)for(var a=i[o];!n(a)&&!t.node.isBlock(a.parentNode)&&!t.$el.is(a.parentNode);)e(a.parentNode).before(a);for(var s=t.$el.find('.fr-marker[data-type="false"]'),o=0;o<s.length;o++){for(var l=s[o];!r(l)&&!t.node.isBlock(l.parentNode)&&!t.$el.is(l.parentNode);)e(l.parentNode).after(l);l.parentNode&&t.node.isBlock(l.parentNode)&&t.node.isEmpty(l.parentNode)&&!t.$el.is(l.parentNode)&&t.opts.keepFormatOnDelete&&e(l.parentNode).after(l)}if(p()){b(t.$el,0);var c=t.$el.find('[data-first="true"]');if(c.length)t.$el.find(".fr-marker").remove(),c.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),c.attr("data-text")&&c.replaceWith(c.html());else{t.$el.find("table").filter(function(){var t=e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length;return t}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell");for(var i=t.$el.find('.fr-marker[data-type="true"]'),o=0;o<i.length;o++){var f=i[o],m=f.nextSibling,g=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(f).data("id")+'"]').get(0);if(g){if(m&&m==g);else if(f){var v=t.node.blockParent(f),y=t.node.blockParent(g),E=!1,w=!1;if(v&&["UL","OL"].indexOf(v.tagName)>=0&&(v=null,E=!0),y&&["UL","OL"].indexOf(y.tagName)>=0&&(y=null,w=!0),e(f).after(g),v==y);else if(null!=v||E)if(null!=y||w||0!=e(v).parentsUntil(t.$el,"table").length)v&&y&&0==e(v).parentsUntil(t.$el,"table").length&&0==e(y).parentsUntil(t.$el,"table").length&&(e(v).append(e(y).html()),e(y).remove());else{for(var m=v;!m.nextSibling&&m.parentNode!=t.el;)m=m.parentNode;for(m=m.nextSibling;m&&"BR"!=m.tagName;){var C=m.nextSibling;e(v).append(m),m=C}m&&"BR"==m.tagName&&e(m).remove()}else{var T=t.node.deepestParent(f);T?(e(T).after(e(y).html()),e(y).remove()):0==e(y).parentsUntil(t.$el,"table").length&&(e(f).next().after(e(y).html()),e(y).remove())}}}else g=e(f).clone().attr("data-type",!1),e(f).after(g)}}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.spaces.normalize();var $=t.$el.find(".fr-marker:last").get(0),S=t.$el.find(".fr-marker:first").get(0);!$.nextSibling&&S.previousSibling&&"BR"==S.previousSibling.tagName&&t.node.isElement($.parentNode)&&t.node.isElement(S.parentNode)&&t.$el.append("<br>"),d()}function w(n){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var r=n.firstChild;r&&t.node.isBlock(r);)n=r,r=r.firstChild;n.innerHTML=e.FE.MARKERS+n.innerHTML}function C(n){if(!n||n.getElementsByClassName("fr-marker").length>0)return!1;for(var r=n.lastChild;r&&t.node.isBlock(r);)n=r,r=r.lastChild;n.innerHTML=n.innerHTML+e.FE.MARKERS}function T(n,r){"undefined"==typeof r&&(r=!0);for(var i=n.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;)i=i.previousSibling;return i?(t.node.isBlock(i)?C(i):"BR"==i.tagName?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?w(n):e(n).before(e.FE.MARKERS),!0)}function $(n,r){"undefined"==typeof r&&(r=!0);for(var i=n.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;)i=i.nextSibling;return i?(t.node.isBlock(i)?w(i):e(i).before(e.FE.MARKERS),!0):!!r&&(t.node.isBlock(n)?C(n):e(n).after(e.FE.MARKERS),!0)}return{text:n,get:r,ranges:i,clear:o,element:a,endElement:s,save:u,restore:d,isCollapsed:h,isFull:g,inEditor:y,remove:E,blocks:c,info:m,setAtEnd:C,setAtStart:w,setBefore:T,setAfter:$,rangeElement:l}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function n(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&e.getAttribute("class").indexOf("fr-marker")>=0)return!1;var r,i=t.node.contents(e),o=[];for(r=0;r<i.length;r++)i[r].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(i[r])?i[r].nodeType==Node.TEXT_NODE&&(i[r].textContent=i[r].textContent.replace(/\u200b/g,"").replace(/&/g,"&amp;")):i[r].textContent.replace(/\u200b/g,"").length!=i[r].textContent.length&&n(i[r]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),i=t.node.contents(e),o=e.querySelectorAll(".fr-marker"),i.length-o.length==0)){for(r=0;r<i.length;r++)if((i[r].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(r=0;r<o.length;r++)e.parentNode.insertBefore(o[r].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function r(e){if(e.nodeType==Node.COMMENT_NODE)return"<!--"+e.nodeValue+"-->";if(e.nodeType==Node.TEXT_NODE)return e.textContent.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\u00A0/g,"&nbsp;");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var n=document.createElement("div"),i=e.cloneNode(!0);return n.appendChild(i),n.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML;var o=e.childNodes;if(0===o.length)return e.outerHTML;for(var a="",s=0;s<o.length;s++)a+=r(o[s]);return t.node.openTagString(e)+a+t.node.closeTagString(e)}function i(e){return D=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return D.push(e),"[FROALA.EDITOR.SCRIPT "+(D.length-1)+"]"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function o(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":D[parseInt(n,10)]}),e=e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function a(e){var t;for(t in e)e.hasOwnProperty(t)&&(t.match(N)||delete e[t]);for(var n="",r=Object.keys(e).sort(),i=0;i<r.length;i++)t=r[i],n+=e[t].indexOf('"')<0?" "+t+'="'+e[t]+'"':" "+t+"='"+e[t]+"'";return n}function s(e,n,r){if(t.opts.fullPage){var i=t.html.extractDoctype(r),o=a(t.html.extractNodeAttrs(r,"html"));n=null==n?t.html.extractNode(r,"head")||"<title></title>":n;var s=a(t.html.extractNodeAttrs(r,"head")),l=a(t.html.extractNodeAttrs(r,"body"));return i+"<html"+o+"><head"+s+">"+n+"</head><body"+l+">"+e+"</body></html>"}return e}function l(n,i){var o=e("<div>"+n+"</div>"),a="";if(o){for(var s=t.node.contents(o.get(0)),l=0;l<s.length;l++)i(s[l]);s=t.node.contents(o.get(0));for(var l=0;l<s.length;l++)a+=r(s[l])}return a}function c(e,n,r){e=i(e);var a=e,c=null;if(t.opts.fullPage){var a=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e);r&&(c=t.html.extractNode(e,"head")||"")}a=l(a,n),c&&(c=l(c,n));var u=s(a,c,e);return o(u)}function u(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)}function d(){var n=t.el.querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){var r=!1;t.el.querySelector(".fr-marker")||(t.selection.save(),r=!0);for(var i=0;i<n.length;i++)""===t.node.attributes(n[i])&&e(n[i]).replaceWith("<"+e.FE.HTML5Map[n[i].tagName]+">"+n[i].innerHTML+"</"+e.FE.HTML5Map[n[i].tagName]+">");r&&t.selection.restore()}}function f(n){if("SPAN"==n.tagName&&(n.getAttribute("class")||"").indexOf("fr-marker")>=0)return!1;if("PRE"==n.tagName&&h(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-fr-src")&&n.setAttribute("data-fr-src",t.helpers.sanitizeURL(n.getAttribute("data-fr-src"))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(n.getAttribute("href"))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-fr-src")&&0==n.getAttribute("data-fr-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var r=e.FE.HTML5Map[n.tagName],i="<"+r+">"+n.innerHTML+"</"+r+">";n.insertAdjacentHTML("beforebegin",i),n=n.previousSibling,n.parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(R))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(O))n.outerHTML=n.innerHTML;else{var o=n.attributes;if(o)for(var a=o.length-1;a>=0;a--){var s=o[a];s.nodeName.match(N)||n.removeAttribute(s.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function p(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&p(n[r]);f(e)}function h(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function m(n,r,i,o){"undefined"==typeof r&&(r=[]),"undefined"==typeof i&&(i=[]),"undefined"==typeof o&&(o=!1),n=n.replace(/\u0009/g,""),n=n.replace(/<br> */g,"<br>");var a,s=e.merge([],t.opts.htmlAllowedTags);for(a=0;a<r.length;a++)s.indexOf(r[a])>=0&&s.splice(s.indexOf(r[a]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(a=0;a<i.length;a++)l.indexOf(i[a])>=0&&l.splice(l.indexOf(i[a]),1);return l.push("data-fr-.*"),l.push("fr-.*"),O=new RegExp("^"+s.join("$|^")+"$","gi"),N=new RegExp("^"+l.join("$|^")+"$","gi"),R=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),n=c(n,p,!0)}function g(){for(var n=t.el.querySelectorAll("blockquote + blockquote"),r=0;r<n.length;r++){var i=n[r];t.node.attributes(i)==t.node.attributes(i.previousSibling)&&(e(i).prev().append(e(i).html()),e(i).remove())}}function v(){for(var e=t.el.querySelectorAll("tr"),n=0;n<e.length;n++){for(var r=e[n].children,i=!0,o=0;o<r.length;o++)if("TH"!=r[o].tagName){i=!1;break}if(0!=i&&0!=r.length){for(var a=e[n];a&&"TABLE"!=a.tagName&&"THEAD"!=a.tagName;)a=a.parentNode;var s=a;"THEAD"!=s.tagName&&(s=t.doc.createElement("THEAD"),a.insertBefore(s,a.firstChild)),s.appendChild(e[n])}}}function b(){var n=t.html.defaultTag();if(n)for(var r=t.el.querySelectorAll("td > "+n+", th > "+n),i=0;i<r.length;i++)""===t.node.attributes(r[i])&&e(r[i]).replaceWith(r[i].innerHTML+"<br>")}function y(){v(),b()}function E(){var e=[],n=function(e){return!t.node.isList(e.parentNode)};do{if(e.length){var r=e[0],i=t.doc.createElement("ul");r.parentNode.insertBefore(i,r);do{var o=r;r=r.nextSibling,i.appendChild(o)}while(r&&"LI"==r.tagName)}e=[];for(var a=t.el.querySelectorAll("li"),s=0;s<a.length;s++)n(a[s])&&e.push(a[s])}while(e.length>0)}function w(){for(var e=t.el.querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var r=e[n];if(t.node.isList(r.previousSibling)&&t.node.openTagString(r)==t.node.openTagString(r.previousSibling)){for(var i=t.node.contents(r),o=0;o<i.length;o++)r.previousSibling.appendChild(i[o]);r.parentNode.removeChild(r)}}}function C(){var e,n=function(t){t.querySelector("LI")||(e=!0,t.parentNode.removeChild(t))};do{e=!1;for(var r=t.el.querySelectorAll("li:empty"),i=0;i<r.length;i++)r[i].parentNode.removeChild(r[i]);for(var o=t.el.querySelectorAll("ul, ol"),i=0;i<o.length;i++)n(o[i])}while(e===!0)}function T(){for(var n=t.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),r=0;r<n.length;r++){var i=n[r],o=i.previousSibling;o&&("LI"==o.tagName?o.appendChild(i):e(i).wrap("<li></li>"))}}function $(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var i=n[r];if(i.nextSibling){var o=i.nextSibling,a=e("<li>");e(i.parentNode).after(a);do{var s=o;o=o.nextSibling,a.append(s)}while(o)}}}function S(){for(var n=t.el.querySelectorAll("li > ul, li > ol"),r=0;r<n.length;r++){var i=n[r];if(t.node.isFirstSibling(i))e(i).before("<br/>");else if(i.previousSibling&&"BR"==i.previousSibling.tagName){for(var o=i.previousSibling.previousSibling;o&&t.node.hasClass(o,"fr-marker");)o=o.previousSibling;o&&"BR"!=o.tagName&&e(i.previousSibling).remove()}}}function x(){for(var n=t.el.querySelectorAll("li:empty"),r=0;r<n.length;r++)e(n[r]).remove()}function A(){for(var n=t.el.querySelectorAll("ul, ol"),r=0;r<n.length;r++)for(var i=t.node.contents(n[r]),o=null,a=i.length-1;a>=0;a--)"LI"!=i[a].tagName?(o||(o=e("<li>"),o.insertBefore(i[a])),o.prepend(i[a])):o=null}function _(){E(),w(),C(),T(),$(),S(),A(),x()}function k(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var O,R,N,D=[],D=[];return{_init:k,html:m,toHTML5:d,tables:y,lists:_,quotes:g,invisibleSpaces:u,exec:c}},e.FE.MODULES.spaces=function(t){function n(n,r){var i=n.previousSibling,o=n.nextSibling,a=n.textContent,s=n.parentNode;r&&(a=a.replace(/[\f\n\r\t\v ]{2,}/g," "),o&&"BR"!==o.tagName&&!t.node.isBlock(o)||!t.node.isBlock(s)||(a=a.replace(/[\f\n\r\t\v ]{1,}$/g,"")),i&&"BR"!==i.tagName&&!t.node.isBlock(i)||!t.node.isBlock(s)||(a=a.replace(/^[\f\n\r\t\v ]{1,}/g,""))),a=a.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var l="",c=0;c<a.length;c++)l+=32!=a.charCodeAt(c)||0!==c&&32!=l.charCodeAt(c-1)?a[c]:e.FE.UNICODE_NBSP;(!o||t.node.isBlock(o)||o.nodeType==Node.ELEMENT_NODE&&t.win.getComputedStyle(o)&&"block"==t.win.getComputedStyle(o).display)&&(l=l.replace(/ $/,e.FE.UNICODE_NBSP)),!i||t.node.isVoid(i)||t.node.isBlock(i)||(l=l.replace(/^\u00A0([^ $])/," $1"),1!==l.length||160!==l.charCodeAt(0)||!o||t.node.isVoid(o)||t.node.isBlock(o)||(l=" ")),l=l.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=l&&(n.textContent=l)}function r(e,r){if("undefined"!=typeof e&&e||(e=t.el),"undefined"==typeof r&&(r=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)n(e,r);else if(e.nodeType==Node.ELEMENT_NODE)for(var i=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!t.node.hasClass(e.parentNode,"fr-marker")}),!1);i.nextNode();)n(i.currentNode,r)}function i(){for(var e=[],n=t.el.querySelectorAll(".fr-marker"),i=0;i<n.length;i++){var o=null,a=t.node.blockParent(n[i]);o=a?a:n[i];for(var s=o.nextSibling,l=o.previousSibling;s&&"BR"==s.tagName;)s=s.nextSibling;for(;l&&"BR"==l.tagName;)l=l.previousSibling;o&&e.indexOf(o)<0&&e.push(o),l&&e.indexOf(l)<0&&e.push(l),s&&e.indexOf(s)<0&&e.push(s)}for(var c=0;c<e.length;c++)r(e[c])}return{normalize:r,normalizeAroundCursor:i}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[]}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function r(n){var r=[],i=[];if(n)for(var a=t.el.querySelectorAll(".fr-marker"),s=0;s<a.length;s++){var l=t.node.blockParent(a[s])||a[s];if(l){var c=l.nextSibling,u=l.previousSibling;l&&i.indexOf(l)<0&&t.node.isBlock(l)&&i.push(l),u&&t.node.isBlock(u)&&i.indexOf(u)<0&&i.push(u),c&&t.node.isBlock(c)&&i.indexOf(c)<0&&i.push(c)}}else i=t.el.querySelectorAll(o());var d=o();d+=","+e.FE.VOID_ELEMENTS.join(","),d+=","+t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)";for(var s=i.length-1;s>=0;s--)if(!(i[s].textContent&&i[s].textContent.replace(/\u200B|\n/g,"").length>0||i[s].querySelectorAll(d).length>0)){for(var f=t.node.contents(i[s]),p=!1,h=0;h<f.length;h++)if(f[h].nodeType!=Node.COMMENT_NODE&&f[h].textContent&&f[h].textContent.replace(/\u200B|\n/g,"").length>0){p=!0;break}p||r.push(i[s])}return r}function i(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function o(){return e.FE.BLOCK_TAGS.join(", ")}function a(n){var r=e.merge([],e.FE.VOID_ELEMENTS);r=e.merge(r,t.opts.htmlAllowedEmptyTags),"undefined"==typeof n&&(r=e.merge(r,e.FE.BLOCK_TAGS));var i,o;i=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)");do{o=!1;for(var a=0;a<i.length;a++)0!==i[a].attributes.length&&"undefined"==typeof i[a].getAttribute("href")||(i[a].parentNode.removeChild(i[a]),o=!0);i=t.el.querySelectorAll("*:empty:not("+r.join("):not(")+"):not(.fr-marker)")}while(i.length&&o)}function s(e,r){var i=n();if(r&&(i="div"),i){for(var o=t.doc.createDocumentFragment(),a=null,s=!1,l=e.firstChild;l;){var c=l.nextSibling;if(l.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(l)||t.opts.htmlDoNotWrapTags.indexOf(l.tagName.toLowerCase())>=0&&!t.node.hasClass(l,"fr-marker")))a=null,o.appendChild(l);else if(l.nodeType!=Node.ELEMENT_NODE&&l.nodeType!=Node.TEXT_NODE)a=null,o.appendChild(l);else if("BR"==l.tagName)null==a?(a=t.doc.createElement(i),r&&a.setAttribute("data-empty",!0),a.appendChild(l),o.appendChild(a)):s===!1&&(a.appendChild(t.doc.createElement("br")),a.setAttribute("data-empty",!0)),a=null;else{var u=l.textContent;l.nodeType==Node.TEXT_NODE&&0==u.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==a&&(a=t.doc.createElement(i),r&&a.setAttribute("class","fr-temp-div"),o.appendChild(a),s=!1),a.appendChild(l),s||t.node.hasClass(l,"fr-marker")||l.nodeType==Node.TEXT_NODE&&0===u.replace(/ /g,"").length||(s=!0))}l=c}e.innerHTML="",e.appendChild(o)}}function l(e,t){for(var n=0;n<e.length;n++)s(e[n],t)}function c(e,n,r,i){return!!t.$wp&&("undefined"==typeof e&&(e=!1),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=!1),"undefined"==typeof i&&(i=!1),s(t.el,e),i&&l(t.el.querySelectorAll(".fr-inner"),e),n&&l(t.el.querySelectorAll("td, th"),e),void(r&&l(t.el.querySelectorAll("blockquote"),e)))}function u(){t.$el.find("div.fr-temp-div").each(function(){e(this).data("empty")||"LI"==this.parentNode.tagName||t.node.isBlock(this.nextSibling)&&!e(this.nextSibling).hasClass("fr-temp-div")?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""==e(this).attr("class")}).removeAttr("class")}function d(n){for(var i=r(n),o=0;o<i.length;o++){var a=i[o];"false"==a.getAttribute("contenteditable")||a.querySelector(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||t.node.isVoid(a)||"TABLE"!=a.tagName&&"TBODY"!=a.tagName&&"TR"!=a.tagName&&a.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var s=t.node.contents(t.el);s.length&&s[s.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}}function f(){return t.$el.get(0).querySelectorAll(o())}function p(e){if("undefined"==typeof e&&(e=t.el),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);n.nextNode();){var r=n.currentNode,i=t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode),o=r.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(i){var a=r.previousSibling,s=r.nextSibling;a&&s&&" "==o?o=t.node.isBlock(a)&&t.node.isBlock(s)?"":"\n":(a||(o=o.replace(/^ */,"")),s||(o=o.replace(/ *$/,"")))}r.textContent=o}}function h(e,t,n){var r=new RegExp(t,"gi"),i=r.exec(e);return i?i[n]:null}function m(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function g(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function v(n,r){var i=n.parentNode;if(i&&(t.node.isBlock(i)||t.node.isElement(i))&&["TD","TH"].indexOf(i.tagName)<0){var o=n.previousSibling,a=n.nextSibling;o&&i&&"BR"!=o.tagName&&!t.node.isBlock(o)&&!a&&i.textContent.replace(/\u200B/g,"").length>0&&o.textContent.length>0&&!t.node.hasClass(o,"fr-marker")&&(t.el==i&&!a&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(r&&t.selection.save(),n.parentNode.removeChild(n),r&&t.selection.restore()))}}function b(){var e,n=t.selection.element();e=t.node.isBlock(n)?n:t.node.blockParent(n);var r=[];if(e){var i=e.nextSibling,o=e.previousSibling;e&&r.indexOf(e)<0&&r.push(e),o&&t.node.isBlock(o)&&r.indexOf(o)<0&&r.push(o),i&&t.node.isBlock(i)&&r.indexOf(i)<0&&r.push(i)}for(var a=[],s=0;s<r.length;s++)for(var l=r[s].querySelectorAll("br"),c=0;c<l.length;c++)a.indexOf(l[c])<0&&a.push(l[c]);if(n.parentNode==t.el)for(var u=t.el.children,s=0;s<u.length;s++)"BR"==u[s].tagName&&a.indexOf(u[s])<0&&a.push(u[s]);return a}function y(e,n){var r;if(e){r=b();for(var i=0;i<r.length;i++)v(r[i],n)}else{r=t.el.getElementsByTagName("br");for(var i=0;i<r.length;i++)v(r[i],n)}}function E(){t.opts.htmlUntouched||(a(),c()),p(),t.opts.htmlUntouched||(t.spaces.normalize(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.html.cleanBRs()),t.selection.restore(),w(),t.placeholder.refresh()}function w(){t.core.isEmpty()&&(null!=n()?t.el.querySelector(o())||t.el.querySelector(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):t.el.querySelector("*:not(.fr-marker):not(br)")||(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function C(e,t){return h(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function T(n,r){var i=e("<div "+(h(n,"<"+r+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(i.get(0))}function $(e){return h(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function S(n){var r=t.clean.html(n||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var i=C(r,"body")||(r.indexOf("<body")>=0?"":r),o=T(r,"body"),a=C(r,"head")||"<title></title>",s=T(r,"head"),l=e("<div>").append(a).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0)&&this.parentNode.removeChild(this)}).end().html().trim();a=e("<div>").append(a).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"<!--"+this.nodeValue+"-->":["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)>=0?this.outerHTML:""}).toArray().join("");var c=$(r),u=T(r,"html");t.$el.html(l+"\n"+i),t.node.clearAttributes(t.el),t.$el.attr(o),t.$el.addClass("fr-view"),t.$el.attr("spellcheck",t.opts.spellcheck),t.$el.attr("dir",t.opts.direction),t.$head.html(a),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(s),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(u),t.iframe_document.doctype.parentNode.replaceChild(m(c,t.iframe_document),t.iframe_document.doctype)}else t.$el.html(r);var d=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),E(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),d&&t.edit.off(),t.events.trigger("html.set")}function x(e){var t=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,r=/(\.[^\s\+>~\.\[:]+)/g,i=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,o=/(:[\w-]+\([^\)]*\))/gi,a=/(:[^\s\+>~\.\[:]+)/g,s=/([^\s\+>~\.\[:]+)/g;!function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}();var l=100*(e.match(t)||[]).length+10*(e.match(n)||[]).length+10*(e.match(r)||[]).length+10*(e.match(o)||[]).length+10*(e.match(a)||[]).length+(e.match(i)||[]).length;return e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),l+=(e.match(s)||[]).length}function A(e){if(t.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""==e.getAttribute("class")&&e.removeAttribute("class"),e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll('[class=""]'),r=0;r<n.length;r++)n[r].removeAttribute("class")}function _(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var r="";t.events.trigger("html.beforeGet");var i,o=[],a={};if(!t.opts.useClasses&&!n){var s=new RegExp("^"+t.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(i=0;i<t.doc.styleSheets.length;i++){var l,c=0;try{l=t.doc.styleSheets[i].cssRules,t.doc.styleSheets[i].ownerNode&&"STYLE"==t.doc.styleSheets[i].ownerNode.nodeType&&(c=1);
}catch(u){}if(l)for(var d=0,f=l.length;d<f;d++)if(l[d].selectorText&&l[d].style.cssText.length>0){var p,h=l[d].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{p=t.el.querySelectorAll(h)}catch(u){p=[]}for(var m=0;m<p.length;m++){!p[m].getAttribute("fr-original-style")&&p[m].getAttribute("style")?(p[m].setAttribute("fr-original-style",p[m].getAttribute("style")),o.push(p[m])):p[m].getAttribute("fr-original-style")||o.push(p[m]),a[p[m]]||(a[p[m]]={});for(var v=1e3*c+x(l[d].selectorText),b=l[d].style.cssText.split(";"),y=0;y<b.length;y++){var E=b[y].trim().split(":")[0];E.match(s)||(a[p[m]][E]||(a[p[m]][E]=0,(p[m].getAttribute("fr-original-style")||"").indexOf(E+":")>=0&&(a[p[m]][E]=1e4)),v>=a[p[m]][E]&&(a[p[m]][E]=v,b[y].trim().length&&(p[m].style[E.trim()]=b[y].trim().split(":")[1].trim())))}}}}for(i=0;i<o.length;i++)if(o[i].getAttribute("class")&&(o[i].setAttribute("fr-original-class",o[i].getAttribute("class")),o[i].removeAttribute("class")),(o[i].getAttribute("fr-original-style")||"").trim().length>0)for(var w=o[i].getAttribute("fr-original-style").split(";"),m=0;m<w.length;m++)w[m].indexOf(":")>0&&(o[i].style[w[m].split(":")[0].trim()]=w[m].split(":")[1].trim())}if(t.core.isEmpty()?t.opts.fullPage&&(r=g(t.iframe_document),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):("undefined"==typeof e&&(e=!1),t.opts.fullPage?(r=g(t.iframe_document),t.$el.removeClass("fr-view"),r+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>",t.$el.addClass("fr-view")):r=t.$el.html()),!t.opts.useClasses&&!n)for(i=0;i<o.length;i++)o[i].getAttribute("fr-original-class")&&(o[i].setAttribute("class",o[i].getAttribute("fr-original-class")),o[i].removeAttribute("fr-original-class")),o[i].getAttribute("fr-original-style")?(o[i].setAttribute("style",o[i].getAttribute("fr-original-style")),o[i].removeAttribute("fr-original-style")):o[i].removeAttribute("style");t.opts.fullPage&&(r=r.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),r=r.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),r=r.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),r=r.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),r=r.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),r=r.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(r=r.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(r=r.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),r=t.clean.invisibleSpaces(r),r=t.clean.exec(r,A);var C=t.events.chainTrigger("html.get",r);return"string"==typeof C&&(r=C),r=r.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function k(){var n=function(n,r){for(;r&&(r.nodeType==Node.TEXT_NODE||!t.node.isBlock(r))&&!t.node.isElement(r);)r&&r.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(r)+t.node.closeTagString(r)),r=r.parentNode;r&&n.innerHTML==r.innerHTML&&(n.innerHTML=r.outerHTML)},r=function(){var n,r=null;return t.win.getSelection?(n=t.win.getSelection(),n&&n.rangeCount&&(r=n.getRangeAt(0).commonAncestorContainer,r.nodeType!=Node.ELEMENT_NODE&&(r=r.parentNode))):(n=t.doc.selection)&&"Control"!=n.type&&(r=n.createRange().parentElement()),null!=r&&(e.inArray(t.el,e(r).parents())>=0||r==t.el)?r:null},i="";if("undefined"!=typeof t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var o=t.selection.ranges(),a=0;a<o.length;a++){var s=document.createElement("div");s.appendChild(o[a].cloneContents()),n(s,r()),e(s).find(".fr-element").length>0&&(s=t.el),i+=s.innerHTML}}else"undefined"!=typeof t.doc.selection&&"Text"==t.doc.selection.type&&(i=t.doc.selection.createRange().htmlText);return i}function O(e){var n=t.doc.createElement("div");return n.innerHTML=e,null!==n.querySelector(o())}function R(e){var n=t.doc.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function N(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function D(e,n,r){t.selection.isCollapsed()||t.selection.remove();var i;if(i=n?e:t.clean.html(e),i=i.replace(/\r|\n/g," "),e.indexOf('class="fr-marker"')<0&&(i=R(i)),t.core.isEmpty()&&!t.opts.keepFormatOnDelete)t.el.innerHTML=i;else{var o=t.markers.insert();if(o){var a,s=t.node.blockParent(o);if((O(i)||r)&&(a=t.node.deepestParent(o)||s&&"LI"==s.tagName)){var o=t.markers.split();if(!o)return!1;o.outerHTML=i}else o.outerHTML=i}else t.el.innerHTML=t.el.innerHTML+i}E(),t.events.trigger("html.inserted")}function I(n){var r=null;if("undefined"==typeof n&&(r=t.selection.element()),t.opts.keepFormatOnDelete)return!1;var i=r?(r.textContent.match(/\u200B/g)||[]).length-r.querySelectorAll(".fr-marker").length:0,o=(t.el.textContent.match(/\u200B/g)||[]).length-t.el.querySelectorAll(".fr-marker").length;if(o==i)return!1;var a,s;do{s=!1,a=t.el.querySelectorAll("*:not(.fr-marker)");for(var l=0;l<a.length;l++){var c=a[l];if(r!=c){var u=c.textContent;0===c.children.length&&1===u.length&&8203==u.charCodeAt(0)&&(e(c).remove(),s=!0)}}}while(s)}function L(){var e=function(){I(),t.placeholder&&t.placeholder.refresh()};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",w)}return{defaultTag:n,emptyBlocks:r,emptyBlockTagsQuery:i,blockTagsQuery:o,fillEmptyBlocks:d,cleanEmptyTags:a,cleanWhiteTags:I,cleanBlankSpaces:p,blocks:f,getDoctype:g,set:S,get:_,getSelected:k,insert:D,wrap:c,unwrap:u,escapeEntities:N,checkIfEmpty:w,extractNode:C,extractNodeAttrs:T,extractDoctype:$,cleanBRs:y,_init:L}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){n(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$wp.css("overflow","auto")):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function r(){return!!e.$wp&&(n(),void(e.$iframe&&(e.events.on("keyup",t),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t))))}return{_init:r,syncIframe:t,refresh:n}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){function n(e){return i&&i.translation[e]?i.translation[e]:e}function r(){e.FE.LANGUAGE&&(i=e.FE.LANGUAGE[t.opts.language]),i&&i.direction&&(t.opts.direction=i.direction)}var i;return{_init:r,translate:n}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.placeholder=function(t){function n(){t.$placeholder||a();var n=0,r=0,i=0,o=0,s=0,l=0,c=t.node.contents(t.el),u=e(t.selection.element()).css("text-align");if(c.length&&c[0].nodeType==Node.ELEMENT_NODE){var d=e(c[0]);!t.opts.toolbarInline&&t.ready&&(n=t.helpers.getPX(d.css("margin-top")),o=t.helpers.getPX(d.css("padding-top")),r=t.helpers.getPX(d.css("margin-left")),i=t.helpers.getPX(d.css("margin-right")),s=t.helpers.getPX(d.css("padding-left")),l=t.helpers.getPX(d.css("padding-right"))),t.$placeholder.css("font-size",d.css("font-size")),t.$placeholder.css("line-height",d.css("line-height"))}else t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"));t.$wp.addClass("show-placeholder"),t.$placeholder.css({marginTop:Math.max(t.helpers.getPX(t.$el.css("margin-top")),n),paddingTop:Math.max(t.helpers.getPX(t.$el.css("padding-top")),o),paddingLeft:Math.max(t.helpers.getPX(t.$el.css("padding-left")),s),marginLeft:Math.max(t.helpers.getPX(t.$el.css("margin-left")),r),paddingRight:Math.max(t.helpers.getPX(t.$el.css("padding-right")),l),marginRight:Math.max(t.helpers.getPX(t.$el.css("margin-right")),i),textAlign:u}).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||"")),t.$placeholder.html(t.$placeholder.text().replace(/\n/g,"<br>"))}function r(){t.$wp.removeClass("show-placeholder")}function i(){return!t.$wp||t.node.hasClass(t.$wp.get(0),"show-placeholder")}function o(){return!!t.$wp&&void(t.core.isEmpty()?n():r())}function a(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}function s(){return!!t.$wp&&void t.events.on("init input keydown keyup contentChanged initialized",o)}return{_init:s,show:n,hide:r,refresh:o,isVisible:i}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(t){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(t){}}function n(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),o=!1}function r(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),o=!0}function i(){return o}var o=!1;return{on:n,off:r,disableDesign:t,isDisabled:i}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function n(n){if(t.opts.iframe){t.$head.find("style[data-fr-style], link[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+n+"</style>");for(var r=0;r<t.opts.iframeStyleFiles.length;r++){var i=e('<link data-fr-style="true" rel="stylesheet" href="'+t.opts.iframeStyleFiles[r]+'">');i.get(0).addEventListener("load",t.size.syncIframe),t.$head.append(i)}}}function r(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function i(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),r(),t.opts.iframe){t.$iframe.addClass("fr-iframe"),t.$el.addClass("fr-view");for(var e=0;e<t.o_doc.styleSheets.length;e++){var n;try{n=t.o_doc.styleSheets[e].cssRules}catch(i){}if(n)for(var o=0,a=n.length;o<a;o++)!n[o].selectorText||0!==n[o].selectorText.indexOf(".fr-view")&&0!==n[o].selectorText.indexOf(".fr-element")||n[o].style.cssText.length>0&&(0===n[o].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-view/g,"body")+"{"+n[o].style.cssText+"}":t.opts.iframeStyle+=n[o].selectorText.replace(/\.fr-element/g,"body")+"{"+n[o].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")}function o(){return t.node.isEmpty(t.el)}function a(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}function s(e,n){var r=new XMLHttpRequest;r.open(n,e,!0),t.opts.requestWithCredentials&&(r.withCredentials=!0);for(var i in t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,t.opts.requestHeaders[i]);return r}function l(e){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(e),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$el.html(""),t.$wp.html(""),t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(e),t.$el.html(""),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function c(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.el)||t.$el.find("*:focus").length>0}function u(e){if(!e)return!1;var n=e.data("instance");return!!n&&n.id==t.id}function d(){if(e.FE.INSTANCES.push(t),a(),t.$wp){i(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",function(e){if(2==e.button)return!1});try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(n){}}"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",function(){t.$oel.val(t.html.get())}),t.events.on("form.submit",function(){t.$oel.val(t.html.get())}),t.events.on("form.reset",function(){t.html.set(t._original_html)}),t.$oel.val(t.html.get())),t.helpers.isIOS()&&t.events.$on(t.$doc,"selectionchange",function(){t.$doc.get(0).hasFocus()||t.$win.get(0).focus()}),t.events.trigger("init")}return{_init:d,destroy:l,isEmpty:o,getXHR:s,injectStyle:n,hasFocus:c,sameInstance:u}},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function r(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function i(i){var o,a=n(i),s=a.nextSibling,l=a.previousSibling,c=t.html.defaultTag();if(t.node.isEmpty(a,!0)&&s){for(var u="",d="",f=i.parentNode;!t.node.isList(f)&&f.parentNode&&"LI"!==f.parentNode.tagName;)u=t.node.openTagString(f)+u,d+=t.node.closeTagString(f),f=f.parentNode;u=t.node.openTagString(f)+u,d+=t.node.closeTagString(f);var p="";for(p=f.parentNode&&"LI"==f.parentNode.tagName?d+"<li>"+e.FE.MARKERS+"<br>"+u:c?d+"<"+c+">"+e.FE.MARKERS+"<br></"+c+">"+u:d+e.FE.MARKERS+"<br>"+u,e(a).html('<span id="fr-break"></span>');["UL","OL"].indexOf(f.tagName)<0||f.parentNode&&"LI"===f.parentNode.tagName;)f=f.parentNode;var h=t.node.openTagString(f)+e(f).html()+t.node.closeTagString(f);h=h.replace(/<span id="fr-break"><\/span>/g,p),e(f).replaceWith(h),t.$el.find("li:empty").remove()}else l&&s||!t.node.isEmpty(a,!0)?(e(a).before("<li><br></li>"),e(i).remove()):l?(o=r(a),o.parentNode&&"LI"==o.parentNode.tagName?e(o.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(o).after("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(o).after(e.FE.MARKERS+"<br>"),e(a).remove()):(o=r(a),o.parentNode&&"LI"==o.parentNode.tagName?s?e(o.parentNode).before("<li>"+e.FE.MARKERS+"<br></li>"):e(o.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(o).before("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(o).before(e.FE.MARKERS+"<br>"),e(a).remove())}function o(r){for(var i=n(r),o="",a=r,s="",l="";a!=i;){a=a.parentNode;var c="A"==a.tagName&&t.cursor.isAtEnd(r,a)?"fr-to-remove":"";s=t.node.openTagString(e(a).clone().addClass(c).get(0))+s,l=t.node.closeTagString(a)+l}o=l+o+s+e.FE.MARKERS,e(r).replaceWith('<span id="fr-break"></span>');var u=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);u=u.replace(/<span id="fr-break"><\/span>/g,o),e(i).replaceWith(u)}function a(r){for(var i=n(r),o=e.FE.MARKERS,a="",s=r,l=!1;s!=i;){s=s.parentNode;var c="A"==s.tagName&&t.cursor.isAtEnd(r,s)?"fr-to-remove":"";l||s==i||t.node.isBlock(s)||(l=!0,a+=e.FE.INVISIBLE_SPACE),a=t.node.openTagString(e(s).clone().addClass(c).get(0))+a,o+=t.node.closeTagString(s)}var u=a+o;e(r).remove(),e(i).after(u)}function s(i){var o=n(i),a=o.previousSibling;if(a){a=e(a).find(t.html.blockTagsQuery()).get(-1)||a,e(i).replaceWith(e.FE.MARKERS);var s=t.node.contents(a);s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,c=t.node.contents(o)[0];c&&!t.node.isList(c);)l=c.nextSibling,e(a).append(c),c=l;for(a=o.previousSibling;c;)l=c.nextSibling,e(a).append(c),c=l;e(o).remove()}else{var u=r(o);if(e(i).replaceWith(e.FE.MARKERS),u.parentNode&&"LI"==u.parentNode.tagName){var d=u.previousSibling;t.node.isBlock(d)?(e(o).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(d).append(e(o).html())):e(u).before(e(o).html())}else{var f=t.html.defaultTag();f&&0===e(o).find(t.html.blockTagsQuery()).length?e(u).before("<"+f+">"+e(o).html()+"</"+f+">"):e(u).before(e(o).html())}e(o).remove(),0===e(u).find("li").length&&e(u).remove()}}function l(r){var i,o=n(r),a=o.nextSibling;if(a){i=t.node.contents(a),i.length&&"BR"==i[0].tagName&&e(i[0]).remove(),e(a).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==a&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var s,l=r,c=t.node.contents(a)[0];c&&!t.node.isList(c);)s=c.nextSibling,e(l).after(c),l=c,c=s;for(;c;)s=c.nextSibling,e(o).append(c),c=s;e(r).replaceWith(e.FE.MARKERS),e(a).remove()}else{for(var u=o;!u.nextSibling&&u!=t.el;)u=u.parentNode;if(u==t.el)return!1;if(u=u.nextSibling,t.node.isBlock(u))e.FE.NO_DELETE_TAGS.indexOf(u.tagName)<0&&(e(r).replaceWith(e.FE.MARKERS),i=t.node.contents(o),i.length&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),e(o).append(e(u).html()),e(u).remove());else for(i=t.node.contents(o),i.length&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),e(r).replaceWith(e.FE.MARKERS);u&&!t.node.isBlock(u)&&"BR"!=u.tagName;)e(o).append(e(u)),u=u.nextSibling}}return{_startEnter:i,_middleEnter:o,_endEnter:a,_backspace:s,_del:l}},e.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return!!e&&(!!t.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0==e.nextSibling.textContent.replace(/\u200b/g,"").length?n(e.nextSibling):!e.nextSibling&&n(e.parentNode)))}function r(e){return!!e&&(!!t.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0==e.previousSibling.textContent.replace(/\u200b/g,"").length?r(e.previousSibling):!e.previousSibling&&r(e.parentNode)))}function i(e,n){return!!e&&e!=t.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0==e.previousSibling.textContent.replace(/\u200b/g,"").length?i(e.previousSibling,n):!e.previousSibling&&(e.parentNode==n||i(e.parentNode,n)))}function o(e,n){return!!e&&e!=t.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0==e.nextSibling.textContent.replace(/\u200b/g,"").length?o(e.nextSibling,n):!e.nextSibling&&(e.parentNode==n||o(e.parentNode,n)))}function a(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function s(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,i=t.node.deepestParent(n,[],!r);if(i&&"BLOCKQUOTE"==i.tagName){var o=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);o&&o.previousSibling&&(i=o)}if(null!==i){var a,s=i.previousSibling;if(t.node.isBlock(i)&&t.node.isEditable(i)&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isEditable(s))if(t.node.isBlock(s))if(t.node.isEmpty(s)&&!t.node.isList(s))e(s).remove();else{if(t.node.isList(s)&&(s=e(s).find("li:last").get(0)),a=t.node.contents(s),a.length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),"BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[a.length-1]);)s=a[a.length-1],a=t.node.contents(s);else if("BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(a=t.node.contents(i);a.length&&t.node.isBlock(a[0]);)i=a[0],a=t.node.contents(i);e(n).replaceWith(e.FE.MARKERS),e(s).append(t.node.isEmpty(i)?e.FE.MARKERS:i.innerHTML),e(i).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==i.tagName&&s.nodeType==Node.ELEMENT_NODE?e(s).remove():(e(s).after(t.node.isEmpty(i)?"":e(i).html()),e(i).remove(),"BR"==s.tagName&&e(s).remove())}}function l(n){for(var r=n;!r.previousSibling;)if(r=r.parentNode,t.node.isElement(r))return!1;r=r.previousSibling;var i;if(!t.node.isBlock(r)&&t.node.isEditable(r)){for(i=t.node.contents(r);r.nodeType!=Node.TEXT_NODE&&!t.node.isDeletable(r)&&i.length&&t.node.isEditable(r);)r=i[i.length-1],i=t.node.contents(r);if(r.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;var o=r.textContent,a=o.length-1;if(t.opts.tabSpaces&&o.length>=t.opts.tabSpaces){var s=o.substr(o.length-t.opts.tabSpaces,o.length-1);0==s.replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(a=o.length-t.opts.tabSpaces)}r.textContent=o.substring(0,a),r.textContent.length&&55357==r.textContent.charCodeAt(r.textContent.length-1)&&(r.textContent=r.textContent.substr(0,r.textContent.length-1));var l=o.length!=r.textContent.length;0==r.textContent.length?l&&t.opts.keepFormatOnDelete?e(r).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS):2!=r.parentNode.childNodes.length||r.parentNode!=n.parentNode||t.node.isBlock(r.parentNode)||t.node.isElement(r.parentNode)?(e(r).after(e.FE.MARKERS),t.node.isElement(r.parentNode)&&!n.nextSibling&&r.previousSibling&&"BR"==r.previousSibling.tagName&&e(n).after("<br>"),r.parentNode.removeChild(r)):(e(r.parentNode).after(e.FE.MARKERS),e(r.parentNode).remove()):e(r).after(e.FE.MARKERS)}else t.node.isDeletable(r)?(e(r).after(e.FE.MARKERS),e(r).remove()):t.events.trigger("node.remove",[e(r)])!==!1&&(e(r).after(e.FE.MARKERS),e(r).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(r.tagName)<0&&(t.node.isEditable(r)||t.node.isDeletable(r)))if(t.node.isDeletable(r))e(n).replaceWith(e.FE.MARKERS),e(r).remove();else if(t.node.isEmpty(r)&&!t.node.isList(r))e(r).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(r)&&(r=e(r).find("li:last").get(0)),i=t.node.contents(r),i&&"BR"==i[i.length-1].tagName&&e(i[i.length-1]).remove(),i=t.node.contents(r);i&&t.node.isBlock(i[i.length-1]);)r=i[i.length-1],i=t.node.contents(r);e(r).append(e.FE.MARKERS);for(var c=n;!c.previousSibling;)c=c.parentNode;for(;c&&"BR"!==c.tagName&&!t.node.isBlock(c);){var u=c;c=c.nextSibling,e(r).append(u)}c&&"BR"==c.tagName&&e(c).remove(),e(n).remove()}else n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove()}function c(){var o=!1,c=t.markers.insert();if(!c)return!0;for(var u=c.parentNode;u&&!t.node.isElement(u);){if("false"===u.getAttribute("contenteditable"))return e(c).replaceWith(e.FE.MARKERS),t.selection.restore(),!1;if("true"===u.getAttribute("contenteditable"))break;u=u.parentNode}t.el.normalize();var d=c.previousSibling;if(d){var f=d.textContent;f&&f.length&&8203==f.charCodeAt(f.length-1)&&(1==f.length?e(d).remove():(d.textContent=d.textContent.substr(0,f.length-1),d.textContent.length&&55357==d.textContent.charCodeAt(d.textContent.length-1)&&(d.textContent=d.textContent.substr(0,d.textContent.length-1))))}return n(c)?o=l(c):r(c)?a(c)&&i(c,e(c).parents("li:first").get(0))?t.cursorLists._backspace(c):s(c):o=l(c),e(c).remove(),p(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore(),o}function u(n){var r=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,i=t.node.deepestParent(n,[],!r);if(i&&"BLOCKQUOTE"==i.tagName){var o=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);o&&o.nextSibling&&(i=o)}if(null!==i){var a,s=i.nextSibling;if(t.node.isBlock(i)&&(t.node.isEditable(i)||t.node.isDeletable(i))&&s&&e.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(t.node.isDeletable(s))e(s).remove(),e(n).replaceWith(e.FE.MARKERS);else if(t.node.isBlock(s)&&t.node.isEditable(s))if(t.node.isList(s))if(t.node.isEmpty(i,!0))e(i).remove(),e(s).find("li:first").prepend(e.FE.MARKERS);else{var l=e(s).find("li:first");"BLOCKQUOTE"==i.tagName&&(a=t.node.contents(i),a.length&&t.node.isBlock(a[a.length-1])&&(i=a[a.length-1])),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(i).append(t.node.contents(l.get(0))),l.remove(),0===e(s).find("li").length&&e(s).remove())}else{if(a=t.node.contents(s),a.length&&"BR"==a[0].tagName&&e(a[0]).remove(),"BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(a=t.node.contents(i);a.length&&t.node.isBlock(a[a.length-1]);)i=a[a.length-1],a=t.node.contents(i);else if("BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(a=t.node.contents(s);a.length&&t.node.isBlock(a[0]);)s=a[0],a=t.node.contents(s);e(n).replaceWith(e.FE.MARKERS),e(i).append(s.innerHTML),e(s).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);s&&"BR"!==s.tagName&&!t.node.isBlock(s)&&t.node.isEditable(s);){var c=s;s=s.nextSibling,e(i).append(c)}s&&"BR"==s.tagName&&t.node.isEditable(s)&&e(s).remove()}}}function d(r){for(var i=r;!i.nextSibling;)if(i=i.parentNode,t.node.isElement(i))return!1;if(i=i.nextSibling,"BR"==i.tagName&&t.node.isEditable(i))if(i.nextSibling){if(t.node.isBlock(i.nextSibling)&&t.node.isEditable(i.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(i.nextSibling.tagName)<0))return void e(i).remove();i=i.nextSibling,e(i.previousSibling).remove()}}else if(n(i)){if(a(r))t.cursorLists._del(r);else{var o=t.node.deepestParent(i);o&&(e(i).remove(),u(r))}return}var s;if(!t.node.isBlock(i)&&t.node.isEditable(i)){for(s=t.node.contents(i);i.nodeType!=Node.TEXT_NODE&&s.length&&!t.node.isDeletable(i)&&t.node.isEditable(i);)i=s[0],s=t.node.contents(i);i.nodeType==Node.TEXT_NODE?(e(i).before(e.FE.MARKERS),i.textContent.length&&55357==i.textContent.charCodeAt(0)?i.textContent=i.textContent.substring(2,i.textContent.length):i.textContent=i.textContent.substring(1,i.textContent.length)):t.node.isDeletable(i)?(e(i).before(e.FE.MARKERS),e(i).remove()):t.events.trigger("node.remove",[e(i)])!==!1&&(e(i).before(e.FE.MARKERS),e(i).remove()),e(r).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0&&(t.node.isEditable(i)||t.node.isDeletable(i)))if(t.node.isDeletable(i))e(r).replaceWith(e.FE.MARKERS),e(i).remove();else if(t.node.isList(i))r.previousSibling?(e(i).find("li:first").prepend(r),t.cursorLists._backspace(r)):(e(i).find("li:first").prepend(e.FE.MARKERS),e(r).remove());else if(s=t.node.contents(i),s&&"BR"==s[0].tagName&&e(s[0]).remove(),s&&"BLOCKQUOTE"==i.tagName){var l=s[0];for(e(r).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var c=l;l=l.nextSibling,e(r).before(c)}l&&"BR"==l.tagName&&e(l).remove()}else e(r).after(e(i).html()).after(e.FE.MARKERS),e(i).remove()}function f(){var i=t.markers.insert();if(!i)return!1;if(t.el.normalize(),n(i))if(a(i))if(0===e(i).parents("li:first").find("ul, ol").length)t.cursorLists._del(i);else{var o=e(i).parents("li:first").find("ul:first, ol:first").find("li:first");o=o.find(t.html.blockTagsQuery()).get(-1)||o,o.prepend(i),t.cursorLists._backspace(i)}else u(i);else d(r(i)?i:i);e(i).remove(),p(),t.html.fillEmptyBlocks(!0),t.opts.htmlUntouched||(t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}function p(){for(var e=t.el.querySelectorAll("blockquote:empty"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function h(){t.$el.find(".fr-to-remove").each(function(){for(var n=t.node.contents(this),r=0;r<n.length;r++)n[r].nodeType==Node.TEXT_NODE&&(n[r].textContent=n[r].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function m(n,r,i){var a,s=t.node.deepestParent(n,[],!i);if(s&&"BLOCKQUOTE"==s.tagName)return o(n,s)?(a=t.html.defaultTag(),a?e(s).after("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(s).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(v(n,r,i),!1);if(null==s)a=t.html.defaultTag(),a&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+a+">"+e.FE.MARKERS+"<br></"+a+">"):e(n).replaceWith((t.node.isEmpty(n.parentNode,!0)?"":"<br/>")+e.FE.MARKERS+"<br/>");else{var l=n,c="";t.node.isBlock(s)&&!r||(c="<br/>");var u="",d="";a=t.html.defaultTag();var f="",p="";a&&t.node.isBlock(s)&&(f="<"+a+">",p="</"+a+">",s.tagName==a.toUpperCase()&&(f=t.node.openTagString(e(s).clone().removeAttr("id").get(0))));do if(l=l.parentNode,!r||l!=s||r&&!t.node.isBlock(s))if(u+=t.node.closeTagString(l),l==s&&t.node.isBlock(s))d=f+d;else{var h="A"==l.tagName&&o(n,l)?"fr-to-remove":"";d=t.node.openTagString(e(l).clone().addClass(h).get(0))+d}while(l!=s);c=u+c+d+(n.parentNode==s&&t.node.isBlock(s)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(s)&&!e(s).find("*:last").is("br")&&e(s).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),s.nextSibling&&!t.node.isBlock(s.nextSibling)||t.node.isBlock(s)||e(s).after("<br>");var m;m=!r&&t.node.isBlock(s)?t.node.openTagString(s)+e(s).html()+p:t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s),m=m.replace(/<span id="fr-break"><\/span>/g,c),e(s).replaceWith(m)}}function g(n,r,a){var s,l=t.node.deepestParent(n,[],!a);if(l&&"TABLE"==l.tagName)return e(l).find("td:first, th:first").prepend(n),g(n,r,a);if(l&&"BLOCKQUOTE"==l.tagName){if(i(n,l))return s=t.html.defaultTag(),s?e(l).before("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(l).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1;o(n,l)?m(n,r,!0):v(n,r,!0)}if(null==l)s=t.html.defaultTag(),s&&t.node.isElement(n.parentNode)?e(n).replaceWith("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(l))if(r)e(n).remove(),e(l).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(l,!0))return m(n,r,a);e(l).before(t.node.openTagString(e(l).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(l))}else e(l).before("<br>");e(n).remove()}}function v(n,r,a){var s=t.node.deepestParent(n,[],!a);if(null==s)t.html.defaultTag()&&n.parentNode===t.el?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):(n.nextSibling&&!t.node.isBlock(n.nextSibling)||e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,c="";"PRE"==s.tagName&&(r=!0),t.node.isBlock(s)&&!r||(c="<br>");var u="",d="";do{var f=l;if(l=l.parentNode,"BLOCKQUOTE"==s.tagName&&t.node.isEmpty(f)&&!t.node.hasClass(f,"fr-marker")&&e(f).find(n).length>0&&e(f).after(n),("BLOCKQUOTE"!=s.tagName||!o(n,l)&&!i(n,l))&&(!r||l!=s||r&&!t.node.isBlock(s))){u+=t.node.closeTagString(l);var p="A"==l.tagName&&o(n,l)?"fr-to-remove":"";d=t.node.openTagString(e(l).clone().addClass(p).removeAttr("id").get(0))+d}}while(l!=s);var h=s==n.parentNode&&t.node.isBlock(s)||n.nextSibling;if("BLOCKQUOTE"==s.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var m=t.html.defaultTag();c=u+c+(m?"<"+m+">":"")+e.FE.MARKERS+"<br>"+(m?"</"+m+">":"")+d;
}else c=u+c+d+(h?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var g=t.node.openTagString(s)+e(s).html()+t.node.closeTagString(s);g=g.replace(/<span id="fr-break"><\/span>/g,c),e(s).replaceWith(g)}}function b(i){var o=t.markers.insert();if(!o)return!0;t.el.normalize();var s=!1;e(o).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(i=!1,s=!0),e(o).parentsUntil(t.$el,"TD, TH").length&&(s=!1),n(o)?!a(o)||i||s?m(o,i,s):t.cursorLists._endEnter(o):r(o)?!a(o)||i||s?g(o,i,s):t.cursorLists._startEnter(o):!a(o)||i||s?v(o,i,s):t.cursorLists._middleEnter(o),h(),t.opts.htmlUntouched||(t.html.fillEmptyBlocks(!0),t.html.cleanEmptyTags(),t.clean.lists()),t.spaces.normalizeAroundCursor(),t.selection.restore()}return{enter:b,backspace:c,del:f,isAtEnd:o,isAtStart:i}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function n(e){t.opts.multiLine?t.helpers.isIOS()||(e.preventDefault(),e.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function r(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function i(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),S=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(),S=!1),t.placeholder.refresh()}function o(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function a(n){var r=t.selection.element();if(!t.helpers.isMobile()&&(t.browser.mozilla||r&&"A"==r.tagName)){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove();var i=t.markers.insert();if(i){var o=i.previousSibling,a=i.nextSibling;!a&&i.parentNode&&"A"==i.parentNode.tagName?(i.parentNode.insertAdjacentHTML("afterend","&nbsp;"+e.FE.MARKERS),i.parentNode.removeChild(i)):(o&&o.nodeType==Node.TEXT_NODE&&1==o.textContent.length&&160==o.textContent.charCodeAt(0)?o.textContent=o.textContent+" ":i.insertAdjacentHTML("beforebegin","&nbsp;"),i.outerHTML=e.FE.MARKERS),t.selection.restore()}}}function s(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!_){var e=t.selection.ranges(0),n=e.startContainer,r=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&r<=n.textContent.length&&r>0&&32==n.textContent.charCodeAt(r-1)&&(t.selection.save(),t.spaces.normalize(),t.selection.restore())}}function l(){t.selection.isFull()&&setTimeout(function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function c(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){t.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var n="",r=0;r<t.opts.tabSpaces;r++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh(),t.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function u(e){_=!1}function d(){return _}function f(s){t.events.disableBlur(),S=!0;var l=s.which;if(16===l)return!0;if(229===l)return _=!0,!0;_=!1;var u=y(l)&&!v(s),d=l==e.FE.KEYCODE.BACKSPACE||l==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||d&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(u||d)){var f=t.html.defaultTag();if(f?t.$el.html("<"+f+">"+e.FE.MARKERS+"<br/></"+f+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),!y(l))return s.preventDefault(),!0}l==e.FE.KEYCODE.ENTER?s.shiftKey?r(s):n(s):l!=e.FE.KEYCODE.BACKSPACE||v(s)||s.altKey?l!=e.FE.KEYCODE.DELETE||v(s)||s.altKey?l==e.FE.KEYCODE.SPACE?a(s):l==e.FE.KEYCODE.TAB?c(s):v(s)||!y(s.which)||t.selection.isCollapsed()||s.ctrlKey||t.selection.remove():t.placeholder.isVisible()?(s.preventDefault(),s.stopPropagation()):o(s):t.placeholder.isVisible()?(s.preventDefault(),s.stopPropagation()):i(s),t.events.enableBlur()}function p(e){for(var n=t.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,t.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);n.nextNode();){var r=n.currentNode;r.textContent=r.textContent.replace(/\u200B/gi,"")}}function h(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-t.helpers.scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+t.helpers.scrollTop()+20)):(n=t.position.getBoundingRect().top,t.opts.toolbarBottom&&(n+=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n+=t.opts.toolbarStickyOffset,n>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.opts.toolbarBottom||(n-=t.opts.toolbarStickyOffset),t.helpers.isIOS()&&(n-=t.helpers.scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n<t.$tb.height()+20&&e(t.o_win).scrollTop(n+t.helpers.scrollTop()-t.$tb.height()-20))}function m(){var n=t.selection.element(),r=t.node.blockParent(n);if(r&&"DIV"==r.tagName&&t.selection.info(r).atStart){var i=t.html.defaultTag();r.previousSibling&&"DIV"!=r.previousSibling.tagName&&i&&"div"!=i&&(t.selection.save(),e(r).replaceWith("<"+i+">"+r.innerHTML+"</"+i+">"),t.selection.restore())}}function g(n){if(t.helpers.isAndroid&&t.browser.mozilla)return!0;if(_)return _=!1,!1;if(!t.selection.isCollapsed())return!0;if(n&&(n.which===e.FE.KEYCODE.META||n.which==e.FE.KEYCODE.CTRL))return!0;if(n&&b(n.which))return!0;n&&n.which==e.FE.KEYCODE.ENTER&&t.helpers.isIOS()&&m(),n&&(n.which==e.FE.KEYCODE.ENTER||n.which==e.FE.KEYCODE.BACKSPACE||n.which>=37&&n.which<=40&&!t.browser.msie)&&(n.which==e.FE.KEYCODE.BACKSPACE&&S||h()),t.html.cleanBRs(!0,!0);var r=function(e){if(!e)return!1;var t=e.innerHTML;return t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""),!!(t&&/\u200B/.test(t)&&t.replace(/\u200B/gi,"").length>0)},i=function(e){var n=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!t.helpers.isIOS()||0===((e.textContent||"").match(n)||[]).length},o=t.selection.element();r(o)&&!t.node.hasClass(o,"fr-marker")&&"IFRAME"!=o.tagName&&i(o)&&(t.selection.save(),p(o),t.selection.restore())}function v(e){if(navigator.userAgent.indexOf("Mac OS X")!=-1){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function b(t){if(t>=e.FE.KEYCODE.ARROW_LEFT&&t<=e.FE.KEYCODE.ARROW_DOWN)return!0}function y(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function E(n){var r=n.which;return!!(v(n)||r>=37&&r<=40||!y(r)&&r!=e.FE.KEYCODE.DELETE&&r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.ENTER)||(x||(A=t.snapshot.get()),clearTimeout(x),void(x=setTimeout(function(){x=null,t.undo.saveStep()},Math.max(250,t.opts.typingTimer))))}function w(e){var n=e.which;return!!(v(e)||n>=37&&n<=40)||void(A&&x&&(t.undo.saveStep(A),A=null))}function C(){x&&(clearTimeout(x),t.undo.saveStep(),A=null)}function T(t){var n=t.which;return v(t)||n==e.FE.KEYCODE.F5}function $(){if(t.events.on("keydown",E),t.events.on("input",s),t.events.on("keyup input",w),t.events.on("keypress",u),t.events.on("keydown",f),t.events.on("keyup",g),t.events.on("html.inserted",g),t.events.on("cut",l),!t.browser.edge&&t.el.msGetInputContext)try{t.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){_=!0}),t.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){_=!1,g()})}catch(e){}}var S,x,A,_=!1;return{_init:$,ctrlKey:v,isCharacter:y,isArrow:b,forceUndo:C,isIME:d,isBrowserAction:T}},e.FE.MODULES.accessibility=function(t){function n(e){if(e&&e.length){e.data("blur-event-set")||e.parents(".fr-popup").length||(t.events.$on(e,"blur",function(n){var r=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;r.events.blurActive()&&r.events.trigger("blur"),r.events.enableBlur()},!0),e.data("blur-event-set",!0));var n=e.parents(".fr-toolbar, .fr-popup").data("instance")||t;n.events.disableBlur(),e.focus(),t.shared.$f_el=e}}function r(e,t){var r=t?"last":"first",i=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[r]();if(i.length)return n(i),!0}function i(e){return e.is("input, textarea")&&a(),t.events.disableBlur(),e.focus(),!0}function o(e,n){var r=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(n?":last":":first");if(r.length)return i(r);if(t.shared.with_kb){var o=e.find(".fr-active-item:visible:first");if(o.length)return i(o);var a=e.find("[tabIndex]:visible:first");if(a.length)return i(a)}}function a(){0===t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save()}function s(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function l(e){var n=e.children().not(".fr-buttons");n.data("mouseenter-event-set")||(t.events.$on(n,"mouseenter","[tabIndex]",function(r){var i=e.data("instance")||t;if(!R)return r.stopPropagation(),void r.preventDefault();var o=n.find(":focus:first");o.length&&!o.is("input, button, textarea")&&(i.events.disableBlur(),o.blur(),i.events.disableBlur(),i.events.focus())}),n.data("mouseenter-event-set",!0)),!o(n)&&t.shared.with_kb&&r(e.find(".fr-buttons"))}function c(e){t.core.hasFocus()||(t.events.disableBlur(),t.events.focus()),t.accessibility.saveSelection(),t.events.disableBlur(),t.$el.blur(),t.selection.clear(),t.events.disableBlur(),t.shared.with_kb?e.find(".fr-command[tabIndex]:first").focus():e.find("[tabIndex]:first").focus()}function u(){var e=t.popups.areVisible();if(e){var n=e.find(".fr-buttons");return n.find("button:focus, .fr-group span:focus").length?!r(e.data("instance").$tb):!r(n)}return!r(t.$tb)}function d(){var e=null;return t.shared.$f_el.is(".fr-dropdown.fr-active")?e=t.shared.$f_el:t.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=t.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function f(i,a,s){if(t.shared.$f_el){var l=d();l&&(t.button.click(l),t.shared.$f_el=l);var c=i.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),u=c.index(t.shared.$f_el);if(0==u&&!s||u==c.length-1&&s){var f;if(a){if(i.parent().is(".fr-popup")){var p=i.parent().children().not(".fr-buttons");f=!o(p,!s)}f===!1&&(t.shared.$f_el=null)}a&&f===!1||r(i,!s)}else n(e(c.get(u+(s?1:-1))));return!1}}function p(e,t){return f(e,t,!0)}function h(e,t){return f(e,t)}function m(e){if(t.shared.$f_el){if(t.shared.$f_el.is(".fr-dropdown.fr-active")){var r;return r=e?t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),n(r),!1}if(t.shared.$f_el.is("a.fr-command")){var r;return r=e?t.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first(),r.length||(r=e?t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():t.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),n(r),!1}}}function g(){return t.shared.$f_el&&t.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?b():m(!0)}function v(){return m()}function b(){if(t.shared.$f_el){if(t.shared.$f_el.hasClass("fr-dropdown"))t.button.click(t.shared.$f_el);else if(t.shared.$f_el.is("button.fr-back")){t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus());var e=t.popups.areVisible(t);e&&(t.shared.with_kb=!1),t.button.click(t.shared.$f_el),S(e)}else{if(t.events.disableBlur(),t.button.click(t.shared.$f_el),t.shared.$f_el.attr("data-popup")){var n=t.popups.areVisible(t);n&&n.data("popup-button",t.shared.$f_el)}else if(t.shared.$f_el.attr("data-modal")){var r=t.modals.areVisible(t);r&&r.data("modal-button",t.shared.$f_el)}t.shared.$f_el=null}return!1}}function y(){t.shared.$f_el&&(t.events.disableBlur(),t.shared.$f_el.blur(),t.shared.$f_el=null),t.events.trigger("toolbar.focusEditor")!==!1&&(t.events.disableBlur(),t.events.focus())}function E(e){if(t.shared.$f_el){var r=d();return r?(t.button.click(r),n(r)):e.parent().find(".fr-back:visible").length?(t.shared.with_kb=!1,t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(e.parent().find(".fr-back:visible:first")),S(e.parent())):t.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(s(t),t.shared.$f_el=null,t.events.trigger("toolbar.esc")!==!1&&(t.popups.hide(e.parent()),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),S(e.parent()))):y()),!1}}function w(n,r){var i=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,o=n.which,a=!1;return o!=e.FE.KEYCODE.TAB||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_RIGHT||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.TAB||i||!n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_LEFT||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_UP||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ARROW_DOWN||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ENTER||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.ESC||i||n.shiftKey||n.altKey?o!=e.FE.KEYCODE.F10||i||n.shiftKey||!n.altKey||(a=u()):a=E(r):a=b():a=g():a=v():a=h(r):a=h(r,!0):a=p(r):a=p(r,!0),t.shared.$f_el||void 0!==a||(a=!0),!a&&t.keys.isBrowserAction(n)&&(a=!0),!!a||(n.preventDefault(),n.stopPropagation(),!1)}function C(n){n&&n.length&&(t.events.$on(n,"keydown",function(r){if(!e(r.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var i=n.parents(".fr-popup").data("instance")||n.data("instance")||t;t.shared.with_kb=!0;var o=i.accessibility.exec(r,n);return t.shared.with_kb=!1,o},!0),t.events.$on(n,"mouseenter","[tabIndex]",function(r){var i=n.parents(".fr-popup").data("instance")||n.data("instance")||t;if(!R)return r.stopPropagation(),void r.preventDefault();var o=e(r.currentTarget);i.shared.$f_el&&i.shared.$f_el.not(o)&&i.accessibility.focusEditor()},!0))}function T(e){var n=t.popups.get(e),r=$(e);C(n.find(".fr-buttons")),t.events.$on(n,"mouseenter","tabIndex",r._tiMouseenter,!0),t.events.$on(n.children().not(".fr-buttons"),"keydown","[tabIndex]",r._tiKeydown,!0),t.popups.onHide(e,function(){s(n.data("instance")||t)}),t.popups.onShow(e,function(){R=!1,setTimeout(function(){R=!0},0)})}function $(n){var i=t.popups.get(n);return{_tiKeydown:function(a){var l=i.data("instance")||t;if(l.events.trigger("popup.tab",[a])===!1)return!1;var c=a.which,u=i.find(":focus:first");if(e.FE.KEYCODE.TAB==c){a.preventDefault();var d=i.children().not(".fr-buttons"),f=d.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),p=f.indexOf(this)+(a.shiftKey?-1:1);if(0<=p&&p<f.length)return l.events.disableBlur(),e(f[p]).focus(),a.stopPropagation(),!1;var h=i.find(".fr-buttons");if(h.length&&r(h,!!a.shiftKey))return a.stopPropagation(),!1;if(o(d))return a.stopPropagation(),!1}else{if(e.FE.KEYCODE.ENTER!=c)return e.FE.KEYCODE.ESC==c?(a.preventDefault(),a.stopPropagation(),s(l),l.popups.isVisible(n)&&i.find(".fr-back:visible").length?(l.opts.toolbarInline&&(l.events.disableBlur(),l.events.focus()),l.button.exec(i.find(".fr-back:visible:first")),S(i)):l.popups.isVisible(n)&&i.find(".fr-dismiss:visible").length?l.button.exec(i.find(".fr-dismiss:visible:first")):(l.popups.hide(n),l.opts.toolbarInline&&l.toolbar.showInline(null,!0),S(i)),!1):e.FE.KEYCODE.SPACE==c&&(u.is(".fr-submit")||u.is(".fr-dismiss"))?(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(u),!0):l.keys.isBrowserAction(a)?void a.stopPropagation():u.is("input[type=text], textarea")?void a.stopPropagation():e.FE.KEYCODE.SPACE==c&&(u.is(".fr-link-attr")||u.is("input[type=file]"))?void a.stopPropagation():(a.stopPropagation(),a.preventDefault(),!1);var m=null;i.find(".fr-submit:visible").length>0?m=i.find(".fr-submit:visible:first"):i.find(".fr-dismiss:visible").length&&(m=i.find(".fr-dismiss:visible:first")),m&&(a.preventDefault(),a.stopPropagation(),l.events.disableBlur(),l.button.exec(m))}},_tiMouseenter:function(e){var n=i.data("instance")||t;_(n)}}}function S(e){var t=e.data("popup-button");t&&setTimeout(function(){n(t),e.data("popup-button",null)},0)}function x(e){var t=e.data("modal-button");t&&setTimeout(function(){n(t),e.data("modal-button",null)},0)}function A(){return null!=t.shared.$f_el}function _(e){var n=t.popups.areVisible(e);n&&n.data("popup-button",null)}function k(n){var r=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,i=n.which;if(i==e.FE.KEYCODE.F10&&!r&&!n.shiftKey&&n.altKey){t.shared.with_kb=!0;var a=t.popups.areVisible(t),s=!1;return a&&(s=o(a.children().not(".fr-buttons"))),s||u(),t.shared.with_kb=!1,n.preventDefault(),n.stopPropagation(),!1}return!0}function O(){t.$wp?t.events.on("keydown",k,!0):t.events.$on(t.$win,"keydown",k,!0),t.events.on("mousedown",function(e){_(t),t.shared.$f_el&&(s(t),e.stopPropagation(),t.events.disableBlur(),t.shared.$f_el=null)},!0),t.events.on("blur",function(e){t.shared.$f_el=null,_(t)},!0)}var R=!0;return{_init:O,registerPopup:T,registerToolbar:C,focusToolbarElement:n,focusToolbar:r,focusContent:o,focusPopup:l,focusModal:c,focusEditor:y,focusPopupButton:S,focusModalButton:x,hasFocus:A,exec:w,saveSelection:a,restoreSelection:s}},e.FE.MODULES.format=function(t){function n(e,t){var n="<"+e;for(var r in t)t.hasOwnProperty(r)&&(n+=" "+r+'="'+t[r]+'"');return n+=">"}function r(e){return"</"+e+">"}function i(e,t){var n=e;for(var r in t)t.hasOwnProperty(r)&&(e+="id"==r?"#"+t[r]:"class"==r?"."+t[r]:"["+r+'="'+t[r]+'"]');return n}function o(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function a(r,i,o){if(r){if(t.node.isBlock(r))return a(r.firstChild,i,o),!1;for(var s=e(n(i,o)).insertBefore(r),l=r;l&&!e(l).is(".fr-marker")&&0==e(l).find(".fr-marker").length;){var c=l;l=l.nextSibling,s.append(c)}if(l)e(l).find(".fr-marker").length&&a(l.firstChild,i,o);else{for(var u=s.get(0).parentNode;u&&!u.nextSibling&&!t.node.isElement(u);)u=u.parentNode;if(u){var d=u.nextSibling;d&&(t.node.isBlock(d)?a(d.firstChild,i,o):a(d,i,o))}}s.is(":empty")&&s.remove()}}function s(s,l){if("undefined"==typeof l&&(l={}),l.style&&delete l.style,t.selection.isCollapsed()){t.markers.insert();var c=t.$el.find(".fr-marker");c.replaceWith(n(s,l)+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+r(s)),t.selection.restore()}else{t.selection.save();var u=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling;a(u,s,l);var d;do d=t.$el.find(i(s,l)+" > "+i(s,l)),d.each(function(){e(this).replaceWith(this.innerHTML)});while(d.length);t.el.normalize();for(var f=t.el.querySelectorAll(".fr-marker"),p=0;p<f.length;p++){var h=e(f[p]);1==h.data("type")?o(h.get(0).nextSibling,i(s,l))&&h.next().prepend(h):o(h.get(0).previousSibling,i(s,l))&&h.prev().append(h)}t.selection.restore()}}function l(e,n,r,a){if(!a){var s=!1;if(e.data("type")===!0)for(;t.node.isFirstSibling(e.get(0))&&!e.parent().is(t.$el);)e.parent().before(e),s=!0;else if(e.data("type")===!1)for(;t.node.isLastSibling(e.get(0))&&!e.parent().is(t.$el);)e.parent().after(e),s=!0;if(s)return!0}if(e.parents(n).length||"undefined"==typeof n){var l="",c="",u=e.parent();if(u.is(t.$el)||t.node.isBlock(u.get(0)))return!1;for(;"undefined"==typeof n&&!t.node.isBlock(u.parent().get(0))||"undefined"!=typeof n&&!o(u.get(0),i(n,r));)l+=t.node.closeTagString(u.get(0)),c=t.node.openTagString(u.get(0))+c,u=u.parent();var d=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var f=u.html().replace(/<span id="mark"><\/span>/,l+t.node.closeTagString(u.get(0))+c+d+l+t.node.openTagString(u.get(0))+c);return u.replaceWith(t.node.openTagString(u.get(0))+f+t.node.closeTagString(u.get(0))),!0}return!1}function c(n,r,a,s){for(var l=t.node.contents(n.get(0)),u=0;u<l.length;u++){var d=l[u];t.node.hasClass(d,"fr-marker")?r=(r+1)%2:r?e(d).find(".fr-marker").length>0?r=c(e(d),r,a,s):(e(e(d).find(a||"*").get().reverse()).each(function(){t.node.isBlock(this)||t.node.isVoid(this)||e(this).replaceWith(this.innerHTML)}),"undefined"==typeof a&&d.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(d)&&!t.node.isBlock(d)||o(d,i(a,s))?e(d).replaceWith(d.innerHTML):"undefined"==typeof a&&d.nodeType==Node.ELEMENT_NODE&&t.node.isBlock(d)&&t.node.clearAttributes(d)):e(d).find(".fr-marker").length>0&&(r=c(e(d),r,a,s))}return r}function u(n,r){"undefined"==typeof r&&(r={}),r.style&&delete r.style;var i=t.selection.isCollapsed();t.selection.save();for(var o=!0;o;){o=!1;for(var a=t.$el.find(".fr-marker"),s=0;s<a.length;s++)if(l(e(a[s]),n,r,i)){o=!0;break}}c(t.$el,0,n,r),i&&t.$el.find(".fr-marker").before(e.FE.INVISIBLE_SPACE).after(e.FE.INVISIBLE_SPACE),t.html.cleanEmptyTags(),t.el.normalize(),t.selection.restore()}function d(e,t){g(e,t)?u(e,t):s(e,t)}function f(t,n){var r=e(t);r.css(n,""),""===r.attr("style")&&r.replaceWith(r.html())}function p(t,n){return 0===e(t).attr("style").indexOf(n+":")||e(t).attr("style").indexOf(";"+n+":")>=0||e(t).attr("style").indexOf("; "+n+":")>=0}function h(n,r){if(t.selection.isCollapsed()){t.markers.insert();var i=t.$el.find(".fr-marker"),o=i.parent();if(t.node.openTagString(o.get(0))=='<span style="'+n+": "+o.css(n)+';">')if(t.node.isEmpty(o.get(0)))o.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");else{var s={};s[n]=r,l(i,"span",s,!0),i=t.$el.find(".fr-marker"),i.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}else t.node.isEmpty(o.get(0))&&o.is("span")?(i.replaceWith(e.FE.MARKERS),o.css(n,r)):i.replaceWith('<span style="'+n+": "+r+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>");t.selection.restore()}else{t.selection.save();for(var c=t.$el.find(".fr-marker"),u=0;u<c.length;u++){var i=e(c[u]);if(i.data("type")===!0)for(;t.node.isFirstSibling(i.get(0))&&!i.parent().is(t.$el);)i.parent().before(i);else for(;t.node.isLastSibling(i.get(0))&&!i.parent().is(t.$el);)i.parent().after(i)}var d=t.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,h={"class":"fr-unprocessed"};for(r&&(h.style=n+": "+r+";"),a(d,"span",h),t.$el.find(".fr-marker + .fr-unprocessed").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-unprocessed + .fr-marker").each(function(){e(this).prev().append(this)});t.$el.find("span.fr-unprocessed").length>0;){var m=t.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(m.parent().get(0).normalize(),m.parent().is("span")&&1==m.parent().get(0).childNodes.length){m.parent().css(n,r);var g=m;m=m.parent(),g.replaceWith(g.html())}for(var v=m.find("span"),u=v.length-1;u>=0;u--)f(v[u],n);var b=m.parentsUntil(t.$el,"span[style]").filter(function(){return p(this,n)});if(b.length){var y="",E="",w="",C="",T=m.get(0);do T=T.parentNode,e(T).addClass("fr-split"),y+=t.node.closeTagString(T),E=t.node.openTagString(e(T).clone().addClass("fr-split").get(0))+E,b.get(0)!=T&&(w+=t.node.closeTagString(T),C=t.node.openTagString(e(T).clone().addClass("fr-split").get(0))+C);while(b.get(0)!=T);var $=y+t.node.openTagString(e(b.get(0)).clone().css(n,r||"").get(0))+C+m.css(n,"").get(0).outerHTML+w+"</span>"+E;m.replaceWith('<span id="fr-break"></span>');var S=b.get(0).outerHTML;e(b.get(0)).replaceWith(S.replace(/<span id="fr-break"><\/span>/g,$))}}for(;t.$el.find(".fr-split:empty").length>0;)t.$el.find(".fr-split:empty").remove();t.$el.find(".fr-split").removeClass("fr-split"),t.$el.find('span[style=""]').removeAttr("style"),t.$el.find('span[class=""]').removeAttr("class"),t.html.cleanEmptyTags(),e(t.$el.find("span").get().reverse()).each(function(){this.attributes&&0!=this.attributes.length||e(this).replaceWith(this.innerHTML)}),t.el.normalize();var x=t.$el.find("span[style] + span[style]");for(u=0;u<x.length;u++){var A=e(x[u]),_=e(x[u]).prev();A.get(0).previousSibling==_.get(0)&&t.node.openTagString(A.get(0))==t.node.openTagString(_.get(0))&&(A.prepend(_.html()),_.remove())}t.el.normalize(),t.selection.restore()}}function m(e){h(e,null)}function g(e,n){"undefined"==typeof n&&(n={}),n.style&&delete n.style;var r=t.selection.ranges(0),a=r.startContainer;a.nodeType==Node.ELEMENT_NODE&&a.childNodes.length>0&&a.childNodes[r.startOffset]&&(a=a.childNodes[r.startOffset]);for(var s=a;s&&s.nodeType==Node.ELEMENT_NODE&&!o(s,i(e,n));)s=s.firstChild;if(s&&s.nodeType==Node.ELEMENT_NODE&&o(s,i(e,n)))return!0;var l=a;for(l&&l.nodeType!=Node.ELEMENT_NODE&&(l=l.parentNode);l&&l.nodeType==Node.ELEMENT_NODE&&l!=t.el&&!o(l,i(e,n));)l=l.parentNode;return!(!l||l.nodeType!=Node.ELEMENT_NODE||l==t.el||!o(l,i(e,n)))}return{is:g,toggle:d,apply:s,remove:u,applyStyle:h,removeStyle:m}},e.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(n,r){if(t.events.trigger("commands.before",e.merge([n],r||[]))!==!1){var i=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||s[n],o=!0,a=!1;e.FE.COMMANDS[n]&&("undefined"!=typeof e.FE.COMMANDS[n].focus&&(o=e.FE.COMMANDS[n].focus),"undefined"!=typeof e.FE.COMMANDS[n].accessibilityFocus&&(a=e.FE.COMMANDS[n].accessibilityFocus)),(!t.core.hasFocus()&&o&&!t.popups.areVisible()||!t.core.hasFocus()&&a&&t.accessibility.hasFocus())&&t.events.focus(!0),e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].undo!==!1&&(t.$el.find(".fr-marker").length&&(t.events.disableBlur(),t.selection.restore()),t.undo.saveStep()),i&&i.apply(t,e.merge([n],r||[])),t.events.trigger("commands.after",e.merge([n],r||[])),e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].undo!==!1&&t.undo.saveStep()}}function r(e,n){t.format.toggle(n)}function i(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),i=0;i<r.length;i++)if("LI"!=r[i].tagName&&"LI"!=r[i].parentNode.tagName){var o=e(r[i]),a="rtl"==t.opts.direction||"rtl"==o.css("direction")?"margin-right":"margin-left",s=t.helpers.getPX(o.css(a));o.css(a,Math.max(s+20*n,0)||""),o.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function o(e){return function(){n(e)}}function a(){t.events.on("keydown",function(e){var n=t.selection.element();if(n&&"HR"==n.tagName&&!t.keys.isArrow(e.which))return e.preventDefault(),!1}),t.events.on("keyup",function(n){var r=t.selection.element();if(r&&"HR"==r.tagName)if(n.which==e.FE.KEYCODE.ARROW_LEFT||n.which==e.FE.KEYCODE.ARROW_UP){if(r.previousSibling)return t.node.isBlock(r.previousSibling)?t.selection.setAtEnd(r.previousSibling):e(r).before(e.FE.MARKERS),t.selection.restore(),!1}else if((n.which==e.FE.KEYCODE.ARROW_RIGHT||n.which==e.FE.KEYCODE.ARROW_DOWN)&&r.nextSibling)return t.node.isBlock(r.nextSibling)?t.selection.setAtStart(r.nextSibling):e(r).after(e.FE.MARKERS),t.selection.restore(),!1}),t.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),t.events.on("mouseup",function(n){var r=t.selection.element(),i=t.selection.endElement();r==i&&r&&"HR"==r.tagName&&(r.nextSibling&&(t.node.isBlock(r.nextSibling)?t.selection.setAtStart(r.nextSibling):e(r).after(e.FE.MARKERS)),t.selection.restore())})}var s={bold:function(){r("bold","strong")},subscript:function(){r("subscript","sub")},superscript:function(){r("superscript","sup")},italic:function(){r("italic","em")},strikeThrough:function(){r("strikeThrough","s")},underline:function(){r("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){i(1)},outdent:function(){i(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove();var e="";t.core.isEmpty()&&(e="<br>",t.html.defaultTag()&&(e="<"+t.html.defaultTag()+">"+e+"</"+t.html.defaultTag()+">")),t.html.insert('<hr id="fr-just">'+e);var n=t.$el.find("hr#fr-just");n.removeAttr("id"),t.selection.setAfter(n.get(0),!1)||t.selection.setBefore(n.get(0),!1),t.selection.restore()},clearFormatting:function(){t.format.remove()},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},l={};for(var c in s)s.hasOwnProperty(c)&&(l[c]=o(c));return e.extend(l,{exec:n,_init:a})},e.FE.MODULES.data=function(e){function t(e){return e}function n(e){if(!e)return e;for(var n="",o=t("charCodeAt"),a=t("fromCharCode"),s=d.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=r(++s),u=e[o](l),f="";/[0-9-]/.test(e[l+1]);)f+=e[++l];f=parseInt(f,10)||0,u=i(u,c,f),u^=s-1&31,n+=String[a](u)}return n}function r(e){for(var t=e.toString(),n=0,r=0;r<t.length;r++)n+=parseInt(t.charAt(r),10);return n>10?n%9+1:n}function i(e,t,n){for(var r=Math.abs(n);r-- >0;)e-=t;return n<0&&(e+=123),e}function o(e){return!(!e||"none"!=e.css("display")||(e.remove(),0))}function a(){return o(c)||o(u)}function s(){return!!e.$box&&(e.$box.append(p(t(p("kTDD4spmKD1klaMB1C7A5RA1G3RA10YA5qhrjuvnmE1D3FD2bcG-7noHE6B2JB4C3xXA8WF6F-10RG2C3G3B-21zZE3C3H3xCA16NC4DC1f1hOF1MB3B-21whzQH5UA2WB10kc1C2F4D3XC2YD4D1C4F3GF2eJ2lfcD-13HF1IE1TC11TC7WE4TA4d1A2YA6XA4d1A3yCG2qmB-13GF4A1B1KH1HD2fzfbeQC3TD9VE4wd1H2A20A2B-22ujB3nBG2A13jBC10D3C2HD5D1H1KB11uD-16uWF2D4A3F-7C9D-17c1E4D4B3d1D2CA6B2B-13qlwzJF2NC2C-13E-11ND1A3xqUA8UE6bsrrF-7C-22ia1D2CF2H1E2akCD2OE1HH1dlKA6PA5jcyfzB-22cXB4f1C3qvdiC4gjGG2H2gklC3D-16wJC1UG4dgaWE2D5G4g1I2H3B7vkqrxH1H2EC9C3E4gdgzKF1OA1A5PF5C4WWC3VA6XA4e1E3YA2YA5HE4oGH4F2H2IB10D3D2NC5G1B1qWA9PD6PG5fQA13A10XA4C4A3e1H2BA17kC-22cmOB1lmoA2fyhcptwWA3RA8A-13xB-11nf1I3f1B7GB3aD3pavFC10D5gLF2OG1LSB2D9E7fQC1F4F3wpSB5XD3NkklhhaE-11naKA9BnIA6D1F5bQA3A10c1QC6Kjkvitc2B6BE3AF3E2DA6A4JD2IC1jgA-64MB11D6C4==")))),
c=e.$box.find("> div:last"),u=c.find("> a"),void("rtl"==e.opts.direction&&c.css("left","auto").css("right",0)))}function l(){var n=e.opts.key||[""];"string"==typeof n&&(n=[n]),e.ul=!0;for(var r=0;r<n.length;r++){var i=p(n[r])||"";if(!(i!==p(t(p("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&i.indexOf(f,i.length-f.length)<0&&[p("9qqG-7amjlwq=="),p("KA3B3C2A6D1D5H5H1A3=="),p("QzbzvxyB2yA-9m=="),p("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(f)<0)){e.ul=!1;break}}e.ul===!0&&s(),e.events.on("contentChanged",function(){e.ul===!0&&a()&&s()}),e.events.on("destroy",function(){c&&c.length&&c.remove()},!0)}var c,u,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",f=function(){for(var e=0,t=document.domain,n=t.split("."),r="_gd"+(new Date).getTime();e<n.length-1&&document.cookie.indexOf(r+"="+r)==-1;)t=n.slice(-1-++e).join("."),document.cookie=r+"="+r+";domain="+t+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),p=t(n);return{_init:l}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function n(n){e.FE.copied_html=t.html.getSelected(),e.FE.copied_text=e("<div>").html(e.FE.copied_html).text(),"cut"==n.type&&(t.undo.saveStep(),setTimeout(function(){t.selection.save(),t.html.wrap(),t.selection.restore(),t.events.focus(),t.undo.saveStep()},0))}function r(e){if(h)return!1;if(e.originalEvent&&(e=e.originalEvent),t.events.trigger("paste.before",[e])===!1)return e.preventDefault(),!1;if(d=t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",r=e.clipboardData.types;if(t.helpers.isArray(r))for(var o=0;o<r.length;o++)n+=r[o]+";";else n=r;if(f="",/text\/html/.test(n)?f=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?f=e.clipboardData.getData("text/rtf"):/text\/plain/.test(n)&&!this.browser.mozilla&&(f=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==f)return s(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;f=null}i()}function i(){t.selection.save(),t.events.disableBlur(),f=null,p?p.html(""):(p=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabIndex="-1"></div>'),t.$box.after(p),t.events.on("destroy",function(){p.remove()})),p.focus(),t.win.setTimeout(s,1)}function o(e){e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),e=e.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),e=e.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),e=e.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),e=e.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),e=e.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),e=e.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),e=e.replace(/<!--[\s\S]*?-->/gi,""),e=e.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var n=["style","script","applet","embed","noframes","noscript"],r=0;r<n.length;r++){var i=new RegExp("<"+n[r]+".*?"+n[r]+"(.*?)>","gi");e=e.replace(i,"")}e=e.replace(/&nbsp;/gi," "),e=e.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),e=e.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var o;do o=e,e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(e!=o);e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),e=e.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=t.clean.html(e,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),e=e.replace(/<a>(.[^<]+)<\/a>/gi,"$1"),e=e.replace(/<br> */g,"<br>");var a=t.o_doc.createElement("div");a.innerHTML=e;for(var s=a.querySelectorAll("li[data-indent]"),r=0;r<s.length;r++){var l=s[r],c=l.previousElementSibling;if(c&&"LI"==c.tagName){var u=c.querySelector(":scope > ul, :scope > ol");u||(u=document.createElement("ul"),c.appendChild(u)),u.appendChild(l)}else l.removeAttribute("data-indent")}return t.html.cleanBlankSpaces(a),e=a.innerHTML}function a(e){var n=t.doc.createElement("div");n.innerHTML=e;for(var r=n.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote"),i=0;i<r.length;i++){var o=r[i];o.outerHTML="<"+(t.html.defaultTag()||"DIV")+">"+o.innerHTML+"</"+(t.html.defaultTag()||"DIV")+">"}r=n.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")");for(var i=r.length-1;i>=0;i--){var o=r[i];o.outerHTML=o.innerHTML}var a=function(e){for(var n=t.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.TEXT_NODE&&n[r].nodeType!=Node.ELEMENT_NODE?n[r].parentNode.removeChild(n[r]):a(n[r])};return a(n),n.innerHTML}function s(){t.keys.forceUndo();var n=t.snapshot.get();null===f&&(f=p.get(0).innerHTML,t.selection.restore(),t.events.enableBlur());var r=t.events.chainTrigger("paste.beforeCleanup",f);"string"==typeof r&&(f=r);var i=!1;f.match(/(class=\"?Mso|class=\'?Mso|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi)&&(i=!0),f.indexOf("<body")>=0&&(f=f.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)\s]*<\/body>[.\s\S\w\W<>]*/g,"$1"),f=f.replace(/([^>])\n([^<])/g,"$1 $2"));var s=!1;if(f.indexOf('id="docs-internal-guid')>=0&&(f=f.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1"),s=!0),i)f=f.replace(/^\n*/g,"").replace(/^ /g,""),0===f.indexOf("<colgroup>")&&(f="<table>"+f+"</table>"),f=o(f),f=c(f);else{t.opts.htmlAllowComments=!1,f=t.clean.html(f,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowComments=!0,f=c(f),f=f.replace(/\r|\n|\t/g,"");var u=t.doc.createElement("div");u.innerHTML=f,e.FE.copied_text&&u.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==e.FE.copied_text.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")&&(f=e.FE.copied_html),f=f.replace(/^ */g,"").replace(/ *$/g,"")}if(t.opts.pastePlain&&(f=a(f)),r=t.events.chainTrigger("paste.afterCleanup",f),"string"==typeof r&&(f=r),""!==f){var d=t.o_doc.createElement("div");d.innerHTML=f,t.spaces.normalize(d);for(var h=d.getElementsByTagName("span"),m=0;m<h.length;m++){var g=h[m];0===g.attributes.length&&(g.outerHTML=g.innerHTML)}var v=d.children;if(1==v.length&&["OL","UL"].indexOf(v[0].tagName)>=0&&(v[0].outerHTML=v[0].innerHTML),!s)for(var b=d.getElementsByTagName("br"),m=0;m<b.length;m++){var y=b[m];t.node.isBlock(y.previousSibling)&&y.parentNode.removeChild(y)}if(t.opts.enter==e.FE.ENTER_BR)for(var E=d.querySelectorAll("p, div"),m=0;m<E.length;m++){var w=E[m];w.outerHTML=w.innerHTML+(w.nextSibling&&!t.node.isEmpty(w)?"<br>":"")}else if(t.opts.enter==e.FE.ENTER_DIV)for(var E=d.getElementsByTagName("p"),m=0;m<E.length;m++){var w=E[m];w.outerHTML="<div>"+w.innerHTML+"</div>"}f=d.innerHTML,t.html.insert(f,!0)}l(),t.undo.saveStep(n),t.undo.saveStep()}function l(){t.events.trigger("paste.after")}function c(e){var n=t.o_doc.createElement("div");n.innerHTML=e;for(var r=n.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");r.length;){for(var i=0;i<r.length;i++)r[i].parentNode.removeChild(r[i]);r=n.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var o=n.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div");o.length;){var a=o[o.length-1];if(t.html.defaultTag()&&"div"!=t.html.defaultTag())a.querySelector(t.html.blockTagsQuery())?a.outerHTML=a.innerHTML:a.outerHTML="<"+t.html.defaultTag()+">"+a.innerHTML+"</"+t.html.defaultTag()+">";else{var s=a.querySelectorAll("*");s.length&&"BR"===s[s.length-1].tagName?a.outerHTML=a.innerHTML:a.outerHTML=a.innerHTML+"<br>"}o=n.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div")}for(o=n.querySelectorAll("div:not([style])");o.length;){for(i=0;i<o.length;i++){var l=o[i],c=l.innerHTML.replace(/\u0009/gi,"").trim();l.outerHTML=c}o=n.querySelectorAll("div:not([style])")}return n.innerHTML}function u(){t.events.on("copy",n),t.events.on("cut",n),t.events.on("paste",r),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){h=!1},50),h=!0)},!0),t.events.on("beforepaste",r))}var d,f,p,h=!1;return{_init:u}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:["show","bold","italic","underline","strikeThrough","indent","outdent","undo","redo"],shortcutsHint:!0}),e.FE.SHORTCUTS_MAP={},e.FE.RegisterShortcut=function(t,n,r,i,o,a){e.FE.SHORTCUTS_MAP[(o?"^":"")+(a?"@":"")+t]={cmd:n,val:r,letter:i,shift:o,option:a},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.RegisterShortcut(e.FE.KEYCODE.E,"show",null,"E",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.B,"bold",null,"B",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.I,"italic",null,"I",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.U,"underline",null,"U",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),e.FE.RegisterShortcut(e.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),e.FE.MODULES.shortcuts=function(t){function n(n){if(!t.opts.shortcutsHint)return null;if(!o){o={};for(var r in e.FE.SHORTCUTS_MAP)e.FE.SHORTCUTS_MAP.hasOwnProperty(r)&&t.opts.shortcutsEnabled.indexOf(e.FE.SHORTCUTS_MAP[r].cmd)>=0&&(o[e.FE.SHORTCUTS_MAP[r].cmd+"."+(e.FE.SHORTCUTS_MAP[r].val||"")]={shift:e.FE.SHORTCUTS_MAP[r].shift,option:e.FE.SHORTCUTS_MAP[r].option,letter:e.FE.SHORTCUTS_MAP[r].letter})}var i=o[n];return i?(t.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(i.shift?t.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(i.option?t.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+i.letter:null}function r(n){if(!t.core.hasFocus())return!0;var r=n.which,i=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey;if("keyup"==n.type&&a&&r!=e.FE.KEYCODE.META)return a=!1,!1;"keydown"==n.type&&(a=!1);var o=(n.shiftKey?"^":"")+(n.altKey?"@":"")+r;if(i&&e.FE.SHORTCUTS_MAP[o]){var s=e.FE.SHORTCUTS_MAP[o].cmd;if(s&&t.opts.shortcutsEnabled.indexOf(s)>=0){var l,c=e.FE.SHORTCUTS_MAP[o].val;if(s&&!c?l=t.$tb.find('.fr-command[data-cmd="'+s+'"]'):s&&c&&(l=t.$tb.find('.fr-command[data-cmd="'+s+'"][data-param1="'+c+'"]')),l.length)return n.preventDefault(),n.stopPropagation(),l.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&(t.button.exec(l),a=!0),!1;if(s&&t.commands[s])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&(t.commands[s](),a=!0),!1}}}function i(){t.events.on("keydown",r,!0),t.events.on("keyup",r,!0)}var o=null,a=!1;return{_init:i,get:n}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,r=null,i=0;i<t.length;i++){if(r){var o=t[i].nodeType===Node.TEXT_NODE&&""===t[i].textContent,a=r.nodeType===Node.TEXT_NODE&&t[i].nodeType===Node.TEXT_NODE;o||a||n++}if(t[i]==e)return n;r=t[i]}}function n(n){var r=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)r.push(t(n)),n=n.parentNode;return r.reverse()}function r(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function i(e){return{scLoc:n(e.startContainer),scOffset:r(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:r(e.endContainer,e.endOffset)}}function o(){var t={};if(e.events.trigger("snapshot.before"),t.html=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,""),t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),r=0;r<n.length;r++)t.ranges.push(i(n[r]));return e.events.trigger("snapshot.after"),t}function a(t){for(var n=e.el,r=0;r<t.length;r++)n=n.childNodes[t[r]];return n}function s(t,n){try{var r=a(n.scLoc),i=n.scOffset,o=a(n.ecLoc),s=n.ecOffset,l=e.doc.createRange();l.setStart(r,i),l.setEnd(o,s),t.addRange(l)}catch(c){}}function l(t){e.$el.html()!=t.html&&e.$el.html(t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var r=0;r<t.ranges.length;r++)s(n,t.ranges[r])}function c(t,n){return t.html==n.html&&(!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges))}return{get:o,restore:l,equal:c}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which,r=e.keys.ctrlKey(t);r&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){return!(0===e.undo_stack.length||e.undo_index<=1)}function r(){return e.undo_index!=e.undo_stack.length}function i(t){return!(!e.undo_stack||e.undoing||e.el.querySelector(".fr-marker"))&&void("undefined"==typeof t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(o(),e.undo_stack.push(t),e.undo_index++,t.html!=d&&(e.events.trigger("contentChanged"),d=t.html))):(o(),e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++)))}function o(){if(!e.undo_stack||e.undoing)return!1;for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function a(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),d=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function s(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),d=t.html,e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function c(){e.undo_stack=[]}function u(){l(),e.events.on("initialized",function(){d=(e.$wp?e.$el.html():e.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),e.events.on("blur",function(){e.el.querySelector(".fr-dragging")||e.undo.saveStep()}),e.events.on("keydown",t),e.events.on("destroy",c)}var d=null;return{_init:u,run:a,redo:s,canDo:n,canRedo:r,dropRedo:o,reset:l,saveStep:i}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(t){function n(t){var n=null,r=e.FE.ICONS[t];if("undefined"!=typeof r){var i=r.template||e.FE.ICON_DEFAULT_TEMPLATE;i&&(i=e.FE.ICON_TEMPLATES[i])&&(n=i.replace(/\[([a-zA-Z]*)\]/g,function(e,n){return"NAME"==n?r[n]||t:r[n]}))}return n||t}function r(t){var n=e.FE.ICONS[t],r=e.FE.ICON_DEFAULT_TEMPLATE;if("undefined"!=typeof n){var r=n.template||e.FE.ICON_DEFAULT_TEMPLATE;return r}return r}return{create:n,getTemplate:r}},e.extend(e.FE.DEFAULTS,{tooltips:!0}),e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function r(n,r){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||o(),n.removeAttr("title"),t.$tooltip.text(n.data("title")),t.$tooltip.addClass("fr-visible");var i=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;i<0&&(i=0),i+t.$tooltip.outerWidth()>e(t.o_win).width()&&(i=e(t.o_win).width()-t.$tooltip.outerWidth()),"undefined"==typeof r&&(r=t.opts.toolbarBottom);var a=r?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("position",""),t.$tooltip.css("left",i),t.$tooltip.css("top",Math.ceil(a)),"static"!=e(t.o_doc).find("body").css("position")?(t.$tooltip.css("margin-left",-e(t.o_doc).find("body").offset().left),t.$tooltip.css("margin-top",-e(t.o_doc).find("body").offset().top)):(t.$tooltip.css("margin-left",""),t.$tooltip.css("margin-top",""))}function i(i,o,a){t.opts.tooltips&&!t.helpers.isMobile()&&(t.events.$on(i,"mouseenter",o,function(n){t.node.hasClass(n.currentTarget,"fr-disabled")||t.edit.isDisabled()||r(e(n.currentTarget),a)},!0),t.events.$on(i,"mouseleave "+t._mousedown+" "+t._mouseup,o,function(e){n()},!0))}function o(){t.opts.tooltips&&!t.helpers.isMobile()&&(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body").append(t.$tooltip)),t.events.on("shared.destroy",function(){t.$tooltip.html("").removeData().remove(),t.$tooltip=null},!0))}return{hide:n,to:r,bind:i}},e.FE.MODULES.button=function(t){function n(n){var r=n.next(),i=t.node.hasClass(n.get(0),"fr-active"),o=(t.helpers.isMobile(),e(".fr-dropdown.fr-active").not(n)),a=n.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(a.helpers.isIOS()&&!a.el.querySelector(".fr-marker")&&(a.selection.save(),a.selection.clear(),a.selection.restore()),!i){var s=n.data("cmd");r.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].refreshOnShow&&e.FE.COMMANDS[s].refreshOnShow.apply(a,[n,r]),r.css("left",n.offset().left-n.parent().offset().left-("rtl"==t.opts.direction?r.width()-n.outerWidth():0)),t.opts.toolbarBottom?r.css("bottom",t.$tb.height()-n.position().top):r.css("top",n.position().top+n.outerHeight())}n.addClass("fr-blink").toggleClass("fr-active"),n.hasClass("fr-active")?(r.attr("aria-hidden",!1),n.attr("aria-expanded",!0)):(r.attr("aria-hidden",!0),n.attr("aria-expanded",!1)),setTimeout(function(){n.removeClass("fr-blink")},300),r.offset().left+r.outerWidth()>t.$sc.offset().left+t.$sc.outerWidth()&&r.css("margin-left",-(r.offset().left+r.outerWidth()-t.$sc.offset().left-t.$sc.outerWidth())),o.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!=n.parents(".fr-popup").length||t.opts.toolbarInline||(t.node.hasClass(n.get(0),"fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""));var l=r.find("a.fr-command.fr-active");l.length?t.accessibility.focusToolbarElement(l):t.accessibility.focusToolbarElement(n)}function r(t){t.addClass("fr-blink"),setTimeout(function(){t.removeClass("fr-blink")},500);for(var n=t.data("cmd"),r=[];"undefined"!=typeof t.data("param"+(r.length+1));)r.push(t.data("param"+(r.length+1)));var i=e(".fr-dropdown.fr-active");i.length&&(i.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),i.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),t.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(n,r)}function i(e){r(e)}function o(r){var o=r.parents(".fr-popup, .fr-toolbar").data("instance");if(0!=r.parents(".fr-popup").length||r.data("popup")||o.popups.hideAll(),o.popups.areVisible()&&!o.popups.areVisible(o)){for(var a=0;a<e.FE.INSTANCES.length;a++)e.FE.INSTANCES[a]!=o&&e.FE.INSTANCES[a].popups&&e.FE.INSTANCES[a].popups.areVisible()&&e.FE.INSTANCES[a].$el.find(".fr-marker").remove();o.popups.hideAll()}t.node.hasClass(r.get(0),"fr-dropdown")?n(r):(i(r),e.FE.COMMANDS[r.data("cmd")]&&0!=e.FE.COMMANDS[r.data("cmd")].refreshAfterCallback&&o.button.bulkRefresh())}function a(t){var n=e(t.currentTarget);o(n)}function s(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function l(e){e.preventDefault(),e.stopPropagation()}function c(e){if(e.stopPropagation(),!t.helpers.isMobile())return!1}function u(n,r){t.events.bindClick(n,".fr-command:not(.fr-disabled)",a),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",l,!0),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",c,!0);var i=n.get(0).ownerDocument,o="defaultView"in i?i.defaultView:i.parentWindow,u=function(r){(!r||r.type==t._mouseup&&r.target!=e("html").get(0)||"keydown"==r.type&&(t.keys.isCharacter(r.which)&&!t.keys.ctrlKey(r)||r.which==e.FE.KEYCODE.ESC))&&s(n)};t.events.$on(e(o),t._mouseup+" resize keydown",u,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,u,!0),t.node.hasClass(n.get(0),"fr-popup")?e.merge(E,n.find(".fr-btn").toArray()):e.merge(y,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",r)}function d(e,n){var r="";if(n.html)r+="function"==typeof n.html?n.html.call(t):n.html;else{var i=n.options;"function"==typeof i&&(i=i()),r+='<ul class="fr-dropdown-list" role="presentation">';for(var o in i)if(i.hasOwnProperty(o)){var a=t.shortcuts.get(e+"."+o);a=a?'<span class="fr-shortcut">'+a+"</span>":"",r+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+o+'" title="'+i[o]+'">'+t.language.translate(i[o])+"</a></li>"}r+="</ul>"}return r}function f(e,n,r){if(t.helpers.isMobile()&&n.showOnMobile===!1)return"";var i=n.displaySelection;"function"==typeof i&&(i=i(t));var o;if(i){var a="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;o='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+(a||t.language.translate(n.title))+"</span>"}else o=t.icon.create(n.icon||e),o+='<span class="fr-sr-only">'+(t.language.translate(n.title)||"")+"</span>";var s=n.popup?' data-popup="true"':"",l=n.modal?' data-modal="true"':"",c=t.shortcuts.get(e+".");c=c?" ("+c+")":"";var u=e+"-"+t.id,f='<button id="'+u+'"type="button" tabIndex="-1" role="button"'+(n.toggle?' aria-pressed="false"':"")+("dropdown"==n.type?' aria-controls="drop" aria-expanded="false" aria-haspopup="true"':"")+(n.disabled?' aria-disabled="true"':"")+' title="'+(t.language.translate(n.title)||"")+c+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+(" fr-btn-"+t.icon.getTemplate(n.icon))+(n.displaySelection?" fr-selection":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(r?"":" fr-hidden")+'" data-cmd="'+e+'"'+s+l+">"+o+"</button>";if("dropdown"==n.type){var p='<div class="fr-dropdown-menu" role="listbox" aria-labelledby="'+u+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';p+=d(e,n),p+="</div></div></div>",f+=p}return f}function p(n,r){for(var i="",o=0;o<n.length;o++){var a=n[o],s=e.FE.COMMANDS[a];if(!(s&&"undefined"!=typeof s.plugin&&t.opts.pluginsEnabled.indexOf(s.plugin)<0))if(s){var l="undefined"==typeof r||r.indexOf(a)>=0;i+=f(a,s,l)}else"|"==a?i+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==a&&(i+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return i}function h(n){var r,i=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,o=n.data("cmd");t.node.hasClass(n.get(0),"fr-dropdown")?r=n.next():(n.removeClass("fr-active"),n.attr("aria-pressed")&&n.attr("aria-pressed",!1)),e.FE.COMMANDS[o]&&e.FE.COMMANDS[o].refresh?e.FE.COMMANDS[o].refresh.apply(i,[n,r]):t.refresh[o]&&i.refresh[o](n,r)}function m(n){var r=t.$tb?t.$tb.data("instance")||t:t;return 0==t.events.trigger("buttons.refresh")||void setTimeout(function(){for(var i=r.selection.inEditor()&&r.core.hasFocus(),o=0;o<n.length;o++){var a=e(n[o]),s=a.data("cmd");0==a.parents(".fr-popup").length?i||e.FE.COMMANDS[s]&&e.FE.COMMANDS[s].forcedRefresh?r.button.refresh(a):t.node.hasClass(a.get(0),"fr-dropdown")||(a.removeClass("fr-active"),a.attr("aria-pressed")&&a.attr("aria-pressed",!1)):a.parents(".fr-popup").is(":visible")&&r.button.refresh(a)}},0)}function g(){m(y),m(E)}function v(){y=[],E=[]}function b(){t.opts.toolbarInline?t.events.on("toolbar.show",g):(t.events.on("mouseup",g),t.events.on("keyup",g),t.events.on("blur",g),t.events.on("focus",g),t.events.on("contentChanged",g)),t.events.on("shared.destroy",v)}var y=[];(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),y=t.shared.buttons);var E=[];return t.shared.popup_buttons||(t.shared.popup_buttons=[]),E=t.shared.popup_buttons,{_init:b,buildList:p,bindCommands:u,refresh:h,bulkRefresh:g,exec:r,click:o,hideActiveDropdowns:s}},e.FE.MODULES.modals=function(t){function n(e){return p[e]}function r(n,r){var i='<div tabIndex="-1" class="fr-modal'+(t.opts.theme?" "+t.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">',o='<i title="'+t.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i>';return i+='<div class="fr-modal-head">'+n+o+"</div>",i+='<div tabIndex="-1" class="fr-modal-body">'+r+"</div>",i+="</div></div>",e(i)}function i(n,i,o){if(t.shared.$overlay||(t.shared.$overlay=e('<div class="fr-overlay">').appendTo("body")),f=t.shared.$overlay,t.opts.theme&&f.addClass(t.opts.theme+"-theme"),!p[n]){var a=r(i,o);p[n]={$modal:a,$head:a.find(".fr-modal-head"),$body:a.find(".fr-modal-body")},t.helpers.isMobile()||a.addClass("fr-desktop"),a.appendTo("body"),t.events.bindClick(a,"i.fr-modal-close",function(){s(n)}),p[n].$body.css("margin-top",p[n].$head.outerHeight()),t.events.$on(a,"keydown",function(r){var i=r.which;return i==e.FE.KEYCODE.ESC?(s(n),t.accessibility.focusModalButton(a),!1):!(!e(r.currentTarget).is("input[type=text], textarea")&&i!=e.FE.KEYCODE.ARROW_UP&&i!=e.FE.KEYCODE.ARROW_DOWN&&!t.keys.isBrowserAction(r)&&(r.preventDefault(),r.stopPropagation(),1))},!0),s(n)}return p[n]}function o(){for(var e in p){var t=p[e];t&&t.$modal&&t.$modal.removeData().remove()}f&&f.removeData().remove(),p={}}function a(e){if(p[e]){var n=p[e].$modal;n.data("instance",t),n.show(),f.show(),t.$doc.find("body").addClass("prevent-scroll"),t.helpers.isMobile()&&t.$doc.find("body").addClass("fr-mobile"),n.addClass("fr-active"),t.accessibility.focusModal(n)}}function s(e){if(p[e]){var n=p[e].$modal,r=n.data("instance")||t;r.events.enableBlur(),n.hide(),f.hide(),r.$doc.find("body").removeClass("prevent-scroll fr-mobile"),n.removeClass("fr-active"),t.accessibility.restoreSelection(r)}}function l(e){if(p[e]){var n=p[e],r=n.$modal,i=n.$body,o=t.$win.height(),a=r.find(".fr-modal-wrapper"),s=a.outerHeight(!0),l=a.height()-(i.outerHeight(!0)-i.height()),c=o-s+l,u=i.get(0).scrollHeight,d="auto";u>c&&(d=c),i.height(d)}}function c(e){var n;if("string"==typeof e){if(!p[e])return;n=p[e].$modal}else n=e;return n&&t.node.hasClass(n,"fr-active")&&t.core.sameInstance(n)||!1}function u(e){for(var t in p)if(p.hasOwnProperty(t)&&c(t)&&("undefined"==typeof e||p[t].$modal.data("instance")==e))return p[t].$modal;return!1}function d(){t.events.on("shared.destroy",o,!0)}t.shared.modals||(t.shared.modals={});var f,p=t.shared.modals;return{_init:d,get:n,create:i,show:a,hide:s,resize:l,isVisible:c,areVisible:u}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){function n(e,n){n.is(":visible")||(n=t.$sc),n.is(T[e].data("container"))||(T[e].data("container",n),n.append(T[e]))}function r(r,i,s,l){if(a()&&t.$el.find(".fr-marker").length>0?(t.events.disableBlur(),t.selection.restore()):(t.events.disableBlur(),t.events.focus(),t.events.enableBlur()),f([r]),!T[r])return!1;var c=e(".fr-dropdown.fr-active");c.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),c.next().attr("aria-hidden",!0),T[r].data("instance",t),t.$tb&&t.$tb.data("instance",t);var u=T[r].outerWidth(),d=(T[r].outerHeight(),o(r));T[r].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var p=T[r].data("container");t.opts.toolbarInline&&p&&t.$tb&&p.get(0)==t.$tb.get(0)&&(n(r,t.$sc),s=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top")),i=t.$tb.offset().left+t.$tb.outerWidth()/2+(parseFloat(t.$tb.find(".fr-arrow").css("margin-left"))||0)+t.$tb.find(".fr-arrow").outerWidth()/2,t.node.hasClass(t.$tb.get(0),"fr-above")&&s&&(s+=t.$tb.outerHeight()),l=0),p=T[r].data("container"),!t.opts.iframe||l||d||(i&&(i-=t.$iframe.offset().left),s&&(s-=t.$iframe.offset().top)),p.is(t.$tb)?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):T[r].css("zIndex",(t.opts.zIndex||1)+4),i&&(i-=u/2),t.opts.toolbarBottom&&p&&t.$tb&&p.get(0)==t.$tb.get(0)&&(T[r].addClass("fr-above"),s&&(s-=T[r].outerHeight())),T[r].removeClass("fr-active"),t.position.at(i,s,T[r],l||0),T[r].addClass("fr-active"),d||t.accessibility.focusPopup(T[r]),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+r),b(r)._repositionPopup(),h()}function i(e,n){t.events.on("popups.show."+e,n)}function o(e){return T[e]&&t.node.hasClass(T[e],"fr-active")&&t.core.sameInstance(T[e])||!1}function a(e){for(var t in T)if(T.hasOwnProperty(t)&&o(t)&&("undefined"==typeof e||T[t].data("instance")==e))return T[t];return!1}function s(e){var n=null;n="string"!=typeof e?e:T[e],n&&t.node.hasClass(n,"fr-active")&&(n.removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),n.find("input, textarea, button").filter(":focus").blur(),n.find("input, textarea").attr("disabled","disabled"))}function l(e,n){t.events.on("popups.hide."+e,n)}function c(e){var n=T[e];if(n&&!n.data("inst"+t.id)){var r=b(e);y(r,e)}return n}function u(e,n){t.events.on("popups.refresh."+e,n)}function d(n){t.events.trigger("popups.refresh."+n);for(var r=T[n].find(".fr-command"),i=0;i<r.length;i++){var o=e(r[i]);0==o.parents(".fr-dropdown-menu").length&&t.button.refresh(o)}}function f(e){"undefined"==typeof e&&(e=[]);for(var t in T)T.hasOwnProperty(t)&&e.indexOf(t)<0&&s(t)}function p(){t.shared.exit_flag=!0}function h(){t.shared.exit_flag=!1}function m(){return t.shared.exit_flag}function g(n,r){var i=e.FE.POPUP_TEMPLATES[n];"function"==typeof i&&(i=i.apply(t));for(var o in r)r.hasOwnProperty(o)&&(i=i.replace("[_"+o.toUpperCase()+"_]",r[o]));return i}function v(n,r){var i=g(n,r),o=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+i+"</div>");t.opts.theme&&o.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&o.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),o.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var a=e("body");return a.append(o),o.data("container",a),T[n]=o,t.button.bindCommands(o,!1),o}function b(n){var r=T[n];return{_windowResize:function(){var e=r.data("instance")||t;!e.helpers.isMobile()&&r.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(n){var i=r.data("instance")||t,o=e(n.currentTarget);if(o.is("input:file")&&o.closest(".fr-layer").addClass("fr-input-focus"),n.preventDefault(),n.stopPropagation(),setTimeout(function(){i.events.enableBlur()},0),i.helpers.isMobile()){var a=e(i.o_win).scrollTop();
setTimeout(function(){e(i.o_win).scrollTop(a)},0)}},_inputBlur:function(n){var i=r.data("instance")||t,o=e(n.currentTarget);o.is("input:file")&&o.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&e(this).is(":visible")&&(i.events.blurActive()&&i.events.trigger("blur"),i.events.enableBlur())},_editorKeydown:function(i){var a=r.data("instance")||t;a.keys.ctrlKey(i)||i.which==e.FE.KEYCODE.ALT||i.which==e.FE.KEYCODE.ESC||(o(n)&&r.find(".fr-back:visible").length?a.button.exec(r.find(".fr-back:visible:first")):i.which!=e.FE.KEYCODE.ALT&&a.popups.hide(n))},_preventFocus:function(n){var i=r.data("instance")||t;"mouseup"==n.type&&t.button.hideActiveDropdowns(r);var o=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null;"mouseup"==n.type||e(o).is(":focus")||i.events.disableBlur();var a="input, textarea, button, select, label, .fr-command";return o&&!e(o).is(a)&&0===e(o).parents(a).length?(n.stopPropagation(),!1):(o&&e(o).is(a)&&n.stopPropagation(),void h())},_editorMouseup:function(e){r.is(":visible")&&m()&&r.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(r))return!0;var i=r.data("instance")||t;r.is(":visible")&&m()&&(e.stopPropagation(),i.markers.remove(),i.popups.hide(n),h())},_windowKeydown:function(i){if(!t.core.sameInstance(r))return!0;var o=r.data("instance")||t,a=i.which;if(e.FE.KEYCODE.ESC==a){if(o.popups.isVisible(n)&&o.opts.toolbarInline)return i.stopPropagation(),o.popups.isVisible(n)&&(r.find(".fr-back:visible").length?(o.button.exec(r.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?o.button.exec(r.find(".fr-dismiss:visible:first")):(o.popups.hide(n),o.toolbar.showInline(null,!0),o.accessibility.FocusPopupButton(r))),!1;if(o.popups.isVisible(n))return r.find(".fr-back:visible").length?(o.button.exec(r.find(".fr-back:visible:first")),o.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?o.button.exec(r.find(".fr-dismiss:visible:first")):(o.popups.hide(n),o.accessibility.focusPopupButton(r)),!1}},_doPlaceholder:function(t){var n=e(this).next();0==n.length&&e(this).attr("placeholder")&&e(this).after('<label for="'+e(this).attr("id")+'">'+e(this).attr("placeholder")+"</label>"),e(this).toggleClass("fr-not-empty",""!=e(this).val())},_repositionPopup:function(e){if(!t.opts.height&&!t.opts.heightMax||t.opts.toolbarInline)return!0;if(t.$wp&&o(n)&&r.parent().get(0)==t.$sc.get(0)){var i=r.offset().top-t.$wp.offset().top,a=t.$wp.outerHeight();t.node.hasClass(r.get(0),"fr-above")&&(i+=r.outerHeight()),i>a||i<0?r.addClass("fr-hidden"):r.removeClass("fr-hidden")}}}}function y(e,n){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",function(e){a()&&t.markers.remove(),f()}),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+n,e._repositionPopup),t.events.on("window.mouseup",e._windowMouseup,!0),t.events.on("window.keydown",e._windowKeydown,!0),T[n].data("inst"+t.id,!0),t.events.on("destroy",function(){t.core.sameInstance(T[n])&&T[n].removeClass("fr-active").appendTo("body")},!0)}function E(n,r){var i=v(n,r),o=b(n);return y(o,n),t.events.$on(i,"mousedown mouseup touchstart touchend touch","*",o._preventFocus,!0),t.events.$on(i,"focus","input, textarea, button, select",o._inputFocus,!0),t.events.$on(i,"blur","input, textarea, button, select",o._inputBlur,!0),t.accessibility.registerPopup(n),t.events.$on(i,"keydown keyup change input","input, textarea",o._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(i,"touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})},!0),t.events.$on(e(t.o_win),"resize",o._windowResize,!0),i}function w(){for(var e in T)if(T.hasOwnProperty(e)){var t=T[e];t.html("").removeData().remove(),T[e]=null}T=[]}function C(){t.events.on("shared.destroy",w,!0),t.events.on("window.mousedown",p),t.events.on("window.touchmove",h),t.events.on("mousedown",function(e){a()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),p(),t.events.disableBlur())})}t.shared.popups||(t.shared.popups={});var T=t.shared.popups;return t.shared.exit_flag=!1,{_init:C,create:E,get:c,show:r,hide:s,onHide:l,hideAll:f,setContainer:n,refresh:d,onRefresh:u,onShow:i,isVisible:o,areVisible:a}},e.FE.MODULES.position=function(t){function n(){var e=t.selection.ranges(0),n=e.getBoundingClientRect();if(0==n.top&&0==n.left&&0==n.width||0==n.height){var r=!1;0==t.$el.find(".fr-marker").length&&(t.selection.save(),r=!0);var i=t.$el.find(".fr-marker:first");i.css("display","inline"),i.css("line-height","");var o=i.offset(),a=i.outerHeight();i.css("display","none"),i.css("line-height",0),n={},n.left=o.left,n.width=0,n.height=a,n.top=o.top-(t.helpers.isMobile()?0:t.helpers.scrollTop()),n.right=1,n.bottom=1,n.ok=!0,r&&t.selection.restore()}return n}function r(e,n,r){var i=e.get(0).offsetHeight;if(!t.helpers.isMobile()&&t.$tb&&e.parent().get(0)!=t.$tb.get(0)){var o=(e.get(0).parentNode.clientHeight-20-(t.opts.toolbarBottom?t.$tb.get(0).offsetHeight:0),e.parent().offset().top),a=n-i-(r||0);e.parent().get(0)==t.$sc.get(0)&&(o-=e.parent().position().top);var s=t.$sc.get(0).scrollHeight;o+n+i>t.$sc.offset().top+s&&e.parent().offset().top+a>0?(n=a,e.addClass("fr-above")):e.removeClass("fr-above")}return n}function i(e,n){var r=e.get(0).offsetWidth;return n+r>t.$sc.get(0).clientWidth-10&&(n=t.$sc.get(0).clientWidth-r-10),n<0&&(n=10),n}function o(e){var r=n();e.css({top:0,left:0});var i=r.top+r.height,o=r.left+r.width/2-e.get(0).offsetWidth/2+t.helpers.scrollLeft();t.opts.iframe||(i+=t.helpers.scrollTop()),a(o,i,e,r.height)}function a(e,n,o,a){var s=o.data("container");!s||"BODY"===s.get(0).tagName&&"static"==s.css("position")||(e&&(e-=s.offset().left),n&&(n-=s.offset().top),"BODY"!=s.get(0).tagName?(e&&(e+=s.get(0).scrollLeft),n&&(n+=s.get(0).scrollTop)):"absolute"==s.css("position")&&(e&&(e+=s.position().left),n&&(n+=s.position().top))),t.opts.iframe&&s&&t.$tb&&s.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var l=i(o,e);if(e){o.css("left",l);var c=o.data("fr-arrow");c||(c=o.find(".fr-arrow"),o.data("fr-arrow",c)),c.data("margin-left")||c.data("margin-left",t.helpers.getPX(c.css("margin-left"))),c.css("margin-left",e-l+c.data("margin-left"))}n&&o.css("top",r(o,n,a))}function s(n){var r=e(n),i=r.is(".fr-sticky-on"),o=r.data("sticky-top"),a=r.data("sticky-scheduled");if("undefined"==typeof o){r.data("sticky-top",0);var s=e('<div class="fr-sticky-dummy" style="height: '+r.outerHeight()+'px;"></div>');t.$box.prepend(s)}else t.$box.find(".fr-sticky-dummy").css("height",r.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=t.helpers.scrollTop(),c=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());c!=o&&c!=a&&(clearTimeout(r.data("sticky-timeout")),r.data("sticky-scheduled",c),r.outerHeight()<l-t.$tb.parent().offset().top&&r.addClass("fr-opacity-0"),r.data("sticky-timeout",setTimeout(function(){var e=t.helpers.scrollTop(),n=Math.min(Math.max(e-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-r.outerHeight());n>0&&"BODY"==t.$tb.parent().get(0).tagName&&(n+=t.$tb.parent().position().top),n!=o&&(r.css("top",Math.max(n,0)),r.data("sticky-top",n),r.data("sticky-scheduled",n)),r.removeClass("fr-opacity-0")},100))),i||(r.css("top","0"),r.width(t.$tb.parent().width()),r.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(n).css("sticky-timeout")),r.css("top","0"),r.css("position",""),r.width(""),r.data("sticky-top",0),r.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function l(n){if(n.offsetWidth){var r,i,o=e(n),a=o.outerHeight(),s=o.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),c=0,u=0;"body"!==t.opts.scrollableContainer&&(c=t.$sc.offset().top,u=e(t.o_win).outerHeight()-c-l);var d="body"==t.opts.scrollableContainer?t.helpers.scrollTop():c,f=o.is(".fr-sticky-on");o.data("sticky-parent")||o.data("sticky-parent",o.parent());var p=o.data("sticky-parent"),h=p.offset().top,m=p.outerHeight();if(o.data("sticky-offset")||(o.data("sticky-offset",!0),o.after('<div class="fr-sticky-dummy" style="height: '+a+'px;"></div>')),!s){var g="auto"!==o.css("top")||"auto"!==o.css("bottom");g||o.css("position","fixed"),s={top:t.node.hasClass(o.get(0),"fr-top"),bottom:t.node.hasClass(o.get(0),"fr-bottom")},g||o.css("position",""),o.data("sticky-position",s),o.data("top",t.node.hasClass(o.get(0),"fr-top")?o.css("top"):"auto"),o.data("bottom",t.node.hasClass(o.get(0),"fr-bottom")?o.css("bottom"):"auto")}var v=function(){return h<d+r&&h+m-a>=d+r},b=function(){return h+a<d+l-i&&h+m>d+l-i};r=t.helpers.getPX(o.data("top")),i=t.helpers.getPX(o.data("bottom"));var y=s.top&&v(),E=s.bottom&&b();y||E?(o.css("width",p.width()+"px"),f||(o.addClass("fr-sticky-on"),o.removeClass("fr-sticky-off"),o.css("top")&&("auto"!=o.data("top")?o.css("top",t.helpers.getPX(o.data("top"))+c):o.data("top","auto")),o.css("bottom")&&("auto"!=o.data("bottom")?o.css("bottom",t.helpers.getPX(o.data("bottom"))+u):o.css("bottom","auto")))):t.node.hasClass(o.get(0),"fr-sticky-off")||(o.width(""),o.removeClass("fr-sticky-on"),o.addClass("fr-sticky-off"),o.css("top")&&"auto"!=o.data("top")&&s.top&&o.css("top",0),o.css("bottom")&&"auto"!=o.data("bottom")&&s.bottom&&o.css("bottom",0))}}function c(){var e=document.createElement("test"),n=e.style;return n.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",n.position.indexOf("sticky")!==-1&&!t.helpers.isIOS()&&!t.helpers.isAndroid()}function u(){if(!c())if(t._stickyElements=[],t.helpers.isIOS()){var n=function(){t.helpers.requestAnimationFrame()(n);for(var e=0;e<t._stickyElements.length;e++)s(t._stickyElements[e])};n(),t.events.$on(e(t.o_win),"scroll",function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var r=e(t._stickyElements[n]),i=r.parent(),o=t.helpers.scrollTop();r.outerHeight()<o-i.offset().top&&(r.addClass("fr-opacity-0"),r.data("sticky-top",-1),r.data("sticky-scheduled",-1))}},!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",d,!0),t.events.$on(e(t.o_win),"resize",d,!0),t.events.on("initialized",d),t.events.on("focus",d),t.events.$on(e(t.o_win),"resize","textarea",d,!0);t.events.on("destroy",function(e){t._stickyElements=[]})}function d(){if(t._stickyElements)for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])}function f(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),c()||t._stickyElements.push(e.get(0))}function p(){u()}return{_init:p,forSelection:o,addSticky:f,refresh:d,at:a,getBoundingRect:n}},e.FE.MODULES.refresh=function(t){function n(e){a(e,!t.undo.canDo())}function r(e){a(e,!t.undo.canRedo())}function i(e){if(t.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var n=t.selection.blocks(),r=0;r<n.length;r++){for(var i=n[r].previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.previousSibling;if("LI"!=n[r].tagName||i)return a(e,!1),!0;a(e,!0)}}function o(n){if(t.node.hasClass(n.get(0),"fr-no-refresh"))return!1;for(var r=t.selection.blocks(),i=0;i<r.length;i++){var o="rtl"==t.opts.direction||"rtl"==e(r[i]).css("direction")?"margin-right":"margin-left";if("LI"==r[i].tagName||"LI"==r[i].parentNode.tagName)return a(n,!1),!0;if(t.helpers.getPX(e(r[i]).css(o))>0)return a(n,!1),!0}a(n,!0)}function a(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:n,redo:r,outdent:o,indent:i}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(t){function n(){var e='<div id="fr-text-edit-'+t.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+t.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>",n={edit:e};t.popups.create("text.edit",n)}function r(){var n,r=t.popups.get("text.edit");n="INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder"):t.$el.text(),r.find("input").val(n).trigger("change"),t.popups.setContainer("text.edit",e("body")),t.popups.show("text.edit",t.$el.offset().left+t.$el.outerWidth()/2,t.$el.offset().top+t.$el.outerHeight(),t.$el.outerHeight())}function i(){t.events.$on(t.$el,t._mouseup,function(e){setTimeout(function(){r()},10)})}function o(){var e=t.popups.get("text.edit"),n=e.find("input").val();0==n.length&&(n=t.opts.placeholderText),"INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder",n):t.$el.text(n),t.events.trigger("contentChanged"),t.popups.hide("text.edit")}function a(){t.opts.editInPopup&&(n(),i())}return{_init:a,update:o}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","print","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","specialCharacters","color","emoticons","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","selectAll","html","applyFormat","removeFormat","help"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:["fullscreen","bold","italic","underline","fontFamily","fontSize","color","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting"],toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function r(){var r=e.merge([],i());n(r,t.opts.toolbarButtonsXS||[]),n(r,t.opts.toolbarButtonsSM||[]),n(r,t.opts.toolbarButtonsMD||[]),n(r,t.opts.toolbarButtons);for(var o=r.length-1;o>=0;o--)"-"!=r[o]&&"|"!=r[o]&&r.indexOf(r[o])<o&&r.splice(o,1);var a=t.button.buildList(r,i());t.$tb.append(a),t.button.bindCommands(t.$tb)}function i(){var e=t.helpers.screenSize();return w[e]}function o(){var e=i();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var r=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),o=null;t.node.hasClass(r.next().get(0),"fr-dropdown-menu")&&(o=r.next()),r.removeClass("fr-hidden").appendTo(t.$tb),o&&o.appendTo(t.$tb)}}function a(){t.events.$on(e(t.o_win),"resize",o),t.events.$on(e(t.o_win),"orientationchange",o)}function s(n,r){setTimeout(function(){if(n&&n.which==e.FE.KEYCODE.ESC);else if(t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection||!t.selection.isCollapsed()&&!t.keys.isIME()||r)){if(t.$tb.data("instance",t),0==t.events.trigger("toolbar.show",[n]))return!1;t.$tb.show(),t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.opts.zIndex>1?t.$tb.css("z-index",t.opts.zIndex+1):t.$tb.css("z-index",null)}},0)}function l(n){var r=e(".fr-dropdown.fr-active");return!!r.next().find(t.o_doc.activeElement).length||void(t.events.trigger("toolbar.hide")!==!1&&t.$tb.hide())}function c(){return 0!=t.events.trigger("toolbar.show")&&void t.$tb.show()}function u(n){clearTimeout(C),n&&n.which==e.FE.KEYCODE.ESC||(C=setTimeout(s,t.opts.typingTimer))}function d(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",s),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",s),t.browser.mozilla&&setInterval(s,200)):t.events.on("window.keyup",u),t.events.on("keydown",function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()}),t.events.on("keydown",function(t){if(t.which==e.FE.KEYCODE.ALT)return t.stopPropagation(),!1},!0),t.events.$on(t.$wp,"scroll.toolbar",s),t.events.on("commands.after",s),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",u),t.events.$on(t.$doc,"orientationchange",s))}function f(){t.opts.toolbarInline?(t.$sc.append(t.$tb),t.$tb.data("container",t.$sc),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),d(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function p(){t.$tb.html("").removeData().remove(),t.$tb=null}function h(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function m(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(d(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):f(),y=t.$tb.get(0).ownerDocument,E="defaultView"in y?y.defaultView:y.parentWindow,r(),a(),t.accessibility.registerToolbar(t.$tb),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,function(e){var n=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(n&&"INPUT"!=n.tagName&&!t.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}function g(){return t.$sc=e(t.opts.scrollableContainer),!!t.$wp&&(t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&d()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),m(),t.$tb.data("instance",t)),t.opts.toolbarInline?t.$box.addClass("fr-inline"):t.$box.addClass("fr-basic"),t.events.on("focus",function(){t.$tb.data("instance",t)},!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,d()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,m())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),m(),t.$tb.data("instance",t)),t.events.on("destroy",h,!0),void t.events.on(t.opts.toolbarInline||t.opts.toolbarContainer?"shared.destroy":"destroy",p,!0))}function v(){!T&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),T=!0)}function b(){T&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),T=!1),t.button.bulkRefresh()}var y,E,w=[];w[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,w[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,w[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,w[e.FE.LG]=t.opts.toolbarButtons;var C=null,T=!1;return{_init:g,hide:l,show:c,showInline:s,disable:v,enable:b}},e.FE.PLUGINS.align=function(t){function n(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),i=0;i<r.length;i++)t.helpers.getAlignment(e(r[i].parentNode))==n?e(r[i]).css("text-align","").removeClass("fr-temp-div"):e(r[i]).css("text-align",n).removeClass("fr-temp-div"),""===e(r[i]).attr("class")&&e(r[i]).removeAttr("class"),""===e(r[i]).attr("style")&&e(r[i]).removeAttr("style");t.selection.save(),t.html.unwrap(),t.selection.restore()}function r(n){var r=t.selection.blocks();if(r.length){var i=t.helpers.getAlignment(e(r[0]));n.find("> *:first").replaceWith(t.icon.create("align-"+i))}}function i(n,r){var i=t.selection.blocks();if(i.length){var o=t.helpers.getAlignment(e(i[0]));r.find('a.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:n,refresh:r,refreshOnShow:i}},e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.align.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),e.extend(e.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.FE.PLUGINS.charCounter=function(t){function n(){return t.el.textContent.length}function r(e){if(t.opts.charCounterMax<0)return!0;if(n()<t.opts.charCounterMax)return!0;var r=e.which;return!(!t.keys.ctrlKey(e)&&t.keys.isCharacter(r)&&(e.preventDefault(),e.stopPropagation(),t.events.trigger("charCounter.exceeded"),1))}function i(r){if(t.opts.charCounterMax<0)return r;var i=e("<div>").html(r).text().length;return i+n()<=t.opts.charCounterMax?r:(t.events.trigger("charCounter.exceeded"),"")}function o(){if(t.opts.charCounterCount){var e=n()+(t.opts.charCounterMax>0?"/"+t.opts.charCounterMax:"");s.text(e),t.opts.toolbarBottom&&s.css("margin-bottom",t.$tb.outerHeight(!0));var r=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;r>=0&&("rtl"==t.opts.direction?s.css("margin-left",r):s.css("margin-right",r))}}function a(){return!!t.$wp&&!!t.opts.charCounterCount&&(s=e('<span class="fr-counter"></span>'),s.css("bottom",t.$wp.css("border-bottom-width")),t.$box.append(s),t.events.on("keydown",r,!0),t.events.on("paste.afterCleanup",i),t.events.on("keyup contentChanged input",function(){t.events.trigger("charCounter.update")}),t.events.on("charCounter.update",o),t.events.trigger("charCounter.update"),void t.events.on("destroy",function(){e(t.o_win).off("resize.char"+t.id),s.removeData().remove(),s=null}))}var s;return{_init:a,count:n}},e.FE.PLUGINS.codeBeautifier=function(){function e(e,n){function r(e){return e.replace(/^\s+/g,"")}function i(e){return e.replace(/\s+$/g,"")}function a(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:E,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;e++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)h&&"\n"==e&&this.newlines<=m&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(g){var n=this.input.substr(this.pos,3);if("{{#"==n||"{{/"==n)break;if("{{!"==n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input),i=r?r.index:this.input.length;return this.pos<i&&(t=this.input.substring(this.pos,i),this.pos=i),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,r,i="",o=[],a="",s=!1,l=!0,c=this.pos,d=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=c,this.line_char_count=d),o.length?o.join(""):["","TK_EOF"];if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace))s=!0;else{if("'"!=i&&'"'!=i||(i+=this.get_unformatted(i),s=!0),"="==i&&(s=!1),o.length&&"="!=o[o.length-1]&&">"!=i&&s){if(this.space_or_wrap(o),s=!1,!l&&"force"==v&&"/"!=i){this.print_newline(!0,o),this.print_indentation(o);for(var f=0;f<b;f++)o.push(u)}for(var h=0;h<o.length;h++)if(" "==o[h]){l=!1;break}}if(g&&"<"==r&&i+this.input.charAt(this.pos)=="{{"&&(i+=this.get_unformatted("}}"),o.length&&" "!=o[o.length-1]&&"<"!=o[o.length-1]&&(i=" "+i),s=!0),"<"!=i||r||(t=this.pos-1,r="<"),g&&!r&&o.length>=2&&"{"==o[o.length-1]&&"{"==o[o.length-2]&&(t="#"==i||"/"==i||"!"==i?this.pos-3:this.pos-2,r="{"),this.line_char_count++,o.push(i),o[1]&&("!"==o[1]||"?"==o[1]||"%"==o[1])){o=[this.get_comment(t)];break}if(g&&o[1]&&"{"==o[1]&&o[2]&&"!"==o[2]){o=[this.get_comment(t)];break}if(g&&"{"==r&&o.length>2&&"}"==o[o.length-2]&&"}"==o[o.length-1])break}}while(">"!=i);var m,y,E=o.join("");m=E.indexOf(" ")!=-1?E.indexOf(" "):"{"==E[0]?E.indexOf("}"):E.indexOf(">"),y="<"!=E[0]&&g?"#"==E[2]?3:2:1;var w=E.substring(y,m).toLowerCase();return"/"==E.charAt(E.length-2)||this.Utils.in_array(w,this.Utils.single_token)?e||(this.tag_type="SINGLE"):g&&"{"==E[0]&&"else"==w?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(w,p)?(a=this.get_unformatted("</"+w+">",E),o.push(a),n=this.pos-1,this.tag_type="SINGLE"):"script"==w&&(E.search("type")==-1||E.search("type")>-1&&E.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?e||(this.record_tag(w),this.tag_type="SCRIPT"):"style"==w&&(E.search("type")==-1||E.search("type")>-1&&E.search("text/css")>-1)?e||(this.record_tag(w),this.tag_type="STYLE"):"!"==w.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==w.charAt(0)?(this.retrieve_tag(w.substring(1)),this.tag_type="END"):(this.record_tag(w),"html"!=w.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(o),this.Utils.in_array(w,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=c,this.line_char_count=d),o.join("")},this.get_comment=function(e){var t="",n=">",r=!1;this.pos=e;var i=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(t+=i,t[t.length-1]!=n[n.length-1]||t.indexOf(n)==-1);)!r&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",r=!0):0===t.indexOf("<![cdata[")?(n="]]>",r=!0):0===t.indexOf("<![")?(n="]>",r=!0):0===t.indexOf("<!--")?(n="-->",r=!0):0===t.indexOf("{{!")?(n="}}",r=!0):0===t.indexOf("<?")?(n="?>",r=!0):0===t.indexOf("<%")&&(n="%>",r=!0)),i=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&t.toLowerCase().indexOf(e)!=-1)return"";var n="",r="",i=0,o=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"==n||"\r"==n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,o=!0,g&&"{"==n&&r.length&&"{"==r[r.length-2]&&(r+=this.get_unformatted("}}"),i=r.length)}while(r.toLowerCase().indexOf(e,i)==-1);return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"==this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"==this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=this.get_tag(!0),r=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(r&&!this.Utils.in_array(r,t))},this.printer=function(e,t,n,o,a){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=a,this.indent_level=0,this.wrap_line_length=o,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=i(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=r(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=i(e)),e&&""!==e&&(e.length>1&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var s,l,c,u,d,f,p,h,m,g,v,b,y,E;for(n=n||{},void 0!==n.wrap_line_length&&0!==parseInt(n.wrap_line_length,10)||void 0===n.max_char||0===parseInt(n.max_char,10)||(n.wrap_line_length=n.max_char),l=void 0!==n.indent_inner_html&&n.indent_inner_html,c=void 0===n.indent_size?4:parseInt(n.indent_size,10),u=void 0===n.indent_char?" ":n.indent_char,f=void 0===n.brace_style?"collapse":n.brace_style,d=0===parseInt(n.wrap_line_length,10)?32786:parseInt(n.wrap_line_length||250,10),p=n.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],
h=void 0===n.preserve_newlines||n.preserve_newlines,m=h?isNaN(parseInt(n.max_preserve_newlines,10))?32786:parseInt(n.max_preserve_newlines,10):0,g=void 0!==n.indent_handlebars&&n.indent_handlebars,v=void 0===n.wrap_attributes?"auto":n.wrap_attributes,b=void 0===n.wrap_attributes_indent_size?c:parseInt(n.wrap_attributes_indent_size,10)||c,y=void 0!==n.end_with_newline&&n.end_with_newline,E=Array.isArray(n.extra_liners)?n.extra_liners.concat():"string"==typeof n.extra_liners?n.extra_liners.split(","):"head,body,/html".split(","),n.indent_with_tabs&&(u="\t",c=1),s=new a,s.printer(e,u,c,d,f);;){var w=s.get_token();if(s.token_text=w[0],s.token_type=w[1],"TK_EOF"==s.token_type)break;switch(s.token_type){case"TK_TAG_START":s.print_newline(!1,s.output),s.print_token(s.token_text),s.indent_content&&(s.indent(),s.indent_content=!1),s.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==s.last_token&&""===s.last_text){var C=s.token_text.match(/\w+/)[0],T=null;s.output.length&&(T=s.output[s.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==T||T[1]!=C&&!s.Utils.in_array(T[1],p))&&s.print_newline(!1,s.output)}s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var $=s.token_text.match(/^\s*<([a-z-]+)/i);$&&s.Utils.in_array($[1],p)||s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":s.print_token(s.token_text),s.indent_content&&(s.indent(),s.indent_content=!1),s.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":s.print_token(s.token_text),s.current_mode="TAG";break;case"TK_CONTENT":s.print_token(s.token_text),s.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==s.token_text){s.print_newline(!1,s.output);var S,x=s.token_text,A=1;"TK_SCRIPT"==s.token_type?S="function"==typeof o&&o:"TK_STYLE"==s.token_type&&(S="function"==typeof t&&t),"keep"==n.indent_scripts?A=0:"separate"==n.indent_scripts&&(A=-s.indent_level);var _=s.get_full_indent(A);if(S)x=S(x.replace(/^\s*/,_),n);else{var k=x.match(/^\s*/)[0],O=k.match(/[^\n\r]*$/)[0].split(s.indent_string).length-1,R=s.get_full_indent(A-O);x=x.replace(/^\s*/,_).replace(/\r\n|\r|\n/g,"\n"+R).replace(/\s+$/,"")}x&&(s.print_token_raw(x),s.print_newline(!0,s.output))}s.current_mode="TAG";break;default:""!==s.token_text&&s.print_token(s.token_text)}s.last_token=s.token_type,s.last_text=s.token_text}var N=s.output.join("").replace(/[\r\n\t ]+$/,"");return y&&(N+="\n"),N}function t(e,t){function n(){return w=e.charAt(++T),w||""}function r(t){var r="",i=T;return t&&a(),r=e.charAt(T+1)||"",T=i-1,n(),r}function i(t){for(var r=T;n();)if("\\"===w)n();else{if(t.indexOf(w)!==-1)break;if("\n"===w)break}return e.substring(r,T+1)}function o(e){var t=T,r=i(e);return T=t-1,n(),r}function a(){for(var e="";C.test(r());)n(),e+=w;return e}function s(){var e="";for(w&&C.test(w)&&(e=w);C.test(n());)e+=w;return e}function l(t){var i=T;for(t="/"===r(),n();n();){if(!t&&"*"===w&&"/"===r()){n();break}if(t&&"\n"===w)return e.substring(i,T)}return e.substring(i,T)+w}function c(t){return e.substring(T-t.length,T).toLowerCase()===t}function u(){for(var t=0,n=T+1;n<e.length;n++){var r=e.charAt(n);if("{"===r)return!0;if("("===r)t+=1;else if(")"===r){if(0==t)return!1;t-=1}else if(";"===r||"}"===r)return!1}return!1}function d(){A++,S+=x}function f(){A--,S=S.slice(0,-m)}var p={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},h={"@media":!0,"@supports":!0,"@document":!0};t=t||{},e=e||"",e=e.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var m=t.indent_size||4,g=t.indent_char||" ",v=void 0===t.selector_separator_newline||t.selector_separator_newline,b=void 0!==t.end_with_newline&&t.end_with_newline,y=void 0===t.newline_between_rules||t.newline_between_rules,E=t.eol?t.eol:"\n";"string"==typeof m&&(m=parseInt(m,10)),t.indent_with_tabs&&(g="\t",m=1),E=E.replace(/\\r/,"\r").replace(/\\n/,"\n");var w,C=/^\s+$/,T=-1,$=0,S=e.match(/^[\t ]*/)[0],x=new Array(m+1).join(g),A=0,_=0,k={};k["{"]=function(e){k.singleSpace(),O.push(e),k.newLine()},k["}"]=function(e){k.newLine(),O.push(e),k.newLine()},k._lastCharWhitespace=function(){return C.test(O[O.length-1])},k.newLine=function(e){O.length&&(e||"\n"===O[O.length-1]||k.trim(),O.push("\n"),S&&O.push(S))},k.singleSpace=function(){O.length&&!k._lastCharWhitespace()&&O.push(" ")},k.preserveSingleSpace=function(){M&&k.singleSpace()},k.trim=function(){for(;k._lastCharWhitespace();)O.pop()};for(var O=[],R=!1,N=!1,D=!1,I="",L="";;){var F=s(),M=""!==F,P=F.indexOf("\n")!==-1;if(L=I,I=w,!w)break;if("/"===w&&"*"===r()){var B=0===A;(P||B)&&k.newLine(),O.push(l()),k.newLine(),B&&k.newLine(!0)}else if("/"===w&&"/"===r())P||"{"===L||k.trim(),k.singleSpace(),O.push(l()),k.newLine();else if("@"===w){k.preserveSingleSpace(),O.push(w);var U=o(": ,;{}()[]/='\"");U.match(/[ :]$/)&&(n(),U=i(": ").replace(/\s$/,""),O.push(U),k.singleSpace()),U=U.replace(/\s$/,""),U in p&&(_+=1,U in h&&(D=!0))}else"#"===w&&"{"===r()?(k.preserveSingleSpace(),O.push(i("}"))):"{"===w?"}"===r(!0)?(a(),n(),k.singleSpace(),O.push("{}"),k.newLine(),y&&0===A&&k.newLine(!0)):(d(),k["{"](w),D?(D=!1,R=A>_):R=A>=_):"}"===w?(f(),k["}"](w),R=!1,N=!1,_&&_--,y&&0===A&&k.newLine(!0)):":"===w?(a(),!R&&!D||c("&")||u()?":"===r()?(n(),O.push("::")):O.push(":"):(N=!0,O.push(":"),k.singleSpace())):'"'===w||"'"===w?(k.preserveSingleSpace(),O.push(i(w))):";"===w?(N=!1,O.push(w),k.newLine()):"("===w?c("url")?(O.push(w),a(),n()&&(")"!==w&&'"'!==w&&"'"!==w?O.push(i(")")):T--)):($++,k.preserveSingleSpace(),O.push(w),a()):")"===w?(O.push(w),$--):","===w?(O.push(w),a(),v&&!N&&$<1?k.newLine():k.singleSpace()):"]"===w?O.push(w):"["===w?(k.preserveSingleSpace(),O.push(w)):"="===w?(a(),w="=",O.push(w)):(k.preserveSingleSpace(),O.push(w))}var j="";return S&&(j+=S),j+=O.join("").replace(/[\r\n\t ]+$/,""),b&&(j+="\n"),"\n"!=E&&(j=j.replace(/[\n]/g,E)),j}function n(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function r(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.replace(/^\s+/g,"")}function o(e,t){var n=new a(e,t);return n.beautify()}function a(e,t){function o(e,t){var n=0;e&&(n=e.indentation_level,!K.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var r={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:K.get_line_number(),ternary_depth:0};return r}function a(e){var t=e.newlines,n=te.keep_array_indentation&&y(X.mode);if(n)for(r=0;r<t;r+=1)p(r>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){p();for(var r=1;r<t;r+=1)p(!0)}q=e,ee[q.type]()}function s(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");n!==-1;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function f(e){if(e=void 0!==e&&e,!K.just_added_newline())if(te.preserve_newlines&&q.wanted_newline||e)p(!1,!0);else if(te.wrap_line_length){var t=K.current_line.get_character_count()+q.text.length+(K.space_before_token?1:0);t>=te.wrap_line_length&&p(!1,!0)}}function p(e,t){if(!t&&";"!==X.last_text&&","!==X.last_text&&"="!==X.last_text&&"TK_OPERATOR"!==Y)for(;X.mode===d.Statement&&!X.if_block&&!X.do_block;)w();K.add_new_line(e)&&(X.multiline_frame=!0)}function h(){K.just_added_newline()&&(te.keep_array_indentation&&y(X.mode)&&q.wanted_newline?(K.current_line.push(q.whitespace_before),K.space_before_token=!1):K.set_indent(X.indentation_level)&&(X.line_indent_level=X.indentation_level))}function m(e){return K.raw?void K.add_raw_token(q):(te.comma_first&&"TK_COMMA"===Y&&K.just_added_newline()&&","===K.previous_line.last()&&(K.previous_line.pop(),h(),K.add_token(","),K.space_before_token=!0),e=e||q.text,h(),void K.add_token(e))}function g(){X.indentation_level+=1}function v(){X.indentation_level>0&&(!X.parent||X.indentation_level>X.parent.indentation_level)&&(X.indentation_level-=1)}function b(e){X?(Z.push(X),Q=X):Q=o(null,e),X=o(Q,e)}function y(e){return e===d.ArrayLiteral}function E(e){return n(e,[d.Expression,d.ForInitializer,d.Conditional])}function w(){Z.length>0&&(Q=X,X=Z.pop(),Q.mode===d.Statement&&K.remove_redundant_indentation(Q))}function C(){return X.parent.mode===d.ObjectLiteral&&X.mode===d.Statement&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===Y&&n(X.last_text,["get","set"]))}function T(){return!!("TK_RESERVED"===Y&&n(X.last_text,["var","let","const"])&&"TK_WORD"===q.type||"TK_RESERVED"===Y&&"do"===X.last_text||"TK_RESERVED"===Y&&"return"===X.last_text&&!q.wanted_newline||"TK_RESERVED"===Y&&"else"===X.last_text&&("TK_RESERVED"!==q.type||"if"!==q.text)||"TK_END_EXPR"===Y&&(Q.mode===d.ForInitializer||Q.mode===d.Conditional)||"TK_WORD"===Y&&X.mode===d.BlockStatement&&!X.in_case&&"--"!==q.text&&"++"!==q.text&&"function"!==V&&"TK_WORD"!==q.type&&"TK_RESERVED"!==q.type||X.mode===d.ObjectLiteral&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===Y&&n(X.last_text,["get","set"])))&&(b(d.Statement),g(),"TK_RESERVED"===Y&&n(X.last_text,["var","let","const"])&&"TK_WORD"===q.type&&(X.declaration_statement=!0),C()||f("TK_RESERVED"===q.type&&n(q.text,["do","for","if","while"])),!0)}function $(e,t){for(var n=0;n<e.length;n++){var i=r(e[n]);if(i.charAt(0)!==t)return!1}return!0}function S(e,t){for(var n,r=0,i=e.length;r<i;r++)if(n=e[r],n&&0!==n.indexOf(t))return!1;return!0}function x(e){return n(e,["case","return","do","if","throw","else"])}function A(e){var t=W+(e||0);return t<0||t>=ne.length?null:ne[t]}function _(){T();var e=d.Expression;if("["===q.text){if("TK_WORD"===Y||")"===X.last_text)return"TK_RESERVED"===Y&&n(X.last_text,z.line_starters)&&(K.space_before_token=!0),b(e),m(),g(),void(te.space_in_paren&&(K.space_before_token=!0));e=d.ArrayLiteral,y(X.mode)&&("["!==X.last_text&&(","!==X.last_text||"]"!==V&&"}"!==V)||te.keep_array_indentation||p())}else"TK_RESERVED"===Y&&"for"===X.last_text?e=d.ForInitializer:"TK_RESERVED"===Y&&n(X.last_text,["if","while"])&&(e=d.Conditional);";"===X.last_text||"TK_START_BLOCK"===Y?p():"TK_END_EXPR"===Y||"TK_START_EXPR"===Y||"TK_END_BLOCK"===Y||"."===X.last_text?f(q.wanted_newline):"TK_RESERVED"===Y&&"("===q.text||"TK_WORD"===Y||"TK_OPERATOR"===Y?"TK_RESERVED"===Y&&("function"===X.last_word||"typeof"===X.last_word)||"*"===X.last_text&&"function"===V?te.space_after_anon_function&&(K.space_before_token=!0):"TK_RESERVED"!==Y||!n(X.last_text,z.line_starters)&&"catch"!==X.last_text||te.space_before_conditional&&(K.space_before_token=!0):K.space_before_token=!0,"("===q.text&&"TK_RESERVED"===Y&&"await"===X.last_word&&(K.space_before_token=!0),"("===q.text&&("TK_EQUALS"!==Y&&"TK_OPERATOR"!==Y||C()||f()),b(e),m(),te.space_in_paren&&(K.space_before_token=!0),g()}function k(){for(;X.mode===d.Statement;)w();X.multiline_frame&&f("]"===q.text&&y(X.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==Y||te.space_in_empty_paren?K.space_before_token=!0:(K.trim(),K.space_before_token=!1)),"]"===q.text&&te.keep_array_indentation?(m(),w()):(w(),m()),K.remove_redundant_indentation(Q),X.do_while&&Q.mode===d.Conditional&&(Q.mode=d.Expression,X.do_block=!1,X.do_while=!1)}function O(){var e=A(1),t=A(2);b(t&&(":"===t.text&&n(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||n(e.text,["get","set"])&&n(t.type,["TK_WORD","TK_RESERVED"]))?n(V,["class","interface"])?d.BlockStatement:d.ObjectLiteral:d.BlockStatement);var r=!e.comments_before.length&&"}"===e.text,i=r&&"function"===X.last_word&&"TK_END_EXPR"===Y;"expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline?"TK_OPERATOR"!==Y&&(i||"TK_EQUALS"===Y||"TK_RESERVED"===Y&&x(X.last_text)&&"else"!==X.last_text)?K.space_before_token=!0:p(!1,!0):"TK_OPERATOR"!==Y&&"TK_START_EXPR"!==Y?"TK_START_BLOCK"===Y?p():K.space_before_token=!0:y(Q.mode)&&","===X.last_text&&("}"===V?K.space_before_token=!0:p()),m(),g()}function R(){for(;X.mode===d.Statement;)w();var e="TK_START_BLOCK"===Y;"expand"===te.brace_style?e||p():e||(y(X.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,p(),te.keep_array_indentation=!0):p()),w(),m()}function N(){if("TK_RESERVED"===q.type&&X.mode!==d.ObjectLiteral&&n(q.text,["set","get"])&&(q.type="TK_WORD"),"TK_RESERVED"===q.type&&X.mode===d.ObjectLiteral){var e=A(1);":"==e.text&&(q.type="TK_WORD")}if(T()||!q.wanted_newline||E(X.mode)||"TK_OPERATOR"===Y&&"--"!==X.last_text&&"++"!==X.last_text||"TK_EQUALS"===Y||!te.preserve_newlines&&"TK_RESERVED"===Y&&n(X.last_text,["var","let","const","set","get"])||p(),X.do_block&&!X.do_while){if("TK_RESERVED"===q.type&&"while"===q.text)return K.space_before_token=!0,m(),K.space_before_token=!0,void(X.do_while=!0);p(),X.do_block=!1}if(X.if_block)if(X.else_block||"TK_RESERVED"!==q.type||"else"!==q.text){for(;X.mode===d.Statement;)w();X.if_block=!1,X.else_block=!1}else X.else_block=!0;if("TK_RESERVED"===q.type&&("case"===q.text||"default"===q.text&&X.in_case_statement))return p(),(X.case_body||te.jslint_happy)&&(v(),X.case_body=!1),m(),X.in_case=!0,void(X.in_case_statement=!0);if("TK_RESERVED"===q.type&&"function"===q.text&&((n(X.last_text,["}",";"])||K.just_added_newline()&&!n(X.last_text,["[","{",":","=",","]))&&(K.just_added_blankline()||q.comments_before.length||(p(),p(!0))),"TK_RESERVED"===Y||"TK_WORD"===Y?"TK_RESERVED"===Y&&n(X.last_text,["get","set","new","return","export","async"])?K.space_before_token=!0:"TK_RESERVED"===Y&&"default"===X.last_text&&"export"===V?K.space_before_token=!0:p():"TK_OPERATOR"===Y||"="===X.last_text?K.space_before_token=!0:(X.multiline_frame||!E(X.mode)&&!y(X.mode))&&p()),"TK_COMMA"!==Y&&"TK_START_EXPR"!==Y&&"TK_EQUALS"!==Y&&"TK_OPERATOR"!==Y||C()||f(),"TK_RESERVED"===q.type&&n(q.text,["function","get","set"]))return m(),void(X.last_word=q.text);if(J="NONE","TK_END_BLOCK"===Y?"TK_RESERVED"===q.type&&n(q.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline?J="NEWLINE":(J="SPACE",K.space_before_token=!0):J="NEWLINE":"TK_SEMICOLON"===Y&&X.mode===d.BlockStatement?J="NEWLINE":"TK_SEMICOLON"===Y&&E(X.mode)?J="SPACE":"TK_STRING"===Y?J="NEWLINE":"TK_RESERVED"===Y||"TK_WORD"===Y||"*"===X.last_text&&"function"===V?J="SPACE":"TK_START_BLOCK"===Y?J="NEWLINE":"TK_END_EXPR"===Y&&(K.space_before_token=!0,J="NEWLINE"),"TK_RESERVED"===q.type&&n(q.text,z.line_starters)&&")"!==X.last_text&&(J="else"===X.last_text||"export"===X.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===q.type&&n(q.text,["else","catch","finally"]))if("TK_END_BLOCK"!==Y||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline)p();else{K.trim(!0);var t=K.current_line;"}"!==t.last()&&p(),K.space_before_token=!0}else"NEWLINE"===J?"TK_RESERVED"===Y&&x(X.last_text)?K.space_before_token=!0:"TK_END_EXPR"!==Y?"TK_START_EXPR"===Y&&"TK_RESERVED"===q.type&&n(q.text,["var","let","const"])||":"===X.last_text||("TK_RESERVED"===q.type&&"if"===q.text&&"else"===X.last_text?K.space_before_token=!0:p()):"TK_RESERVED"===q.type&&n(q.text,z.line_starters)&&")"!==X.last_text&&p():X.multiline_frame&&y(X.mode)&&","===X.last_text&&"}"===V?p():"SPACE"===J&&(K.space_before_token=!0);m(),X.last_word=q.text,"TK_RESERVED"===q.type&&"do"===q.text&&(X.do_block=!0),"TK_RESERVED"===q.type&&"if"===q.text&&(X.if_block=!0)}function D(){for(T()&&(K.space_before_token=!1);X.mode===d.Statement&&!X.if_block&&!X.do_block;)w();m()}function I(){T()?K.space_before_token=!0:"TK_RESERVED"===Y||"TK_WORD"===Y?K.space_before_token=!0:"TK_COMMA"===Y||"TK_START_EXPR"===Y||"TK_EQUALS"===Y||"TK_OPERATOR"===Y?C()||f():p(),m()}function L(){T(),X.declaration_statement&&(X.declaration_assignment=!0),K.space_before_token=!0,m(),K.space_before_token=!0}function F(){return X.declaration_statement?(E(X.parent.mode)&&(X.declaration_assignment=!1),m(),void(X.declaration_assignment?(X.declaration_assignment=!1,p(!1,!0)):(K.space_before_token=!0,te.comma_first&&f()))):(m(),void(X.mode===d.ObjectLiteral||X.mode===d.Statement&&X.parent.mode===d.ObjectLiteral?(X.mode===d.Statement&&w(),p()):(K.space_before_token=!0,te.comma_first&&f())))}function M(){if(T(),"TK_RESERVED"===Y&&x(X.last_text))return K.space_before_token=!0,void m();if("*"===q.text&&"TK_DOT"===Y)return void m();if(":"===q.text&&X.in_case)return X.case_body=!0,g(),m(),p(),void(X.in_case=!1);if("::"===q.text)return void m();"TK_OPERATOR"===Y&&f();var e=!0,t=!0;n(q.text,["--","++","!","~"])||n(q.text,["-","+"])&&(n(Y,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||n(X.last_text,z.line_starters)||","===X.last_text)?(e=!1,t=!1,!q.wanted_newline||"--"!==q.text&&"++"!==q.text||p(!1,!0),";"===X.last_text&&E(X.mode)&&(e=!0),"TK_RESERVED"===Y?e=!0:"TK_END_EXPR"===Y?e=!("]"===X.last_text&&("--"===q.text||"++"===q.text)):"TK_OPERATOR"===Y&&(e=n(q.text,["--","-","++","+"])&&n(X.last_text,["--","-","++","+"]),n(q.text,["+","-"])&&n(X.last_text,["--","++"])&&(t=!0)),X.mode!==d.BlockStatement&&X.mode!==d.Statement||"{"!==X.last_text&&";"!==X.last_text||p()):":"===q.text?0===X.ternary_depth?e=!1:X.ternary_depth-=1:"?"===q.text?X.ternary_depth+=1:"*"===q.text&&"TK_RESERVED"===Y&&"function"===X.last_text&&(e=!1,t=!1),K.space_before_token=K.space_before_token||e,m(),K.space_before_token=t}function P(){if(K.raw)return K.add_raw_token(q),void(q.directives&&"end"===q.directives.preserve&&(te.test_output_raw||(K.raw=!1)));if(q.directives)return p(!1,!0),m(),"start"===q.directives.preserve&&(K.raw=!0),void p(!1,!0);if(!u.newline.test(q.text)&&!q.wanted_newline)return K.space_before_token=!0,m(),void(K.space_before_token=!0);var e,t=s(q.text),n=!1,r=!1,o=q.whitespace_before,a=o.length;for(p(!1,!0),t.length>1&&($(t.slice(1),"*")?n=!0:S(t.slice(1),o)&&(r=!0)),m(t[0]),e=1;e<t.length;e++)p(!1,!0),n?m(" "+i(t[e])):r&&t[e].length>a?m(t[e].substring(a)):K.add_token(t[e]);p(!1,!0)}function B(){q.wanted_newline?p(!1,!0):K.trim(!0),K.space_before_token=!0,m(),p(!1,!0)}function U(){T(),"TK_RESERVED"===Y&&x(X.last_text)?K.space_before_token=!0:f(")"===X.last_text&&te.break_chained_methods),m()}function j(){m(),"\n"===q.text[q.text.length-1]&&p()}function H(){for(;X.mode===d.Statement;)w()}var K,W,z,q,Y,V,G,X,Q,Z,J,ee,te,ne=[],re="";for(ee={TK_START_EXPR:_,TK_END_EXPR:k,TK_START_BLOCK:O,TK_END_BLOCK:R,TK_WORD:N,TK_RESERVED:N,TK_SEMICOLON:D,TK_STRING:I,TK_EQUALS:L,TK_OPERATOR:M,TK_COMMA:F,TK_BLOCK_COMMENT:P,TK_COMMENT:B,TK_DOT:U,TK_UNKNOWN:j,TK_EOF:H},t=t?t:{},te={},void 0!==t.braces_on_own_line&&(te.brace_style=t.braces_on_own_line?"expand":"collapse"),te.brace_style=t.brace_style?t.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=t.indent_size?parseInt(t.indent_size,10):4,te.indent_char=t.indent_char?t.indent_char:" ",te.eol=t.eol?t.eol:"\n",te.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,te.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,te.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),te.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,te.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,te.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,te.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,te.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,te.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,te.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,te.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),te.e4x=void 0!==t.e4x&&t.e4x,te.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,te.comma_first=void 0!==t.comma_first&&t.comma_first,te.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),t.indent_with_tabs&&(te.indent_char="\t",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),G="";te.indent_size>0;)G+=te.indent_char,te.indent_size-=1;var ie=0;if(e&&e.length){for(;" "===e.charAt(ie)||"\t"===e.charAt(ie);)re+=e.charAt(ie),ie+=1;e=e.substring(ie)}Y="TK_START_BLOCK",V="",K=new l(G,re),K.raw=te.test_output_raw,Z=[],b(d.BlockStatement),this.beautify=function(){var t,n;for(z=new c(e,te,G),ne=z.tokenize(),W=0;t=A();){for(var r=0;r<t.comments_before.length;r++)a(t.comments_before[r]);a(t),V=X.last_text,Y=t.type,X.last_text=t.text,W+=1}return n=K.get_code(),te.end_with_newline&&(n+="\n"),"\n"!=te.eol&&(n=n.replace(/[\n]/g,te.eol)),n}}function s(e){var t=0,n=-1,r=[],i=!0;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length,n=r},this.get_character_count=function(){return t},this.is_empty=function(){return i},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),t+=e.length,i=!1},this.pop=function(){var e=null;return i||(e=r.pop(),t-=e.length,i=0===r.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)r.pop(),t-=1;i=0===r.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=r.join("")),t}}function l(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new s(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==d.ForInitializer&&e.mode!==d.Conditional)for(var t=e.start_line_index,r=n.length;t<r;)n[t].remove_indent(),t++},this.trim=function(r){for(r=void 0!==r&&r,this.current_line.trim(e,t);r&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function c(e,t,i){function o(e){if(!e.match($))return null;var t={};S.lastIndex=0;for(var n=S.exec(e);n;)t[n[1]]=n[2],n=S.exec(e);return t}function a(){var i,a=[];if(m=0,g="",y>=E)return["","TK_EOF"];var $;$=b.length?b[b.length-1]:new f("TK_START_BLOCK","{");var S=e.charAt(y);for(y+=1;n(S,l);){if(u.newline.test(S)?"\n"===S&&"\r"===e.charAt(y-2)||(m+=1,a=[]):a.push(S),y>=E)return["","TK_EOF"];S=e.charAt(y),y+=1}if(a.length&&(g=a.join("")),c.test(S)){var _=!0,k=!0,O=c;for("0"===S&&y<E&&/[Xxo]/.test(e.charAt(y))?(_=!1,k=!1,S+=e.charAt(y),y+=1,O=/[o]/.test(e.charAt(y))?d:p):(S="",y-=1);y<E&&O.test(e.charAt(y));)S+=e.charAt(y),y+=1,_&&y<E&&"."===e.charAt(y)&&(S+=e.charAt(y),y+=1,_=!1),k&&y<E&&/[Ee]/.test(e.charAt(y))&&(S+=e.charAt(y),y+=1,y<E&&/[+-]/.test(e.charAt(y))&&(S+=e.charAt(y),y+=1),k=!1,_=!1);return[S,"TK_WORD"]}if(u.isIdentifierStart(e.charCodeAt(y-1))){if(y<E)for(;u.isIdentifierChar(e.charCodeAt(y))&&(S+=e.charAt(y),y+=1,y!==E););return"TK_DOT"===$.type||"TK_RESERVED"===$.type&&n($.text,["set","get"])||!n(S,w)?[S,"TK_WORD"]:"in"===S?[S,"TK_OPERATOR"]:[S,"TK_RESERVED"]}if("("===S||"["===S)return[S,"TK_START_EXPR"];if(")"===S||"]"===S)return[S,"TK_END_EXPR"];if("{"===S)return[S,"TK_START_BLOCK"];if("}"===S)return[S,"TK_END_BLOCK"];if(";"===S)return[S,"TK_SEMICOLON"];if("/"===S){var R="";if("*"===e.charAt(y)){y+=1,C.lastIndex=y;var N=C.exec(e);R="/*"+N[0],y+=N[0].length;var D=o(R);return D&&"start"===D.ignore&&(x.lastIndex=y,N=x.exec(e),R+=N[0],y+=N[0].length),R=R.replace(u.lineBreak,"\n"),[R,"TK_BLOCK_COMMENT",D]}if("/"===e.charAt(y)){y+=1,T.lastIndex=y;var N=T.exec(e);return R="//"+N[0],y+=N[0].length,[R,"TK_COMMENT"]}}if("`"===S||"'"===S||'"'===S||("/"===S||t.e4x&&"<"===S&&e.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===$.type&&n($.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===$.type&&")"===$.text&&$.parent&&"TK_RESERVED"===$.parent.type&&n($.parent.text,["if","while","for"])||n($.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var I=S,L=!1,F=!1;if(i=S,"/"===I)for(var M=!1;y<E&&(L||M||e.charAt(y)!==I)&&!u.newline.test(e.charAt(y));)i+=e.charAt(y),L?L=!1:(L="\\"===e.charAt(y),"["===e.charAt(y)?M=!0:"]"===e.charAt(y)&&(M=!1)),y+=1;else if(t.e4x&&"<"===I){var P=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,B=e.slice(y-1),U=P.exec(B);if(U&&0===U.index){for(var j=U[2],H=0;U;){var K=!!U[1],W=U[2],z=!!U[U.length-1]||"![CDATA["===W.slice(0,8);if(W!==j||z||(K?--H:++H),H<=0)break;U=P.exec(B)}var q=U?U.index+U[0].length:B.length;return B=B.slice(0,q),y+=q-1,B=B.replace(u.lineBreak,"\n"),[B,"TK_STRING"]}}else for(;y<E&&(L||e.charAt(y)!==I&&("`"===I||!u.newline.test(e.charAt(y))));)(L||"`"===I)&&u.newline.test(e.charAt(y))?("\r"===e.charAt(y)&&"\n"===e.charAt(y+1)&&(y+=1),i+="\n"):i+=e.charAt(y),L?("x"!==e.charAt(y)&&"u"!==e.charAt(y)||(F=!0),L=!1):L="\\"===e.charAt(y),y+=1;if(F&&t.unescape_strings&&(i=s(i)),y<E&&e.charAt(y)===I&&(i+=I,y+=1,"/"===I))for(;y<E&&u.isIdentifierStart(e.charCodeAt(y));)i+=e.charAt(y),y+=1;return[i,"TK_STRING"]}if("#"===S){if(0===b.length&&"!"===e.charAt(y)){for(i=S;y<E&&"\n"!==S;)S=e.charAt(y),i+=S,y+=1;return[r(i)+"\n","TK_UNKNOWN"]}var Y="#";if(y<E&&c.test(e.charAt(y))){do S=e.charAt(y),Y+=S,y+=1;while(y<E&&"#"!==S&&"="!==S);return"#"===S||("["===e.charAt(y)&&"]"===e.charAt(y+1)?(Y+="[]",y+=2):"{"===e.charAt(y)&&"}"===e.charAt(y+1)&&(Y+="{}",y+=2)),[Y,"TK_WORD"]}}if("<"===S&&("?"===e.charAt(y)||"%"===e.charAt(y))){A.lastIndex=y-1;var V=A.exec(e);if(V)return S=V[0],y+=S.length-1,S=S.replace(u.lineBreak,"\n"),[S,"TK_STRING"]}if("<"===S&&"<!--"===e.substring(y-1,y+3)){for(y+=3,S="<!--";!u.newline.test(e.charAt(y))&&y<E;)S+=e.charAt(y),y++;return v=!0,[S,"TK_COMMENT"]}if("-"===S&&v&&"-->"===e.substring(y-1,y+2))return v=!1,y+=2,["-->","TK_COMMENT"];if("."===S)return[S,"TK_DOT"];if(n(S,h)){for(;y<E&&n(S+e.charAt(y),h)&&(S+=e.charAt(y),y+=1,!(y>=E)););return","===S?[S,"TK_COMMA"]:"="===S?[S,"TK_EQUALS"]:[S,"TK_OPERATOR"]}return[S,"TK_UNKNOWN"]}function s(e){for(var t,n=!1,r="",i=0,o="",a=0;n||i<e.length;)if(t=e.charAt(i),i++,n){if(n=!1,"x"===t)o=e.substr(i,2),i+=2;else{if("u"!==t){r+="\\"+t;continue}o=e.substr(i,4),i+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(o,16),a>=0&&a<32){r+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&a<=255)return e;r+=String.fromCharCode(a)}}else"\\"===t?n=!0:r+=t;return r}var l="\n\r\t ".split(""),c=/[0-9]/,d=/[01234567]/,p=/[0123456789abcdefABCDEF]/,h="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var m,g,v,b,y,E,w=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),C=/([\s\S]*?)((?:\*\/)|$)/g,T=/([^\n\r\u2028\u2029]*)/g,$=/\/\* beautify( \w+[:]\w+)+ \*\//g,S=/ (\w+)[:](\w+)/g,x=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,A=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){E=e.length,y=0,v=!1,b=[];for(var t,n,r,i=null,o=[],s=[];!n||"TK_EOF"!==n.type;){for(r=a(),t=new f(r[1],r[0],m,g);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=r[2]),s.push(t),r=a(),t=new f(r[1],r[0],m,g);s.length&&(t.comments_before=s,s=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,o.push(i),i=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&i&&("]"===t.text&&"["===i.text||")"===t.text&&"("===i.text||"}"===t.text&&"{"===i.text)&&(t.parent=i.parent,i=o.pop()),b.push(t),n=t}return b}}var u={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",r=new RegExp("["+t+"]"),i=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||e>=170&&r.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&i.test(String.fromCharCode(e))))}}(u);var d={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},f=function(e,t,n,r,i,o){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=r||"",this.parent=null,this.directives=null};return{run:e}},e.extend(e.FE.DEFAULTS,{codeMirror:!0,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],
brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.FE.PLUGINS.codeView=function(t){function n(){return t.$box.hasClass("fr-code-view")}function r(){return d?d.getValue():u.val()}function i(e){var n=r();t.html.set(n),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function o(n){u||(l(),!d&&t.opts.codeMirror&&"undefined"!=typeof CodeMirror?d=CodeMirror.fromTextArea(u.get(0),t.opts.codeMirrorOptions):t.events.$on(u,"keydown keyup change input",function(){if(t.opts.height)this.removeAttribute("rows");else if(this.rows||(this.rows=1),0===this.value.length)this.rows=1;else{for(this.style.height="auto";this.rows>1&&this.scrollHeight<=this.offsetHeight;)this.rows-=1;for(;this.scrollHeight>this.offsetHeight&&(!t.opts.heightMax||this.offsetHeight<t.opts.heightMax);)this.rows+=1}})),t.undo.saveStep(),t.html.cleanEmptyTags(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.core.isEmpty()||(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var r=t.html.get(!1,!0);t.$el.find("span.fr-tmp").remove(),t.$box.toggleClass("fr-code-view",!0),t.core.hasFocus()&&t.$el.blur(),r=r.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM"),r=r.replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(r=t.codeBeautifier.run(r,t.opts.codeBeautifierOptions));var i,o;if(d){i=r.indexOf("FROALA-SM"),o=r.indexOf("FROALA-EM"),i>o?i=o:o-=9,r=r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"");var a=r.substring(0,i).length-r.substring(0,i).replace(/\n/g,"").length,s=r.substring(0,o).length-r.substring(0,o).replace(/\n/g,"").length;i=r.substring(0,i).length-r.substring(0,r.substring(0,i).lastIndexOf("\n")+1).length,o=r.substring(0,o).length-r.substring(0,r.substring(0,o).lastIndexOf("\n")+1).length,d.setSize(null,t.opts.height?t.opts.height:"auto"),t.opts.heightMin&&t.$box.find(".CodeMirror-scroll").css("min-height",t.opts.heightMin),d.setValue(r),d.focus(),d.setSelection({line:a,ch:i},{line:s,ch:o}),d.refresh(),d.clearHistory()}else{i=r.indexOf("FROALA-SM"),o=r.indexOf("FROALA-EM")-9,t.opts.heightMin&&u.css("min-height",t.opts.heightMin),t.opts.height&&u.css("height",t.opts.height),t.opts.heightMax&&u.css("max-height",t.opts.height||t.opts.heightMax),u.val(r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var c=e(t.o_doc).scrollTop();u.focus(),u.get(0).setSelectionRange(i,o),e(t.o_doc).scrollTop(c)}t.$tb.find(" > .fr-command").not(n).filter(function(){return t.opts.codeViewKeepActiveButtons.indexOf(e(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),n.addClass("fr-active").attr("aria-pressed",!0),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function a(e){"undefined"==typeof e&&(e=!n());var r=t.$tb.find('.fr-command[data-cmd="html"]');e?(t.popups.hideAll(),o(r)):(t.$box.toggleClass("fr-code-view",!1),i(r))}function s(){n()&&a(t.$tb.find('button[data-cmd="html"]')),d&&d.toTextArea(),u.val("").removeData().remove(),u=null,f&&(f.remove(),f=null)}function l(){u=e('<textarea class="fr-code" tabIndex="-1">'),t.$wp.append(u),u.attr("dir",t.opts.direction),t.$box.hasClass("fr-basic")||(f=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(f),t.events.bindClick(t.$box,"a.html-switch",function(){a(!1)}));var i=function(){return!n()};t.events.on("buttons.refresh",i),t.events.on("copy",i,!0),t.events.on("cut",i,!0),t.events.on("paste",i,!0),t.events.on("destroy",s,!0),t.events.on("html.set",function(){n()&&a(!0)}),t.events.on("form.submit",function(){n()&&(t.html.set(r()),t.events.trigger("contentChanged",[],!0))},!0)}function c(){if(!t.$wp)return!1}var u,d,f;return{_init:c,toggle:a,isActive:n,get:r}},e.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.FE.DefineIcon("html",{NAME:"code"}),e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),n=t.popups.get("colors.picker");if(n||(n=i()),!n.hasClass("fr-active"))if(t.popups.setContainer("colors.picker",t.$tb),l(n.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",r,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("colors.picker")}function r(){t.popups.hide("colors.picker")}function i(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons)),e+=o()+"</div>";var n={buttons:e,text_colors:a("text"),background_colors:a("background")},r=t.popups.create("colors.picker",n);return s(r),r}function o(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=t.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==t.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>",e+"</div>"}function a(e){for(var n="text"==e?t.opts.colorsText:t.opts.colorsBackground,r='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',i=0;i<n.length;i++)0!==i&&i%t.opts.colorsStep===0&&(r+="<br>"),r+="REMOVE"!=n[i]?'<span class="fr-command fr-select-color" style="background: '+n[i]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+n[i]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+n[i]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("remove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return r+"</div>"}function s(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("colors.picker")||!i.is("span"))return!0;var o=r.which,a=!0;if(e.FE.KEYCODE.TAB==o){var s=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){if(i.is("span.fr-select-color")){var l=i.parent().find("span.fr-select-color"),c=l.index(i),u=t.opts.colorsStep,d=Math.floor(l.length/u),f=c%u,p=Math.floor(c/u),h=p*u+f,m=d*u;e.FE.KEYCODE.ARROW_UP==o?h=((h-u)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==o?h=(h+u)%m:e.FE.KEYCODE.ARROW_LEFT==o?h=((h-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==o&&(h=(h+1)%m);var g=e(l.get(h));t.events.disableBlur(),g.focus(),a=!1}}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(i),a=!1);return a===!1&&(r.preventDefault(),r.stopPropagation()),a},!0)}function l(n){var r,i=t.popups.get("colors.picker"),o=e(t.selection.element());r="background"==n?"background-color":"color";var a=i.find(".fr-"+n+"-color .fr-select-color");for(a.find(".fr-selected-color").remove(),a.removeClass("fr-active-item"),a.not('[data-param1="REMOVE"]').attr("aria-selected",!1);o.get(0)!=t.el;){if("transparent"!=o.css(r)&&"rgba(0, 0, 0, 0)"!=o.css(r)){var s=i.find(".fr-"+n+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(o.css(r))+'"]');s.append('<span class="fr-selected-color" aria-hidden="true"></span>'),s.addClass("fr-active-item").attr("aria-selected",!0);break}o=o.parent()}}function c(e,n){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+n+"-color").addClass("fr-selected-set"),l(n)),t.accessibility.focusPopup(e.parents(".fr-popup"))}function u(e){"REMOVE"!=e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),r()}function d(e){"REMOVE"!=e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),r()}function f(){t.popups.hide("colors.picker"),t.toolbar.showInline()}return{showColorsPopup:n,hideColorsPopup:r,changeSet:c,background:u,text:d,back:f}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.FE.DefineIcon("remove",{NAME:"eraser"}),e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function n(n){return!(!n.originalEvent||!n.originalEvent.target||n.originalEvent.target.nodeType!=Node.TEXT_NODE)||(n.target&&"A"==n.target.tagName&&1==n.target.childNodes.length&&"IMG"==n.target.childNodes[0].tagName&&(n.target=n.target.childNodes[0]),e(n.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),e(n.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void n.originalEvent.dataTransfer.setData("text","Froala")):(n.preventDefault(),!1))}function r(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function i(e,n,r){t.opts.iframe&&(e+=t.$iframe.offset().top,n+=t.$iframe.offset().left),p.offset().top!=e&&p.css("top",e),p.offset().left!=n&&p.css("left",n),p.width()!=r&&p.css("width",r)}function o(n){var o=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset);if(!r(o)){for(var a=0,s=o;!r(s)&&s==o&&n.originalEvent.pageY-t.win.pageYOffset-a>0;)a++,s=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset-a);(!r(s)||p&&0===t.$el.find(s).length&&s!=p.get(0))&&(s=null);for(var l=0,c=o;!r(c)&&c==o&&n.originalEvent.pageY-t.win.pageYOffset+l<e(t.doc).height();)l++,c=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset+l);(!r(c)||p&&0===t.$el.find(c).length&&c!=p.get(0))&&(c=null),o=null==c&&s?s:c&&null==s?c:c&&s?a<l?s:c:null}if(e(o).hasClass("fr-drag-helper"))return!1;if(o&&!t.node.isBlock(o)&&(o=t.node.blockParent(o)),o&&["TD","TH","TR","THEAD","TBODY"].indexOf(o.tagName)>=0&&(o=e(o).parents("table").get(0)),o&&["LI"].indexOf(o.tagName)>=0&&(o=e(o).parents("UL, OL").get(0)),o&&!e(o).hasClass("fr-drag-helper")){p||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),p=e.FE.$draggable_helper,t.events.on("shared.destroy",function(){p.html("").removeData().remove(),p=null},!0));var u,d=n.originalEvent.pageY;u=d<e(o).offset().top+e(o).outerHeight()/2;var f=e(o),h=0;u||0!==f.next().length?(u||(f=f.next()),"before"==p.data("fr-position")&&f.is(p.data("fr-tag"))||(f.prev().length>0&&(h=parseFloat(f.prev().css("margin-bottom"))||0),h=Math.max(h,parseFloat(f.css("margin-top"))||0),i(f.offset().top-h/2-t.$box.offset().top,f.offset().left-t.win.pageXOffset-t.$box.offset().left,f.width()),p.data("fr-position","before"))):"after"==p.data("fr-position")&&f.is(p.data("fr-tag"))||(h=parseFloat(f.css("margin-bottom"))||0,i(f.offset().top+e(o).height()+h/2-t.$box.offset().top,f.offset().left-t.win.pageXOffset-t.$box.offset().left,f.width()),p.data("fr-position","after")),p.data("fr-tag",f),p.addClass("fr-visible"),p.appendTo(t.$box)}else p&&t.$box.find(p).length>0&&p.removeClass("fr-visible")}function a(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?c()||!t.browser.msie&&!t.browser.edge||e.preventDefault():(e.preventDefault(),o(e))}function s(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function l(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");p&&p.hasClass("fr-visible")&&t.$box.find(p).length?u(e):n.length&&(e.preventDefault(),e.stopPropagation()),p&&t.$box.find(p).length&&p.removeClass("fr-visible"),n.removeClass("fr-dragging")}function c(){for(var t=null,n=0;n<e.FE.INSTANCES.length;n++)if(t=e.FE.INSTANCES[n].$el.find(".fr-dragging"),t.length)return t.get(0)}function u(n){for(var r,i,o=0;o<e.FE.INSTANCES.length;o++)if(r=e.FE.INSTANCES[o].$el.find(".fr-dragging"),r.length){i=e.FE.INSTANCES[o];break}if(r.length){if(n.preventDefault(),n.stopPropagation(),p&&p.hasClass("fr-visible")&&t.$box.find(p).length)p.data("fr-tag")[p.data("fr-position")]('<span class="fr-marker"></span>'),p.removeClass("fr-visible");else{var a=t.markers.insertAtPoint(n.originalEvent);if(a===!1)return!1}r.removeClass("fr-dragging");var s=r;if(r.parent().is("A")&&(s=r.parent()),t.core.isEmpty())t.events.focus();else{var l=t.$el.find(".fr-marker");l.replaceWith(e.FE.MARKERS),t.selection.restore()}if(i==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(s);else{var c=t.markers.insert();e(c).replaceWith(s),r.after(e.FE.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),i!=t&&(i.popups.hideAll(),i.$el.find(i.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),i.html.wrap(),i.html.fillEmptyBlocks(),i.undo.saveStep(),i.events.trigger("element.dropped"),i.opts.iframe&&i.size.syncIframe()),t.events.trigger("element.dropped",[s]),!1}}function d(e){if(e&&"DIV"==e.tagName&&t.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("div.fr-drag-helper"),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r])}function f(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",n,!0),t.events.on("dragover",a,!0),t.events.on("dragenter",s,!0),t.events.on("document.dragend",l,!0),t.events.on("document.drop",l,!0),t.events.on("drop",u,!0),t.events.on("html.processGet",d)}var p;return{_init:f}},e.extend(e.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.FE.PLUGINS.emoticons=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="emoticons"]'),n=t.popups.get("emoticons");if(n||(n=i()),!n.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("emoticons",r,o,e.outerHeight())}}function r(){t.popups.hide("emoticons")}function i(){var e="";t.opts.toolbarInline&&t.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+t.button.buildList(t.opts.emoticonsButtons)+"</div>");var n={buttons:e,emoticons:o()},r=t.popups.create("emoticons",n);return t.tooltip.bind(r,".fr-emoticon"),a(r),r}function o(){for(var e='<div style="text-align: center">',n=0;n<t.opts.emoticonsSet.length;n++)0!==n&&n%t.opts.emoticonsStep===0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+t.language.translate(t.opts.emoticonsSet[n].desc)+'" role="button" data-param1="'+t.opts.emoticonsSet[n].code+'">'+(t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+t.opts.emoticonsSet[n].code+'.svg"/>':"&#x"+t.opts.emoticonsSet[n].code+";")+'<span class="fr-sr-only">'+t.language.translate(t.opts.emoticonsSet[n].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return t.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+="</div>"}function a(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("emoticons")||!i.is("span, a"))return!0;var o,a,s,l=r.which;if(e.FE.KEYCODE.TAB==l){if(i.is("span.fr-emoticon")&&r.shiftKey||i.is("a")&&!r.shiftKey){var c=n.find(".fr-buttons");o=!t.accessibility.focusToolbar(c,!!r.shiftKey)}if(o!==!1){var u=n.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");i.is("span.fr-emoticon")&&(u=u.not("span.fr-emoticon:not(:focus)")),a=u.index(i),a=r.shiftKey?((a-1)%u.length+u.length)%u.length:(a+1)%u.length,s=u.get(a),t.events.disableBlur(),s.focus(),o=!1}}else if(e.FE.KEYCODE.ARROW_UP==l||e.FE.KEYCODE.ARROW_DOWN==l||e.FE.KEYCODE.ARROW_LEFT==l||e.FE.KEYCODE.ARROW_RIGHT==l){if(i.is("span.fr-emoticon")){var d=i.parent().find("span.fr-emoticon");a=d.index(i);var f=t.opts.emoticonsStep,p=Math.floor(d.length/f),h=a%f,m=Math.floor(a/f),g=m*f+h,v=p*f;e.FE.KEYCODE.ARROW_UP==l?g=((g-f)%v+v)%v:e.FE.KEYCODE.ARROW_DOWN==l?g=(g+f)%v:e.FE.KEYCODE.ARROW_LEFT==l?g=((g-1)%v+v)%v:e.FE.KEYCODE.ARROW_RIGHT==l&&(g=(g+1)%v),s=e(d.get(g)),t.events.disableBlur(),s.focus(),o=!1}}else e.FE.KEYCODE.ENTER==l&&(i.is("a")?i[0].click():t.button.exec(i),o=!1);return o===!1&&(r.preventDefault(),r.stopPropagation()),o},!0)}function s(n,r){t.html.insert('<span class="fr-emoticon fr-deletable'+(r?" fr-emoticon-img":"")+'"'+(r?' style="background: url('+r+');"':"")+">"+(r?"&nbsp;":n)+"</span>&nbsp;"+e.FE.MARKERS,!0)}function l(){t.popups.hide("emoticons"),t.toolbar.showInline()}function c(){var n=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),n=0;n<e.length;n++)e[n].className+=" fr-deletable"};n(),t.events.on("html.set",n);var r=function(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),n=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(n&&t.node.hasClass(n,"fr-emoticon"))return n;var r=t.selection.ranges(0),i=r.startContainer;if(i.nodeType==Node.ELEMENT_NODE&&i.childNodes.length>0&&r.startOffset>0){var o=i.childNodes[r.startOffset-1];if(t.node.hasClass(o,"fr-emoticon"))return o}return!1};t.events.on("keydown",function(n){if(t.keys.isCharacter(n.which)&&t.selection.inEditor()){var i=t.selection.ranges(0),o=r();o&&(0===i.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore())}}),t.events.on("keyup",function(n){for(var i=t.el.querySelectorAll(".fr-emoticon"),o=0;o<i.length;o++)"undefined"!=typeof i[o].textContent&&0===i[o].textContent.replace(/\u200B/gi,"").length&&e(i[o]).remove();if(!(n.which>=e.FE.KEYCODE.ARROW_LEFT&&n.which<=e.FE.KEYCODE.ARROW_DOWN)){var a=r();t.node.hasClass(a,"fr-emoticon-img")&&(e(a).append(e.FE.MARKERS),t.selection.restore())}})}return{_init:c,insert:s,showEmoticonsPopup:n,hideEmoticonsPopup:r,back:l}},e.FE.DefineIcon("emoticons",{NAME:"smile-o"}),e.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),e.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),e.extend(e.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),e.FE.PLUGINS.entities=function(t){function n(e){var t=e.textContent;if(t.match(a)){for(var n="",r=0;r<t.length;r++)n+=s[t[r]]?s[t[r]]:t[r];e.textContent=n}}function r(e){if(e&&["STYLE","SCRIPT","svg"].indexOf(e.tagName)>=0)return!0;for(var i=t.node.contents(e),o=0;o<i.length;o++)i[o].nodeType==Node.TEXT_NODE?n(i[o]):r(i[o]);e.nodeType==Node.TEXT_NODE&&n(e)}function i(e){if(0===e.length)return"";var n=t.clean.exec(e,r).replace(/\&amp;/g,"&");return n}function o(){t.opts.htmlSimpleAmpersand||(t.opts.entities=t.opts.entities+"&amp;");var n=e("<div>").html(t.opts.entities).text(),r=t.opts.entities.split(";");s={},a="";for(var o=0;o<n.length;o++){var l=n.charAt(o);s[l]=r[o]+";",a+="\\"+l+(o<n.length-1?"|":"")}a=new RegExp("("+a+")","g"),t.events.on("html.get",i,!0)}var a,s;return{_init:o}},e.extend(e.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),e.extend(e.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.FE.PLUGINS.file=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),n=t.popups.get("file.insert");if(n||(n=b()),i(),!n.hasClass("fr-active")){t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?0:e.outerHeight());t.popups.show("file.insert",r,o,e.outerHeight())}}function r(){var e=t.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),o("Uploading",0)}function i(e){var n=t.popups.get("file.insert");n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-file-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function o(e,n){var r=t.popups.get("file.insert");if(r){var i=r.find(".fr-file-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function a(e){r();var n=t.popups.get("file.insert"),i=n.find(".fr-file-progress-bar-layer");i.addClass("fr-error");var o=i.find("h3");o.text(e),t.events.disableBlur(),o.focus()}function s(e,n,r){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(n=t.selection.text()),t.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+n+"</a>");var i=t.$el.find("#fr-inserted-file");i.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),T(),t.events.trigger("file.inserted",[i,r])}function l(n){try{if(t.events.trigger("file.uploaded",[n],!0)===!1)return t.edit.on(),!1;var r=e.parseJSON(n);return r.link?r:(p(x,n),!1)}catch(i){return p(_,n),!1}}function c(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return t.events.trigger("file.uploadedToS3",[r,i,n],!0)===!1?(t.edit.on(),!1):r}catch(o){return p(_,n),!1}}function u(e){var n=this.status,r=this.response,i=this.responseXML,o=this.responseText;try{if(t.opts.fileUploadToS3)if(201==n){var a=c(i);a&&s(a,e,r||i)}else p(_,r||i);else if(n>=200&&n<300){var u=l(o);u&&s(u.link,e,r||o)}else p(A,r||o)}catch(d){p(_,r||o)}}function d(){p(_,this.response||this.responseText||this.responseXML)}function f(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;o("Uploading",t)}}function p(e,n){t.edit.on(),a(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:N[e]},n])}function h(){t.edit.on(),i(!0)}function m(e){if("undefined"!=typeof e&&e.length>0){if(t.events.trigger("file.beforeUpload",[e])===!1)return!1;var n=e[0];if(n.size>t.opts.fileMaxSize)return p(k),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(n.type.replace(/file\//g,""))<0)return p(O),!1;var i;if(t.drag_support.formdata&&(i=t.drag_support.formdata?new FormData:null),i){var o;if(t.opts.fileUploadToS3!==!1){i.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",n.type);for(o in t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(o)&&i.append(o,t.opts.fileUploadToS3.params[o])}for(o in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(o)&&i.append(o,t.opts.fileUploadParams[o]);i.append(t.opts.fileUploadParam,n);var a=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(a=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var s=t.core.getXHR(a,t.opts.fileUploadMethod);s.onload=function(){u.call(s,n.name)},s.onerror=d,s.upload.onprogress=f,s.onabort=h,r(),t.edit.off();var l=t.popups.get("file.insert");l&&l.off("abortUpload").on("abortUpload",function(){4!=s.readyState&&s.abort()}),s.send(i)}}}function g(n){t.events.$on(n,"dragover dragenter",".fr-file-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(n,"dragleave dragend",".fr-file-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(n,"drop",".fr-file-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var o=n.data("instance")||t;o.file.upload(i.files)}},!0),t.events.$on(n,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.file.upload(this.files)}e(this).val("")},!0)}function v(){i()}function b(e){if(e)return t.popups.onHide("file.insert",v),
!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>";var r="";r='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>';var i='<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>',o={buttons:n,upload_layer:r,progress_bar:i},a=t.popups.create("file.insert",o);return g(a),a}function y(e){if(t.node.hasClass(e,"fr-file"))return t.events.trigger("file.unlink",[e])}function E(n){var i=n.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var o=i.files[0];if(o&&"undefined"!=typeof o.type&&o.type.indexOf("image")<0&&(t.opts.fileAllowedTypes.indexOf(o.type)>=0||t.opts.fileAllowedTypes.indexOf("*")>=0)){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var a=t.popups.get("file.insert");return a||(a=b()),t.popups.setContainer("file.insert",t.$sc),t.popups.show("file.insert",n.originalEvent.pageX,n.originalEvent.pageY),r(),m(i.files),n.preventDefault(),n.stopPropagation(),!1}}}function w(){t.events.on("drop",E),t.events.$on(t.$win,"keydown",function(n){var r=n.which,i=t.popups.get("file.insert");i&&r==e.FE.KEYCODE.ESC&&i.trigger("abortUpload")}),t.events.on("destroy",function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")})}function C(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()}function T(){var e,n=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),r=[];for(e=0;e<n.length;e++)r.push(n[e].getAttribute("href"));if(D)for(e=0;e<D.length;e++)r.indexOf(D[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[D[e]]);D=n}function $(){w(),t.events.on("link.beforeRemove",y),t.$wp&&(T(),t.events.on("contentChanged",T)),b(!0)}var S=1,x=2,A=3,_=4,k=5,O=6,R=7,N={};N[S]="File cannot be loaded from the passed link.",N[x]="No link in upload response.",N[A]="Error during file upload.",N[_]="Parsing response failed.",N[k]="File is too large.",N[O]="File file type is invalid.",N[R]="Files can be uploaded only to same domain in IE 8 and IE 9.";var D;return{_init:$,showInsertPopup:n,upload:m,insert:s,back:C,hideProgressBar:i}},e.FE.DefineIcon("insertFile",{NAME:"file-o"}),e.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function n(e){t.format.applyStyle("font-family",e)}function r(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+a()+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),r=t.find(".fr-active").parent();r.length?n.parent().scrollTop(r.offset().top-n.offset().top-(n.parent().outerHeight()/2-r.outerHeight()/2)):n.parent().scrollTop(0)}function i(t){var n=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(n,function(e){return e.length>0})}function o(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n]==t[r])return[n,r];return null}function a(){var n=e(t.selection.element()).css("font-family"),r=i(n),a=[];for(var s in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(s)){var l=i(s),c=o(r,l);c&&a.push([s,c])}return 0===a.length?null:(a.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),a[0][0])}function s(n){if(t.opts.fontFamilySelection){var r=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");n.find("> span").text(t.opts.fontFamily[a()]||r[0]||t.opts.fontFamilyDefaultSelection)}}return{apply:n,refreshOnShow:r,refresh:s}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+="</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"}),e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){function n(e){t.format.applyStyle("font-size",e)}function r(n,r){var i=e(t.selection.element()).css("font-size");r.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),r.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0);var o=r.find(".fr-dropdown-list"),a=r.find(".fr-active").parent();a.length?o.parent().scrollTop(a.offset().top-o.offset().top-(o.parent().outerHeight()/2-a.outerHeight()/2)):o.parent().scrollTop(0)}function i(n){if(t.opts.fontSizeSelection){var r=t.helpers.getPX(e(t.selection.element()).css("font-size"));n.find("> span").text(r)}}return{apply:n,refreshOnShow:r,refresh:i}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,n=0;n<t.length;n++){var r=t[n];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+r+'px" title="'+r+'">'+r+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"}),e.extend(e.FE.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),e.FE.PLUGINS.forms=function(t){function n(n){n.preventDefault(),t.selection.clear(),e(this).data("mousedown",!0)}function r(t){e(this).data("mousedown")&&(t.stopPropagation(),e(this).removeData("mousedown"),b=this,c(this)),t.preventDefault()}function i(){t.$el.find("input, textarea, button").removeData("mousedown")}function o(){e(this).removeData("mousedown")}function a(){t.events.$on(t.$el,t._mousedown,"input, textarea, button",n),t.events.$on(t.$el,t._mouseup,"input, textarea, button",r),t.events.$on(t.$el,"touchmove","input, textarea, button",o),t.events.$on(t.$el,t._mouseup,i),t.events.$on(t.$win,t._mouseup,i),f(!0)}function s(){return b?b:null}function l(){var e="";t.opts.formEditButtons.length>0&&(e='<div class="fr-buttons">'+t.button.buildList(t.opts.formEditButtons)+"</div>");var n={buttons:e},r=t.popups.create("forms.edit",n);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){get()&&t.popups.isVisible("forms.edit")&&c(s())}),r}function c(n){var r=t.popups.get("forms.edit");r||(r=l()),b=n;var i=e(n);t.popups.refresh("forms.edit"),t.popups.setContainer("forms.edit",t.$sc);var o=i.offset().left+i.outerWidth()/2,a=i.offset().top+i.outerHeight();t.popups.show("forms.edit",o,a,i.outerHeight())}function u(){var n=t.popups.get("forms.update"),r=s();if(r){var i=e(r);i.is("button")?n.find('input[type="text"][name="text"]').val(i.text()):n.find('input[type="text"][name="text"]').val(i.attr("placeholder"))}n.find('input[type="text"][name="text"]').trigger("change")}function d(){b=null}function f(e){if(e)return t.popups.onRefresh("forms.update",u),t.popups.onHide("forms.update",d),!0;var n="";t.opts.formUpdateButtons.length>=1&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.formUpdateButtons)+"</div>");var r="",i=0;r='<div class="fr-forms-text-layer fr-layer fr-active">',r+='<div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex="'+ ++i+'"></div>',r+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="'+ ++i+'" type="button">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,text_layer:r},a=t.popups.create("forms.update",o);return a}function p(){var n=s();if(n){var r=e(n),i=t.popups.get("forms.update");i||(i=f()),t.popups.isVisible("forms.update")||t.popups.refresh("forms.update"),t.popups.setContainer("forms.update",t.$sc);var o=r.offset().left+r.outerWidth()/2,a=r.offset().top+r.outerHeight();t.popups.show("forms.update",o,a,r.outerHeight())}}function h(n,r,i){"undefined"==typeof r&&(r=t.opts.formStyles),"undefined"==typeof i&&(i=t.opts.formMultipleStyles);var o=s();if(!o)return!1;if(!i){var a=Object.keys(r);a.splice(a.indexOf(n),1),e(o).removeClass(a.join(" "))}e(o).toggleClass(n)}function m(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var e=s();e&&t.$wp&&("BUTTON"==e.tagName&&t.selection.restore(),c(e))}function g(){var n=t.popups.get("forms.update"),r=s();if(r){var i=e(r),o=n.find('input[type="text"][name="text"]').val()||"";o.length&&(i.is("button")?i.text(o):i.attr("placeholder",o)),t.popups.hide("forms.update"),c(r)}}function v(){a(),t.events.$on(t.$el,"submit","form",function(e){return e.preventDefault(),!1})}var b;return{_init:v,updateInput:g,getInput:s,applyStyle:h,showUpdatePopup:p,showEditPopup:c,back:m}},e.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.FE.DefineIcon("inputStyle",{NAME:"magic"}),e.FE.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.formStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){var n=this.forms.getInput();n&&(this.forms.applyStyle(t),this.forms.showEditPopup(n))},refreshOnShow:function(t,n){var r=this.forms.getInput();if(r){var i=e(r);n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}}}),e.FE.DefineIcon("inputEdit",{NAME:"edit"}),e.FE.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),e.FE.DefineIcon("inputBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),e.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),e.FE.PLUGINS.fullscreen=function(t){function n(){return t.$box.hasClass("fr-fullscreen")}function r(){l=t.helpers.scrollTop(),t.$box.toggleClass("fr-fullscreen"),e("body").toggleClass("fr-fullscreen"),c=e('<div style="display: none;"></div>'),t.$box.after(c),t.helpers.isMobile()&&(t.$tb.data("parent",t.$tb.parent()),t.$tb.prependTo(t.$box),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy"))),u=t.opts.height,d=t.opts.heightMax,f=t.opts.zIndex,t.opts.height=t.o_win.innerHeight-(t.opts.toolbarInline?0:t.$tb.outerHeight()),t.opts.zIndex=9990,t.opts.heightMax=null,t.size.refresh(),t.opts.toolbarInline&&t.toolbar.showInline();for(var n=t.$box.parent();!n.is("body");)n.data("z-index",n.css("z-index")).css("z-index","9990"),n=n.parent();t.events.trigger("charCounter.update"),t.$win.trigger("scroll")}function i(){t.$box.toggleClass("fr-fullscreen"),e("body").toggleClass("fr-fullscreen"),t.$tb.prependTo(t.$tb.data("parent")),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy")),t.opts.height=u,t.opts.heightMax=d,t.opts.zIndex=f,t.size.refresh(),e(t.o_win).scrollTop(l),t.opts.toolbarInline&&t.toolbar.showInline(),t.events.trigger("charCounter.update"),t.opts.toolbarSticky&&t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset).data("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset).data("top",t.opts.toolbarStickyOffset));for(var n=t.$box.parent();!n.is("body");)n.data("z-index")&&(n.css("z-index",""),n.css("z-index")!=n.data("z-index")&&n.css("z-index",n.data("z-index")),n.removeData("z-index")),n=n.parent();t.$win.trigger("scroll")}function o(){n()?i():r(),a(t.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function a(e){var r=n();e.toggleClass("fr-active",r).attr("aria-pressed",r),e.find("> *:not(.fr-sr-only)").replaceWith(r?t.icon.create("fullscreenCompress"):t.icon.create("fullscreen"))}function s(){return!!t.$wp&&(t.events.$on(e(t.o_win),"resize",function(){n()&&(i(),r())}),void t.events.on("toolbar.hide",function(){if(n()&&t.helpers.isMobile())return!1}))}var l,c,u,d,f;return{_init:s,toggle:o,refresh:a,isActive:n}},e.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.FE.DefineIcon("fullscreen",{NAME:"expand"}),e.FE.DefineIcon("fullscreenCompress",{NAME:"compress"}),e.extend(e.FE.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert link"},{val:"OSkeyP",desc:"Insert image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select all"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Indent"},{val:"OSkey[",desc:"Outdent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),e.FE.PLUGINS.help=function(t){function n(){}function r(){for(var n='<div class="fr-help-modal">',r=0;r<e.FE.DEFAULTS.helpSets.length;r++){var i=e.FE.DEFAULTS.helpSets[r],o="<table>";o+="<thead><tr><th>"+i.title+"</th></tr></thead>",o+="<tbody>";for(var a=0;a<i.commands.length;a++){var s=i.commands[a];o+="<tr>",o+="<td>"+s.desc+"</td>",o+="<td>"+s.val.replace("OSkey",t.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",o+="</tr>"}o+="</tbody></table>",n+=o}return n+="</div>"}function i(){if(!a){var n="<h4>Shortcuts</h4>",i=r(),o=t.modals.create(c,n,i);a=o.$modal,s=o.$head,l=o.$body,t.events.$on(e(t.o_win),"resize",function(){t.modals.resize(c)})}t.modals.show(c),t.modals.resize(c)}function o(){t.modals.hide(c)}var a,s,l,c="help";return{_init:n,show:i,hide:o}},e.FroalaEditor.DefineIcon("help",{NAME:"question"}),e.FE.RegisterShortcut(e.FE.KEYCODE.SLASH,"help",null,"/"),e.FE.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"ft-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(t){function n(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val(""),Te&&n.val(Te.attr("src")),n.trigger("change")}function r(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),n=t.popups.get("image.insert");if(n||(n=P()),b(),!n.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("image.insert")}function i(){var e=t.popups.get("image.edit");if(e||(e=g()),e){t.popups.setContainer("image.edit",t.$sc),t.popups.refresh("image.edit");var n=Te.offset().left+Te.outerWidth()/2,r=Te.offset().top+Te.outerHeight();t.popups.show("image.edit",n,r,Te.outerHeight())}}function o(){b()}function a(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+fe(e)[0]),e.addClass("fr-di"+pe(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function s(e){var t=e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,n=e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":fe(e);ue(e,t,n),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function l(){for(var n="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),r=0;r<n.length;r++){var i=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?((t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&a(i),t.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):t.opts.htmlUntouched||t.opts.useClasses||(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&s(i),t.opts.iframe&&i.on("load",t.size.syncIframe)}}function c(){var n,r=Array.prototype.slice.call(t.el.querySelectorAll("img")),i=[];for(n=0;n<r.length;n++)i.push(r[n].getAttribute("src")),e(r[n]).toggleClass("fr-draggable",t.opts.imageMove),""===r[n].getAttribute("class")&&r[n].removeAttribute("class"),""===r[n].getAttribute("style")&&r[n].removeAttribute("style");if(Fe)for(n=0;n<Fe.length;n++)i.indexOf(Fe[n].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Fe[n])]);Fe=r}function u(){$e||Q();var e=t.$wp||t.$sc;e.append($e),$e.data("instance",t);var n=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),r=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);r-=t.helpers.getPX(e.css("border-left-width")),n-=t.helpers.getPX(e.css("border-top-width")),t.$el.is("img")&&(n=0,r=0),$e.css("top",(t.opts.iframe?Te.offset().top:Te.offset().top+n)-1).css("left",(t.opts.iframe?Te.offset().left:Te.offset().left+r)-1).css("width",Te.get(0).getBoundingClientRect().width).css("height",Te.get(0).getBoundingClientRect().height).addClass("fr-active")}function d(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function f(n){if(!t.core.sameInstance($e))return!0;if(n.preventDefault(),n.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep(),Se=e(this),Se.data("start-x",n.pageX||n.originalEvent.touches[0].pageX),Se.data("start-width",Te.width()),Se.data("start-height",Te.height());var r=Te.width();if(t.opts.imageResizeWithPercent){var i=Te.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;Te.css("width",(r/e(i).outerWidth()*100).toFixed(2)+"%")}else Te.css("width",r);xe.show(),t.popups.hideAll(),le()}function p(n){if(!t.core.sameInstance($e))return!0;if(Se&&Te){if(n.preventDefault(),t.$el.find("img.fr-error").left)return!1;var r=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null);if(!r)return!1;var i=Se.data("start-x"),o=r-i,a=Se.data("start-width");if((Se.hasClass("fr-hnw")||Se.hasClass("fr-hsw"))&&(o=0-o),t.opts.imageResizeWithPercent){var s=Te.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;a=((a+o)/e(s).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(a=Math.round(a)),Te.css("width",a+"%"),Te.css("height","").removeAttr("height")}else a+o>=t.opts.imageMinWidth&&Te.css("width",a+o),Te.css("height",Se.data("start-height")*Te.width()/Se.data("start-width"));u(),t.events.trigger("image.resize",[we()])}}function h(e){if(!t.core.sameInstance($e))return!0;if(Se&&Te){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;Se=null,xe.hide(),u(),i(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[we()])}}function m(e,n){t.edit.on(),Te&&Te.addClass("fr-error"),E(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("image.error",[{code:e,message:Le[e]},n])}function g(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Te&&t.popups.isVisible("image.edit")&&(t.events.disableBlur(),C(Te))}),!0;var n="";if(t.opts.imageEditButtons.length>0){n+='<div class="fr-buttons">',n+=t.button.buildList(t.opts.imageEditButtons),n+="</div>";var r={buttons:n},i=t.popups.create("image.edit",r);return i}return!1}function v(e){var n=t.popups.get("image.insert");if(n||(n=P()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),Te){t.popups.setContainer("image.insert",t.$sc);var r=Te.offset().left+Te.width()/2,i=Te.offset().top+Te.height();t.popups.show("image.insert",r,i,Te.outerHeight())}"undefined"==typeof e&&y("Uploading",0)}function b(e){var n=t.popups.get("image.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&Te){var r=Te;ae(!0),t.selection.setAfter(r.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function y(e,n){var r=t.popups.get("image.insert");if(r){var i=r.find(".fr-image-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function E(e){v();var n=t.popups.get("image.insert"),r=n.find(".fr-image-progress-bar-layer");r.addClass("fr-error");var i=r.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function w(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val().length>0&&(v(),y("Loading image"),$(n.val(),!0,[],Te),n.val(""),n.blur())}function C(e){oe.call(e.get(0))}function T(){var n=e(this);t.popups.hide("image.insert"),n.removeClass("fr-uploading"),n.next().is("br")&&n.next().remove(),C(n),t.events.trigger("image.loaded",[n])}function $(e,n,r,i,o){t.edit.off(),y("Loading image"),n&&(e=t.helpers.sanitizeURL(e));var a=new Image;a.onload=function(){var n,a;if(i){t.undo.canDo()||i.hasClass("fr-uploading")||t.undo.saveStep();var s=i.data("fr-old-src");t.$wp?(n=i.clone().removeData("fr-old-src").removeClass("fr-uploading"),n.off("load"),s&&i.attr("src",s),i.replaceWith(n)):n=i;for(var l=n.get(0).attributes,u=0;u<l.length;u++){var d=l[u];0===d.nodeName.indexOf("data-")&&n.removeAttr(d.nodeName)}if("undefined"!=typeof r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&n.attr("data-"+a,r[a]);n.on("load",T),n.attr("src",e),t.edit.on(),c(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(s?"image.replaced":"image.inserted",[n,o])}else n=O(e,r,T),c(),t.undo.saveStep(),t.events.trigger("image.inserted",[n,o])},a.onerror=function(){m(_e)},v("Loading image"),a.src=e}function S(n){try{if(t.events.trigger("image.uploaded",[n],!0)===!1)return t.edit.on(),!1;var r=e.parseJSON(n);return r.link?r:(m(ke,n),!1)}catch(i){return m(Re,n),!1}}function x(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return t.events.trigger("image.uploadedToS3",[r,i,n],!0)===!1?(t.edit.on(),!1):r}catch(o){return m(Re,n),!1}}function A(e){y("Loading image");var n=this.status,r=this.response,i=this.responseXML,o=this.responseText;try{if(t.opts.imageUploadToS3)if(201==n){var a=x(i);a&&$(a,!1,[],e,r||i)}else m(Re,r||i);else if(n>=200&&n<300){var s=S(o);s&&$(s.link,!1,s,e,r||o)}else m(Oe,r||o)}catch(l){m(Re,r||o)}}function _(){m(Re,this.response||this.responseText||this.responseXML)}function k(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;y("Uploading",t)}}function O(n,r,i){var o,a="";if(r&&"undefined"!=typeof r)for(o in r)r.hasOwnProperty(o)&&"link"!=o&&(a+=" data-"+o+'="'+r[o]+'"');var s=t.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+n+'"'+a+(s?' style="width: '+s+';"':"")+">");ue(l,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),l.on("load",i),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert();var c=t.$el.find(".fr-marker");return c.replaceWith(l),t.html.wrap(),t.selection.clear(),l}function R(){t.edit.on(),b(!0)}function N(n,r,i){function o(){var i=e(this);i.off("load"),i.addClass("fr-uploading"),i.next().is("br")&&i.next().remove(),t.placeholder.refresh(),i.is(Te)||C(i),u(),v(),t.edit.off(),n.onload=function(){A.call(n,i)},n.onerror=_,n.upload.onprogress=k,n.onabort=R,i.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(r)}var a,s=new FileReader;s.addEventListener("load",function(){var e=s.result;if(s.result.indexOf("svg+xml")<0){for(var n=atob(s.result.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));e=window.URL.createObjectURL(new Blob([new Uint8Array(r)],{type:"image/jpeg"}))}Te?(Te.on("load",o),t.edit.on(),t.undo.saveStep(),Te.data("fr-old-src",Te.attr("src")),Te.attr("src",e)):a=O(e,null,o)},!1),s.readAsDataURL(i)}function D(e){if("undefined"!=typeof e&&e.length>0){if(t.events.trigger("image.beforeUpload",[e])===!1)return!1;var n=e[0];if(n.size>t.opts.imageMaxSize)return m(Ne),!1;if(t.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g,""))<0)return m(De),!1;var r;if(t.drag_support.formdata&&(r=t.drag_support.formdata?new FormData:null),r){var i;if(t.opts.imageUploadToS3!==!1){r.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",n.type);for(i in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(i)&&r.append(i,t.opts.imageUploadToS3.params[i])}for(i in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(i)&&r.append(i,t.opts.imageUploadParams[i]);r.append(t.opts.imageUploadParam,n);var o=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(o=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket);var a=t.core.getXHR(o,t.opts.imageUploadMethod);N(a,r,n)}}}function I(n){t.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-image-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var o=n.data("instance")||t;o.events.disableBlur(),o.image.upload(i.files),o.events.enableBlur()}}),t.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.image.upload(this.files)}e(this).val("")})}function L(n){var r=n.originalEvent.dataTransfer;if(r&&r.files&&r.files.length){var i=r.files[0];if(i&&i.type&&t.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))>=0){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var o=t.popups.get("image.insert");return o||(o=P()),t.popups.setContainer("image.insert",t.$sc),t.popups.show("image.insert",n.originalEvent.pageX,n.originalEvent.pageY),v(),D(r.files),n.preventDefault(),n.stopPropagation(),!1}}}function F(){var n,r,i=t.selection.ranges(0);i.collapsed&&i.startContainer.nodeType==Node.ELEMENT_NODE&&(i.startContainer.childNodes.length==i.startOffset?(n=i.startContainer.childNodes[i.startOffset-1],n&&"IMG"==n.tagName&&"block"==e(n).css("display")&&(r=t.node.blockParent(n),r&&t.html.defaultTag()?r.nextSibling||(["TD","TH"].indexOf(r.tagName)<0?e(r).after("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"):e(n).after("<br>"+e.FE.MARKERS),t.selection.restore()):r||(e(n).after("<br>"+e.FE.MARKERS),t.selection.restore()))):0===i.startOffset&&i.startContainer.childNodes.length>i.startOffset&&(n=i.startContainer.childNodes[i.startOffset],n&&"IMG"==n.tagName&&"block"==e(n).css("display")&&(r=t.node.blockParent(n),r&&t.html.defaultTag()?r.previousSibling||(["TD","TH"].indexOf(r.tagName)<0?e(r).before("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"):e(n).before("<br>"+e.FE.MARKERS),t.selection.restore()):r||(e(n).before(e.FE.MARKERS+"<br>"),t.selection.restore()))))}function M(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable")||(t.helpers.isMobile()||t.selection.clear(),Ae=!0,t.popups.areVisible()&&t.events.disableBlur(),
t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||n.preventDefault(),void n.stopPropagation())}),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable")||void(Ae&&(Ae=!1,n.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur())))}),t.events.on("keyup",function(n){if(n.shiftKey&&""===t.selection.text().replace(/\n/g,"")){var r=t.selection.element(),i=t.selection.endElement();r&&"IMG"==r.tagName?C(e(r)):i&&"IMG"==i.tagName&&C(e(i))}},!0),t.events.on("drop",L),t.events.on("mousedown window.mousedown",se),t.events.on("window.touchmove",le),t.events.on("mouseup window.mouseup",function(){return Te?(ae(),!1):void le()}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&ae()}),t.browser.edge||t.events.on("mouseup",F),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Ae=!1,ae(!0)})}function P(e){if(e)return t.popups.onRefresh("image.insert",n),t.popups.onHide("image.insert",o),!0;var r,i="";t.opts.imageInsertButtons.length>1&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var a=t.opts.imageInsertButtons.indexOf("imageUpload"),s=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";a>=0&&(r=" fr-active",s>=0&&a>s&&(r=""),l='<div class="fr-image-upload-layer'+r+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var c="";s>=0&&(r=" fr-active",a>=0&&s>a&&(r=""),c='<div class="fr-image-by-url-layer'+r+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var u='<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>',d={buttons:i,upload_layer:l,by_url_layer:c,progress_bar:u},f=t.popups.create("image.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Te&&t.popups.isVisible("image.insert")&&be()}),I(f),f}function B(){if(Te){var e=t.popups.get("image.alt");e.find("input").val(Te.attr("alt")||"").trigger("change")}}function U(){var e=t.popups.get("image.alt");e||(e=j()),b(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",t.$sc);var n=Te.offset().left+Te.width()/2,r=Te.offset().top+Te.height();t.popups.show("image.alt",n,r,Te.outerHeight())}function j(e){if(e)return t.popups.onRefresh("image.alt",B),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>";var r="";r='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var i={buttons:n,alt_layer:r},o=t.popups.create("image.alt",i);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){Te&&t.popups.isVisible("image.alt")&&U()}),o}function H(e){if(Te){var n=t.popups.get("image.alt");Te.attr("alt",e||n.find("input").val()||""),n.find("input:focus").blur(),C(Te)}}function K(){if(Te){var e=t.popups.get("image.size");e.find('input[name="width"]').val(Te.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Te.get(0).style.height).trigger("change")}}function W(){var e=t.popups.get("image.size");e||(e=z()),b(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",t.$sc);var n=Te.offset().left+Te.width()/2,r=Te.offset().top+Te.height();t.popups.show("image.size",n,r,Te.outerHeight())}function z(e){if(e)return t.popups.onRefresh("image.size",K),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>";var r="";r='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var i={buttons:n,size_layer:r},o=t.popups.create("image.size",i);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){Te&&t.popups.isVisible("image.size")&&W()}),o}function q(e,n){if(Te){var r=t.popups.get("image.size");e=e||r.find('input[name="width"]').val()||"",n=n||r.find('input[name="height"]').val()||"";var i=/^[\d]+((px)|%)*$/g;e.match(i)&&Te.css("width",e),n.match(i)&&Te.css("height",n),r.find("input:focus").blur(),C(Te)}}function Y(e){var n,r,i=t.popups.get("image.insert");if(Te||t.opts.toolbarInline)Te&&(r=Te.offset().top+Te.outerHeight());else{var o=t.$tb.find('.fr-command[data-cmd="insertImage"]');n=o.offset().left+o.outerWidth()/2,r=o.offset().top+(t.opts.toolbarBottom?10:o.outerHeight()-10)}!Te&&t.opts.toolbarInline&&(r=i.offset().top-t.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",n,r,Te?Te.outerHeight():0),t.accessibility.focusPopup(i)}function V(e){var n=t.popups.get("image.insert");n.find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function G(e){var n=t.popups.get("image.insert");n.find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function X(e,t,n,r){return e.pageX=t,f.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),p.call(this,e),h.call(this,e),++r}function Q(){var n;if(t.shared.$image_resizer?($e=t.shared.$image_resizer,xe=t.shared.$img_overlay,t.events.on("destroy",function(){$e.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),$e=t.shared.$image_resizer,t.events.$on($e,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&($e.append(d("nw")+d("ne")+d("sw")+d("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),xe=t.shared.$img_overlay,n=$e.get(0).ownerDocument,e(n).find("body").append(xe))),t.events.on("shared.destroy",function(){$e.html("").removeData().remove(),$e=null,t.opts.imageResize&&(xe.remove(),xe=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){Te&&!Te.hasClass("fr-uploading")?ae(!0):Te&&(u(),be(),v(!1))}),t.opts.imageResize){n=$e.get(0).ownerDocument,t.events.$on($e,t._mousedown,".fr-handler",f),t.events.$on(e(n),t._mousemove,p),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,h),t.events.$on(xe,"mouseleave",h);var r=1,i=null,o=0;t.events.on("keydown",function(n){if(Te){var a=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,s=n.which;(s!==i||n.timeStamp-o>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?r=X.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey?r=X.call(this,n,2,-1,r):t.keys.ctrlKey(n)||s!=e.FE.KEYCODE.ENTER||(Te.before("<br>"),C(Te)),i=s,o=n.timeStamp}},!0),t.events.on("keyup",function(){r=1})}}function Z(n){n=n||Te,n&&t.events.trigger("image.beforeRemove",[n])!==!1&&(t.popups.hideAll(),ye(),ae(!0),t.undo.canDo()||t.undo.saveStep(),n.get(0)==t.el?n.removeAttr("src"):("A"==n.get(0).parentNode.tagName?(t.selection.setBefore(n.get(0).parentNode)||t.selection.setAfter(n.get(0).parentNode)||n.parent().after(e.FE.MARKERS),e(n.get(0).parentNode).remove()):(t.selection.setBefore(n.get(0))||t.selection.setAfter(n.get(0))||n.after(e.FE.MARKERS),n.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function J(n){var r=n.which;if(Te&&(r==e.FE.KEYCODE.BACKSPACE||r==e.FE.KEYCODE.DELETE))return n.preventDefault(),n.stopPropagation(),Z(),!1;if(Te&&r==e.FE.KEYCODE.ESC){var i=Te;return ae(!0),t.selection.setAfter(i.get(0)),t.selection.restore(),n.preventDefault(),!1}if(Te&&(r==e.FE.KEYCODE.ARROW_LEFT||r==e.FE.KEYCODE.ARROW_RIGHT)){var o=Te.get(0);return ae(!0),r==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(o):t.selection.setAfter(o),t.selection.restore(),n.preventDefault(),!1}return Te&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),n.stopPropagation(),!1):void 0}function ee(e){if(e&&"IMG"==e.tagName)t.node.hasClass(e,"fr-uploading")||t.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):t.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),r=0;r<n.length;r++)ee(n[r])}function te(){if(M(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',oe),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(){Me=!1}),t.events.$on(t.$el,"touchmove",function(){Me=!0})),t.$wp?(t.events.on("window.keydown keydown",J,!0),t.events.on("keyup",function(t){if(t.which==e.FE.KEYCODE.ENTER)return!1},!0)):t.events.$on(t.$win,"keydown",J),t.events.on("toolbar.esc",function(){if(Te){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=Te;ae(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}},!0),t.events.on("toolbar.focusEditor",function(){if(Te)return!1},!0),t.events.on("window.cut window.copy",function(n){Te&&t.popups.isVisible("image.edit")&&!t.popups.get("image.edit").find(":focus").length&&(ye(),e.FE.copied_text="\n",e.FE.copied_html=Te.get(0).outerHTML,"copy"==n.type?setTimeout(function(){C(Te)}):(ae(!0),t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)))},!0),t.events.$on(e(t.o_win),"keydown",function(t){var n=t.which;if(Te&&n==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),t.events.$on(t.$win,"keydown",function(t){var n=t.which;Te&&Te.hasClass("fr-uploading")&&n==e.FE.KEYCODE.ESC&&Te.trigger("abortUpload")}),t.events.on("destroy",function(){Te&&Te.hasClass("fr-uploading")&&Te.trigger("abortUpload")}),t.events.on("paste.before",re),t.events.on("paste.beforeCleanup",ie),t.events.on("paste.after",ne),t.events.on("html.set",l),t.events.on("html.inserted",l),l(),t.events.on("destroy",function(){Fe=[]}),t.events.on("html.processGet",ee),t.opts.imageOutputSize){var n;t.events.on("html.beforeGet",function(){n=t.el.querySelectorAll("img");for(var r=0;r<n.length;r++){var i=n[r].style.width||e(n[r]).width(),o=n[r].style.height||e(n[r]).height();i&&n[r].setAttribute("width",(""+i).replace(/px/,"")),o&&n[r].setAttribute("height",(""+o).replace(/px/,""))}}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].removeAttribute("width"),n[e].removeAttribute("height")})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(c(),t.events.on("contentChanged",c)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){Te&&C(Te)},100)}),g(!0),P(!0),z(!0),j(!0),t.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Z(e),!1})}function ne(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(n,r){if(t.opts.imagePasteProcess){var o=t.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=t.opts.imageResizeWithPercent?"%":"px"),e(r).css("width",o),e(r).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:""))}if(0===r.src.indexOf("data:")){if(t.events.trigger("image.beforePasteUpload",[r])===!1)return!1;Te=e(r),u(),i(),be(),v(),t.edit.off();for(var a=atob(e(r).attr("src").split(",")[1]),s=[],l=0;l<a.length;l++)s.push(a.charCodeAt(l));var c=new Blob([new Uint8Array(s)],{type:"image/jpeg"});D([c]),e(r).removeAttr("data-fr-image-pasted")}else 0!==r.src.indexOf("http")||0===r.src.indexOf("https://mail.google.com/mail")?(t.selection.save(),e(r).remove(),t.selection.restore()):e(r).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function re(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var n=e.clipboardData.items[0].getAsFile();if(n){var r=new FileReader;return r.onload=function(e){var n=e.target.result,r=t.opts.imageDefaultWidth;r&&"auto"!=r&&(r+=t.opts.imageResizeWithPercent?"%":"px"),t.html.insert('<img data-fr-image-pasted="true" class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+n+'"'+(r?' style="width: '+r+';"':"")+">"),t.events.trigger("paste.after")},r.readAsDataURL(n),!1}}}function ie(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function oe(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(n&&"touchend"==n.type&&Me)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=t&&e.FE.INSTANCES[r].events.trigger("image.hideResizer");t.toolbar.disable(),n&&(n.stopPropagation(),n.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),Te=e(this),ye(),u(),i(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function ae(e){Te&&(ce()||e===!0)&&(t.toolbar.enable(),$e.removeClass("fr-active"),t.popups.hide("image.edit"),Te=null,le())}function se(){Pe=!0}function le(){Pe=!1}function ce(){return Pe}function ue(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),e.addClass("fr-fi"+r[0]+" fr-di"+n[0])):"inline"==n?(e.css({display:"inline-block",verticalAlign:"bottom",margin:t.opts.imageDefaultMargin}),"center"==r?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*t.opts.imageDefaultMargin+"px)"}):"left"==r?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"})):"block"==n&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:t.opts.imageDefaultMargin+"px auto"}),"left"==r?e.css({marginLeft:0}):"right"==r&&e.css({marginRight:0}))}function de(e){Te.removeClass("fr-fir fr-fil"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?Te.addClass("fr-fil"):"right"==e&&Te.addClass("fr-fir"):ue(Te,pe(),e),u(),i()}function fe(e){if("undefined"==typeof e&&(e=Te),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function pe(e){"undefined"==typeof e&&(e=Te);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function he(e){Te&&e.find("> *:first").replaceWith(t.icon.create("image-align-"+fe()))}function me(e,t){Te&&t.find('.fr-command[data-param1="'+fe()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ge(e){Te.removeClass("fr-dii fr-dib"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?Te.addClass("fr-dii"):"block"==e&&Te.addClass("fr-dib"):ue(Te,e,fe()),u(),i()}function ve(e,t){Te&&t.find('.fr-command[data-param1="'+pe()+'"]').addClass("fr-active").attr("aria-selected",!0)}function be(){var e=t.popups.get("image.insert");e||(e=P()),t.popups.isVisible("image.insert")||(b(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$sc));var n=Te.offset().left+Te.width()/2,r=Te.offset().top+Te.height();t.popups.show("image.insert",n,r,Te.outerHeight())}function ye(){if(Te){t.selection.clear();var e=t.doc.createRange();e.selectNode(Te.get(0));var n=t.selection.get();n.addRange(e)}}function Ee(){Te?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),C(Te)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function we(){return Te}function Ce(e,n,r){if("undefined"==typeof n&&(n=t.opts.imageStyles),"undefined"==typeof r&&(r=t.opts.imageMultipleStyles),!Te)return!1;if(!r){var i=Object.keys(n);i.splice(i.indexOf(e),1),Te.removeClass(i.join(" "))}"object"==typeof n[e]?(Te.removeAttr("style"),Te.css(n[e].style)):Te.toggleClass(e),C(Te)}var Te,$e,Se,xe,Ae=!1,_e=1,ke=2,Oe=3,Re=4,Ne=5,De=6,Ie=7,Le={};Le[_e]="Image cannot be loaded from the passed link.",Le[ke]="No link in upload response.",Le[Oe]="Error during file upload.",Le[Re]="Parsing response failed.",Le[Ne]="File is too large.",Le[De]="Image file type is invalid.",Le[Ie]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Fe,Me,Pe=!1;return{_init:te,showInsertPopup:r,showLayer:Y,refreshUploadButton:V,refreshByURLButton:G,upload:D,insertByURL:w,align:de,refreshAlign:he,refreshAlignOnShow:me,display:ge,refreshDisplayOnShow:ve,replace:be,back:Ee,get:we,insert:$,showProgressBar:v,remove:Z,hideProgressBar:b,applyStyle:Ce,showAltPopup:U,showSizePopup:W,setAlt:H,setSize:q,exitEdit:ae,edit:C}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){var t=this.image.get();t?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.imageAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("image-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){var t=this.image.get();t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==typeof r&&(r=r.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(r)+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,n){var r=this.image.get();r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),e.extend(e.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),e.FE.PLUGINS.imageManager=function(t){function n(){if(!$){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+t.sid+'" title="'+t.language.translate("Tags")+'"></i><h4 data-text="true">'+t.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var n='<img class="fr-preloader" id="fr-preloader" alt="'+t.language.translate("Loading")+'.." src="'+t.opts.imageManagerPreloader+'" style="display: none;">';n+='<div class="fr-image-list" id="fr-image-list"></div>';var r=t.modals.create(L,e,n);$=r.$modal,S=r.$head,x=r.$body}$.data("current-image",t.image.get()),t.modals.show(L),A||C(),a()}function r(){t.modals.hide(L)}function i(){var t=e(window).outerWidth();return t<768?2:t<1200?3:4}function o(){_.empty();for(var e=0;e<I;e++)_.append('<div class="fr-list-column"></div>')}function a(){A.show(),_.find(".fr-list-column").empty(),t.opts.imageManagerLoadURL?e.ajax({url:t.opts.imageManagerLoadURL,method:t.opts.imageManagerLoadMethod,data:t.opts.imageManagerLoadParams,dataType:"json",crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e,n,r){t.events.trigger("imageManager.imagesLoaded",[e]),s(e,r.response),A.hide()}).fail(function(){var e=this.xhr();v(M,e.response||e.responseText)}):v(P)}function s(e,t){try{_.find(".fr-list-column").empty(),R=0,N=0,D=0,O=e,l()}catch(n){v(B,t)}}function l(){if(N<O.length&&(_.outerHeight()<=x.outerHeight()+t.opts.imageManagerScrollOffset||x.scrollTop()+t.opts.imageManagerScrollOffset>_.outerHeight()-x.outerHeight())){R++;for(var e=t.opts.imageManagerPageSize*(R-1);e<Math.min(O.length,t.opts.imageManagerPageSize*R);e++)c(O[e])}}function c(n){var r=new Image,i=e('<div class="fr-image-container fr-empty fr-image-'+D++ +'" data-loading="'+t.language.translate("Loading")+'.." data-deleting="'+t.language.translate("Deleting")+'..">');p(!1),r.onload=function(){i.height(Math.floor(i.width()/r.width*r.height));var o=e("<img/>");if(n.thumb)o.attr("src",n.thumb);else{if(v(U,n),!n.url)return v(j,n),!1;o.attr("src",n.url)}if(n.url&&o.attr("data-url",n.url),n.tag)if(S.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),S.find(".fr-modal-tags").show(),n.tag.indexOf(",")>=0){for(var a=n.tag.split(","),s=0;s<a.length;s++)a[s]=a[s].trim(),0===k.find('a[title="'+a[s]+'"]').length&&k.append('<a role="button" title="'+a[s]+'">'+a[s]+"</a>");o.attr("data-tag",a.join())}else 0===k.find('a[title="'+n.tag.trim()+'"]').length&&k.append('<a role="button" title="'+n.tag.trim()+'">'+n.tag.trim()+"</a>"),o.attr("data-tag",n.tag.trim());n.name&&o.attr("alt",n.name);for(var c in n)n.hasOwnProperty(c)&&"thumb"!=c&&"url"!=c&&"tag"!=c&&o.attr("data-"+c,n[c]);i.append(o).append(e(t.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",t.language.translate("Delete"))).append(e(t.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",t.language.translate("Insert"))),k.find(".fr-selected-tag").each(function(e,t){w(o,t.text)||i.hide()}),o.on("load",function(){i.removeClass("fr-empty"),i.height("auto"),N++;var e=d(parseInt(o.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);f(e),p(!1),N%t.opts.imageManagerPageSize===0&&l()}),t.events.trigger("imageManager.imageLoaded",[o])},r.onerror=function(){N++,i.remove();var e=d(parseInt(i.attr("class").match(/fr-image-(\d+)/)[1],10)+1);f(e),v(F,n),N%t.opts.imageManagerPageSize===0&&l()},r.src=n.thumb||n.url,u().append(i)}function u(){var t,n;return _.find(".fr-list-column").each(function(r,i){var o=e(i);0===r?(n=o.outerHeight(),t=o):o.outerHeight()<n&&(n=o.outerHeight(),t=o)}),t}function d(t){void 0===t&&(t=0);for(var n=[],r=D-1;r>=t;r--){var i=_.find(".fr-image-"+r);i.length&&(n.push(i),e('<div id="fr-image-hidden-container">').append(i),_.find(".fr-image-"+r).remove())}return n}function f(e){for(var t=e.length-1;t>=0;t--)u().append(e[t])}function p(e){if(void 0===e&&(e=!0),!$.is(":visible"))return!0;var n=i();if(n!=I){I=n;var r=d();o(),f(r)}t.modals.resize(L),e&&l()}function h(e){var t={},n=e.data();for(var r in n)n.hasOwnProperty(r)&&"url"!=r&&"tag"!=r&&(t[r]=n[r]);return t}function m(n){var r=e(n.currentTarget).siblings("img"),i=$.data("instance")||t,o=$.data("current-image");if(t.modals.hide(L),i.image.showProgressBar(),o)o.data("fr-old-src",o.attr("src")),o.trigger("click");else{i.events.focus(!0),i.selection.restore();var a=i.position.getBoundingRect(),s=a.left+a.width/2+e(t.doc).scrollLeft(),l=a.top+a.height+e(t.doc).scrollTop();i.popups.setContainer("image.insert",t.$sc),i.popups.show("image.insert",s,l)}i.image.insert(r.data("url"),!1,h(r),o)}function g(n){var r=e(n.currentTarget).siblings("img"),i=t.language.translate("Are you sure? Image will be deleted.");confirm(i)&&(t.opts.imageManagerDeleteURL?t.events.trigger("imageManager.beforeDeleteImage",[r])!==!1&&(r.parent().addClass("fr-image-deleting"),e.ajax({method:t.opts.imageManagerDeleteMethod,url:t.opts.imageManagerDeleteURL,data:e.extend(e.extend({src:r.attr("src")},h(r)),t.opts.imageManagerDeleteParams),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){t.events.trigger("imageManager.imageDeleted",[e]);var n=d(parseInt(r.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);r.parent().remove(),f(n),p(!0)}).fail(function(){var e=this.xhr();v(H,e.response||e.responseText)})):v(K))}function v(n,r){10<=n&&n<20?A.hide():20<=n&&n<30&&e(".fr-image-deleting").removeClass("fr-image-deleting"),t.events.trigger("imageManager.error",[{code:n,message:W[n]},r])}function b(){var e=S.find(".fr-modal-head-line").outerHeight(),t=k.outerHeight();S.toggleClass(".fr-show-tags"),S.hasClass(".fr-show-tags")?(S.css("height",e+t),k.find("a").css("opacity",1)):(S.css("height",e),k.find("a").css("opacity",0))}function y(){var t=k.find(".fr-selected-tag");t.length>0?(_.find("img").parent().show(),t.each(function(t,n){_.find("img").each(function(t,r){var i=e(r);w(i,n.text)||i.parent().hide()})})):_.find("img").parent().show();var n=d();f(n),l()}function E(n){n.preventDefault();var r=e(n.currentTarget);r.toggleClass("fr-selected-tag"),t.opts.imageManagerToggleTags&&r.siblings("a").removeClass("fr-selected-tag"),y()}function w(e,t){for(var n=e.attr("data-tag").split(","),r=0;r<n.length;r++)if(n[r]==t)return!0;return!1}function C(){A=$.find("#fr-preloader"),_=$.find("#fr-image-list"),k=$.find("#fr-modal-tags"),I=i(),o(),S.css("height",S.find(".fr-modal-head-line").outerHeight()),t.events.$on(e(t.o_win),"resize",function(){p(!!O)}),t.helpers.isMobile()&&(t.events.bindClick(_,"div.fr-image-container",function(t){$.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),e(t.currentTarget).addClass("fr-mobile-selected")}),$.on(t._mousedown,function(){$.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),t.events.bindClick(_,".fr-insert-img",m),t.events.bindClick(_,".fr-delete-img",g),$.on(t._mousedown+" "+t._mouseup,function(e){e.stopPropagation()}),$.on(t._mousedown,"*",function(){t.events.disableBlur()}),x.on("scroll",l),t.events.bindClick($,"i#fr-modal-more-"+t.sid,b),t.events.bindClick(k,"a",E)}function T(){if(!t.$wp&&"IMG"!=t.el.tagName)return!1}var $,S,x,A,_,k,O,R,N,D,I,L="image_manager",F=10,M=11,P=12,B=13,U=14,j=15,H=21,K=22,W={};return W[F]="Image cannot be loaded from the passed link.",W[M]="Error during load images request.",W[P]="Missing imageManagerLoadURL option.",W[B]="Parsing load response failed.",W[U]="Missing image thumb.",W[j]="Missing image URL.",W[H]="Error during delete image request.",W[K]="Missing imageManagerDeleteURL option.",{require:["image"],_init:T,show:n,hide:r}},!e.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");e.FE.DEFAULTS.imageInsertButtons.push("imageManager"),e.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"
}),e.FE.DefineIcon("imageManager",{NAME:"folder"}),e.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),e.FE.DefineIcon("imageManagerDelete",{NAME:"trash"}),e.extend(e.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.FE.PLUGINS.inlineStyle=function(t){function n(n){""!==t.selection.text()?t.html.insert(e.FE.START_MARKER+'<span style="'+n+'">'+t.selection.text()+"</span>"+e.FE.END_MARKER):t.html.insert('<span style="'+n+'">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}return{apply:n}},e.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><span style="'+t[n]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[n]+'" title="'+this.language.translate(n)+'">'+this.language.translate(n)+"</a></span></li>");return e+="</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"}),e.extend(e.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),e.FE.PLUGINS.lineBreaker=function(t){function n(e,n){var r,i,o,a,s,l,c,u;if(null==e)a=n.parent(),s=a.offset().top,c=n.offset().top,r=c-Math.min((c-s)/2,t.opts.lineBreakerOffset),o=a.outerWidth(),i=a.offset().left;else if(null==n)a=e.parent(),l=a.offset().top+a.outerHeight(),u=e.offset().top+e.outerHeight(),r=u+Math.min((l-u)/2,t.opts.lineBreakerOffset),o=a.outerWidth(),i=a.offset().left;else{a=e.parent();var d=e.offset().top+e.height(),f=n.offset().top;if(d>f)return!1;r=(d+f)/2,o=a.outerWidth(),i=a.offset().left}t.opts.iframe&&(i+=t.$iframe.offset().left-t.helpers.scrollLeft(),r+=t.$iframe.offset().top-t.helpers.scrollTop()),t.$box.append(g),g.css("top",r-t.win.pageYOffset),g.css("left",i-t.win.pageXOffset),g.css("width",o),g.data("tag1",e),g.data("tag2",n),g.addClass("fr-visible").data("instance",t)}function r(e,r){var o,a,s=e.offset().top,l=e.offset().top+e.outerHeight();if(Math.abs(l-r)<=t.opts.lineBreakerOffset||Math.abs(r-s)<=t.opts.lineBreakerOffset)if(Math.abs(l-r)<Math.abs(r-s)){a=e.get(0);for(var c=a.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;)c=c.nextSibling;if(!c)return n(e,null),!0;if(o=i(c))return n(e,o),!0}else{if(a=e.get(0),!a.previousSibling)return n(null,e),!0;if(o=i(a.previousSibling))return n(o,e),!0}g.removeClass("fr-visible").removeData("instance")}function i(n){if(n){var r=e(n);if(0===t.$el.find(r).length)return null;if(n.nodeType!=Node.TEXT_NODE&&r.is(t.opts.lineBreakerTags.join(",")))return r;if(r.parents(t.opts.lineBreakerTags.join(",")).length>0)return n=r.parents(t.opts.lineBreakerTags.join(",")).get(0),e(n)}return null}function o(n,r){var i=t.doc.elementFromPoint(n,r);return i&&!e(i).closest(".fr-line-breaker").length&&!t.node.isElement(i)&&i!=t.$wp.get(0)&&e(i).closest(t.$wp).length?i:null}function a(e,n,r){for(var i=r,a=null;i<=t.opts.lineBreakerOffset&&!a;)a=o(e,n-i),a||(a=o(e,n+i)),i+=r;return a}function s(e,n,r){for(var i=null;!i&&e>t.$box.offset().left&&e<t.$box.offset().left+t.$box.outerWidth();)i=o(e,n),i||(i=a(e,n,5)),"left"==r?e-=t.opts.lineBreakerHorizontalOffset:e+=t.opts.lineBreakerHorizontalOffset;return i}function l(e){b=null;var n=null,o=null,l=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);l&&("HTML"==l.tagName||"BODY"==l.tagName||t.node.isElement(l)||l.classList.contains(".fr-line-breaker"))?(o=a(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset,1),o||(o=s(e.pageX-t.win.pageXOffset-t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"left")),o||(o=s(e.pageX-t.win.pageXOffset+t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"right")),n=i(o)):n=i(l),n?r(n,e.pageY):t.core.sameInstance(g)&&g.removeClass("fr-visible").removeData("instance")}function c(e){return!(g.hasClass("fr-visible")&&!t.core.sameInstance(g))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(g.removeClass("fr-visible"),!0):void(v===!1&&(b&&clearTimeout(b),b=setTimeout(l,30,e))))}function u(){b&&clearTimeout(b),g.hasClass("fr-visible")&&g.removeClass("fr-visible").removeData("instance")}function d(){v=!0,u()}function f(){v=!1}function p(n){if(!t.core.sameInstance(g))return!0;n.preventDefault(),g.removeClass("fr-visible").removeData("instance");var r=g.data("tag1"),i=g.data("tag2"),o=t.html.defaultTag();null==r?o&&"TD"!=i.parent().get(0).tagName?i.before("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):i.before(e.FE.MARKERS+"<br>"):o&&"TD"!=r.parent().get(0).tagName&&0===r.parents(o).length?r.after("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):r.after(e.FE.MARKERS+"<br>"),t.selection.restore()}function h(){t.shared.$line_breaker||(t.shared.$line_breaker=e('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),g=t.shared.$line_breaker,t.events.on("shared.destroy",function(){g.html("").removeData().remove(),g=null},!0),t.events.on("destroy",function(){g.removeData("instance").removeClass("fr-visible").appendTo("body"),clearTimeout(b)},!0),t.events.$on(g,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(g,"mousedown","a",function(e){e.stopPropagation()},!0),t.events.$on(g,"click","a",p,!0)}function m(){return!!t.$wp&&(h(),v=!1,t.events.$on(t.$win,"mousemove",c),t.events.$on(e(t.win),"scroll",u),t.events.on("popups.show.table.edit",u),t.events.on("commands.after",u),t.events.$on(e(t.win),"mousedown",d),void t.events.$on(e(t.win),"mouseup",f))}var g,v,b;return{_init:m}},e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var r=t.selection.ranges(0).commonAncestorContainer;if(r&&(r.contains&&r.contains(t.el)||!t.el.contains(r)||t.el==r)&&(r=null),r&&"A"===r.tagName)return r;var i=t.selection.element(),o=t.selection.endElement();return"A"==i.tagName||t.node.isElement(i)||(i=e(i).parentsUntil(t.$el,"a:first").get(0)),"A"==o.tagName||t.node.isElement(o)||(o=e(o).parentsUntil(t.$el,"a:first").get(0)),o&&(o.contains&&o.contains(t.el)||!t.el.contains(o)||t.el==o)&&(o=null),i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null),o&&o==i&&"A"==o.tagName?i:null}return"A"==t.el.tagName?t.el:n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function r(){var e=t.image?t.image.get():null,n=[];if(e)"A"==e.get(0).parentNode.tagName&&n.push(e.get(0).parentNode);else{var r,i,o,a;if(t.win.getSelection){var s=t.win.getSelection();if(s.getRangeAt&&s.rangeCount){a=t.doc.createRange();for(var l=0;l<s.rangeCount;++l)if(r=s.getRangeAt(l),i=r.commonAncestorContainer,i&&1!=i.nodeType&&(i=i.parentNode),i&&"a"==i.nodeName.toLowerCase())n.push(i);else{o=i.getElementsByTagName("a");for(var c=0;c<o.length;++c)a.selectNodeContents(o[c]),a.compareBoundaryPoints(r.END_TO_START,r)<1&&a.compareBoundaryPoints(r.START_TO_END,r)>-1&&n.push(o[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if(r=t.doc.selection.createRange(),i=r.parentElement(),"a"==i.nodeName.toLowerCase())n.push(i);else{o=i.getElementsByTagName("a"),a=t.doc.body.createTextRange();for(var u=0;u<o.length;++u)a.moveToElementText(o[u]),a.compareEndPoints("StartToEnd",r)>-1&&a.compareEndPoints("EndToStart",r)<1&&n.push(o[u])}}return n}function i(r){a(),setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var i=n(),a=t.image?t.image.get():null;if(i&&!a){if(t.image){var s=t.node.contents(i);if(1==s.length&&"IMG"==s[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),t.selection.restore(),!1}}r&&r.stopPropagation(),o(i)}}},t.helpers.isIOS()?100:0)}function o(n){var r=t.popups.get("link.edit");r||(r=s());var i=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var o=i.offset().left+e(n).outerWidth()/2,a=i.offset().top+i.outerHeight();t.popups.show("link.edit",o,a,i.outerHeight())}function a(){t.popups.hide("link.edit")}function s(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.el.tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var r={buttons:e},i=t.popups.create("link.edit",r);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&o(n())}),i}function l(){}function c(){var r=t.popups.get("link.insert"),i=n();if(i){var o,a,s=e(i),l=r.find('input.fr-link-attr[type="text"]'),c=r.find('input.fr-link-attr[type="checkbox"]');for(o=0;o<l.length;o++)a=e(l[o]),a.val(s.attr(a.attr("name")||""));for(c.prop("checked",!1),o=0;o<c.length;o++)a=e(c[o]),s.attr(a.attr("name"))==a.data("checked")&&a.prop("checked",!0);r.find('input.fr-link-attr[type="text"][name="text"]').val(s.text())}else r.find('input.fr-link-attr[type="text"]').val(""),r.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),r.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());r.find("input.fr-link-attr").trigger("change");var u=t.image?t.image.get():null;u?r.find('.fr-link-attr[name="text"]').parent().hide():r.find('.fr-link-attr[name="text"]').parent().show()}function u(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=d()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("link.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")}function d(e){if(e)return t.popups.onRefresh("link.insert",c),t.popups.onHide("link.insert",l),!0;var r="";t.opts.linkInsertButtons.length>=1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',o="",a=0;o='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',o+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++a+'"></div>',t.opts.linkText&&(o+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++a+'"></div>');for(var s in t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(s)){var u=t.opts.linkAttributes[s];o+='<div class="fr-input-line"><input name="'+s+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(u)+'" tabIndex="'+ ++a+'"></div>'}t.opts.linkAlwaysBlank||(o+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++a+'"><span>'+i+'</span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>"),o+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++a+'" type="button">'+t.language.translate("Insert")+"</button></div></div>";var d={buttons:r,input_layer:o},f=t.popups.create("link.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){var e=t.image?t.image.get():null;e&&t.popups.isVisible("link.insert")&&E(),n&&t.popups.isVisible("link.insert")&&b()}),f}function f(){var r=n(),i=t.image?t.image.get():null;return t.events.trigger("link.beforeRemove",[r])!==!1&&void(i&&r?(i.unwrap(),t.image.edit(i)):r&&(t.selection.save(),e(r).replaceWith(e(r).html()),t.selection.restore(),a()))}function p(){t.events.on("keyup",function(t){t.which!=e.FE.KEYCODE.ESC&&i(t)}),t.events.on("window.mouseup",i),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",i),d(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1},!0)}function h(n){var r,i,o=t.opts.linkList[n],a=t.popups.get("link.insert"),s=a.find('input.fr-link-attr[type="text"]'),l=a.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<s.length;i++)r=e(s[i]),o[r.attr("name")]?r.val(o[r.attr("name")]):"text"!=r.attr("name")&&r.val("");for(i=0;i<l.length;i++)r=e(l[i]),r.prop("checked",r.data("checked")==o[r.attr("name")]);t.accessibility.focusPopup(a)}function m(){var n,r,i=t.popups.get("link.insert"),o=i.find('input.fr-link-attr[type="text"]'),a=i.find('input.fr-link-attr[type="checkbox"]'),s=o.filter('[name="href"]').val(),l=o.filter('[name="text"]').val(),c={};for(r=0;r<o.length;r++)n=e(o[r]),["href","text"].indexOf(n.attr("name"))<0&&(c[n.attr("name")]=n.val());for(r=0;r<a.length;r++)n=e(a[r]),n.is(":checked")?c[n.attr("name")]=n.data("checked"):c[n.attr("name")]=n.data("unchecked")||null;var u=t.helpers.scrollTop();v(s,l,c),e(t.o_win).scrollTop(u)}function g(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var r=e(n.pop());r.removeClass("fr-unprocessed");var i=t.node.deepestParent(r.get(0));if(i){var o=r.get(0),a="",s="";do o=o.parentNode,t.node.isBlock(o)||(a+=t.node.closeTagString(o),s=t.node.openTagString(o)+s);while(o!=i);var l=t.node.openTagString(r.get(0))+r.html()+t.node.closeTagString(r.get(0));r.replaceWith('<span id="fr-break"></span>');var c=e(i).html();c=c.replace(/<span id="fr-break"><\/span>/g,a+l+s),e(i).html(c)}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.selection.restore()}}function v(o,a,s){if("undefined"==typeof s&&(s={}),t.events.trigger("link.beforeInsert",[o,a,s])===!1)return!1;var l=t.image?t.image.get():null;l||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var c=o;if(t.opts.linkConvertEmailAddress){var u=/^[\w._]+@[a-z\u00a1-\uffff0-9_-]+?\.[a-z\u00a1-\uffff0-9]{2,}$/i;u.test(o)&&!/^mailto:.*/i.test(o)&&(o="mailto:"+o)}if(""===t.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(o)||/^data:image.*/i.test(o)||/^(https?:|ftps?:|file:|)\/\//i.test(o)||["/","{","[","#","("].indexOf((o||"")[0])<0&&(o=t.opts.linkAutoPrefix+o),o=t.helpers.sanitizeURL(o),t.opts.linkAlwaysBlank&&(s.target="_blank"),t.opts.linkAlwaysNoFollow&&(s.rel="nofollow"),"_blank"==s.target&&(s.rel?s.rel+=" noopener noreferrer":s.rel="noopener noreferrer"),a=a||"",o===t.opts.linkAutoPrefix){var d=t.popups.get("link.insert");return d.find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[c]),!1}var f,p=n();if(p)f=e(p),f.attr("href",o),a.length>0&&f.text()!=a&&!l&&f.text(a),l||f.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),f.attr(s),l||t.selection.restore();else{l?l.wrap('<a href="'+o+'"></a>'):(t.format.remove("a"),t.selection.isCollapsed()?(a=0===a.length?c:a,t.html.insert('<a href="'+o+'">'+e.FE.START_MARKER+a+e.FE.END_MARKER+"</a>"),t.selection.restore()):a.length>0&&a!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+o+'">'+e.FE.START_MARKER+a+e.FE.END_MARKER+"</a>"),t.selection.restore()):(g(),t.format.apply("a",{href:o})));for(var h=r(),m=0;m<h.length;m++)f=e(h[m]),f.attr(s),f.removeAttr("_moz_dirty");1==h.length&&t.$wp&&!l&&(e(h[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}if(l){var v=t.popups.get("link.insert");v.find("input:focus").blur(),t.image.edit(l)}else i()}function b(){a();var r=n();if(r){var i=t.popups.get("link.insert");i||(i=d()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var o=(t.image?t.image.get():null)||e(r),s=o.offset().left+o.outerWidth()/2,l=o.offset().top+o.outerHeight();t.popups.show("link.insert",s,l,o.outerHeight())}}function y(){var e=t.image?t.image.get():null;if(e)t.image.back();else{t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var r=n();r&&t.$wp?(t.selection.restore(),a(),i()):"A"==t.el.tagName?(t.$el.focus(),i()):(t.popups.hide("link.insert"),t.toolbar.showInline())}}function E(){var e=t.image?t.image.get():null;if(e){var n=t.popups.get("link.insert");n||(n=d()),c(!0),t.popups.setContainer("link.insert",t.$sc);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+e.outerHeight();t.popups.show("link.insert",r,i,e.outerHeight())}}function w(r,o,a){"undefined"==typeof a&&(a=t.opts.linkMultipleStyles),"undefined"==typeof o&&(o=t.opts.linkStyles);var s=n();if(!s)return!1;if(!a){var l=Object.keys(o);l.splice(l.indexOf(r),1),e(s).removeClass(l.join(" "))}e(s).toggleClass(r),i()}return{_init:p,remove:f,showInsertPopup:u,usePredefined:h,insertCallback:m,insert:v,update:b,get:n,allSelected:r,back:y,imageLink:E,applyStyle:w}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"insertLink",null,"K"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)}}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus(),n=this.image?this.image.get():null;n||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)}}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){var t=this.link.get();t?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t,n=this.link.get();n?(t=e.prev(),t.hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):(t=e.prev(),t.hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var r=this.link.get();if(r){var i=e(r);n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=i.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}}),e.FE.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function r(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function i(t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i].parentNode;"LI"==t[i].tagName&&o.tagName!=n&&r.indexOf(o)<0&&r.push(o)}for(i=r.length-1;i>=0;i--){var a=e(r[i]);a.replaceWith("<"+n.toLowerCase()+">"+a.html()+"</"+n.toLowerCase()+">")}}function o(n,r){i(n,r);for(var o=t.html.defaultTag(),a=0;a<n.length;a++)"LI"!=n[a].tagName&&(o&&n[a].tagName.toLowerCase()==o?e(n[a]).replaceWith("<"+r+"><li"+t.node.attributes(n[a])+">"+e(n[a]).html()+"</li></"+r+">"):e(n[a]).wrap("<"+r+"><li></li></"+r+">"));t.clean.lists()}function a(i){var o,a;for(o=i.length-1;o>=0;o--)for(a=o-1;a>=0;a--)if(e(i[a]).find(i[o]).length||i[a]==i[o]){i.splice(o,1);break}var s=[];for(o=0;o<i.length;o++){var l=e(i[o]),c=i[o].parentNode;l.before(r(c.tagName)),"LI"==c.parentNode.tagName?(l.before(r("LI")),l.after(n("LI"))):(t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(r("LI"))),l.after(n(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),s.indexOf(c)<0&&s.push(c)}for(o=0;o<s.length;o++){var u=e(s[o]),d=u.html();d=d.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),d=d.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),u.replaceWith(t.node.openTagString(u.get(0))+d+t.node.closeTagString(u.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function s(e,t){for(var n=!0,r=0;r<e.length;r++){if("LI"!=e[r].tagName)return!1;e[r].parentNode.tagName!=t&&(n=!1)}return n}function l(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),r=0;r<n.length;r++)"LI"!=n[r].tagName&&"LI"==n[r].parentNode.tagName&&(n[r]=n[r].parentNode);t.selection.save(),s(n,e)?a(n):o(n,e),t.html.unwrap(),t.selection.restore()}function c(n,r){var i=e(t.selection.element());if(i.get(0)!=t.el){var o=i.get(0);"LI"!=o.tagName&&(o=i.parents("li").get(0)),o&&o.parentNode.tagName==r&&t.el.contains(o.parentNode)&&n.addClass("fr-active")}}function u(n){t.selection.save();for(var r=0;r<n.length;r++){var i=n[r].previousSibling;if(i){var o=e(n[r]).find("> ul, > ol").last().get(0);if(o){for(var a=e("<li>").prependTo(e(o)),s=t.node.contents(n[r])[0];s&&!t.node.isList(s);){var l=s.nextSibling;a.append(s),s=l}e(i).append(e(o)),e(n[r]).remove()}else{var c=e(i).find("> ul, > ol").last().get(0);if(c)e(c).append(e(n[r]));else{var u=e("<"+n[r].parentNode.tagName+">");e(i).append(u),u.append(e(n[r]))}}}}t.clean.lists(),t.selection.restore()}function d(e){t.selection.save(),a(e),t.selection.restore()}function f(e){if("indent"==e||"outdent"==e){for(var n=!1,r=t.selection.blocks(),i=[],o=0;o<r.length;o++)"LI"==r[o].tagName?(n=!0,i.push(r[o])):"LI"==r[o].parentNode.tagName&&(n=!0,i.push(r[o].parentNode));n&&("indent"==e?u(i):d(i))}}function p(){t.events.on("commands.after",f),t.events.on("keydown",function(n){if(n.which==e.FE.KEYCODE.TAB){for(var r=t.selection.blocks(),i=[],o=0;o<r.length;o++)"LI"==r[o].tagName?i.push(r[o]):"LI"==r[o].parentNode.tagName&&i.push(r[o].parentNode);if(i.length>1||i.length&&(t.selection.info(i[0]).atStart||t.node.isEmpty(i[0])))return n.preventDefault(),n.stopPropagation(),n.shiftKey?d(i):u(i),!1}},!0)}return{_init:p,format:l,refresh:c}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol"}),e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,r){var i=t.html.defaultTag();if(r&&r.toLowerCase()!=i)if(n.find("ul, ol").length>0){var o=e("<"+r+">");n.prepend(o);for(var a=t.node.contents(n.get(0))[0];a&&["UL","OL"].indexOf(a.tagName)<0;){var s=a.nextSibling;o.append(a),a=s}}else n.html("<"+r+">"+n.html()+"</"+r+">")}function r(n,r){var i=t.html.defaultTag();r||(r='div class="fr-temp-div" data-empty="true"'),r.toLowerCase()==i?n.replaceWith(n.html()):n.replaceWith(e("<"+r+">").html(n.html()))}function i(n,r){var i=t.html.defaultTag();r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),r.toLowerCase()==i?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+r+">").html(n.html()))}function o(n,r){r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+r+" "+t.node.attributes(n.get(0))+">").html(n.html()))}function a(a){"N"==a&&(a=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var s=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<s.length;l++)if(s[l].tagName!=a&&!t.node.isList(s[l])){var c=e(s[l]);"LI"==s[l].tagName?n(c,a):"LI"==s[l].parentNode.tagName&&s[l]?r(c,a):["TD","TH"].indexOf(s[l].parentNode.tagName)>=0?i(c,a):o(c,a)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function s(e,n){var r=t.selection.blocks();if(r.length){var i=r[0],o="N",a=t.html.defaultTag();i.tagName.toLowerCase()!=a&&i!=t.el&&(o=i.tagName),n.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0)}else n.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function l(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var r=n[0],i="N",o=t.html.defaultTag();r.tagName.toLowerCase()!=o&&r!=t.el&&(i=r.tagName),["LI","TD","TH"].indexOf(i)>=0&&(i="N"),e.find("> span").text(t.opts.paragraphFormat[i])}else e.find("> span").text(t.opts.paragraphFormat.N)}}return{apply:a,refreshOnShow:s,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var r=this.shortcuts.get("paragraphFormat."+n);r=r?'<span class="fr-shortcut">'+r+"</span>":"",e+='<li role="presentation"><'+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"}),e.extend(e.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.FE.PLUGINS.paragraphStyle=function(t){function n(n,r,i){"undefined"==typeof r&&(r=t.opts.paragraphStyles),"undefined"==typeof i&&(i=t.opts.paragraphMultipleStyles);var o="";i||(o=Object.keys(r),o.splice(o.indexOf(n),1),o=o.join(" ")),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var a=t.selection.blocks();t.selection.save();for(var s=e(a[0]).hasClass(n),l=0;l<a.length;l++)e(a[l]).removeClass(o).toggleClass(n,!s),e(a[l]).hasClass("fr-temp-div")&&e(a[l]).removeClass("fr-temp-div"),""===e(a[l]).attr("class")&&e(a[l]).removeAttr("class");t.html.unwrap(),t.selection.restore()}function r(n,r){var i=t.selection.blocks();if(i.length){var o=e(i[0]);r.find(".fr-command").each(function(){var t=e(this).data("param1"),n=o.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}function i(){}return{_init:i,apply:n,refreshOnShow:r}},e.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command '+n+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.FE.DefineIcon("paragraphStyle",{NAME:"magic"}),e.FE.PLUGINS.print=function(e){function t(){var t=e.$el.html(),n=null;e.shared.print_iframe?n=e.shared.print_iframe:(n=document.createElement("iframe"),n.name="fr-print",n.style.position="fixed",n.style.top="0",n.style.left="-9999px",n.style.height="100%",n.style.width="0",n.style.overflow="hidden",n.style["z-index"]="9999",n.style.tabIndex="-1",document.body.appendChild(n),n.onload=function(){setTimeout(function(){e.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),e.$win.get(0).focus(),e.events.disableBlur(),e.events.focus()},0)},e.shared.print_iframe=n);var r=n.contentWindow;r.document.open(),r.document.write("<!DOCTYPE html><html><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),function(e){e=e.cloneNode(!0),r.document.write(e.outerHTML)});var i=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(i,function(e){var t=document.createElement("link");t.rel=e.rel,t.href=e.href,t.media="print",t.type="text/css",t.media="all",r.document.write(t.outerHTML)}),r.document.write('</head><body style="text-align: '+("rtl"==e.opts.direction?"right":"left")+"; direction: "+e.opts.direction+';"><div class="fr-view">'),r.document.write(t),r.document.write("</div></body></html>"),
r.document.close()}return{run:t}},e.FE.DefineIcon("print",{NAME:"print"}),e.FE.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),e.extend(e.FE.DEFAULTS,{quickInsertButtons:["image","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),e.FE.QUICK_INSERT_BUTTONS={image:{icon:"insertImage",callback:function(){var t=this;t.shared.$qi_image_input||(t.shared.$qi_image_input=e('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),e("body").append(t.shared.$qi_image_input),t.events.$on(t.shared.$qi_image_input,"change",function(){var t=e(this).data("inst");this.files&&(t.quickInsert.hide(),t.image.upload(this.files)),e(this).val("")},!0)),t.$qi_image_input=t.shared.$qi_image_input,t.helpers.isMobile()&&t.selection.save(),t.$qi_image_input.data("inst",t).trigger("click")},requiredPlugin:"image",title:"Insert Image"},table:{icon:"insertTable",callback:function(){this.quickInsert.hide(),this.table.insert(2,2),this.undo.saveStep()},requiredPlugin:"table",title:"Insert Table"},ol:{icon:"formatOL",callback:function(){this.quickInsert.hide(),this.lists.format("OL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Ordered List"},ul:{icon:"formatUL",callback:function(){this.quickInsert.hide(),this.lists.format("UL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Unordered List"},hr:{icon:"insertHR",callback:function(){this.quickInsert.hide(),this.commands.insertHR(),this.undo.saveStep()},title:"Insert Horizontal Line"}},e.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),e.FE.RegisterQuickInsertCommand=function(t,n){e.FE.QUICK_INSERT_BUTTONS[t]=n},e.FE.PLUGINS.quickInsert=function(t){function n(e){var n,r,i;n=e.offset().top-t.$box.offset().top,r=0-u.outerWidth(),i=(u.outerHeight()-e.outerHeight())/2,t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),u.hasClass("fr-on")&&n>=0&&d.css("top",n-i),n>=0&&n-i<=t.$box.outerHeight()-e.outerHeight()?(u.hasClass("fr-hidden")&&(u.hasClass("fr-on")&&a(),u.removeClass("fr-hidden")),u.css("top",n-i)):u.hasClass("fr-visible")&&(u.addClass("fr-hidden"),s()),u.css("left",r)}function r(e){u||l(),u.hasClass("fr-on")&&s(),t.$box.append(u),n(e),u.data("tag",e),u.addClass("fr-visible")}function i(){if(t.core.hasFocus()){var n=t.selection.element();t.node.isBlock(n)||(n=t.node.blockParent(n)),n&&t.node.isEmpty(n)&&t.node.isElement(n.parentNode)?u&&u.data("tag").is(e(n))&&u.hasClass("fr-on")?s():t.selection.isCollapsed()&&r(e(n)):o()}}function o(){u&&(t.html.checkIfEmpty(),u.hasClass("fr-on")&&s(),u.removeClass("fr-visible fr-on"),u.css("left",-9999).css("top",-9999))}function a(n){if(n&&n.preventDefault(),u.hasClass("fr-on")&&!u.hasClass("fr-hidden"))s();else{if(!t.shared.$qi_helper){for(var r=t.opts.quickInsertButtons,i='<div class="fr-qi-helper">',o=0,a=0;a<r.length;a++){var l=e.FE.QUICK_INSERT_BUTTONS[r[a]];l&&(!l.requiredPlugin||e.FE.PLUGINS[l.requiredPlugin]&&t.opts.pluginsEnabled.indexOf(l.requiredPlugin)>=0)&&(i+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(l.title)+'" tabIndex="-1" data-cmd="'+r[a]+'" style="transition-delay: '+.025*o++ +'s;">'+t.icon.create(l.icon)+"</a>")}i+="</div>",t.shared.$qi_helper=e(i),t.tooltip.bind(t.shared.$qi_helper,".fr-qi-helper > a.fr-btn")}d=t.shared.$qi_helper,d.appendTo(t.$box),setTimeout(function(){d.css("top",parseFloat(u.css("top"))),d.css("left",parseFloat(u.css("left"))+u.outerWidth()),d.find("a").addClass("fr-size-1"),u.addClass("fr-on")},10)}}function s(){var e=t.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),u.hasClass("fr-hidden")||u.removeClass("fr-on"))}function l(){t.shared.$quick_insert||(t.shared.$quick_insert=e('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Quick Insert")+'">'+t.icon.create("quickInsert")+"</a></div>")),u=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",function(){u.removeClass("fr-on").appendTo(e("body")).css("left",-9999).css("top",-9999),d&&(s(),d.appendTo(e("body")))},!0),t.events.on("shared.destroy",function(){u.html("").removeData().remove(),u=null,d&&(d.html("").removeData().remove(),d=null)},!0),t.events.on("commands.before",o),t.events.on("commands.after",function(){t.popups.areVisible()||i()}),t.events.bindClick(t.$box,".fr-quick-insert > a",a),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",function(n){var r=e(n.currentTarget).data("cmd");e.FE.QUICK_INSERT_BUTTONS[r].callback.apply(t,[n.currentTarget])}),t.events.$on(t.$wp,"scroll",function(){u.hasClass("fr-visible")&&n(u.data("tag"))})}function c(){return!!t.$wp&&(t.opts.iframe&&t.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),t.popups.onShow("image.edit",o),t.events.on("mouseup",i),t.helpers.isMobile()&&t.events.$on(e(t.o_doc),"selectionchange",i),t.events.on("blur",o),t.events.on("keyup",i),void t.events.on("keydown",function(){setTimeout(function(){i()},0)}))}var u,d;return{_init:c,hide:o}},e.FE.PLUGINS.quote=function(t){function n(e){for(;e.parentNode&&e.parentNode!=t.el;)e=e.parentNode;return e}function r(){var r,i=t.selection.blocks();for(r=0;r<i.length;r++)i[r]=n(i[r]);t.selection.save();var o=e("<blockquote>");for(o.insertBefore(i[0]),r=0;r<i.length;r++)o.append(i[r]);t.html.unwrap(),t.selection.restore()}function i(){var n,r=t.selection.blocks();for(n=0;n<r.length;n++)"BLOCKQUOTE"!=r[n].tagName&&(r[n]=e(r[n]).parentsUntil(t.$el,"BLOCKQUOTE").get(0));for(t.selection.save(),n=0;n<r.length;n++)r[n]&&e(r[n]).replaceWith(r[n].innerHTML);t.html.unwrap(),t.selection.restore()}function o(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore(),"increase"==e?r():"decrease"==e&&i()}return{apply:o}},e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),e.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.FE.DefineIcon("quote",{NAME:"quote-left"}),e.extend(e.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.FE.PLUGINS.save=function(t){function n(e,n){t.events.trigger("save.error",[{code:e,message:p[e]},n])}function r(r){if("undefined"==typeof r&&(r=t.html.get()),t.events.trigger("save.before")===!1)return!1;if(t.opts.saveURL){var i={};for(var o in t.opts.saveParams)if(t.opts.saveParams.hasOwnProperty(o)){var a=t.opts.saveParams[o];"function"==typeof a?i[o]=a.call(this):i[o]=a}var s={};s[t.opts.saveParam]=r,e.ajax({type:t.opts.saveMethod,url:t.opts.saveURL,data:e.extend(s,i),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){c=r,t.events.trigger("save.after",[e])}).fail(function(e){n(f,e.response||e.responseText)})}else n(d)}function i(){clearTimeout(l),l=setTimeout(function(){var e=t.html.get();(c!=e||u)&&(c=e,u=!1,r(e))},t.opts.saveInterval)}function o(){i(),u=!1}function a(){u=!0}function s(){t.opts.saveInterval&&(c=t.html.get(),t.events.on("contentChanged",i),t.events.on("keydown destroy",function(){clearTimeout(l)}))}var l=null,c=null,u=!1,d=1,f=2,p={};return p[d]="Missing saveURL option.",p[f]="Something went wrong during save.",{_init:s,save:r,reset:o,force:a}},e.FE.DefineIcon("save",{NAME:"floppy-o"}),e.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),e.extend(e.FE.DEFAULTS,{specialCharactersSets:[{title:"Latin",list:[{"char":"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{"char":"&cent;",desc:"CENT SIGN"},{"char":"&pound;",desc:"POUND SIGN"},{"char":"&curren;",desc:"CURRENCY SIGN"},{"char":"&yen;",desc:"YEN SIGN"},{"char":"&brvbar;",desc:"BROKEN BAR"},{"char":"&sect;",desc:"SECTION SIGN"},{"char":"&uml;",desc:"DIAERESIS"},{"char":"&copy;",desc:"COPYRIGHT SIGN"},{"char":"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{"char":"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&not;",desc:"NOT SIGN"},{"char":"&reg;",desc:"REGISTERED SIGN"},{"char":"&macr;",desc:"MACRON"},{"char":"&deg;",desc:"DEGREE SIGN"},{"char":"&plusmn;",desc:"PLUS-MINUS SIGN"},{"char":"&sup2;",desc:"SUPERSCRIPT TWO"},{"char":"&sup3;",desc:"SUPERSCRIPT THREE"},{"char":"&acute;",desc:"ACUTE ACCENT"},{"char":"&micro;",desc:"MICRO SIGN"},{"char":"&para;",desc:"PILCROW SIGN"},{"char":"&middot;",desc:"MIDDLE DOT"},{"char":"&cedil;",desc:"CEDILLA"},{"char":"&sup1;",desc:"SUPERSCRIPT ONE"},{"char":"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{"char":"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{"char":"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{"char":"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{"char":"&iquest;",desc:"INVERTED QUESTION MARK"},{"char":"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{"char":"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{"char":"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{"char":"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{"char":"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{"char":"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{"char":"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{"char":"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{"char":"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{"char":"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{"char":"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{"char":"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{"char":"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{"char":"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{"char":"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{"char":"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{"char":"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{"char":"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{"char":"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{"char":"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{"char":"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{"char":"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{"char":"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{"char":"&times;",desc:"MULTIPLICATION SIGN"},{"char":"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{"char":"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{"char":"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{"char":"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{"char":"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{"char":"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{"char":"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{"char":"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{"char":"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{"char":"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{"char":"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{"char":"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{"char":"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{"char":"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{"char":"&aelig;",desc:"LATIN SMALL LETTER AE"},{"char":"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{"char":"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{"char":"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{"char":"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{"char":"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{"char":"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{"char":"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{"char":"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{"char":"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{"char":"&eth;",desc:"LATIN SMALL LETTER ETH"},{"char":"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{"char":"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{"char":"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{"char":"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{"char":"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{"char":"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{"char":"&divide;",desc:"DIVISION SIGN"},{"char":"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{"char":"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{"char":"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"},{"char":"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{"char":"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{"char":"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{"char":"&thorn;",desc:"LATIN SMALL LETTER THORN"},{"char":"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",list:[{"char":"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{"char":"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{"char":"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{"char":"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{"char":"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{"char":"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{"char":"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{"char":"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{"char":"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{"char":"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{"char":"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{"char":"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{"char":"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{"char":"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{"char":"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{"char":"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{"char":"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{"char":"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{"char":"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{"char":"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{"char":"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{"char":"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{"char":"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{"char":"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{"char":"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{"char":"&beta;",desc:"GREEK SMALL LETTER BETA"},{"char":"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{"char":"&delta;",desc:"GREEK SMALL LETTER DELTA"},{"char":"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{"char":"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{"char":"&eta;",desc:"GREEK SMALL LETTER ETA"},{"char":"&theta;",desc:"GREEK SMALL LETTER THETA"},{"char":"&iota;",desc:"GREEK SMALL LETTER IOTA"},{"char":"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{"char":"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{"char":"&mu;",desc:"GREEK SMALL LETTER MU"},{"char":"&nu;",desc:"GREEK SMALL LETTER NU"},{"char":"&xi;",desc:"GREEK SMALL LETTER XI"},{"char":"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{"char":"&pi;",desc:"GREEK SMALL LETTER PI"},{"char":"&rho;",desc:"GREEK SMALL LETTER RHO"},{"char":"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{"char":"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{"char":"&tau;",desc:"GREEK SMALL LETTER TAU"},{"char":"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{"char":"&phi;",desc:"GREEK SMALL LETTER PHI"},{"char":"&chi;",desc:"GREEK SMALL LETTER CHI"},{"char":"&psi;",desc:"GREEK SMALL LETTER PSI"},{"char":"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{"char":"&thetasym;",desc:"GREEK THETA SYMBOL"},{"char":"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{"char":"&straightphi;",desc:"GREEK PHI SYMBOL"},{"char":"&piv;",desc:"GREEK PI SYMBOL"},{"char":"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{"char":"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{"char":"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{"char":"&varrho;",desc:"GREEK RHO SYMBOL"},{"char":"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{"char":"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",list:[{"char":"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{"char":"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{"char":"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{"char":"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{"char":"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{"char":"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{"char":"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{"char":"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{"char":"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{"char":"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{"char":"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{"char":"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{"char":"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{"char":"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{"char":"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{"char":"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{"char":"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{"char":"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{"char":"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{"char":"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{"char":"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{"char":"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{"char":"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{"char":"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{"char":"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{"char":"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{"char":"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{"char":"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{"char":"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{"char":"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{"char":"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{"char":"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{"char":"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{"char":"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{"char":"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{"char":"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{"char":"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{"char":"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{"char":"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{"char":"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{"char":"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{"char":"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{"char":"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{"char":"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{"char":"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{"char":"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{"char":"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{"char":"&#x430",desc:"CYRILLIC SMALL LETTER A"},{"char":"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{"char":"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{"char":"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{"char":"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{"char":"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{"char":"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{"char":"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{"char":"&#x438",desc:"CYRILLIC SMALL LETTER I"},{"char":"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{"char":"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{"char":"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{"char":"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{"char":"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{"char":"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{"char":"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{"char":"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{"char":"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{"char":"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{"char":"&#x443",desc:"CYRILLIC SMALL LETTER U"},{"char":"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{"char":"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{"char":"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{"char":"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{"char":"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{"char":"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{"char":"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{"char":"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{"char":"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{"char":"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{"char":"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{"char":"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{"char":"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{"char":"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{"char":"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{"char":"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{"char":"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{"char":"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{"char":"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{"char":"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{"char":"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{"char":"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{"char":"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{"char":"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{"char":"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{"char":"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{"char":"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",list:[{"char":"&ndash;",desc:"EN DASH"},{"char":"&mdash;",desc:"EM DASH"},{"char":"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{"char":"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{"char":"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{"char":"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{"char":"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{"char":"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{"char":"&dagger;",desc:"DAGGER"},{"char":"&Dagger;",desc:"DOUBLE DAGGER"},{"char":"&bull;",desc:"BULLET"},{"char":"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{"char":"&permil;",desc:"PER MILLE SIGN"},{"char":"&prime;",desc:"PRIME"},{"char":"&Prime;",desc:"DOUBLE PRIME"},{"char":"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{"char":"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{"char":"&oline;",desc:"OVERLINE"},{"char":"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",list:[{"char":"&#x20A0",desc:"EURO-CURRENCY SIGN"},{"char":"&#x20A1",desc:"COLON SIGN"},{"char":"&#x20A2",desc:"CRUZEIRO SIGN"},{"char":"&#x20A3",desc:"FRENCH FRANC SIGN"},{"char":"&#x20A4",desc:"LIRA SIGN"},{"char":"&#x20A5",desc:"MILL SIGN"},{"char":"&#x20A6",desc:"NAIRA SIGN"},{"char":"&#x20A7",desc:"PESETA SIGN"},{"char":"&#x20A8",desc:"RUPEE SIGN"},{"char":"&#x20A9",desc:"WON SIGN"},{"char":"&#x20AA",desc:"NEW SHEQEL SIGN"},{"char":"&#x20AB",desc:"DONG SIGN"},{"char":"&#x20AC",desc:"EURO SIGN"},{"char":"&#x20AD",desc:"KIP SIGN"},{"char":"&#x20AE",desc:"TUGRIK SIGN"},{"char":"&#x20AF",desc:"DRACHMA SIGN"},{"char":"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{"char":"&#x20B1",desc:"PESO SIGN"},{"char":"&#x20B2",desc:"GUARANI SIGN"},{"char":"&#x20B3",desc:"AUSTRAL SIGN"},{"char":"&#x20B4",desc:"HRYVNIA SIGN"},{"char":"&#x20B5",desc:"CEDI SIGN"},{"char":"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{"char":"&#x20B7",desc:"SPESMILO SIGN"},{"char":"&#x20B8",desc:"TENGE SIGN"},{"char":"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",list:[{"char":"&#x2190",desc:"LEFTWARDS ARROW"},{"char":"&#x2191",desc:"UPWARDS ARROW"},{"char":"&#x2192",desc:"RIGHTWARDS ARROW"},{"char":"&#x2193",desc:"DOWNWARDS ARROW"},{"char":"&#x2194",desc:"LEFT RIGHT ARROW"},{"char":"&#x2195",desc:"UP DOWN ARROW"},{"char":"&#x2196",desc:"NORTH WEST ARROW"},{"char":"&#x2197",desc:"NORTH EAST ARROW"},{"char":"&#x2198",desc:"SOUTH EAST ARROW"},{"char":"&#x2199",desc:"SOUTH WEST ARROW"},{"char":"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{"char":"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{"char":"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{"char":"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{"char":"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{"char":"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{"char":"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{"char":"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{"char":"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{"char":"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{"char":"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{"char":"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{"char":"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{"char":"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{"char":"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{"char":"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{"char":"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{"char":"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{"char":"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{"char":"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{"char":"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{"char":"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{"char":"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{"char":"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{"char":"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{"char":"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{"char":"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{"char":"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{"char":"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{"char":"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{"char":"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{"char":"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{"char":"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{"char":"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{"char":"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{"char":"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{"char":"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{"char":"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{"char":"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{"char":"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{"char":"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{"char":"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{"char":"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{"char":"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{"char":"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{"char":"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{"char":"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{"char":"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{"char":"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{"char":"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{"char":"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{"char":"&#x21E1",desc:"UPWARDS DASHED ARROW"},{"char":"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{"char":"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{"char":"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{"char":"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{"char":"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{"char":"&#x21E7",desc:"UPWARDS WHITE ARROW"},{"char":"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{"char":"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{"char":"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{"char":"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{"char":"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{"char":"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{"char":"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{"char":"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{"char":"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{"char":"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{"char":"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{"char":"&#x21F3",desc:"UP DOWN WHITE ARROW"},{"char":"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{"char":"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{"char":"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{"char":"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{"char":"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",list:[{"char":"&forall;",desc:"FOR ALL"},{"char":"&part;",desc:"PARTIAL DIFFERENTIAL"},{"char":"&exist;",desc:"THERE EXISTS"},{"char":"&empty;",desc:"EMPTY SET"},{"char":"&nabla;",desc:"NABLA"},{"char":"&isin;",desc:"ELEMENT OF"},{"char":"&notin;",desc:"NOT AN ELEMENT OF"},{"char":"&ni;",desc:"CONTAINS AS MEMBER"},{"char":"&prod;",desc:"N-ARY PRODUCT"},{"char":"&sum;",desc:"N-ARY SUMMATION"},{"char":"&minus;",desc:"MINUS SIGN"},{"char":"&lowast;",desc:"ASTERISK OPERATOR"},{"char":"&radic;",desc:"SQUARE ROOT"},{"char":"&prop;",desc:"PROPORTIONAL TO"},{"char":"&infin;",desc:"INFINITY"},{"char":"&ang;",desc:"ANGLE"},{"char":"&and;",desc:"LOGICAL AND"},{"char":"&or;",desc:"LOGICAL OR"},{"char":"&cap;",desc:"INTERSECTION"},{"char":"&cup;",desc:"UNION"},{"char":"&int;",desc:"INTEGRAL"},{"char":"&there4;",desc:"THEREFORE"},{"char":"&sim;",desc:"TILDE OPERATOR"},{"char":"&cong;",desc:"APPROXIMATELY EQUAL TO"},{"char":"&asymp;",desc:"ALMOST EQUAL TO"},{"char":"&ne;",desc:"NOT EQUAL TO"},{"char":"&equiv;",desc:"IDENTICAL TO"},{"char":"&le;",desc:"LESS-THAN OR EQUAL TO"},{"char":"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{"char":"&sub;",desc:"SUBSET OF"},{"char":"&sup;",desc:"SUPERSET OF"},{"char":"&nsub;",desc:"NOT A SUBSET OF"},{"char":"&sube;",desc:"SUBSET OF OR EQUAL TO"},{"char":"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{"char":"&oplus;",desc:"CIRCLED PLUS"},{"char":"&otimes;",desc:"CIRCLED TIMES"},{"char":"&perp;",desc:"UP TACK"}]},{title:"Misc",list:[{"char":"&spades;",desc:"BLACK SPADE SUIT"},{"char":"&clubs;",desc:"BLACK CLUB SUIT"},{"char":"&hearts;",desc:"BLACK HEART SUIT"},{"char":"&diams;",desc:"BLACK DIAMOND SUIT"},{"char":"&#x2669",desc:"QUARTER NOTE"},{"char":"&#x266A",desc:"EIGHTH NOTE"},{"char":"&#x266B",desc:"BEAMED EIGHTH NOTES"},{"char":"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{"char":"&#x266D",desc:"MUSIC FLAT SIGN"},{"char":"&#x266E",desc:"MUSIC NATURAL SIGN"},{"char":"&#x2600",desc:"BLACK SUN WITH RAYS"},{"char":"&#x2601",desc:"CLOUD"},{"char":"&#x2602",desc:"UMBRELLA"},{"char":"&#x2603",desc:"SNOWMAN"},{"char":"&#x2615",desc:"HOT BEVERAGE"},{"char":"&#x2618",desc:"SHAMROCK"},{"char":"&#x262F",desc:"YIN YANG"},{"char":"&#x2714",desc:"HEAVY CHECK MARK"},{"char":"&#x2716",desc:"HEAVY MULTIPLICATION X"},{"char":"&#x2744",desc:"SNOWFLAKE"},{"char":"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x2764",desc:"HEAVY BLACK HEART"}]}]
}),e.FE.PLUGINS.specialCharacters=function(t){function n(){}function r(){for(var n='<div class="fr-special-characters-modal">',r=0;r<e.FE.DEFAULTS.specialCharactersSets.length;r++){for(var i=e.FE.DEFAULTS.specialCharactersSets[r],o=i.list,a='<div class="fr-special-characters-list"><p class="fr-special-characters-title">'+i.title+"</p>",s=0;s<o.length;s++){var l=o[s];a+='<span class="fr-command fr-special-character" tabIndex="-1" role="button" value="'+l["char"]+'" title="'+l.desc+'">'+l["char"]+'<span class="fr-sr-only">'+t.language.translate(l.desc)+"&nbsp;&nbsp;&nbsp;</span></span>"}n+=a+"</div>"}return n+="</div>"}function i(e,n){t.events.disableBlur(),e.focus(),n.preventDefault(),n.stopPropagation()}function o(){t.events.$on(d,"keydown",function(n){var r=n.which,o=d.find("span.fr-special-character:focus:first");if(!(o.length||r!=e.FE.KEYCODE.F10||t.keys.ctrlKey(n)||n.shiftKey)&&n.altKey){var a=d.find("span.fr-special-character:first");return i(a,n),!1}if(r==e.FE.KEYCODE.TAB||r==e.FE.KEYCODE.ARROW_LEFT||r==e.FE.KEYCODE.ARROW_RIGHT){var s=null,c=null,u=!1;return r==e.FE.KEYCODE.ARROW_LEFT||r==e.FE.KEYCODE.ARROW_RIGHT?(c=r==e.FE.KEYCODE.ARROW_RIGHT,u=!0):c=!n.shiftKey,o.length?(u&&(s=c?o.nextAll("span.fr-special-character:first"):o.prevAll("span.fr-special-character:first")),s&&s.length||(s=c?o.parent().next().find("span.fr-special-character:first"):o.parent().prev().find("span.fr-special-character:"+(u?"last":"first")),s.length||(s=d.find("span.fr-special-character:"+(c?"first":"last"))))):s=d.find("span.fr-special-character:"+(c?"first":"last")),i(s,n),!1}return r!=e.FE.KEYCODE.ENTER||!o.length||void l(o)},!0)}function a(){if(!c){var n="<h4>Special Characters</h4>",i=r(),a=t.modals.create(f,n,i);c=a.$modal,u=a.$head,d=a.$body,t.events.$on(e(t.o_win),"resize",function(){t.modals.resize(f)}),t.events.bindClick(d,".fr-special-character",function(t){var n=e(t.currentTarget);l(n)}),o()}t.modals.show(f),t.modals.resize(f)}function s(){t.modals.hide(f)}function l(e){t.specialCharacters.hide(),t.undo.saveStep(),t.html.insert(e.attr("value"),!0),t.undo.saveStep()}var c,u,d,f="special_characters";return{_init:n,show:a,hide:s}},e.FroalaEditor.DefineIcon("specialCharacters",{template:"text",NAME:"&#937;"}),e.FE.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,modal:!0,callback:function(){this.specialCharacters.show()},plugin:"help",showOnMobile:!1}),e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=a()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",r,i,e.outerHeight())}}function r(){var e=I();if(e){var n=t.popups.get("table.edit");n||(n=u()),t.popups.setContainer("table.edit",t.$sc);var r=j(e),i=(r.left+r.right)/2,o=r.bottom;t.popups.show("table.edit",i,o,r.bottom-r.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.$el.focus(),t.selection.restore())}}function i(){var e=I();if(e){var n=t.popups.get("table.colors");n||(n=d()),t.popups.setContainer("table.colors",t.$sc);var r=j(e),i=(r.left+r.right)/2,o=r.bottom;h(),t.popups.show("table.colors",i,o,r.bottom-r.top)}}function o(){0===ve().length&&t.toolbar.enable()}function a(n){if(n)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var r="";t.opts.tableInsertButtons.length>0&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var i={buttons:r,rows_columns:l()},o=t.popups.create("table.insert",i);return t.events.$on(o,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(t){s(e(t.currentTarget))},!0),c(o),o}function s(e){var n=e.data("row"),r=e.data("col"),i=e.parent();i.siblings(".fr-table-size-info").html(n+" &times; "+r),i.find("> span").removeClass("hover fr-active-item");for(var o=1;o<=t.opts.tableInsertMaxSize;o++)for(var a=0;a<=t.opts.tableInsertMaxSize;a++){var s=i.find('> span[data-row="'+o+'"][data-col="'+a+'"]');o<=n&&a<=r?s.addClass("hover"):o<=n+1||o<=2&&!t.helpers.isMobile()?s.css("display","inline-block"):o>2&&!t.helpers.isMobile()&&s.css("display","none")}e.addClass("fr-active-item")}function l(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var r=1;r<=t.opts.tableInsertMaxSize;r++){var i="inline-block";n>2&&!t.helpers.isMobile()&&(i="none");var o="fr-table-cell ";1==n&&1==r&&(o+=" hover"),e+='<span class="fr-command '+o+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+n+'" data-col="'+r+'" data-param1="'+n+'" data-param2="'+r+'" style="display: '+i+';" role="button"><span></span><span class="fr-sr-only">'+n+" &times; "+r+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+="</div></div>"}function c(n){t.events.$on(n,"focus","[tabIndex]",function(t){var n=e(t.currentTarget);s(n)}),t.events.on("popup.tab",function(n){var r=e(n.currentTarget);if(!t.popups.isVisible("table.insert")||!r.is("span, a"))return!0;var i,o=n.which;if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){if(r.is("span.fr-table-cell")){var a=r.parent().find("span.fr-table-cell"),l=a.index(r),c=t.opts.tableInsertMaxSize,u=l%c,d=Math.floor(l/c);e.FE.KEYCODE.ARROW_UP==o?d=Math.max(0,d-1):e.FE.KEYCODE.ARROW_DOWN==o?d=Math.min(t.opts.tableInsertMaxSize-1,d+1):e.FE.KEYCODE.ARROW_LEFT==o?u=Math.max(0,u-1):e.FE.KEYCODE.ARROW_RIGHT==o&&(u=Math.min(t.opts.tableInsertMaxSize-1,u+1));var f=d*c+u,p=e(a.get(f));s(p),t.events.disableBlur(),p.focus(),i=!1}}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(r),i=!1);return i===!1&&(n.preventDefault(),n.stopPropagation()),i},!0)}function u(e){if(e)return t.popups.onHide("table.edit",o),!0;var n="";t.opts.tableEditButtons.length>0&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var i={buttons:n},a=t.popups.create("table.edit",i);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&r()}),a}function d(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n={buttons:e,colors:f()},r=t.popups.create("table.colors",n);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&i()}),p(r),r}function f(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep===0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[n]?'<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[n]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i><span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+="</div>"}function p(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("table.colors")||!i.is("span"))return!0;var o=r.which,a=!0;if(e.FE.KEYCODE.TAB==o){var s=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){var l=i.parent().find("span.fr-command"),c=l.index(i),u=t.opts.colorsStep,d=Math.floor(l.length/u),f=c%u,p=Math.floor(c/u),h=p*u+f,m=d*u;e.FE.KEYCODE.ARROW_UP==o?h=((h-u)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==o?h=(h+u)%m:e.FE.KEYCODE.ARROW_LEFT==o?h=((h-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==o&&(h=(h+1)%m);var g=e(l.get(h));t.events.disableBlur(),g.focus(),a=!1}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(i),a=!1);return a===!1&&(r.preventDefault(),r.stopPropagation()),a},!0)}function h(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+t.helpers.RGBToHex(n.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function m(n,r){var i,o,a='<table style="width: 100%;"><tbody>',s=100/r;for(i=0;i<n;i++){for(a+="<tr>",o=0;o<r;o++)a+='<td style="width: '+s.toFixed(4)+'%;">',0===i&&0===o&&(a+=e.FE.MARKERS),a+="<br></td>";a+="</tr>"}a+="</tbody></table>",t.html.insert(a),t.selection.restore()}function g(){if(ve().length>0){var e=be();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function v(){var t=be();if(t.length>0&&0===t.find("th").length){var n,i="<thead><tr>",o=0;for(t.find("tr:first > td").each(function(){var t=e(this);o+=parseInt(t.attr("colspan"),10)||1}),n=0;n<o;n++)i+="<th><br></th>";i+="</tr></thead>",t.prepend(i),r()}}function b(){var e=be(),n=e.find("thead");if(n.length>0)if(0===e.find("tbody tr").length)g();else if(n.remove(),ve().length>0)r();else{t.popups.hide("table.edit");var i=e.find("tbody tr:first td:first").get(0);i&&(t.selection.setAtEnd(i),t.selection.restore())}}function y(n){var i=be();if(i.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==n)return;var o,a,s=I(),l=B(s);a="above"==n?l.min_i:l.max_i;var c="<tr>";for(o=0;o<s[a].length;o++)if("below"==n&&a<s.length-1&&s[a][o]==s[a+1][o]||"above"==n&&a>0&&s[a][o]==s[a-1][o]){if(0===o||o>0&&s[a][o]!=s[a][o-1]){var u=e(s[a][o]);u.attr("rowspan",parseInt(u.attr("rowspan"),10)+1)}}else c+="<td><br></td>";c+="</tr>";var d=e(i.find("tr").not(i.find("table tr")).get(a));"below"==n?d.after(c):"above"==n&&(d.before(c),t.popups.isVisible("table.edit")&&r())}}function E(){var n=be();if(n.length>0){var r,i,o,a=I(),s=B(a);if(0===s.min_i&&s.max_i==a.length-1)g();else{for(r=s.max_i;r>=s.min_i;r--){for(o=e(n.find("tr").not(n.find("table tr")).get(r)),i=0;i<a[r].length;i++)if(0===i||a[r][i]!=a[r][i-1]){var l=e(a[r][i]);if(parseInt(l.attr("rowspan"),10)>1){var c=parseInt(l.attr("rowspan"),10)-1;1==c?l.removeAttr("rowspan"):l.attr("rowspan",c)}if(r<a.length-1&&a[r][i]==a[r+1][i]&&(0===r||a[r][i]!=a[r-1][i])){for(var u=a[r][i],d=i;d>0&&a[r][d]==a[r][d-1];)d--;0===d?e(n.find("tr").not(n.find("table tr")).get(r+1)).prepend(u):e(a[r+1][d-1]).after(u)}}var f=o.parent();o.remove(),0===f.find("tr").length&&f.remove(),a=I(n)}x(0,a.length-1,0,a[0].length-1,n),s.min_i>0?t.selection.setAtEnd(a[s.min_i-1][0]):t.selection.setAtEnd(a[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function w(n){var i=be();if(i.length>0){var o,a=I(),s=B(a);o="before"==n?s.min_j:s.max_j;var l,c=100/a[0].length,u=100/(a[0].length+1);i.find("th, td").each(function(){l=e(this),l.data("old-width",l.outerWidth()/i.outerWidth()*100)}),i.find("tr").not(i.find("table tr")).each(function(t){for(var r,i=e(this),s=0,l=0;s-1<o;){if(r=i.find("> th, > td").get(l),!r){r=null;break}r==a[t][s]?(s+=parseInt(e(r).attr("colspan"),10)||1,l++):(s+=parseInt(e(a[t][s]).attr("colspan"),10)||1,"after"==n&&(r=0===l?-1:i.find("> th, > td").get(l-1)))}var d=e(r);if("after"==n&&s-1>o||"before"==n&&o>0&&a[t][o]==a[t][o-1]){if(0===t||t>0&&a[t][o]!=a[t-1][o]){var f=parseInt(d.attr("colspan"),10)+1;d.attr("colspan",f),d.css("width",(d.data("old-width")*u/c+u).toFixed(4)+"%"),d.removeData("old-width")}}else{var p;p=i.find("th").length>0?'<th style="width: '+u.toFixed(4)+'%;"><br></th>':'<td style="width: '+u.toFixed(4)+'%;"><br></td>',r==-1?i.prepend(p):null==r?i.append(p):"before"==n?d.before(p):"after"==n&&d.after(p)}}),i.find("th, td").each(function(){l=e(this),l.data("old-width")&&(l.css("width",(l.data("old-width")*u/c).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&r()}}function C(){var n=be();if(n.length>0){var r,i,o,a=I(),s=B(a);if(0===s.min_j&&s.max_j==a[0].length-1)g();else{var l=100/a[0].length,c=100/(a[0].length-s.max_j+s.min_j-1);for(n.find("th, td").each(function(){o=e(this),o.hasClass("fr-selected-cell")||o.data("old-width",o.outerWidth()/n.outerWidth()*100)}),i=s.max_j;i>=s.min_j;i--)for(r=0;r<a.length;r++)if(0===r||a[r][i]!=a[r-1][i])if(o=e(a[r][i]),(parseInt(o.attr("colspan"),10)||1)>1){var u=parseInt(o.attr("colspan"),10)-1;1==u?o.removeAttr("colspan"):o.attr("colspan",u),o.css("width",((o.data("old-width")-ce(i,a))*c/l).toFixed(4)+"%"),o.removeData("old-width")}else{var d=e(o.parent().get(0));o.remove(),0===d.find("> th, > td").length&&(0===d.prev().length||0===d.next().length||d.prev().find("> th[rowspan], > td[rowspan]").length<d.prev().find("> th, > td").length)&&d.remove()}x(0,a.length-1,0,a[0].length-1,n),s.min_j>0?t.selection.setAtEnd(a[s.min_i][s.min_j-1]):t.selection.setAtEnd(a[s.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each(function(){o=e(this),o.data("old-width")&&(o.css("width",(o.data("old-width")*c/l).toFixed(4)+"%"),o.removeData("old-width"))})}}}function T(e,t,n){var r,i,o,a,s,l=0,c=I(n);for(t=Math.min(t,c[0].length-1),i=e;i<=t;i++)if(!(i>e&&c[0][i]==c[0][i-1])&&(a=parseInt(c[0][i].getAttribute("colspan"),10)||1,a>1&&c[0][i]==c[0][i+1]))for(l=a-1,r=1;r<c.length;r++)if(c[r][i]!=c[r-1][i]){for(o=i;o<i+a;o++)if(s=parseInt(c[r][o].getAttribute("colspan"),10)||1,s>1&&c[r][o]==c[r][o+1])l=Math.min(l,s-1),o+=l;else if(l=Math.max(0,l-1),!l)break;if(!l)break}l&&S(c,l,"colspan",0,c.length-1,e,t)}function $(e,t,n){var r,i,o,a,s,l=0,c=I(n);for(t=Math.min(t,c.length-1),r=e;r<=t;r++)if(!(r>e&&c[r][0]==c[r-1][0])&&(a=parseInt(c[r][0].getAttribute("rowspan"),10)||1,a>1&&c[r][0]==c[r+1][0]))for(l=a-1,i=1;i<c[0].length;i++)if(c[r][i]!=c[r][i-1]){for(o=r;o<r+a;o++)if(s=parseInt(c[o][i].getAttribute("rowspan"),10)||1,s>1&&c[o][i]==c[o+1][i])l=Math.min(l,s-1),o+=l;else if(l=Math.max(0,l-1),!l)break;if(!l)break}l&&S(c,l,"rowspan",e,t,0,c[0].length-1)}function S(e,t,n,r,i,o,a){var s,l,c;for(s=r;s<=i;s++)for(l=o;l<=a;l++)s>r&&e[s][l]==e[s-1][l]||l>o&&e[s][l]==e[s][l-1]||(c=parseInt(e[s][l].getAttribute(n),10)||1,c>1&&(c-t>1?e[s][l].setAttribute(n,c-t):e[s][l].removeAttribute(n)))}function x(e,t,n,r,i){$(e,t,i),T(n,r,i)}function A(){if(ve().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){var n,i,o=I(),a=B(o),s=t.$el.find(".fr-selected-cell"),l=e(s[0]),c=l.parent(),u=c.find(".fr-selected-cell"),d=l.closest("table"),f=l.html(),p=0;for(n=0;n<u.length;n++)p+=e(u[n]).outerWidth();for(l.css("width",(p/d.outerWidth()*100).toFixed(4)+"%"),a.min_j<a.max_j&&l.attr("colspan",a.max_j-a.min_j+1),a.min_i<a.max_i&&l.attr("rowspan",a.max_i-a.min_i+1),n=1;n<s.length;n++)i=e(s[n]),"<br>"!=i.html()&&""!==i.html()&&(f+="<br>"+i.html()),i.remove();l.html(f),t.selection.setAtEnd(l.get(0)),t.selection.restore(),t.toolbar.enable(),$(a.min_i,a.max_i,d);var h=d.find("tr:empty");for(n=h.length-1;n>=0;n--)e(h[n]).remove();T(a.min_j,a.max_j,d),r()}}function _(){if(1==ve().length){var n=t.$el.find(".fr-selected-cell"),r=n.parent(),i=n.closest("table"),o=parseInt(n.attr("rowspan"),10),a=I(),s=L(n.get(0),a),l=n.clone().html("<br>");if(o>1){var c=Math.ceil(o/2);c>1?n.attr("rowspan",c):n.removeAttr("rowspan"),o-c>1?l.attr("rowspan",o-c):l.removeAttr("rowspan");for(var u=s.row+c,d=0===s.col?s.col:s.col-1;d>=0&&(a[u][d]==a[u][d-1]||u>0&&a[u][d]==a[u-1][d]);)d--;d==-1?e(i.find("tr").not(i.find("table tr")).get(u)).prepend(l):e(a[u][d]).after(l)}else{var f,p=e("<tr>").append(l);for(f=0;f<a[0].length;f++)if(0===f||a[s.row][f]!=a[s.row][f-1]){var h=e(a[s.row][f]);h.is(n)||h.attr("rowspan",(parseInt(h.attr("rowspan"),10)||1)+1)}r.after(p)}M(),t.popups.hide("table.edit")}}function k(){if(1==ve().length){var n=t.$el.find(".fr-selected-cell"),r=parseInt(n.attr("colspan"),10)||1,i=n.parent().outerWidth(),o=n.outerWidth(),a=n.clone().html("<br>"),s=I(),l=L(n.get(0),s);if(r>1){var c=Math.ceil(r/2);o=ue(l.col,l.col+c-1,s)/i*100;var u=ue(l.col+c,l.col+r-1,s)/i*100;c>1?n.attr("colspan",c):n.removeAttr("colspan"),r-c>1?a.attr("colspan",r-c):a.removeAttr("colspan"),n.css("width",o.toFixed(4)+"%"),a.css("width",u.toFixed(4)+"%")}else{var d;for(d=0;d<s.length;d++)if(0===d||s[d][l.col]!=s[d-1][l.col]){var f=e(s[d][l.col]);if(!f.is(n)){var p=(parseInt(f.attr("colspan"),10)||1)+1;f.attr("colspan",p)}}o=o/i*100/2,n.css("width",o.toFixed(4)+"%"),a.css("width",o.toFixed(4)+"%")}n.after(a),M(),t.popups.hide("table.edit")}}function O(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function R(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function N(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function D(e,t,n,r){if(t.length>0){if(!n){var i=Object.keys(r);i.splice(i.indexOf(e),1),t.removeClass(i.join(" "))}t.toggleClass(e)}}function I(t){t=t||null;var n=[];if(null==t&&ve().length>0&&(t=be()),t)return t.find("tr").not(t.find("table tr")).each(function(t,r){var i=e(r),o=0;i.find("> th, > td").each(function(r,i){for(var a=e(i),s=parseInt(a.attr("colspan"),10)||1,l=parseInt(a.attr("rowspan"),10)||1,c=t;c<t+l;c++)for(var u=o;u<o+s;u++)n[c]||(n[c]=[]),n[c][u]?o++:n[c][u]=i;o+=s})}),n}function L(e,t){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)if(t[n][r]==e)return{row:n,col:r}}function F(e,t,n){for(var r=e+1,i=t+1;r<n.length;){if(n[r][t]!=n[e][t]){r--;break}r++}for(r==n.length&&r--;i<n[e].length;){if(n[e][i]!=n[e][t]){i--;break}i++}return i==n[e].length&&i--,{row:r,col:i}}function M(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")}),t.el.querySelector(".fr-cell-fixed")&&(t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler"))}function P(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()},0)}function B(e){var n=t.$el.find(".fr-selected-cell");if(n.length>0){var r,i=e.length,o=0,a=e[0].length,s=0;for(r=0;r<n.length;r++){var l=L(n[r],e),c=F(l.row,l.col,e);i=Math.min(l.row,i),o=Math.max(c.row,o),a=Math.min(l.col,a),s=Math.max(c.col,s)}return{min_i:i,max_i:o,min_j:a,max_j:s}}return null}function U(t,n,r,i,o){var a,s,l,c,u=t,d=n,f=r,p=i;for(a=u;a<=d;a++)((parseInt(e(o[a][f]).attr("rowspan"),10)||1)>1||(parseInt(e(o[a][f]).attr("colspan"),10)||1)>1)&&(l=L(o[a][f],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p)),((parseInt(e(o[a][p]).attr("rowspan"),10)||1)>1||(parseInt(e(o[a][p]).attr("colspan"),10)||1)>1)&&(l=L(o[a][p],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p));for(s=f;s<=p;s++)((parseInt(e(o[u][s]).attr("rowspan"),10)||1)>1||(parseInt(e(o[u][s]).attr("colspan"),10)||1)>1)&&(l=L(o[u][s],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p)),((parseInt(e(o[d][s]).attr("rowspan"),10)||1)>1||(parseInt(e(o[d][s]).attr("colspan"),10)||1)>1)&&(l=L(o[d][s],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p));return u==t&&d==n&&f==r&&p==i?{min_i:t,max_i:n,min_j:r,max_j:i}:U(u,d,f,p,o)}function j(t){var n=B(t),r=e(t[n.min_i][n.min_j]),i=e(t[n.min_i][n.max_j]),o=e(t[n.max_i][n.min_j]),a=r.offset().left,s=i.offset().left+i.outerWidth(),l=r.offset().top,c=o.offset().top+o.outerHeight();return{left:a,right:s,top:l,bottom:c}}function H(n,r){if(e(n).is(r))M(),t.edit.on(),e(n).addClass("fr-selected-cell");else{P(),t.edit.off();var i=I(),o=L(n,i),a=L(r,i),s=U(Math.min(o.row,a.row),Math.max(o.row,a.row),Math.min(o.col,a.col),Math.max(o.col,a.col),i);M(),n.classList.add("fr-cell-fixed"),r.classList.add("fr-cell-handler");for(var l=s.min_i;l<=s.max_i;l++)for(var c=s.min_j;c<=s.max_j;c++)e(i[l][c]).addClass("fr-selected-cell")}}function K(n){var r=null,i=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?r=n.target:i.closest("td").length>0?r=i.closest("td").get(0):i.closest("th").length>0&&(r=i.closest("th").get(0)),0===t.$el.find(r).length?null:r}function W(){M(),t.popups.hide("table.edit")}function z(n){var r=K(n);if(ve().length>0&&!r&&W(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)(3==n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&r&&W();else if(Se=!0,r){ve().length>0&&!n.shiftKey&&W(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),$e=!0;var i=r.tagName.toLowerCase();n.shiftKey&&t.$el.find(i+".fr-selected-cell").length>0?e(t.$el.find(i+".fr-selected-cell").closest("table")).is(e(r).closest("table"))?H(xe,r):P():((t.keys.ctrlKey(n)||n.shiftKey)&&(ve().length>1||0===e(r).find(t.selection.element()).length&&!e(r).is(t.selection.element()))&&P(),xe=r,H(xe,xe))}}function q(n){if($e||t.$tb.is(n.target)||t.$tb.is(e(n.target).closest(t.$tb.get(0)))||(ve().length>0&&t.toolbar.enable(),M()),!(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)){if(Se=!1,$e){$e=!1;var i=K(n);i||1!=ve().length?ve().length>0&&(t.selection.isCollapsed()?r():M()):M()}if(_e){_e=!1,Ce.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var o=parseFloat(Ce.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(o-=t.$iframe.offset().left),Ce.data("release-position",o),Ce.removeData("max-left"),Ce.removeData("max-right"),le(n),ee()}}}function Y(n){if($e===!0){var r=e(n.currentTarget);if(r.closest("table").is(be())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void H(xe,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void H(xe,n.currentTarget)}P()}}function V(n,r){for(var i=n;i&&"TABLE"!=i.tagName&&i.parentNode!=t.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName){var o=I(e(i));"up"==r?X(L(n,o),i,o):"down"==r&&Q(L(n,o),i,o)}}function G(e,n,r,i){for(var o,a=n;a!=t.el&&"TD"!=a.tagName&&"TH"!=a.tagName&&("up"==i?o=a.previousElementSibling:"down"==i&&(o=a.nextElementSibling),!o);)a=a.parentNode;"TD"==a.tagName||"TH"==a.tagName?V(a,i):o&&("up"==i&&t.selection.setAtEnd(o),"down"==i&&t.selection.setAtStart(o))}function X(e,n,r){e.row>0?t.selection.setAtEnd(r[e.row-1][e.col]):G(e,n,r,"up")}function Q(e,n,r){var i=parseInt(r[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<r.length-i?t.selection.setAtStart(r[e.row+i][e.col]):G(e,n,r,"down")}function Z(n){var r=n.which,i=t.selection.blocks();if(i.length&&(i=i[0],"TD"==i.tagName||"TH"==i.tagName)){for(var o=i;o&&"TABLE"!=o.tagName&&o.parentNode!=t.el;)o=o.parentNode;if(o&&"TABLE"==o.tagName&&(e.FE.KEYCODE.ARROW_LEFT==r||e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_RIGHT==r||e.FE.KEYCODE.ARROW_DOWN==r)&&(ve().length>0&&W(),t.browser.webkit&&(e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_DOWN==r))){var a=t.selection.ranges(0).startContainer;if(a.nodeType==Node.TEXT_NODE&&(e.FE.KEYCODE.ARROW_UP==r&&a.previousSibling||e.FE.KEYCODE.ARROW_DOWN==r&&a.nextSibling))return;n.preventDefault(),n.stopPropagation();var s=I(e(o)),l=L(i,s);return e.FE.KEYCODE.ARROW_UP==r?X(l,o,s):e.FE.KEYCODE.ARROW_DOWN==r&&Q(l,o,s),t.selection.restore(),!1}}}function J(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),Ce=t.shared.$table_resizer,t.events.$on(Ce,"mousedown",function(e){return!t.core.sameInstance(Ce)||(ve().length>0&&W(),1==e.which?(t.selection.save(),_e=!0,Ce.addClass("fr-moving"),P(),t.edit.off(),Ce.find("div").css("opacity",1),!1):void 0)}),t.events.$on(Ce,"mousemove",function(e){return!t.core.sameInstance(Ce)||void(_e&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),de(e)))}),t.events.on("shared.destroy",function(){Ce.html("").removeData().remove(),Ce=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Ce.hide().appendTo(e("body"))},!0)}function ee(){Ce&&(Ce.find("div").css("opacity",0),Ce.css("top",0),Ce.css("left",0),Ce.css("height",0),Ce.find("div").css("height",0),Ce.hide())}function te(){Te&&Te.removeClass("fr-visible").css("left","-9999px")}function ne(n,r){var i=e(r),o=i.closest("table"),a=o.parent();if(r&&"TD"!=r.tagName&&"TH"!=r.tagName&&(i.closest("td").length>0?r=i.closest("td"):i.closest("th").length>0&&(r=i.closest("th"))),!r||"TD"!=r.tagName&&"TH"!=r.tagName)Ce&&i.get(0)!=Ce.get(0)&&i.parent().get(0)!=Ce.get(0)&&t.core.sameInstance(Ce)&&ee();else{if(i=e(r),0===t.$el.find(i).length)return!1;var s=i.offset().left-1,l=s+i.outerWidth();if(Math.abs(n.pageX-s)<=t.opts.tableResizerOffset||Math.abs(l-n.pageX)<=t.opts.tableResizerOffset){var c,u,d,f,p,h=I(o),m=L(r,h),g=F(m.row,m.col,h),v=o.offset().top,b=o.outerHeight()-1;"rtl"!=t.opts.direction?n.pageX-s<=t.opts.tableResizerOffset?(d=s,m.col>0?(f=s-ce(m.col-1,h)+t.opts.tableResizingLimit,p=s+ce(m.col,h)-t.opts.tableResizingLimit,c=m.col-1,u=m.col):(c=null,u=0,f=o.offset().left-1-parseInt(o.css("margin-left"),10),p=o.offset().left-1+o.width()-h[0].length*t.opts.tableResizingLimit)):l-n.pageX<=t.opts.tableResizerOffset&&(d=l,g.col<h[g.row].length&&h[g.row][g.col+1]?(f=l-ce(g.col,h)+t.opts.tableResizingLimit,p=l+ce(g.col+1,h)-t.opts.tableResizingLimit,c=g.col,u=g.col+1):(c=g.col,u=null,f=o.offset().left-1+h[0].length*t.opts.tableResizingLimit,p=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):l-n.pageX<=t.opts.tableResizerOffset?(d=l,m.col>0?(f=l-ce(m.col,h)+t.opts.tableResizingLimit,p=l+ce(m.col-1,h)-t.opts.tableResizingLimit,c=m.col,u=m.col-1):(c=null,u=0,f=o.offset().left+h[0].length*t.opts.tableResizingLimit,p=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):n.pageX-s<=t.opts.tableResizerOffset&&(d=s,g.col<h[g.row].length&&h[g.row][g.col+1]?(f=s-ce(g.col+1,h)+t.opts.tableResizingLimit,p=s+ce(g.col,h)-t.opts.tableResizingLimit,c=g.col+1,u=g.col):(c=g.col,u=null,f=a.offset().left+parseFloat(a.css("padding-left")),p=o.offset().left-1+o.width()-h[0].length*t.opts.tableResizingLimit)),Ce||J(),Ce.data("table",o),Ce.data("first",c),Ce.data("second",u),Ce.data("instance",t),t.$wp.append(Ce);var y=d-t.win.pageXOffset-t.opts.tableResizerOffset,E=v-t.win.pageYOffset;t.opts.iframe&&(y+=t.$iframe.offset().left-t.helpers.scrollLeft(),E+=t.$iframe.offset().top-t.helpers.scrollTop(),f+=t.$iframe.offset().left,p+=t.$iframe.offset().left),Ce.data("max-left",f),Ce.data("max-right",p),Ce.data("origin",d-t.win.pageXOffset),Ce.css("top",E),Ce.css("left",y),Ce.css("height",b),Ce.find("div").css("height",b),Ce.css("padding-left",t.opts.tableResizerOffset),Ce.css("padding-right",t.opts.tableResizerOffset),Ce.show()}else t.core.sameInstance(Ce)&&ee()}}function re(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Te||he(),t.$box.append(Te),Te.data("instance",t);var i=e(r),o=i.find("tr:first"),a=n.pageX,s=0,l=0;t.opts.iframe&&(s+=t.$iframe.offset().left-t.helpers.scrollLeft(),l+=t.$iframe.offset().top-t.helpers.scrollTop());var c;o.find("th, td").each(function(){var n=e(this);return n.offset().left<=a&&a<n.offset().left+n.outerWidth()/2?(c=parseInt(Te.find("a").css("width"),10),Te.css("top",l+n.offset().top-t.win.pageYOffset-c-5),Te.css("left",s+n.offset().left-t.win.pageXOffset-c/2),Te.data("selected-cell",n),Te.data("position","before"),Te.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=a&&a<n.offset().left+n.outerWidth()?(c=parseInt(Te.find("a").css("width"),10),Te.css("top",l+n.offset().top-t.win.pageYOffset-c-5),Te.css("left",s+n.offset().left+n.outerWidth()-t.win.pageXOffset-c/2),Te.data("selected-cell",n),Te.data("position","after"),Te.addClass("fr-visible"),!1):void 0})}function ie(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Te||he(),t.$box.append(Te),Te.data("instance",t);var i=e(r),o=n.pageY,a=0,s=0;t.opts.iframe&&(a+=t.$iframe.offset().left-t.helpers.scrollLeft(),s+=t.$iframe.offset().top-t.helpers.scrollTop());var l;i.find("tr").each(function(){var n=e(this);return n.offset().top<=o&&o<n.offset().top+n.outerHeight()/2?(l=parseInt(Te.find("a").css("width"),10),Te.css("top",s+n.offset().top-t.win.pageYOffset-l/2),Te.css("left",a+n.offset().left-t.win.pageXOffset-l-5),Te.data("selected-cell",n.find("td:first")),Te.data("position","above"),Te.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=o&&o<n.offset().top+n.outerHeight()?(l=parseInt(Te.find("a").css("width"),10),Te.css("top",s+n.offset().top+n.outerHeight()-t.win.pageYOffset-l/2),Te.css("left",a+n.offset().left-t.win.pageXOffset-l-5),Te.data("selected-cell",n.find("td:first")),Te.data("position","below"),Te.addClass("fr-visible"),!1):void 0})}function oe(n,r){if(0===ve().length){var i,o,a;if(r&&("HTML"==r.tagName||"BODY"==r.tagName||t.node.isElement(r)))for(i=1;i<=t.opts.tableInsertHelperOffset;i++){if(o=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+i),e(o).hasClass("fr-tooltip"))return!0;if(o&&("TH"==o.tagName||"TD"==o.tagName||"TABLE"==o.tagName)&&(e(o).parents(".fr-wrapper").length||t.opts.iframe))return re(n,e(o).closest("table")),!0;if(a=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+i,n.pageY-t.win.pageYOffset),e(a).hasClass("fr-tooltip"))return!0;if(a&&("TH"==a.tagName||"TD"==a.tagName||"TABLE"==a.tagName)&&(e(a).parents(".fr-wrapper").length||t.opts.iframe))return ie(n,e(a).closest("table")),!0}t.core.sameInstance(Te)&&te()}}function ae(e){Ae=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&ne(e,n),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||oe(e,n)}function se(){if(_e){var e=Ce.data("table"),n=e.offset().top-t.win.pageYOffset;t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),Ce.css("top",n)}}function le(){var n=Ce.data("origin"),r=Ce.data("release-position");if(n!==r){var i=Ce.data("first"),o=Ce.data("second"),a=Ce.data("table"),s=a.outerWidth();if(null!==i&&null!==o){var l,c,u,d=I(a),f=[],p=[],h=[],m=[];for(l=0;l<d.length;l++)c=e(d[l][i]),u=e(d[l][o]),f[l]=c.outerWidth(),h[l]=u.outerWidth(),p[l]=f[l]/s*100,m[l]=h[l]/s*100;for(l=0;l<d.length;l++){c=e(d[l][i]),u=e(d[l][o]);var g=(p[l]*(f[l]+r-n)/f[l]).toFixed(4);c.css("width",g+"%"),u.css("width",(p[l]+m[l]-g).toFixed(4)+"%")}}else{var v,b=a.parent(),y=s/b.width()*100,E=(parseInt(a.css("margin-left"),10)||0)/b.width()*100,w=(parseInt(a.css("margin-right"),10)||0)/b.width()*100;
"rtl"==t.opts.direction&&0===o||"rtl"!=t.opts.direction&&0!==o?(v=(s+r-n)/s*y,a.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(E).toFixed(4)+"%)")):("rtl"==t.opts.direction&&0!==o||"rtl"!=t.opts.direction&&0===o)&&(v=(s-r+n)/s*y,a.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(w).toFixed(4)+"%)")),a.css("width",Math.round(v).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep()}Ce.removeData("origin"),Ce.removeData("release-position"),Ce.removeData("first"),Ce.removeData("second"),Ce.removeData("table")}function ce(t,n){var r,i=e(n[0][t]).outerWidth();for(r=1;r<n.length;r++)i=Math.min(i,e(n[r][t]).outerWidth());return i}function ue(e,t,n){var r,i=0;for(r=e;r<=t;r++)i+=ce(r,n);return i}function de(e){if(ve().length>1&&Se&&P(),Se===!1&&$e===!1&&_e===!1)Ae&&clearTimeout(Ae),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(Ae=setTimeout(ae,30,e));else if(_e){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var r=Ce.data("max-left"),i=Ce.data("max-right");n>=r&&n<=i?Ce.css("left",n-t.opts.tableResizerOffset):n<r&&parseFloat(Ce.css("left"),10)>r-t.opts.tableResizerOffset?Ce.css("left",r-t.opts.tableResizerOffset):n>i&&parseFloat(Ce.css("left"),10)<i-t.opts.tableResizerOffset&&Ce.css("left",i-t.opts.tableResizerOffset)}else Se&&te()}function fe(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function pe(n){var r=n.which;if(r==e.FE.KEYCODE.TAB){var i;if(ve().length>0)i=t.$el.find(".fr-selected-cell:last");else{var o=t.selection.element();"TD"==o.tagName||"TH"==o.tagName?i=e(o):e(o).closest("td").length>0?i=e(o).closest("td"):e(o).closest("th").length>0&&(i=e(o).closest("th"))}if(i)return n.preventDefault(),W(),n.shiftKey?i.prev().length>0?fe(i.prev()):i.closest("tr").length>0&&i.closest("tr").prev().length>0?fe(i.closest("tr").prev().find("td:last")):i.closest("tbody").length>0&&i.closest("table").find("thead tr").length>0&&fe(i.closest("table").find("thead tr th:last")):i.next().length>0?fe(i.next()):i.closest("tr").length>0&&i.closest("tr").next().length>0?fe(i.closest("tr").next().find("td:first")):i.closest("thead").length>0&&i.closest("table").find("tbody tr").length>0?fe(i.closest("table").find("tbody tr td:first")):(i.addClass("fr-selected-cell"),y("below"),M(),fe(i.closest("tr").next().find("td:first"))),t.selection.restore(),!1}}function he(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=Te.data("selected-cell"),n=Te.data("position"),r=Te.data("instance")||t;"before"==n?(e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell")):"after"==n?(e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell")):"above"==n?(e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell")):"below"==n&&(e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell")),te()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){te()},!0),t.events.$on(t.$wp,"scroll",function(){te()},!0)),Te=t.shared.$ti_helper,t.events.on("destroy",function(){Te=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function me(){xe=null,clearTimeout(Ae)}function ge(){ve().length>0?r():(t.popups.hide("table.insert"),t.toolbar.showInline())}function ve(){return t.el.querySelectorAll(".fr-selected-cell")}function be(){var n=ve();if(n.length){for(var r=n[0];r&&"TABLE"!=r.tagName&&r.parentNode!=t.el;)r=r.parentNode;return e(r&&"TABLE"==r.tagName?r:[])}return e([])}function ye(n){if(n.altKey&&n.which==e.FE.KEYCODE.SPACE){var i,o=t.selection.element();if("TD"==o.tagName||"TH"==o.tagName?i=o:e(o).closest("td").length>0?i=e(o).closest("td").get(0):e(o).closest("th").length>0&&(i=e(o).closest("th").get(0)),i)return n.preventDefault(),H(i,i),r(),!1}}function Ee(n){var r=ve();if(r.length>0){var i,o,a=I(),s=n.which;1==r.length?(i=r[0],o=i):(i=t.el.querySelector(".fr-cell-fixed"),o=t.el.querySelector(".fr-cell-handler"));var l=L(o,a);if(e.FE.KEYCODE.ARROW_RIGHT==s){if(l.col<a[0].length-1)return H(i,a[l.row][l.col+1]),!1}else if(e.FE.KEYCODE.ARROW_DOWN==s){if(l.row<a.length-1)return H(i,a[l.row+1][l.col]),!1}else if(e.FE.KEYCODE.ARROW_LEFT==s){if(l.col>0)return H(i,a[l.row][l.col-1]),!1}else if(e.FE.KEYCODE.ARROW_UP==s&&l.row>0)return H(i,a[l.row-1][l.col]),!1}}function we(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){Se=!1,$e=!1,_e=!1,t.events.$on(t.$el,"mousedown",z),t.popups.onShow("image.edit",function(){M(),Se=!1,$e=!1}),t.popups.onShow("link.edit",function(){M(),Se=!1,$e=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&M()}),t.events.$on(t.$el,"mouseenter","th, td",Y),t.events.$on(t.$win,"mouseup",q),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",q),t.events.$on(t.$win,"mousemove",de),t.events.$on(e(t.o_win),"scroll",se),t.events.on("contentChanged",function(){ve().length>0&&(r(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),ve().length>0&&r()}))}),t.events.$on(e(t.o_win),"resize",function(){M()}),t.events.on("toolbar.esc",function(){if(ve().length>0)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.$on(t.$el,"keydown",function(e){e.shiftKey?Ee(e)===!1&&setTimeout(function(){r()},0):Z(e)}),t.events.on("keydown",function(n){if(pe(n)===!1)return!1;var r=ve();if(r.length>0){if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return M(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),r=[],!1;if(r.length>1&&n.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var i=0;i<r.length;i++)e(r[i]).html("<br>"),i==r.length-1&&e(r[i]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),r=[],!1}if(r.length>1&&n.which!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n))return n.preventDefault(),r=[],!1}else if(r=[],ye(n)===!1)return!1},!0);var n=[];t.events.on("html.beforeGet",function(){n=ve();for(var e=0;e<n.length;e++)n[e].className=(n[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].className=(n[e].className?n[e].className.trim()+" ":"")+"fr-selected-cell";n=[]}),a(!0),u(!0)}t.events.on("destroy",me)}var Ce,Te,$e,Se,xe,Ae,_e;return{_init:we,insert:m,remove:g,insertRow:y,deleteRow:E,insertColumn:w,deleteColumn:C,mergeCells:A,splitCellVertically:k,splitCellHorizontally:_,addHeader:v,removeHeader:b,setBackground:O,showInsertPopup:n,showEditPopup:r,showColorsPopup:i,back:ge,verticalAlign:R,horizontalAlign:N,applyStyle:D,selectedTable:be,selectedCells:ve}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){var e=this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]');e.hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableRows.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableColumns.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCells.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell").closest("table");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+r.toLowerCase()+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(r)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell:first");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.extend(e.FE.DEFAULTS,{}),e.FE.URLRegEx=/(\s|^|>)((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+(\.[a-zA-Z]{2,3})?(:\d*)?(\/[^\s<]*)?)(\s|$|<)/gi,e.FE.PLUGINS.url=function(t){function n(e){for(;e.parentNode;)if(e=e.parentNode,["A","BUTTON","TEXTAREA"].indexOf(e.tagName)>=0)return!0;return!1}function r(){for(var r=t.doc.createTreeWalker(t.el,NodeFilter.SHOW_TEXT,t.node.filter(function(t){return e.FE.URLRegEx.test(t.textContent.replace(/&nbsp;/gi,""))&&!n(t)}),!1);r.nextNode();){var i=r.currentNode,o=null;t.opts.linkAlwaysNoFollow&&(o="nofollow"),t.opts.linkAlwaysBlank&&(o?o+=" noopener noreferrer":o="noopener noreferrer"),e(i).before(i.textContent.replace(e.FE.URLRegEx,"$1<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(o?' rel="'+o+'"':"")+' href="$2">$2</a>$7')),i.parentNode.removeChild(i)}}function i(){t.events.on("paste.afterCleanup",function(n){if(e.FE.URLRegEx.test(n))return n.replace(e.FE.URLRegEx,"$1<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(t.opts.linkAlwaysNoFollow?' rel="nofollow"':"")+' href="$2">$2</a>$7')}),t.events.on("keyup",function(n){var i=n.which;i!=e.FE.KEYCODE.ENTER&&i!=e.FE.KEYCODE.SPACE||r(t.node.contents(t.el))}),t.events.on("keydown",function(n){var r=n.which;if(r==e.FE.KEYCODE.ENTER){var i=t.selection.element();if(("A"==i.tagName||e(i).parents("a").length)&&t.selection.info(i).atEnd)return n.stopImmediatePropagation(),"A"!==i.tagName&&(i=e(i).parents("a")[0]),e(i).after("&nbsp;"+e.FE.MARKERS),t.selection.restore(),!1}})}return{_init:i}},e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/(?:channels\/[A-z]+\/|groups\/[A-z]+\/videos\/)?(.+)/g,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function n(){var e=t.popups.get("video.insert"),n=e.find(".fr-video-by-url-layer input");n.val("").trigger("change");var r=e.find(".fr-video-embed-layer textarea");r.val("").trigger("change"),r=e.find(".fr-video-upload-layer input"),r.val("").trigger("change")}function r(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),n=t.popups.get("video.insert");if(n||(n=o()),h(),!n.hasClass("fr-active")){t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",r,i,e.outerHeight())}}function i(){var e=t.popups.get("video.edit");if(e||(e=z()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var n=ve.find("iframe, embed, video"),r=n.offset().left+n.outerWidth()/2,i=n.offset().top+n.outerHeight();t.popups.show("video.edit",r,i,n.outerHeight())}}function o(e){if(e)return t.popups.onRefresh("video.insert",n),t.popups.onHide("image.insert",ie),!0;var r="";t.opts.videoInsertButtons.length>1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var i="";t.opts.videoInsertButtons.indexOf("videoByURL")>=0&&(i='<div class="fr-video-by-url-layer fr-layer fr-active" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var o="";t.opts.videoInsertButtons.indexOf("videoEmbed")>=0&&(o='<div class="fr-video-embed-layer fr-layer" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var a="";t.opts.videoInsertButtons.indexOf("videoUpload")>=0&&(a='<div class="fr-video-upload-layer fr-layer" id="fr-video-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop video")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+t.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+t.id+'" role="button"></div></div>');var s='<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>',l={buttons:r,by_url_layer:i,embed_layer:o,upload_layer:a,progress_bar:s},c=t.popups.create("video.insert",l);return H(c),c}function a(e){var n,r,i=t.popups.get("video.insert");if(!ve&&!t.opts.toolbarInline){var o=t.$tb.find('.fr-command[data-cmd="insertVideo"]');n=o.offset().left+o.outerWidth()/2,r=o.offset().top+(t.opts.toolbarBottom?10:o.outerHeight()-10)}t.opts.toolbarInline&&(r=i.offset().top-t.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",n,r,0),t.accessibility.focusPopup(i)}function s(e){var n=t.popups.get("video.insert");n.find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function l(e){var n=t.popups.get("video.insert");n.find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function c(e){var n=t.popups.get("video.insert");n.find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function u(e){t.events.focus(!0),t.selection.restore();var n=!1;ve&&(re(),n=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var r=t.$el.find(".fr-jiv");r.removeClass("fr-jiv"),oe(r,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),r.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(n?"video.replaced":"video.inserted",[r])}function d(){var n=e(this);t.popups.hide("video.insert"),n.removeClass("fr-uploading"),n.parent().next().is("br")&&n.parent().next().remove(),y(n.parent()),t.events.trigger("video.loaded",[n.parent()])}function f(e,n,r,i,o){t.edit.off(),m("Loading video"),n&&(e=t.helpers.sanitizeURL(e));var a=document.createElement("video");a.oncanplay=function(){var n,a;if(i){t.undo.canDo()||i.find("video").hasClass("fr-uploading")||t.undo.saveStep();var s=i.find("video").data("fr-old-src"),l=i.data("fr-replaced");i.data("fr-replaced",!1),t.$wp?(n=i.clone(),n.find("video").removeData("fr-old-src").removeClass("fr-uploading"),n.find("video").off("canplay"),s&&i.find("video").attr("src",s),i.replaceWith(n)):n=i;for(var c=n.find("video").get(0).attributes,u=0;u<c.length;u++){var f=c[u];0===f.nodeName.indexOf("data-")&&n.find("video").removeAttr(f.nodeName)}if("undefined"!=typeof r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&n.find("video").attr("data-"+a,r[a]);n.find("video").on("canplay",d),n.find("video").attr("src",e),t.edit.on(),D(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(l?"video.replaced":"video.inserted",[n,o])}},a.onerror=function(){W(be)},p("Loading video"),a.src=e}function p(e){var n=t.popups.get("video.insert");if(n||(n=o()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),ve){var r=ve.find("video");t.popups.setContainer("video.insert",t.$sc);var i=r.offset().left+r.width()/2,a=r.offset().top+r.height();t.popups.show("video.insert",i,a,r.outerHeight())}"undefined"==typeof e&&m("Uploading",0)}function h(e){var n=t.popups.get("video.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&ve){var r=ve;F(!0),t.selection.setAfter(r.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function m(e,n){var r=t.popups.get("video.insert");if(r){var i=r.find(".fr-video-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function g(e){p();var n=t.popups.get("video.insert"),r=n.find(".fr-video-progress-bar-layer");r.addClass("fr-error");var i=r.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function v(n){if("undefined"==typeof n){var r=t.popups.get("video.insert");n=r.find('.fr-video-by-url-layer input[type="text"]').val()||""}var i=null;if(t.helpers.isURL(n))for(var o=0;o<e.FE.VIDEO_PROVIDERS.length;o++){var a=e.FE.VIDEO_PROVIDERS[o];if(a.test_regex.test(n)){i=n.replace(a.url_regex,a.url_text),i=a.html.replace(/\{url\}/,i);break}}i?u(i):t.events.trigger("video.linkError",[n])}function b(n){if("undefined"==typeof n){var r=t.popups.get("video.insert");n=r.find(".fr-video-embed-layer textarea").val()||""}0!==n.length&&e.FE.VIDEO_EMBED_REGEX.test(n)?u(n):t.events.trigger("video.codeError",[n])}function y(e){L.call(e.get(0))}function E(n){try{if(t.events.trigger("video.uploaded",[n],!0)===!1)return t.edit.on(),!1;var r=e.parseJSON(n);return r.link?r:(W(ye,n),!1)}catch(i){return W(we,n),!1}}function w(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return t.events.trigger("video.uploadedToS3",[r,i,n],!0)===!1?(t.edit.on(),!1):r}catch(o){return W(we,n),!1}}function C(e){m("Loading video");var n=this.status,r=this.response,i=this.responseXML,o=this.responseText;try{if(t.opts.videoUploadToS3)if(201==n){var a=w(i);a&&f(a,!1,[],e,r||i)}else W(we,r||i);else if(n>=200&&n<300){var s=E(o);s&&f(s.link,!1,s,e,r||o)}else W(Ee,r||o)}catch(l){W(we,r||o)}}function T(){W(we,this.response||this.responseText||this.responseXML)}function $(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;m("Uploading",t)}}function S(){t.edit.on(),h(!0)}function x(n,r,i){var o,a="";if(r&&"undefined"!=typeof r)for(o in r)r.hasOwnProperty(o)&&"link"!=o&&(a+=" data-"+o+'="'+r[o]+'"');var s=t.opts.videoDefaultWidth;s&&"auto"!=s&&(s+="px");var l=e('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'"><video src="'+n+'" '+a+(s?' style="width: '+s+';"':"")+'" controls>'+t.language.translate("Your browser does not support HTML5 video.")+"</video></span>");l.toggleClass("fr-draggable",t.opts.videoMove),l.find("video").on("canplay",i),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert();var c=t.$el.find(".fr-marker");return c.replaceWith(l),t.html.wrap(),t.selection.clear(),l}function A(n){if(!t.core.sameInstance(ge))return!0;n.preventDefault(),n.stopPropagation();var r=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null),i=n.pageY||(n.originalEvent.touches?n.originalEvent.touches[0].pageY:null);return!(!r||!i)&&(t.undo.canDo()||t.undo.saveStep(),me=e(this),me.data("start-x",r),me.data("start-y",i),he.show(),t.popups.hideAll(),void P())}function _(e){if(!t.core.sameInstance(ge))return!0;if(me){e.preventDefault();var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),r=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!n||!r)return!1;var i=me.data("start-x"),o=me.data("start-y");me.data("start-x",n),me.data("start-y",r);var a=n-i,s=r-o,l=ve.find("iframe, embed, video"),c=l.width(),u=l.height();(me.hasClass("fr-hnw")||me.hasClass("fr-hsw"))&&(a=0-a),(me.hasClass("fr-hnw")||me.hasClass("fr-hne"))&&(s=0-s),l.css("width",c+a),l.css("height",u+s),l.removeAttr("width"),l.removeAttr("height"),I()}}function k(e){return!t.core.sameInstance(ge)||void(me&&ve&&(e&&e.stopPropagation(),me=null,he.hide(),I(),i(),t.undo.saveStep()))}function O(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function R(e,t,n,r){return e.pageX=t,e.pageY=t,A.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),e.pageY=e.pageY+n*Math.floor(Math.pow(1.1,r)),_.call(this,e),k.call(this,e),++r}function N(){var n;if(t.shared.$video_resizer?(ge=t.shared.$video_resizer,he=t.shared.$vid_overlay,t.events.on("destroy",function(){ge.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),ge=t.shared.$video_resizer,t.events.$on(ge,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(ge.append(O("nw")+O("ne")+O("sw")+O("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),he=t.shared.$vid_overlay,n=ge.get(0).ownerDocument,e(n).find("body").append(he))),t.events.on("shared.destroy",function(){ge.html("").removeData().remove(),ge=null,t.opts.videoResize&&(he.remove(),he=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",function(){F(!0)}),t.opts.videoResize){n=ge.get(0).ownerDocument,t.events.$on(ge,t._mousedown,".fr-handler",A),t.events.$on(e(n),t._mousemove,_),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,k),t.events.$on(he,"mouseleave",k);var r=1,i=null,o=0;t.events.on("keydown",function(n){if(ve){var a=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,s=n.which;(s!==i||n.timeStamp-o>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?r=R.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey&&(r=R.call(this,n,2,-1,r)),
i=s,o=n.timeStamp}}),t.events.on("keyup",function(){r=1})}}function D(){var n,r=Array.prototype.slice.call(t.el.querySelectorAll("video")),i=[];for(n=0;n<r.length;n++)i.push(r[n].getAttribute("src")),e(r[n]).toggleClass("fr-draggable",t.opts.videoMove),""===r[n].getAttribute("class")&&r[n].removeAttribute("class"),""===r[n].getAttribute("style")&&r[n].removeAttribute("style");if(xe)for(n=0;n<xe.length;n++)i.indexOf(xe[n].getAttribute("src"))<0&&t.events.trigger("video.removed",[e(xe[n])]);xe=r}function I(){ge||N(),(t.$wp||t.$sc).append(ge),ge.data("instance",t);var e=ve.find("iframe, embed, video");ge.css("top",(t.opts.iframe?e.offset().top-1:e.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?e.offset().left-1:e.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",e.outerWidth()).css("height",e.height()).addClass("fr-active")}function L(n){if(n&&"touchend"==n.type&&Ae)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=t&&e.FE.INSTANCES[r].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),ve=e(this),e(this).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),ue(),I(),i(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function F(e){ve&&(B()||e===!0)&&(ge.removeClass("fr-active"),t.toolbar.enable(),ve.removeClass("fr-active"),ve=null,P())}function M(){t.shared.vid_exit_flag=!0}function P(){t.shared.vid_exit_flag=!1}function B(){return t.shared.vid_exit_flag}function U(n,r,i){function o(){var i=e(this);i.off("canplay"),i.addClass("fr-uploading"),i.parent().next().is("br")&&i.parent().next().remove(),t.placeholder.refresh(),i.parent().is(ve)||y(i.parent()),I(),p(),t.edit.off(),n.onload=function(){C.call(n,i.parent())},n.onerror=T,n.upload.onprogress=$,n.onabort=S,i.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(r)}var a,s=new FileReader;s.addEventListener("load",function(){for(var e=s.result,n=atob(s.result.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));if(e=window.URL.createObjectURL(new Blob([new Uint8Array(r)],{type:"video/mp4"})),ve){ve.data("fr-replaced",!0);var l=ve.find("video");l.length?(l.on("canplay",o),t.edit.on(),t.undo.saveStep(),l.data("fr-old-src",l.attr("src")),l.attr("src",e)):(re(),a=x(e,null,o))}else a=x(e,null,o)},!1),s.readAsDataURL(i)}function j(e){if("undefined"!=typeof e&&e.length>0){if(t.events.trigger("video.beforeUpload",[e])===!1)return!1;var n=e[0];if(n.size>t.opts.videoMaxSize)return W(Ce),!1;if(t.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))<0)return W(Te),!1;var r;if(t.drag_support.formdata&&(r=t.drag_support.formdata?new FormData:null),r){var i;if(t.opts.videoUploadToS3!==!1){r.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",n.type);for(i in t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(i)&&r.append(i,t.opts.videoUploadToS3.params[i])}for(i in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(i)&&r.append(i,t.opts.videoUploadParams[i]);r.append(t.opts.videoUploadParam,n);var o=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(o=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://"+t.opts.videoUploadToS3.region+".amazonaws.com/"+t.opts.videoUploadToS3.bucket);var a=t.core.getXHR(o,t.opts.videoUploadMethod);U(a,r,n)}}}function H(n){t.events.$on(n,"dragover dragenter",".fr-video-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-video-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-upload-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var o=n.data("instance")||t;o.events.disableBlur(),o.video.upload(i.files),o.events.enableBlur()}}),t.events.$on(n,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.video.upload(this.files)}e(this).val("")})}function K(){t.events.on("mousedown window.mousedown",M),t.events.on("window.touchmove",P),t.events.on("mouseup window.mouseup",F),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&F()}),t.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){F(!0)})}function W(e,n){t.edit.on(),ve&&ve.find("video").addClass("fr-error"),g(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:Se[e]},n])}function z(){var e="";if(t.opts.videoEditButtons.length>0){e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons),e+="</div>";var n={buttons:e},r=t.popups.create("video.edit",n);return t.events.$on(t.$wp,"scroll.video-edit",function(){ve&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),y(ve))}),r}return!1}function q(){if(ve){var e=t.popups.get("video.size"),n=ve.find("iframe, embed, video");e.find('input[name="width"]').val(n.get(0).style.width||n.attr("width")).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height||n.attr("height")).trigger("change")}}function Y(){var e=t.popups.get("video.size");e||(e=V()),h(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var n=ve.find("iframe, embed, video"),r=n.offset().left+n.width()/2,i=n.offset().top+n.height();t.popups.show("video.size",r,i,n.height())}function V(e){if(e)return t.popups.onRefresh("video.size",q),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>";var r="";r='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var i={buttons:n,size_layer:r},o=t.popups.create("video.size",i);return t.events.$on(t.$wp,"scroll",function(){ve&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),y(ve))}),o}function G(e){if("undefined"==typeof e&&(e=ve),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function X(e){ve.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?ve.addClass("fr-fvl"):"right"==e&&ve.addClass("fr-fvr"):oe(ve,J(),e),I(),i()}function Q(e){return!!ve&&void e.find("> *:first").replaceWith(t.icon.create("video-align-"+G()))}function Z(e,t){ve&&t.find('.fr-command[data-param1="'+G()+'"]').addClass("fr-active").attr("aria-selected",!0)}function J(e){"undefined"==typeof e&&(e=ve);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ee(e){ve.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?ve.addClass("fr-dvi"):"block"==e&&ve.addClass("fr-dvb"):oe(ve,e,G()),I(),i()}function te(e,t){ve&&t.find('.fr-command[data-param1="'+J()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ne(){var e=t.popups.get("video.insert");e||(e=o()),t.popups.isVisible("video.insert")||(h(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var n=ve.offset().left+ve.width()/2,r=ve.offset().top+ve.height();t.popups.show("video.insert",n,r,ve.outerHeight())}function re(){if(ve&&t.events.trigger("video.beforeRemove",[ve])!==!1){var e=ve;t.popups.hideAll(),F(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function ie(){h()}function oe(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+r[0]+" fr-dv"+n[0])):"inline"==n?(e.css({display:"inline-block"}),"center"==r?e.css({"float":"none"}):"left"==r?e.css({"float":"left"}):e.css({"float":"right"})):(e.css({display:"block",clear:"both"}),"left"==r?e.css({textAlign:"left"}):"right"==r?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function ae(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fi"+G(e)[0]),e.addClass("fr-di"+J(e)[0]))}function se(e){var t=e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,n=e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":G(e);oe(e,t,n),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function le(){t.$el.find("video").filter(function(){return 0===e(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var n=e(this).attr("src"),r=0;r<e.FE.VIDEO_PROVIDERS.length;r++){var i=e.FE.VIDEO_PROVIDERS[r];if(i.test_regex.test(n))return!0}return!1}).map(function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var n=t.$el.find("span.fr-video, video"),r=0;r<n.length;r++){var i=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?(ae(i),t.opts.videoTextNear||i.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||se(i)}n.toggleClass("fr-draggable",t.opts.videoMove)}function ce(){K(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){Ae=!1}),t.events.$on(t.$el,"touchmove",function(){Ae=!0})),t.events.on("html.set",le),le(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),t.events.$on(t.$el,"click touchend","span.fr-video",L),t.events.on("keydown",function(n){var r=n.which;return!ve||r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.DELETE?ve&&r==e.FE.KEYCODE.ESC?(F(!0),n.preventDefault(),!1):ve&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),re(),!1)},!0),t.events.on("toolbar.esc",function(){if(ve)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.on("toolbar.focusEditor",function(){if(ve)return!1},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),o(!0),V(!0)}function ue(){if(ve){t.selection.clear();var e=t.doc.createRange();e.selectNode(ve.get(0));var n=t.selection.get();n.addRange(e)}}function de(){ve?(t.events.disableBlur(),ve.trigger("click")):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())}function fe(e,n){if(ve){var r=t.popups.get("video.size"),i=ve.find("iframe, embed, video");i.css("width",e||r.find('input[name="width"]').val()),i.css("height",n||r.find('input[name="height"]').val()),i.get(0).style.width&&i.removeAttr("width"),i.get(0).style.height&&i.removeAttr("height"),r.find("input:focus").blur(),setTimeout(function(){ve.trigger("click")},t.helpers.isAndroid()?50:0)}}function pe(){return ve}var he,me,ge,ve,be=1,ye=2,Ee=3,we=4,Ce=5,Te=6,$e=7,Se={};Se[be]="Video cannot be loaded from the passed link.",Se[ye]="No link in upload response.",Se[Ee]="Error during file upload.",Se[we]="Parsing response failed.",Se[Ce]="File is too large.",Se[Te]="Video file type is invalid.",Se[$e]="Files can be uploaded only to same domain in IE 8 and IE 9.";var xe,Ae;return t.shared.vid_exit_flag=!1,{_init:ce,showInsertPopup:r,showLayer:a,refreshByURLButton:s,refreshEmbedButton:l,refreshUploadButton:c,upload:j,insertByURL:v,insertEmbed:b,insert:u,align:X,refreshAlign:Q,refreshAlignOnShow:Z,display:ee,refreshDisplayOnShow:te,remove:re,hideProgressBar:h,showSizePopup:Y,replace:ne,back:de,setSize:fe,get:pe}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.DefineIcon("videoUpload",{NAME:"upload"}),e.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("video-align",{NAME:"align-left"}),e.FE.DefineIcon("video-align-left",{NAME:"align-left"}),e.FE.DefineIcon("video-align-right",{NAME:"align-right"}),e.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.videoAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("video-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoReplace",{NAME:"exchange"}),e.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){var t=this.video.get();t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.FE.PLUGINS.align=function(t){function n(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var r=t.selection.blocks(),i=0;i<r.length;i++)t.helpers.getAlignment(e(r[i].parentNode))==n?e(r[i]).css("text-align","").removeClass("fr-temp-div"):e(r[i]).css("text-align",n).removeClass("fr-temp-div"),""===e(r[i]).attr("class")&&e(r[i]).removeAttr("class"),""===e(r[i]).attr("style")&&e(r[i]).removeAttr("style");t.selection.save(),t.html.unwrap(),t.selection.restore()}function r(n){var r=t.selection.blocks();if(r.length){var i=t.helpers.getAlignment(e(r[0]));n.find("> *:first").replaceWith(t.icon.create("align-"+i))}}function i(n,r){var i=t.selection.blocks();if(i.length){var o=t.helpers.getAlignment(e(i[0]));r.find('a.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:n,refresh:r,refreshOnShow:i}},e.FE.DefineIcon("align",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.align.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),e.FE.PLUGINS.charCounter=function(t){function n(){return t.el.textContent.length}function r(e){if(t.opts.charCounterMax<0)return!0;if(n()<t.opts.charCounterMax)return!0;var r=e.which;return!(!t.keys.ctrlKey(e)&&t.keys.isCharacter(r)&&(e.preventDefault(),e.stopPropagation(),t.events.trigger("charCounter.exceeded"),1))}function i(r){if(t.opts.charCounterMax<0)return r;var i=e("<div>").html(r).text().length;return i+n()<=t.opts.charCounterMax?r:(t.events.trigger("charCounter.exceeded"),"")}function o(){if(t.opts.charCounterCount){var e=n()+(t.opts.charCounterMax>0?"/"+t.opts.charCounterMax:"");s.text(e),t.opts.toolbarBottom&&s.css("margin-bottom",t.$tb.outerHeight(!0));var r=t.$wp.get(0).offsetWidth-t.$wp.get(0).clientWidth;r>=0&&("rtl"==t.opts.direction?s.css("margin-left",r):s.css("margin-right",r))}}function a(){return!!t.$wp&&!!t.opts.charCounterCount&&(s=e('<span class="fr-counter"></span>'),s.css("bottom",t.$wp.css("border-bottom-width")),t.$box.append(s),t.events.on("keydown",r,!0),t.events.on("paste.afterCleanup",i),t.events.on("keyup contentChanged input",function(){t.events.trigger("charCounter.update")}),t.events.on("charCounter.update",o),t.events.trigger("charCounter.update"),void t.events.on("destroy",function(){e(t.o_win).off("resize.char"+t.id),s.removeData().remove(),s=null}))}var s;return{_init:a,count:n}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.FE.PLUGINS.codeBeautifier=function(){function e(e,n){function r(e){return e.replace(/^\s+/g,"")}function i(e){return e.replace(/\s+$/g,"")}function a(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:E,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;e++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)h&&"\n"==e&&this.newlines<=m&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(g){var n=this.input.substr(this.pos,3);if("{{#"==n||"{{/"==n)break;if("{{!"==n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var r=n.exec(this.input),i=r?r.index:this.input.length;return this.pos<i&&(t=this.input.substring(this.pos,i),this.pos=i),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,r,i="",o=[],a="",s=!1,l=!0,c=this.pos,d=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=c,this.line_char_count=d),o.length?o.join(""):["","TK_EOF"];if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace))s=!0;else{if("'"!=i&&'"'!=i||(i+=this.get_unformatted(i),s=!0),"="==i&&(s=!1),o.length&&"="!=o[o.length-1]&&">"!=i&&s){if(this.space_or_wrap(o),s=!1,!l&&"force"==v&&"/"!=i){this.print_newline(!0,o),this.print_indentation(o);for(var f=0;f<b;f++)o.push(u)}for(var h=0;h<o.length;h++)if(" "==o[h]){l=!1;break}}if(g&&"<"==r&&i+this.input.charAt(this.pos)=="{{"&&(i+=this.get_unformatted("}}"),o.length&&" "!=o[o.length-1]&&"<"!=o[o.length-1]&&(i=" "+i),s=!0),"<"!=i||r||(t=this.pos-1,r="<"),g&&!r&&o.length>=2&&"{"==o[o.length-1]&&"{"==o[o.length-2]&&(t="#"==i||"/"==i||"!"==i?this.pos-3:this.pos-2,r="{"),this.line_char_count++,o.push(i),o[1]&&("!"==o[1]||"?"==o[1]||"%"==o[1])){o=[this.get_comment(t)];break}if(g&&o[1]&&"{"==o[1]&&o[2]&&"!"==o[2]){o=[this.get_comment(t)];break}if(g&&"{"==r&&o.length>2&&"}"==o[o.length-2]&&"}"==o[o.length-1])break}}while(">"!=i);var m,y,E=o.join("");m=E.indexOf(" ")!=-1?E.indexOf(" "):"{"==E[0]?E.indexOf("}"):E.indexOf(">"),y="<"!=E[0]&&g?"#"==E[2]?3:2:1;var w=E.substring(y,m).toLowerCase();return"/"==E.charAt(E.length-2)||this.Utils.in_array(w,this.Utils.single_token)?e||(this.tag_type="SINGLE"):g&&"{"==E[0]&&"else"==w?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(w,p)?(a=this.get_unformatted("</"+w+">",E),o.push(a),n=this.pos-1,this.tag_type="SINGLE"):"script"==w&&(E.search("type")==-1||E.search("type")>-1&&E.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?e||(this.record_tag(w),this.tag_type="SCRIPT"):"style"==w&&(E.search("type")==-1||E.search("type")>-1&&E.search("text/css")>-1)?e||(this.record_tag(w),this.tag_type="STYLE"):"!"==w.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==w.charAt(0)?(this.retrieve_tag(w.substring(1)),this.tag_type="END"):(this.record_tag(w),"html"!=w.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(o),this.Utils.in_array(w,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=c,this.line_char_count=d),o.join("")},this.get_comment=function(e){var t="",n=">",r=!1;this.pos=e;var i=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(t+=i,t[t.length-1]!=n[n.length-1]||t.indexOf(n)==-1);)!r&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",r=!0):0===t.indexOf("<![cdata[")?(n="]]>",r=!0):0===t.indexOf("<![")?(n="]>",r=!0):0===t.indexOf("<!--")?(n="-->",r=!0):0===t.indexOf("{{!")?(n="}}",r=!0):0===t.indexOf("<?")?(n="?>",r=!0):0===t.indexOf("<%")&&(n="%>",r=!0)),i=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&t.toLowerCase().indexOf(e)!=-1)return"";var n="",r="",i=0,o=!0;do{if(this.pos>=this.input.length)return r;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"==n||"\r"==n){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,o=!0,g&&"{"==n&&r.length&&"{"==r[r.length-2]&&(r+=this.get_unformatted("}}"),i=r.length)}while(r.toLowerCase().indexOf(e,i)==-1);return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"==this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"==this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=this.get_tag(!0),r=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(r&&!this.Utils.in_array(r,t))},this.printer=function(e,t,n,o,a){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=a,this.indent_level=0,this.wrap_line_length=o,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=i(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=r(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=i(e)),e&&""!==e&&(e.length>1&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var s,l,c,u,d,f,p,h,m,g,v,b,y,E;for(n=n||{},void 0!==n.wrap_line_length&&0!==parseInt(n.wrap_line_length,10)||void 0===n.max_char||0===parseInt(n.max_char,10)||(n.wrap_line_length=n.max_char),l=void 0!==n.indent_inner_html&&n.indent_inner_html,c=void 0===n.indent_size?4:parseInt(n.indent_size,10),u=void 0===n.indent_char?" ":n.indent_char,f=void 0===n.brace_style?"collapse":n.brace_style,d=0===parseInt(n.wrap_line_length,10)?32786:parseInt(n.wrap_line_length||250,10),p=n.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],h=void 0===n.preserve_newlines||n.preserve_newlines,m=h?isNaN(parseInt(n.max_preserve_newlines,10))?32786:parseInt(n.max_preserve_newlines,10):0,g=void 0!==n.indent_handlebars&&n.indent_handlebars,v=void 0===n.wrap_attributes?"auto":n.wrap_attributes,b=void 0===n.wrap_attributes_indent_size?c:parseInt(n.wrap_attributes_indent_size,10)||c,y=void 0!==n.end_with_newline&&n.end_with_newline,E=Array.isArray(n.extra_liners)?n.extra_liners.concat():"string"==typeof n.extra_liners?n.extra_liners.split(","):"head,body,/html".split(","),n.indent_with_tabs&&(u="\t",c=1),s=new a,s.printer(e,u,c,d,f);;){var w=s.get_token();if(s.token_text=w[0],s.token_type=w[1],"TK_EOF"==s.token_type)break;switch(s.token_type){case"TK_TAG_START":s.print_newline(!1,s.output),s.print_token(s.token_text),s.indent_content&&(s.indent(),s.indent_content=!1),s.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==s.last_token&&""===s.last_text){var C=s.token_text.match(/\w+/)[0],T=null;s.output.length&&(T=s.output[s.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==T||T[1]!=C&&!s.Utils.in_array(T[1],p))&&s.print_newline(!1,s.output)}s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var $=s.token_text.match(/^\s*<([a-z-]+)/i);$&&s.Utils.in_array($[1],p)||s.print_newline(!1,s.output),s.print_token(s.token_text),s.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":s.print_token(s.token_text),s.indent_content&&(s.indent(),s.indent_content=!1),s.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":s.print_token(s.token_text),s.current_mode="TAG";break;case"TK_CONTENT":s.print_token(s.token_text),s.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==s.token_text){s.print_newline(!1,s.output);var S,x=s.token_text,A=1;"TK_SCRIPT"==s.token_type?S="function"==typeof o&&o:"TK_STYLE"==s.token_type&&(S="function"==typeof t&&t),"keep"==n.indent_scripts?A=0:"separate"==n.indent_scripts&&(A=-s.indent_level);var _=s.get_full_indent(A);if(S)x=S(x.replace(/^\s*/,_),n);else{var k=x.match(/^\s*/)[0],O=k.match(/[^\n\r]*$/)[0].split(s.indent_string).length-1,R=s.get_full_indent(A-O);
x=x.replace(/^\s*/,_).replace(/\r\n|\r|\n/g,"\n"+R).replace(/\s+$/,"")}x&&(s.print_token_raw(x),s.print_newline(!0,s.output))}s.current_mode="TAG";break;default:""!==s.token_text&&s.print_token(s.token_text)}s.last_token=s.token_type,s.last_text=s.token_text}var N=s.output.join("").replace(/[\r\n\t ]+$/,"");return y&&(N+="\n"),N}function t(e,t){function n(){return w=e.charAt(++T),w||""}function r(t){var r="",i=T;return t&&a(),r=e.charAt(T+1)||"",T=i-1,n(),r}function i(t){for(var r=T;n();)if("\\"===w)n();else{if(t.indexOf(w)!==-1)break;if("\n"===w)break}return e.substring(r,T+1)}function o(e){var t=T,r=i(e);return T=t-1,n(),r}function a(){for(var e="";C.test(r());)n(),e+=w;return e}function s(){var e="";for(w&&C.test(w)&&(e=w);C.test(n());)e+=w;return e}function l(t){var i=T;for(t="/"===r(),n();n();){if(!t&&"*"===w&&"/"===r()){n();break}if(t&&"\n"===w)return e.substring(i,T)}return e.substring(i,T)+w}function c(t){return e.substring(T-t.length,T).toLowerCase()===t}function u(){for(var t=0,n=T+1;n<e.length;n++){var r=e.charAt(n);if("{"===r)return!0;if("("===r)t+=1;else if(")"===r){if(0==t)return!1;t-=1}else if(";"===r||"}"===r)return!1}return!1}function d(){A++,S+=x}function f(){A--,S=S.slice(0,-m)}var p={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},h={"@media":!0,"@supports":!0,"@document":!0};t=t||{},e=e||"",e=e.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var m=t.indent_size||4,g=t.indent_char||" ",v=void 0===t.selector_separator_newline||t.selector_separator_newline,b=void 0!==t.end_with_newline&&t.end_with_newline,y=void 0===t.newline_between_rules||t.newline_between_rules,E=t.eol?t.eol:"\n";"string"==typeof m&&(m=parseInt(m,10)),t.indent_with_tabs&&(g="\t",m=1),E=E.replace(/\\r/,"\r").replace(/\\n/,"\n");var w,C=/^\s+$/,T=-1,$=0,S=e.match(/^[\t ]*/)[0],x=new Array(m+1).join(g),A=0,_=0,k={};k["{"]=function(e){k.singleSpace(),O.push(e),k.newLine()},k["}"]=function(e){k.newLine(),O.push(e),k.newLine()},k._lastCharWhitespace=function(){return C.test(O[O.length-1])},k.newLine=function(e){O.length&&(e||"\n"===O[O.length-1]||k.trim(),O.push("\n"),S&&O.push(S))},k.singleSpace=function(){O.length&&!k._lastCharWhitespace()&&O.push(" ")},k.preserveSingleSpace=function(){M&&k.singleSpace()},k.trim=function(){for(;k._lastCharWhitespace();)O.pop()};for(var O=[],R=!1,N=!1,D=!1,I="",L="";;){var F=s(),M=""!==F,P=F.indexOf("\n")!==-1;if(L=I,I=w,!w)break;if("/"===w&&"*"===r()){var B=0===A;(P||B)&&k.newLine(),O.push(l()),k.newLine(),B&&k.newLine(!0)}else if("/"===w&&"/"===r())P||"{"===L||k.trim(),k.singleSpace(),O.push(l()),k.newLine();else if("@"===w){k.preserveSingleSpace(),O.push(w);var U=o(": ,;{}()[]/='\"");U.match(/[ :]$/)&&(n(),U=i(": ").replace(/\s$/,""),O.push(U),k.singleSpace()),U=U.replace(/\s$/,""),U in p&&(_+=1,U in h&&(D=!0))}else"#"===w&&"{"===r()?(k.preserveSingleSpace(),O.push(i("}"))):"{"===w?"}"===r(!0)?(a(),n(),k.singleSpace(),O.push("{}"),k.newLine(),y&&0===A&&k.newLine(!0)):(d(),k["{"](w),D?(D=!1,R=A>_):R=A>=_):"}"===w?(f(),k["}"](w),R=!1,N=!1,_&&_--,y&&0===A&&k.newLine(!0)):":"===w?(a(),!R&&!D||c("&")||u()?":"===r()?(n(),O.push("::")):O.push(":"):(N=!0,O.push(":"),k.singleSpace())):'"'===w||"'"===w?(k.preserveSingleSpace(),O.push(i(w))):";"===w?(N=!1,O.push(w),k.newLine()):"("===w?c("url")?(O.push(w),a(),n()&&(")"!==w&&'"'!==w&&"'"!==w?O.push(i(")")):T--)):($++,k.preserveSingleSpace(),O.push(w),a()):")"===w?(O.push(w),$--):","===w?(O.push(w),a(),v&&!N&&$<1?k.newLine():k.singleSpace()):"]"===w?O.push(w):"["===w?(k.preserveSingleSpace(),O.push(w)):"="===w?(a(),w="=",O.push(w)):(k.preserveSingleSpace(),O.push(w))}var j="";return S&&(j+=S),j+=O.join("").replace(/[\r\n\t ]+$/,""),b&&(j+="\n"),"\n"!=E&&(j=j.replace(/[\n]/g,E)),j}function n(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function r(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.replace(/^\s+/g,"")}function o(e,t){var n=new a(e,t);return n.beautify()}function a(e,t){function o(e,t){var n=0;e&&(n=e.indentation_level,!K.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var r={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:K.get_line_number(),ternary_depth:0};return r}function a(e){var t=e.newlines,n=te.keep_array_indentation&&y(X.mode);if(n)for(r=0;r<t;r+=1)p(r>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){p();for(var r=1;r<t;r+=1)p(!0)}q=e,ee[q.type]()}function s(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");n!==-1;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function f(e){if(e=void 0!==e&&e,!K.just_added_newline())if(te.preserve_newlines&&q.wanted_newline||e)p(!1,!0);else if(te.wrap_line_length){var t=K.current_line.get_character_count()+q.text.length+(K.space_before_token?1:0);t>=te.wrap_line_length&&p(!1,!0)}}function p(e,t){if(!t&&";"!==X.last_text&&","!==X.last_text&&"="!==X.last_text&&"TK_OPERATOR"!==Y)for(;X.mode===d.Statement&&!X.if_block&&!X.do_block;)w();K.add_new_line(e)&&(X.multiline_frame=!0)}function h(){K.just_added_newline()&&(te.keep_array_indentation&&y(X.mode)&&q.wanted_newline?(K.current_line.push(q.whitespace_before),K.space_before_token=!1):K.set_indent(X.indentation_level)&&(X.line_indent_level=X.indentation_level))}function m(e){return K.raw?void K.add_raw_token(q):(te.comma_first&&"TK_COMMA"===Y&&K.just_added_newline()&&","===K.previous_line.last()&&(K.previous_line.pop(),h(),K.add_token(","),K.space_before_token=!0),e=e||q.text,h(),void K.add_token(e))}function g(){X.indentation_level+=1}function v(){X.indentation_level>0&&(!X.parent||X.indentation_level>X.parent.indentation_level)&&(X.indentation_level-=1)}function b(e){X?(Z.push(X),Q=X):Q=o(null,e),X=o(Q,e)}function y(e){return e===d.ArrayLiteral}function E(e){return n(e,[d.Expression,d.ForInitializer,d.Conditional])}function w(){Z.length>0&&(Q=X,X=Z.pop(),Q.mode===d.Statement&&K.remove_redundant_indentation(Q))}function C(){return X.parent.mode===d.ObjectLiteral&&X.mode===d.Statement&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===Y&&n(X.last_text,["get","set"]))}function T(){return!!("TK_RESERVED"===Y&&n(X.last_text,["var","let","const"])&&"TK_WORD"===q.type||"TK_RESERVED"===Y&&"do"===X.last_text||"TK_RESERVED"===Y&&"return"===X.last_text&&!q.wanted_newline||"TK_RESERVED"===Y&&"else"===X.last_text&&("TK_RESERVED"!==q.type||"if"!==q.text)||"TK_END_EXPR"===Y&&(Q.mode===d.ForInitializer||Q.mode===d.Conditional)||"TK_WORD"===Y&&X.mode===d.BlockStatement&&!X.in_case&&"--"!==q.text&&"++"!==q.text&&"function"!==V&&"TK_WORD"!==q.type&&"TK_RESERVED"!==q.type||X.mode===d.ObjectLiteral&&(":"===X.last_text&&0===X.ternary_depth||"TK_RESERVED"===Y&&n(X.last_text,["get","set"])))&&(b(d.Statement),g(),"TK_RESERVED"===Y&&n(X.last_text,["var","let","const"])&&"TK_WORD"===q.type&&(X.declaration_statement=!0),C()||f("TK_RESERVED"===q.type&&n(q.text,["do","for","if","while"])),!0)}function $(e,t){for(var n=0;n<e.length;n++){var i=r(e[n]);if(i.charAt(0)!==t)return!1}return!0}function S(e,t){for(var n,r=0,i=e.length;r<i;r++)if(n=e[r],n&&0!==n.indexOf(t))return!1;return!0}function x(e){return n(e,["case","return","do","if","throw","else"])}function A(e){var t=W+(e||0);return t<0||t>=ne.length?null:ne[t]}function _(){T();var e=d.Expression;if("["===q.text){if("TK_WORD"===Y||")"===X.last_text)return"TK_RESERVED"===Y&&n(X.last_text,z.line_starters)&&(K.space_before_token=!0),b(e),m(),g(),void(te.space_in_paren&&(K.space_before_token=!0));e=d.ArrayLiteral,y(X.mode)&&("["!==X.last_text&&(","!==X.last_text||"]"!==V&&"}"!==V)||te.keep_array_indentation||p())}else"TK_RESERVED"===Y&&"for"===X.last_text?e=d.ForInitializer:"TK_RESERVED"===Y&&n(X.last_text,["if","while"])&&(e=d.Conditional);";"===X.last_text||"TK_START_BLOCK"===Y?p():"TK_END_EXPR"===Y||"TK_START_EXPR"===Y||"TK_END_BLOCK"===Y||"."===X.last_text?f(q.wanted_newline):"TK_RESERVED"===Y&&"("===q.text||"TK_WORD"===Y||"TK_OPERATOR"===Y?"TK_RESERVED"===Y&&("function"===X.last_word||"typeof"===X.last_word)||"*"===X.last_text&&"function"===V?te.space_after_anon_function&&(K.space_before_token=!0):"TK_RESERVED"!==Y||!n(X.last_text,z.line_starters)&&"catch"!==X.last_text||te.space_before_conditional&&(K.space_before_token=!0):K.space_before_token=!0,"("===q.text&&"TK_RESERVED"===Y&&"await"===X.last_word&&(K.space_before_token=!0),"("===q.text&&("TK_EQUALS"!==Y&&"TK_OPERATOR"!==Y||C()||f()),b(e),m(),te.space_in_paren&&(K.space_before_token=!0),g()}function k(){for(;X.mode===d.Statement;)w();X.multiline_frame&&f("]"===q.text&&y(X.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==Y||te.space_in_empty_paren?K.space_before_token=!0:(K.trim(),K.space_before_token=!1)),"]"===q.text&&te.keep_array_indentation?(m(),w()):(w(),m()),K.remove_redundant_indentation(Q),X.do_while&&Q.mode===d.Conditional&&(Q.mode=d.Expression,X.do_block=!1,X.do_while=!1)}function O(){var e=A(1),t=A(2);b(t&&(":"===t.text&&n(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||n(e.text,["get","set"])&&n(t.type,["TK_WORD","TK_RESERVED"]))?n(V,["class","interface"])?d.BlockStatement:d.ObjectLiteral:d.BlockStatement);var r=!e.comments_before.length&&"}"===e.text,i=r&&"function"===X.last_word&&"TK_END_EXPR"===Y;"expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline?"TK_OPERATOR"!==Y&&(i||"TK_EQUALS"===Y||"TK_RESERVED"===Y&&x(X.last_text)&&"else"!==X.last_text)?K.space_before_token=!0:p(!1,!0):"TK_OPERATOR"!==Y&&"TK_START_EXPR"!==Y?"TK_START_BLOCK"===Y?p():K.space_before_token=!0:y(Q.mode)&&","===X.last_text&&("}"===V?K.space_before_token=!0:p()),m(),g()}function R(){for(;X.mode===d.Statement;)w();var e="TK_START_BLOCK"===Y;"expand"===te.brace_style?e||p():e||(y(X.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,p(),te.keep_array_indentation=!0):p()),w(),m()}function N(){if("TK_RESERVED"===q.type&&X.mode!==d.ObjectLiteral&&n(q.text,["set","get"])&&(q.type="TK_WORD"),"TK_RESERVED"===q.type&&X.mode===d.ObjectLiteral){var e=A(1);":"==e.text&&(q.type="TK_WORD")}if(T()||!q.wanted_newline||E(X.mode)||"TK_OPERATOR"===Y&&"--"!==X.last_text&&"++"!==X.last_text||"TK_EQUALS"===Y||!te.preserve_newlines&&"TK_RESERVED"===Y&&n(X.last_text,["var","let","const","set","get"])||p(),X.do_block&&!X.do_while){if("TK_RESERVED"===q.type&&"while"===q.text)return K.space_before_token=!0,m(),K.space_before_token=!0,void(X.do_while=!0);p(),X.do_block=!1}if(X.if_block)if(X.else_block||"TK_RESERVED"!==q.type||"else"!==q.text){for(;X.mode===d.Statement;)w();X.if_block=!1,X.else_block=!1}else X.else_block=!0;if("TK_RESERVED"===q.type&&("case"===q.text||"default"===q.text&&X.in_case_statement))return p(),(X.case_body||te.jslint_happy)&&(v(),X.case_body=!1),m(),X.in_case=!0,void(X.in_case_statement=!0);if("TK_RESERVED"===q.type&&"function"===q.text&&((n(X.last_text,["}",";"])||K.just_added_newline()&&!n(X.last_text,["[","{",":","=",","]))&&(K.just_added_blankline()||q.comments_before.length||(p(),p(!0))),"TK_RESERVED"===Y||"TK_WORD"===Y?"TK_RESERVED"===Y&&n(X.last_text,["get","set","new","return","export","async"])?K.space_before_token=!0:"TK_RESERVED"===Y&&"default"===X.last_text&&"export"===V?K.space_before_token=!0:p():"TK_OPERATOR"===Y||"="===X.last_text?K.space_before_token=!0:(X.multiline_frame||!E(X.mode)&&!y(X.mode))&&p()),"TK_COMMA"!==Y&&"TK_START_EXPR"!==Y&&"TK_EQUALS"!==Y&&"TK_OPERATOR"!==Y||C()||f(),"TK_RESERVED"===q.type&&n(q.text,["function","get","set"]))return m(),void(X.last_word=q.text);if(J="NONE","TK_END_BLOCK"===Y?"TK_RESERVED"===q.type&&n(q.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline?J="NEWLINE":(J="SPACE",K.space_before_token=!0):J="NEWLINE":"TK_SEMICOLON"===Y&&X.mode===d.BlockStatement?J="NEWLINE":"TK_SEMICOLON"===Y&&E(X.mode)?J="SPACE":"TK_STRING"===Y?J="NEWLINE":"TK_RESERVED"===Y||"TK_WORD"===Y||"*"===X.last_text&&"function"===V?J="SPACE":"TK_START_BLOCK"===Y?J="NEWLINE":"TK_END_EXPR"===Y&&(K.space_before_token=!0,J="NEWLINE"),"TK_RESERVED"===q.type&&n(q.text,z.line_starters)&&")"!==X.last_text&&(J="else"===X.last_text||"export"===X.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===q.type&&n(q.text,["else","catch","finally"]))if("TK_END_BLOCK"!==Y||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline)p();else{K.trim(!0);var t=K.current_line;"}"!==t.last()&&p(),K.space_before_token=!0}else"NEWLINE"===J?"TK_RESERVED"===Y&&x(X.last_text)?K.space_before_token=!0:"TK_END_EXPR"!==Y?"TK_START_EXPR"===Y&&"TK_RESERVED"===q.type&&n(q.text,["var","let","const"])||":"===X.last_text||("TK_RESERVED"===q.type&&"if"===q.text&&"else"===X.last_text?K.space_before_token=!0:p()):"TK_RESERVED"===q.type&&n(q.text,z.line_starters)&&")"!==X.last_text&&p():X.multiline_frame&&y(X.mode)&&","===X.last_text&&"}"===V?p():"SPACE"===J&&(K.space_before_token=!0);m(),X.last_word=q.text,"TK_RESERVED"===q.type&&"do"===q.text&&(X.do_block=!0),"TK_RESERVED"===q.type&&"if"===q.text&&(X.if_block=!0)}function D(){for(T()&&(K.space_before_token=!1);X.mode===d.Statement&&!X.if_block&&!X.do_block;)w();m()}function I(){T()?K.space_before_token=!0:"TK_RESERVED"===Y||"TK_WORD"===Y?K.space_before_token=!0:"TK_COMMA"===Y||"TK_START_EXPR"===Y||"TK_EQUALS"===Y||"TK_OPERATOR"===Y?C()||f():p(),m()}function L(){T(),X.declaration_statement&&(X.declaration_assignment=!0),K.space_before_token=!0,m(),K.space_before_token=!0}function F(){return X.declaration_statement?(E(X.parent.mode)&&(X.declaration_assignment=!1),m(),void(X.declaration_assignment?(X.declaration_assignment=!1,p(!1,!0)):(K.space_before_token=!0,te.comma_first&&f()))):(m(),void(X.mode===d.ObjectLiteral||X.mode===d.Statement&&X.parent.mode===d.ObjectLiteral?(X.mode===d.Statement&&w(),p()):(K.space_before_token=!0,te.comma_first&&f())))}function M(){if(T(),"TK_RESERVED"===Y&&x(X.last_text))return K.space_before_token=!0,void m();if("*"===q.text&&"TK_DOT"===Y)return void m();if(":"===q.text&&X.in_case)return X.case_body=!0,g(),m(),p(),void(X.in_case=!1);if("::"===q.text)return void m();"TK_OPERATOR"===Y&&f();var e=!0,t=!0;n(q.text,["--","++","!","~"])||n(q.text,["-","+"])&&(n(Y,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||n(X.last_text,z.line_starters)||","===X.last_text)?(e=!1,t=!1,!q.wanted_newline||"--"!==q.text&&"++"!==q.text||p(!1,!0),";"===X.last_text&&E(X.mode)&&(e=!0),"TK_RESERVED"===Y?e=!0:"TK_END_EXPR"===Y?e=!("]"===X.last_text&&("--"===q.text||"++"===q.text)):"TK_OPERATOR"===Y&&(e=n(q.text,["--","-","++","+"])&&n(X.last_text,["--","-","++","+"]),n(q.text,["+","-"])&&n(X.last_text,["--","++"])&&(t=!0)),X.mode!==d.BlockStatement&&X.mode!==d.Statement||"{"!==X.last_text&&";"!==X.last_text||p()):":"===q.text?0===X.ternary_depth?e=!1:X.ternary_depth-=1:"?"===q.text?X.ternary_depth+=1:"*"===q.text&&"TK_RESERVED"===Y&&"function"===X.last_text&&(e=!1,t=!1),K.space_before_token=K.space_before_token||e,m(),K.space_before_token=t}function P(){if(K.raw)return K.add_raw_token(q),void(q.directives&&"end"===q.directives.preserve&&(te.test_output_raw||(K.raw=!1)));if(q.directives)return p(!1,!0),m(),"start"===q.directives.preserve&&(K.raw=!0),void p(!1,!0);if(!u.newline.test(q.text)&&!q.wanted_newline)return K.space_before_token=!0,m(),void(K.space_before_token=!0);var e,t=s(q.text),n=!1,r=!1,o=q.whitespace_before,a=o.length;for(p(!1,!0),t.length>1&&($(t.slice(1),"*")?n=!0:S(t.slice(1),o)&&(r=!0)),m(t[0]),e=1;e<t.length;e++)p(!1,!0),n?m(" "+i(t[e])):r&&t[e].length>a?m(t[e].substring(a)):K.add_token(t[e]);p(!1,!0)}function B(){q.wanted_newline?p(!1,!0):K.trim(!0),K.space_before_token=!0,m(),p(!1,!0)}function U(){T(),"TK_RESERVED"===Y&&x(X.last_text)?K.space_before_token=!0:f(")"===X.last_text&&te.break_chained_methods),m()}function j(){m(),"\n"===q.text[q.text.length-1]&&p()}function H(){for(;X.mode===d.Statement;)w()}var K,W,z,q,Y,V,G,X,Q,Z,J,ee,te,ne=[],re="";for(ee={TK_START_EXPR:_,TK_END_EXPR:k,TK_START_BLOCK:O,TK_END_BLOCK:R,TK_WORD:N,TK_RESERVED:N,TK_SEMICOLON:D,TK_STRING:I,TK_EQUALS:L,TK_OPERATOR:M,TK_COMMA:F,TK_BLOCK_COMMENT:P,TK_COMMENT:B,TK_DOT:U,TK_UNKNOWN:j,TK_EOF:H},t=t?t:{},te={},void 0!==t.braces_on_own_line&&(te.brace_style=t.braces_on_own_line?"expand":"collapse"),te.brace_style=t.brace_style?t.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=t.indent_size?parseInt(t.indent_size,10):4,te.indent_char=t.indent_char?t.indent_char:" ",te.eol=t.eol?t.eol:"\n",te.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,te.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,te.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),te.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,te.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,te.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,te.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,te.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,te.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,te.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,te.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),te.e4x=void 0!==t.e4x&&t.e4x,te.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,te.comma_first=void 0!==t.comma_first&&t.comma_first,te.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),t.indent_with_tabs&&(te.indent_char="\t",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),G="";te.indent_size>0;)G+=te.indent_char,te.indent_size-=1;var ie=0;if(e&&e.length){for(;" "===e.charAt(ie)||"\t"===e.charAt(ie);)re+=e.charAt(ie),ie+=1;e=e.substring(ie)}Y="TK_START_BLOCK",V="",K=new l(G,re),K.raw=te.test_output_raw,Z=[],b(d.BlockStatement),this.beautify=function(){var t,n;for(z=new c(e,te,G),ne=z.tokenize(),W=0;t=A();){for(var r=0;r<t.comments_before.length;r++)a(t.comments_before[r]);a(t),V=X.last_text,Y=t.type,X.last_text=t.text,W+=1}return n=K.get_code(),te.end_with_newline&&(n+="\n"),"\n"!=te.eol&&(n=n.replace(/[\n]/g,te.eol)),n}}function s(e){var t=0,n=-1,r=[],i=!0;this.set_indent=function(r){t=e.baseIndentLength+r*e.indent_length,n=r},this.get_character_count=function(){return t},this.is_empty=function(){return i},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),t+=e.length,i=!1},this.pop=function(){var e=null;return i||(e=r.pop(),t-=e.length,i=0===r.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)r.pop(),t-=1;i=0===r.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=r.join("")),t}}function l(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new s(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==d.ForInitializer&&e.mode!==d.Conditional)for(var t=e.start_line_index,r=n.length;t<r;)n[t].remove_indent(),t++},this.trim=function(r){for(r=void 0!==r&&r,this.current_line.trim(e,t);r&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function c(e,t,i){function o(e){if(!e.match($))return null;var t={};S.lastIndex=0;for(var n=S.exec(e);n;)t[n[1]]=n[2],n=S.exec(e);return t}function a(){var i,a=[];if(m=0,g="",y>=E)return["","TK_EOF"];var $;$=b.length?b[b.length-1]:new f("TK_START_BLOCK","{");var S=e.charAt(y);for(y+=1;n(S,l);){if(u.newline.test(S)?"\n"===S&&"\r"===e.charAt(y-2)||(m+=1,a=[]):a.push(S),y>=E)return["","TK_EOF"];S=e.charAt(y),y+=1}if(a.length&&(g=a.join("")),c.test(S)){var _=!0,k=!0,O=c;for("0"===S&&y<E&&/[Xxo]/.test(e.charAt(y))?(_=!1,k=!1,S+=e.charAt(y),y+=1,O=/[o]/.test(e.charAt(y))?d:p):(S="",y-=1);y<E&&O.test(e.charAt(y));)S+=e.charAt(y),y+=1,_&&y<E&&"."===e.charAt(y)&&(S+=e.charAt(y),y+=1,_=!1),k&&y<E&&/[Ee]/.test(e.charAt(y))&&(S+=e.charAt(y),y+=1,y<E&&/[+-]/.test(e.charAt(y))&&(S+=e.charAt(y),y+=1),k=!1,_=!1);return[S,"TK_WORD"]}if(u.isIdentifierStart(e.charCodeAt(y-1))){if(y<E)for(;u.isIdentifierChar(e.charCodeAt(y))&&(S+=e.charAt(y),y+=1,y!==E););return"TK_DOT"===$.type||"TK_RESERVED"===$.type&&n($.text,["set","get"])||!n(S,w)?[S,"TK_WORD"]:"in"===S?[S,"TK_OPERATOR"]:[S,"TK_RESERVED"]}if("("===S||"["===S)return[S,"TK_START_EXPR"];if(")"===S||"]"===S)return[S,"TK_END_EXPR"];if("{"===S)return[S,"TK_START_BLOCK"];if("}"===S)return[S,"TK_END_BLOCK"];if(";"===S)return[S,"TK_SEMICOLON"];if("/"===S){var R="";if("*"===e.charAt(y)){y+=1,C.lastIndex=y;var N=C.exec(e);R="/*"+N[0],y+=N[0].length;var D=o(R);return D&&"start"===D.ignore&&(x.lastIndex=y,N=x.exec(e),R+=N[0],y+=N[0].length),R=R.replace(u.lineBreak,"\n"),[R,"TK_BLOCK_COMMENT",D]}if("/"===e.charAt(y)){y+=1,T.lastIndex=y;var N=T.exec(e);return R="//"+N[0],y+=N[0].length,[R,"TK_COMMENT"]}}if("`"===S||"'"===S||'"'===S||("/"===S||t.e4x&&"<"===S&&e.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===$.type&&n($.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===$.type&&")"===$.text&&$.parent&&"TK_RESERVED"===$.parent.type&&n($.parent.text,["if","while","for"])||n($.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var I=S,L=!1,F=!1;if(i=S,"/"===I)for(var M=!1;y<E&&(L||M||e.charAt(y)!==I)&&!u.newline.test(e.charAt(y));)i+=e.charAt(y),L?L=!1:(L="\\"===e.charAt(y),"["===e.charAt(y)?M=!0:"]"===e.charAt(y)&&(M=!1)),y+=1;else if(t.e4x&&"<"===I){var P=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,B=e.slice(y-1),U=P.exec(B);if(U&&0===U.index){for(var j=U[2],H=0;U;){var K=!!U[1],W=U[2],z=!!U[U.length-1]||"![CDATA["===W.slice(0,8);if(W!==j||z||(K?--H:++H),H<=0)break;U=P.exec(B)}var q=U?U.index+U[0].length:B.length;return B=B.slice(0,q),y+=q-1,B=B.replace(u.lineBreak,"\n"),[B,"TK_STRING"]}}else for(;y<E&&(L||e.charAt(y)!==I&&("`"===I||!u.newline.test(e.charAt(y))));)(L||"`"===I)&&u.newline.test(e.charAt(y))?("\r"===e.charAt(y)&&"\n"===e.charAt(y+1)&&(y+=1),i+="\n"):i+=e.charAt(y),L?("x"!==e.charAt(y)&&"u"!==e.charAt(y)||(F=!0),L=!1):L="\\"===e.charAt(y),y+=1;if(F&&t.unescape_strings&&(i=s(i)),y<E&&e.charAt(y)===I&&(i+=I,y+=1,"/"===I))for(;y<E&&u.isIdentifierStart(e.charCodeAt(y));)i+=e.charAt(y),y+=1;return[i,"TK_STRING"]}if("#"===S){if(0===b.length&&"!"===e.charAt(y)){for(i=S;y<E&&"\n"!==S;)S=e.charAt(y),i+=S,y+=1;return[r(i)+"\n","TK_UNKNOWN"]}var Y="#";if(y<E&&c.test(e.charAt(y))){do S=e.charAt(y),Y+=S,y+=1;while(y<E&&"#"!==S&&"="!==S);return"#"===S||("["===e.charAt(y)&&"]"===e.charAt(y+1)?(Y+="[]",y+=2):"{"===e.charAt(y)&&"}"===e.charAt(y+1)&&(Y+="{}",y+=2)),[Y,"TK_WORD"]}}if("<"===S&&("?"===e.charAt(y)||"%"===e.charAt(y))){A.lastIndex=y-1;var V=A.exec(e);if(V)return S=V[0],y+=S.length-1,S=S.replace(u.lineBreak,"\n"),[S,"TK_STRING"]}if("<"===S&&"<!--"===e.substring(y-1,y+3)){for(y+=3,S="<!--";!u.newline.test(e.charAt(y))&&y<E;)S+=e.charAt(y),y++;return v=!0,[S,"TK_COMMENT"]}if("-"===S&&v&&"-->"===e.substring(y-1,y+2))return v=!1,y+=2,["-->","TK_COMMENT"];if("."===S)return[S,"TK_DOT"];if(n(S,h)){for(;y<E&&n(S+e.charAt(y),h)&&(S+=e.charAt(y),y+=1,!(y>=E)););return","===S?[S,"TK_COMMA"]:"="===S?[S,"TK_EQUALS"]:[S,"TK_OPERATOR"]}return[S,"TK_UNKNOWN"]}function s(e){for(var t,n=!1,r="",i=0,o="",a=0;n||i<e.length;)if(t=e.charAt(i),i++,n){if(n=!1,"x"===t)o=e.substr(i,2),i+=2;else{if("u"!==t){r+="\\"+t;continue}o=e.substr(i,4),i+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if(a=parseInt(o,16),a>=0&&a<32){r+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===a||39===a||92===a)r+="\\"+String.fromCharCode(a);else{if("x"===t&&a>126&&a<=255)return e;r+=String.fromCharCode(a)}}else"\\"===t?n=!0:r+=t;return r}var l="\n\r\t ".split(""),c=/[0-9]/,d=/[01234567]/,p=/[0123456789abcdefABCDEF]/,h="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var m,g,v,b,y,E,w=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),C=/([\s\S]*?)((?:\*\/)|$)/g,T=/([^\n\r\u2028\u2029]*)/g,$=/\/\* beautify( \w+[:]\w+)+ \*\//g,S=/ (\w+)[:](\w+)/g,x=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,A=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){E=e.length,y=0,v=!1,b=[];for(var t,n,r,i=null,o=[],s=[];!n||"TK_EOF"!==n.type;){for(r=a(),t=new f(r[1],r[0],m,g);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=r[2]),s.push(t),r=a(),t=new f(r[1],r[0],m,g);s.length&&(t.comments_before=s,s=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,o.push(i),i=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&i&&("]"===t.text&&"["===i.text||")"===t.text&&"("===i.text||"}"===t.text&&"{"===i.text)&&(t.parent=i.parent,i=o.pop()),b.push(t),n=t}return b}}var u={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",r=new RegExp("["+t+"]"),i=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||e>=170&&r.test(String.fromCharCode(e)))},e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&i.test(String.fromCharCode(e))))}}(u);var d={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},f=function(e,t,n,r,i,o){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=r||"",this.parent=null,this.directives=null};return{run:e}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{codeMirror:!0,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),e.FE.PLUGINS.codeView=function(t){function n(){return t.$box.hasClass("fr-code-view")}function r(){return d?d.getValue():u.val()}function i(e){var n=r();t.html.set(n),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function o(n){u||(l(),!d&&t.opts.codeMirror&&"undefined"!=typeof CodeMirror?d=CodeMirror.fromTextArea(u.get(0),t.opts.codeMirrorOptions):t.events.$on(u,"keydown keyup change input",function(){if(t.opts.height)this.removeAttribute("rows");else if(this.rows||(this.rows=1),0===this.value.length)this.rows=1;else{for(this.style.height="auto";this.rows>1&&this.scrollHeight<=this.offsetHeight;)this.rows-=1;for(;this.scrollHeight>this.offsetHeight&&(!t.opts.heightMax||this.offsetHeight<t.opts.heightMax);)this.rows+=1}})),t.undo.saveStep(),t.html.cleanEmptyTags(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.core.isEmpty()||(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var r=t.html.get(!1,!0);t.$el.find("span.fr-tmp").remove(),t.$box.toggleClass("fr-code-view",!0),t.core.hasFocus()&&t.$el.blur(),r=r.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM"),r=r.replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(r=t.codeBeautifier.run(r,t.opts.codeBeautifierOptions));var i,o;if(d){i=r.indexOf("FROALA-SM"),o=r.indexOf("FROALA-EM"),i>o?i=o:o-=9,r=r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"");var a=r.substring(0,i).length-r.substring(0,i).replace(/\n/g,"").length,s=r.substring(0,o).length-r.substring(0,o).replace(/\n/g,"").length;i=r.substring(0,i).length-r.substring(0,r.substring(0,i).lastIndexOf("\n")+1).length,
o=r.substring(0,o).length-r.substring(0,r.substring(0,o).lastIndexOf("\n")+1).length,d.setSize(null,t.opts.height?t.opts.height:"auto"),t.opts.heightMin&&t.$box.find(".CodeMirror-scroll").css("min-height",t.opts.heightMin),d.setValue(r),d.focus(),d.setSelection({line:a,ch:i},{line:s,ch:o}),d.refresh(),d.clearHistory()}else{i=r.indexOf("FROALA-SM"),o=r.indexOf("FROALA-EM")-9,t.opts.heightMin&&u.css("min-height",t.opts.heightMin),t.opts.height&&u.css("height",t.opts.height),t.opts.heightMax&&u.css("max-height",t.opts.height||t.opts.heightMax),u.val(r.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var c=e(t.o_doc).scrollTop();u.focus(),u.get(0).setSelectionRange(i,o),e(t.o_doc).scrollTop(c)}t.$tb.find(" > .fr-command").not(n).filter(function(){return t.opts.codeViewKeepActiveButtons.indexOf(e(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),n.addClass("fr-active").attr("aria-pressed",!0),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function a(e){"undefined"==typeof e&&(e=!n());var r=t.$tb.find('.fr-command[data-cmd="html"]');e?(t.popups.hideAll(),o(r)):(t.$box.toggleClass("fr-code-view",!1),i(r))}function s(){n()&&a(t.$tb.find('button[data-cmd="html"]')),d&&d.toTextArea(),u.val("").removeData().remove(),u=null,f&&(f.remove(),f=null)}function l(){u=e('<textarea class="fr-code" tabIndex="-1">'),t.$wp.append(u),u.attr("dir",t.opts.direction),t.$box.hasClass("fr-basic")||(f=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(f),t.events.bindClick(t.$box,"a.html-switch",function(){a(!1)}));var i=function(){return!n()};t.events.on("buttons.refresh",i),t.events.on("copy",i,!0),t.events.on("cut",i,!0),t.events.on("paste",i,!0),t.events.on("destroy",s,!0),t.events.on("html.set",function(){n()&&a(!0)}),t.events.on("form.submit",function(){n()&&(t.html.set(r()),t.events.trigger("contentChanged",[],!0))},!0)}function c(){if(!t.$wp)return!1}var u,d,f;return{_init:c,toggle:a,isActive:n,get:r}},e.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),e.FE.DefineIcon("html",{NAME:"code"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),n=t.popups.get("colors.picker");if(n||(n=i()),!n.hasClass("fr-active"))if(t.popups.setContainer("colors.picker",t.$tb),l(n.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",r,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("colors.picker")}function r(){t.popups.hide("colors.picker")}function i(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons)),e+=o()+"</div>";var n={buttons:e,text_colors:a("text"),background_colors:a("background")},r=t.popups.create("colors.picker",n);return s(r),r}function o(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=t.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==t.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>",e+"</div>"}function a(e){for(var n="text"==e?t.opts.colorsText:t.opts.colorsBackground,r='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',i=0;i<n.length;i++)0!==i&&i%t.opts.colorsStep===0&&(r+="<br>"),r+="REMOVE"!=n[i]?'<span class="fr-command fr-select-color" style="background: '+n[i]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+n[i]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+n[i]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'">'+t.icon.create("remove")+'<span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return r+"</div>"}function s(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("colors.picker")||!i.is("span"))return!0;var o=r.which,a=!0;if(e.FE.KEYCODE.TAB==o){var s=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){if(i.is("span.fr-select-color")){var l=i.parent().find("span.fr-select-color"),c=l.index(i),u=t.opts.colorsStep,d=Math.floor(l.length/u),f=c%u,p=Math.floor(c/u),h=p*u+f,m=d*u;e.FE.KEYCODE.ARROW_UP==o?h=((h-u)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==o?h=(h+u)%m:e.FE.KEYCODE.ARROW_LEFT==o?h=((h-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==o&&(h=(h+1)%m);var g=e(l.get(h));t.events.disableBlur(),g.focus(),a=!1}}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(i),a=!1);return a===!1&&(r.preventDefault(),r.stopPropagation()),a},!0)}function l(n){var r,i=t.popups.get("colors.picker"),o=e(t.selection.element());r="background"==n?"background-color":"color";var a=i.find(".fr-"+n+"-color .fr-select-color");for(a.find(".fr-selected-color").remove(),a.removeClass("fr-active-item"),a.not('[data-param1="REMOVE"]').attr("aria-selected",!1);o.get(0)!=t.el;){if("transparent"!=o.css(r)&&"rgba(0, 0, 0, 0)"!=o.css(r)){var s=i.find(".fr-"+n+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(o.css(r))+'"]');s.append('<span class="fr-selected-color" aria-hidden="true"></span>'),s.addClass("fr-active-item").attr("aria-selected",!0);break}o=o.parent()}}function c(e,n){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+n+"-color").addClass("fr-selected-set"),l(n)),t.accessibility.focusPopup(e.parents(".fr-popup"))}function u(e){"REMOVE"!=e?t.format.applyStyle("background-color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("background-color"),r()}function d(e){"REMOVE"!=e?t.format.applyStyle("color",t.helpers.HEXtoRGB(e)):t.format.removeStyle("color"),r()}function f(){t.popups.hide("colors.picker"),t.toolbar.showInline()}return{showColorsPopup:n,hideColorsPopup:r,changeSet:c,background:u,text:d,back:f}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),e.FE.DefineIcon("remove",{NAME:"eraser"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function n(n){return!(!n.originalEvent||!n.originalEvent.target||n.originalEvent.target.nodeType!=Node.TEXT_NODE)||(n.target&&"A"==n.target.tagName&&1==n.target.childNodes.length&&"IMG"==n.target.childNodes[0].tagName&&(n.target=n.target.childNodes[0]),e(n.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),e(n.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void n.originalEvent.dataTransfer.setData("text","Froala")):(n.preventDefault(),!1))}function r(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function i(e,n,r){t.opts.iframe&&(e+=t.$iframe.offset().top,n+=t.$iframe.offset().left),p.offset().top!=e&&p.css("top",e),p.offset().left!=n&&p.css("left",n),p.width()!=r&&p.css("width",r)}function o(n){var o=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset);if(!r(o)){for(var a=0,s=o;!r(s)&&s==o&&n.originalEvent.pageY-t.win.pageYOffset-a>0;)a++,s=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset-a);(!r(s)||p&&0===t.$el.find(s).length&&s!=p.get(0))&&(s=null);for(var l=0,c=o;!r(c)&&c==o&&n.originalEvent.pageY-t.win.pageYOffset+l<e(t.doc).height();)l++,c=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset+l);(!r(c)||p&&0===t.$el.find(c).length&&c!=p.get(0))&&(c=null),o=null==c&&s?s:c&&null==s?c:c&&s?a<l?s:c:null}if(e(o).hasClass("fr-drag-helper"))return!1;if(o&&!t.node.isBlock(o)&&(o=t.node.blockParent(o)),o&&["TD","TH","TR","THEAD","TBODY"].indexOf(o.tagName)>=0&&(o=e(o).parents("table").get(0)),o&&["LI"].indexOf(o.tagName)>=0&&(o=e(o).parents("UL, OL").get(0)),o&&!e(o).hasClass("fr-drag-helper")){p||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),p=e.FE.$draggable_helper,t.events.on("shared.destroy",function(){p.html("").removeData().remove(),p=null},!0));var u,d=n.originalEvent.pageY;u=d<e(o).offset().top+e(o).outerHeight()/2;var f=e(o),h=0;u||0!==f.next().length?(u||(f=f.next()),"before"==p.data("fr-position")&&f.is(p.data("fr-tag"))||(f.prev().length>0&&(h=parseFloat(f.prev().css("margin-bottom"))||0),h=Math.max(h,parseFloat(f.css("margin-top"))||0),i(f.offset().top-h/2-t.$box.offset().top,f.offset().left-t.win.pageXOffset-t.$box.offset().left,f.width()),p.data("fr-position","before"))):"after"==p.data("fr-position")&&f.is(p.data("fr-tag"))||(h=parseFloat(f.css("margin-bottom"))||0,i(f.offset().top+e(o).height()+h/2-t.$box.offset().top,f.offset().left-t.win.pageXOffset-t.$box.offset().left,f.width()),p.data("fr-position","after")),p.data("fr-tag",f),p.addClass("fr-visible"),p.appendTo(t.$box)}else p&&t.$box.find(p).length>0&&p.removeClass("fr-visible")}function a(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?c()||!t.browser.msie&&!t.browser.edge||e.preventDefault():(e.preventDefault(),o(e))}function s(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function l(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");p&&p.hasClass("fr-visible")&&t.$box.find(p).length?u(e):n.length&&(e.preventDefault(),e.stopPropagation()),p&&t.$box.find(p).length&&p.removeClass("fr-visible"),n.removeClass("fr-dragging")}function c(){for(var t=null,n=0;n<e.FE.INSTANCES.length;n++)if(t=e.FE.INSTANCES[n].$el.find(".fr-dragging"),t.length)return t.get(0)}function u(n){for(var r,i,o=0;o<e.FE.INSTANCES.length;o++)if(r=e.FE.INSTANCES[o].$el.find(".fr-dragging"),r.length){i=e.FE.INSTANCES[o];break}if(r.length){if(n.preventDefault(),n.stopPropagation(),p&&p.hasClass("fr-visible")&&t.$box.find(p).length)p.data("fr-tag")[p.data("fr-position")]('<span class="fr-marker"></span>'),p.removeClass("fr-visible");else{var a=t.markers.insertAtPoint(n.originalEvent);if(a===!1)return!1}r.removeClass("fr-dragging");var s=r;if(r.parent().is("A")&&(s=r.parent()),t.core.isEmpty())t.events.focus();else{var l=t.$el.find(".fr-marker");l.replaceWith(e.FE.MARKERS),t.selection.restore()}if(i==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(s);else{var c=t.markers.insert();e(c).replaceWith(s),r.after(e.FE.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),i!=t&&(i.popups.hideAll(),i.$el.find(i.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),i.html.wrap(),i.html.fillEmptyBlocks(),i.undo.saveStep(),i.events.trigger("element.dropped"),i.opts.iframe&&i.size.syncIframe()),t.events.trigger("element.dropped",[s]),!1}}function d(e){if(e&&"DIV"==e.tagName&&t.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("div.fr-drag-helper"),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r])}function f(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",n,!0),t.events.on("dragover",a,!0),t.events.on("dragenter",s,!0),t.events.on("document.dragend",l,!0),t.events.on("document.drop",l,!0),t.events.on("drop",u,!0),t.events.on("html.processGet",d)}var p;return{_init:f}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),e.extend(e.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),e.FE.PLUGINS.emoticons=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="emoticons"]'),n=t.popups.get("emoticons");if(n||(n=i()),!n.hasClass("fr-active")){t.popups.refresh("emoticons"),t.popups.setContainer("emoticons",t.$tb);var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("emoticons",r,o,e.outerHeight())}}function r(){t.popups.hide("emoticons")}function i(){var e="";t.opts.toolbarInline&&t.opts.emoticonsButtons.length>0&&(e='<div class="fr-buttons fr-emoticons-buttons">'+t.button.buildList(t.opts.emoticonsButtons)+"</div>");var n={buttons:e,emoticons:o()},r=t.popups.create("emoticons",n);return t.tooltip.bind(r,".fr-emoticon"),a(r),r}function o(){for(var e='<div style="text-align: center">',n=0;n<t.opts.emoticonsSet.length;n++)0!==n&&n%t.opts.emoticonsStep===0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+t.language.translate(t.opts.emoticonsSet[n].desc)+'" role="button" data-param1="'+t.opts.emoticonsSet[n].code+'">'+(t.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+t.opts.emoticonsSet[n].code+'.svg"/>':"&#x"+t.opts.emoticonsSet[n].code+";")+'<span class="fr-sr-only">'+t.language.translate(t.opts.emoticonsSet[n].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return t.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+="</div>"}function a(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("emoticons")||!i.is("span, a"))return!0;var o,a,s,l=r.which;if(e.FE.KEYCODE.TAB==l){if(i.is("span.fr-emoticon")&&r.shiftKey||i.is("a")&&!r.shiftKey){var c=n.find(".fr-buttons");o=!t.accessibility.focusToolbar(c,!!r.shiftKey)}if(o!==!1){var u=n.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");i.is("span.fr-emoticon")&&(u=u.not("span.fr-emoticon:not(:focus)")),a=u.index(i),a=r.shiftKey?((a-1)%u.length+u.length)%u.length:(a+1)%u.length,s=u.get(a),t.events.disableBlur(),s.focus(),o=!1}}else if(e.FE.KEYCODE.ARROW_UP==l||e.FE.KEYCODE.ARROW_DOWN==l||e.FE.KEYCODE.ARROW_LEFT==l||e.FE.KEYCODE.ARROW_RIGHT==l){if(i.is("span.fr-emoticon")){var d=i.parent().find("span.fr-emoticon");a=d.index(i);var f=t.opts.emoticonsStep,p=Math.floor(d.length/f),h=a%f,m=Math.floor(a/f),g=m*f+h,v=p*f;e.FE.KEYCODE.ARROW_UP==l?g=((g-f)%v+v)%v:e.FE.KEYCODE.ARROW_DOWN==l?g=(g+f)%v:e.FE.KEYCODE.ARROW_LEFT==l?g=((g-1)%v+v)%v:e.FE.KEYCODE.ARROW_RIGHT==l&&(g=(g+1)%v),s=e(d.get(g)),t.events.disableBlur(),s.focus(),o=!1}}else e.FE.KEYCODE.ENTER==l&&(i.is("a")?i[0].click():t.button.exec(i),o=!1);return o===!1&&(r.preventDefault(),r.stopPropagation()),o},!0)}function s(n,r){t.html.insert('<span class="fr-emoticon fr-deletable'+(r?" fr-emoticon-img":"")+'"'+(r?' style="background: url('+r+');"':"")+">"+(r?"&nbsp;":n)+"</span>&nbsp;"+e.FE.MARKERS,!0)}function l(){t.popups.hide("emoticons"),t.toolbar.showInline()}function c(){var n=function(){for(var e=t.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),n=0;n<e.length;n++)e[n].className+=" fr-deletable"};n(),t.events.on("html.set",n);var r=function(){if(!t.selection.isCollapsed())return!1;var e=t.selection.element(),n=t.selection.endElement();if(e&&t.node.hasClass(e,"fr-emoticon"))return e;if(n&&t.node.hasClass(n,"fr-emoticon"))return n;var r=t.selection.ranges(0),i=r.startContainer;if(i.nodeType==Node.ELEMENT_NODE&&i.childNodes.length>0&&r.startOffset>0){var o=i.childNodes[r.startOffset-1];if(t.node.hasClass(o,"fr-emoticon"))return o}return!1};t.events.on("keydown",function(n){if(t.keys.isCharacter(n.which)&&t.selection.inEditor()){var i=t.selection.ranges(0),o=r();o&&(0===i.startOffset&&t.selection.element()===o?e(o).before(e.FE.MARKERS+e.FE.INVISIBLE_SPACE):e(o).after(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore())}}),t.events.on("keyup",function(n){for(var i=t.el.querySelectorAll(".fr-emoticon"),o=0;o<i.length;o++)"undefined"!=typeof i[o].textContent&&0===i[o].textContent.replace(/\u200B/gi,"").length&&e(i[o]).remove();if(!(n.which>=e.FE.KEYCODE.ARROW_LEFT&&n.which<=e.FE.KEYCODE.ARROW_DOWN)){var a=r();t.node.hasClass(a,"fr-emoticon-img")&&(e(a).append(e.FE.MARKERS),t.selection.restore())}})}return{_init:c,insert:s,showEmoticonsPopup:n,hideEmoticonsPopup:r,back:l}},e.FE.DefineIcon("emoticons",{NAME:"smile-o"}),e.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),e.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),e.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),e.FE.PLUGINS.entities=function(t){function n(e){var t=e.textContent;if(t.match(a)){for(var n="",r=0;r<t.length;r++)n+=s[t[r]]?s[t[r]]:t[r];e.textContent=n}}function r(e){if(e&&["STYLE","SCRIPT","svg"].indexOf(e.tagName)>=0)return!0;for(var i=t.node.contents(e),o=0;o<i.length;o++)i[o].nodeType==Node.TEXT_NODE?n(i[o]):r(i[o]);e.nodeType==Node.TEXT_NODE&&n(e)}function i(e){if(0===e.length)return"";var n=t.clean.exec(e,r).replace(/\&amp;/g,"&");return n}function o(){t.opts.htmlSimpleAmpersand||(t.opts.entities=t.opts.entities+"&amp;");var n=e("<div>").html(t.opts.entities).text(),r=t.opts.entities.split(";");s={},a="";for(var o=0;o<n.length;o++){var l=n.charAt(o);s[l]=r[o]+";",a+="\\"+l+(o<n.length-1?"|":"")}a=new RegExp("("+a+")","g"),t.events.on("html.get",i,!0)}var a,s;return{_init:o}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),e.extend(e.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),e.FE.PLUGINS.file=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertFile"]'),n=t.popups.get("file.insert");if(n||(n=b()),i(),!n.hasClass("fr-active")){t.popups.refresh("file.insert"),t.popups.setContainer("file.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?0:e.outerHeight());t.popups.show("file.insert",r,o,e.outerHeight())}}function r(){var e=t.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),o("Uploading",0)}function i(e){var n=t.popups.get("file.insert");n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-file-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e&&(t.events.focus(),t.popups.hide("file.insert")))}function o(e,n){var r=t.popups.get("file.insert");if(r){var i=r.find(".fr-file-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function a(e){r();var n=t.popups.get("file.insert"),i=n.find(".fr-file-progress-bar-layer");i.addClass("fr-error");var o=i.find("h3");o.text(e),t.events.disableBlur(),o.focus()}function s(e,n,r){t.edit.on(),t.events.focus(!0),t.selection.restore(),t.opts.fileUseSelectedText&&t.selection.text().length&&(n=t.selection.text()),t.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+n+"</a>");var i=t.$el.find("#fr-inserted-file");i.removeAttr("id"),t.popups.hide("file.insert"),t.undo.saveStep(),T(),t.events.trigger("file.inserted",[i,r])}function l(n){try{if(t.events.trigger("file.uploaded",[n],!0)===!1)return t.edit.on(),!1;var r=e.parseJSON(n);return r.link?r:(p(x,n),!1)}catch(i){return p(_,n),!1}}function c(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return t.events.trigger("file.uploadedToS3",[r,i,n],!0)===!1?(t.edit.on(),!1):r}catch(o){return p(_,n),!1}}function u(e){var n=this.status,r=this.response,i=this.responseXML,o=this.responseText;try{if(t.opts.fileUploadToS3)if(201==n){var a=c(i);a&&s(a,e,r||i)}else p(_,r||i);else if(n>=200&&n<300){var u=l(o);u&&s(u.link,e,r||o)}else p(A,r||o)}catch(d){p(_,r||o)}}function d(){p(_,this.response||this.responseText||this.responseXML)}function f(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;o("Uploading",t)}}function p(e,n){t.edit.on(),a(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("file.error",[{code:e,message:N[e]},n])}function h(){t.edit.on(),i(!0)}function m(e){if("undefined"!=typeof e&&e.length>0){if(t.events.trigger("file.beforeUpload",[e])===!1)return!1;var n=e[0];if(n.size>t.opts.fileMaxSize)return p(k),!1;if(t.opts.fileAllowedTypes.indexOf("*")<0&&t.opts.fileAllowedTypes.indexOf(n.type.replace(/file\//g,""))<0)return p(O),!1;var i;if(t.drag_support.formdata&&(i=t.drag_support.formdata?new FormData:null),i){var o;if(t.opts.fileUploadToS3!==!1){i.append("key",t.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",n.type);for(o in t.opts.fileUploadToS3.params)t.opts.fileUploadToS3.params.hasOwnProperty(o)&&i.append(o,t.opts.fileUploadToS3.params[o])}for(o in t.opts.fileUploadParams)t.opts.fileUploadParams.hasOwnProperty(o)&&i.append(o,t.opts.fileUploadParams[o]);i.append(t.opts.fileUploadParam,n);var a=t.opts.fileUploadURL;t.opts.fileUploadToS3&&(a=t.opts.fileUploadToS3.uploadURL?t.opts.fileUploadToS3.uploadURL:"https://"+t.opts.fileUploadToS3.region+".amazonaws.com/"+t.opts.fileUploadToS3.bucket);var s=t.core.getXHR(a,t.opts.fileUploadMethod);s.onload=function(){u.call(s,n.name)},s.onerror=d,s.upload.onprogress=f,s.onabort=h,r(),t.edit.off();var l=t.popups.get("file.insert");l&&l.off("abortUpload").on("abortUpload",function(){4!=s.readyState&&s.abort()}),s.send(i)}}}function g(n){t.events.$on(n,"dragover dragenter",".fr-file-upload-layer",function(){return e(this).addClass("fr-drop"),!1},!0),t.events.$on(n,"dragleave dragend",".fr-file-upload-layer",function(){return e(this).removeClass("fr-drop"),!1},!0),t.events.$on(n,"drop",".fr-file-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var o=n.data("instance")||t;o.file.upload(i.files)}},!0),t.events.$on(n,"change",'.fr-file-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.file.upload(this.files)}e(this).val("")},!0)}function v(){i()}function b(e){if(e)return t.popups.onHide("file.insert",v),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.fileInsertButtons)+"</div>";var r="";r='<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop file")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+t.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+t.id+'" role="button"></div></div>';var i='<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>',o={
buttons:n,upload_layer:r,progress_bar:i},a=t.popups.create("file.insert",o);return g(a),a}function y(e){if(t.node.hasClass(e,"fr-file"))return t.events.trigger("file.unlink",[e])}function E(n){var i=n.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var o=i.files[0];if(o&&"undefined"!=typeof o.type&&o.type.indexOf("image")<0&&(t.opts.fileAllowedTypes.indexOf(o.type)>=0||t.opts.fileAllowedTypes.indexOf("*")>=0)){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var a=t.popups.get("file.insert");return a||(a=b()),t.popups.setContainer("file.insert",t.$sc),t.popups.show("file.insert",n.originalEvent.pageX,n.originalEvent.pageY),r(),m(i.files),n.preventDefault(),n.stopPropagation(),!1}}}function w(){t.events.on("drop",E),t.events.$on(t.$win,"keydown",function(n){var r=n.which,i=t.popups.get("file.insert");i&&r==e.FE.KEYCODE.ESC&&i.trigger("abortUpload")}),t.events.on("destroy",function(){var e=t.popups.get("file.insert");e&&e.trigger("abortUpload")})}function C(){t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("file.insert"),t.toolbar.showInline()}function T(){var e,n=Array.prototype.slice.call(t.el.querySelectorAll("a.fr-file")),r=[];for(e=0;e<n.length;e++)r.push(n[e].getAttribute("href"));if(D)for(e=0;e<D.length;e++)r.indexOf(D[e].getAttribute("href"))<0&&t.events.trigger("file.unlink",[D[e]]);D=n}function $(){w(),t.events.on("link.beforeRemove",y),t.$wp&&(T(),t.events.on("contentChanged",T)),b(!0)}var S=1,x=2,A=3,_=4,k=5,O=6,R=7,N={};N[S]="File cannot be loaded from the passed link.",N[x]="No link in upload response.",N[A]="Error during file upload.",N[_]="Parsing response failed.",N[k]="File is too large.",N[O]="File file type is invalid.",N[R]="Files can be uploaded only to same domain in IE 8 and IE 9.";var D;return{_init:$,showInsertPopup:n,upload:m,insert:s,back:C,hideProgressBar:i}},e.FE.DefineIcon("insertFile",{NAME:"file-o"}),e.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),e.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function n(e){t.format.applyStyle("font-family",e)}function r(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+a()+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),r=t.find(".fr-active").parent();r.length?n.parent().scrollTop(r.offset().top-n.offset().top-(n.parent().outerHeight()/2-r.outerHeight()/2)):n.parent().scrollTop(0)}function i(t){var n=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(n,function(e){return e.length>0})}function o(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n]==t[r])return[n,r];return null}function a(){var n=e(t.selection.element()).css("font-family"),r=i(n),a=[];for(var s in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(s)){var l=i(s),c=o(r,l);c&&a.push([s,c])}return 0===a.length?null:(a.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),a[0][0])}function s(n){if(t.opts.fontFamilySelection){var r=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");n.find("> span").text(t.opts.fontFamily[a()]||r[0]||t.opts.fontFamilyDefaultSelection)}}return{apply:n,refreshOnShow:r,refresh:s}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+="</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){function n(e){t.format.applyStyle("font-size",e)}function r(n,r){var i=e(t.selection.element()).css("font-size");r.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),r.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0);var o=r.find(".fr-dropdown-list"),a=r.find(".fr-active").parent();a.length?o.parent().scrollTop(a.offset().top-o.offset().top-(o.parent().outerHeight()/2-a.outerHeight()/2)):o.parent().scrollTop(0)}function i(n){if(t.opts.fontSizeSelection){var r=t.helpers.getPX(e(t.selection.element()).css("font-size"));n.find("> span").text(r)}}return{apply:n,refreshOnShow:r,refresh:i}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,n=0;n<t.length;n++){var r=t[n];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+r+'px" title="'+r+'">'+r+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.FE.PLUGINS.fullscreen=function(t){function n(){return t.$box.hasClass("fr-fullscreen")}function r(){l=t.helpers.scrollTop(),t.$box.toggleClass("fr-fullscreen"),e("body").toggleClass("fr-fullscreen"),c=e('<div style="display: none;"></div>'),t.$box.after(c),t.helpers.isMobile()&&(t.$tb.data("parent",t.$tb.parent()),t.$tb.prependTo(t.$box),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy"))),u=t.opts.height,d=t.opts.heightMax,f=t.opts.zIndex,t.opts.height=t.o_win.innerHeight-(t.opts.toolbarInline?0:t.$tb.outerHeight()),t.opts.zIndex=9990,t.opts.heightMax=null,t.size.refresh(),t.opts.toolbarInline&&t.toolbar.showInline();for(var n=t.$box.parent();!n.is("body");)n.data("z-index",n.css("z-index")).css("z-index","9990"),n=n.parent();t.events.trigger("charCounter.update"),t.$win.trigger("scroll")}function i(){t.$box.toggleClass("fr-fullscreen"),e("body").toggleClass("fr-fullscreen"),t.$tb.prependTo(t.$tb.data("parent")),t.$tb.data("sticky-dummy")&&t.$tb.after(t.$tb.data("sticky-dummy")),t.opts.height=u,t.opts.heightMax=d,t.opts.zIndex=f,t.size.refresh(),e(t.o_win).scrollTop(l),t.opts.toolbarInline&&t.toolbar.showInline(),t.events.trigger("charCounter.update"),t.opts.toolbarSticky&&t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset).data("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset).data("top",t.opts.toolbarStickyOffset));for(var n=t.$box.parent();!n.is("body");)n.data("z-index")&&(n.css("z-index",""),n.css("z-index")!=n.data("z-index")&&n.css("z-index",n.data("z-index")),n.removeData("z-index")),n=n.parent();t.$win.trigger("scroll")}function o(){n()?i():r(),a(t.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function a(e){var r=n();e.toggleClass("fr-active",r).attr("aria-pressed",r),e.find("> *:not(.fr-sr-only)").replaceWith(r?t.icon.create("fullscreenCompress"):t.icon.create("fullscreen"))}function s(){return!!t.$wp&&(t.events.$on(e(t.o_win),"resize",function(){n()&&(i(),r())}),void t.events.on("toolbar.hide",function(){if(n()&&t.helpers.isMobile())return!1}))}var l,c,u,d,f;return{_init:s,toggle:o,refresh:a,isActive:n}},e.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.FE.DefineIcon("fullscreen",{NAME:"expand"}),e.FE.DefineIcon("fullscreenCompress",{NAME:"compress"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"ft-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(t){function n(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val(""),Te&&n.val(Te.attr("src")),n.trigger("change")}function r(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),n=t.popups.get("image.insert");if(n||(n=P()),b(),!n.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("image.insert")}function i(){var e=t.popups.get("image.edit");if(e||(e=g()),e){t.popups.setContainer("image.edit",t.$sc),t.popups.refresh("image.edit");var n=Te.offset().left+Te.outerWidth()/2,r=Te.offset().top+Te.outerHeight();t.popups.show("image.edit",n,r,Te.outerHeight())}}function o(){b()}function a(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+fe(e)[0]),e.addClass("fr-di"+pe(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function s(e){var t=e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,n=e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":fe(e);ue(e,t,n),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function l(){for(var n="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),r=0;r<n.length;r++){var i=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?((t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&a(i),t.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):t.opts.htmlUntouched||t.opts.useClasses||(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&s(i),t.opts.iframe&&i.on("load",t.size.syncIframe)}}function c(){var n,r=Array.prototype.slice.call(t.el.querySelectorAll("img")),i=[];for(n=0;n<r.length;n++)i.push(r[n].getAttribute("src")),e(r[n]).toggleClass("fr-draggable",t.opts.imageMove),""===r[n].getAttribute("class")&&r[n].removeAttribute("class"),""===r[n].getAttribute("style")&&r[n].removeAttribute("style");if(Fe)for(n=0;n<Fe.length;n++)i.indexOf(Fe[n].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Fe[n])]);Fe=r}function u(){$e||Q();var e=t.$wp||t.$sc;e.append($e),$e.data("instance",t);var n=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),r=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);r-=t.helpers.getPX(e.css("border-left-width")),n-=t.helpers.getPX(e.css("border-top-width")),t.$el.is("img")&&(n=0,r=0),$e.css("top",(t.opts.iframe?Te.offset().top:Te.offset().top+n)-1).css("left",(t.opts.iframe?Te.offset().left:Te.offset().left+r)-1).css("width",Te.get(0).getBoundingClientRect().width).css("height",Te.get(0).getBoundingClientRect().height).addClass("fr-active")}function d(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function f(n){if(!t.core.sameInstance($e))return!0;if(n.preventDefault(),n.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep(),Se=e(this),Se.data("start-x",n.pageX||n.originalEvent.touches[0].pageX),Se.data("start-width",Te.width()),Se.data("start-height",Te.height());var r=Te.width();if(t.opts.imageResizeWithPercent){var i=Te.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;Te.css("width",(r/e(i).outerWidth()*100).toFixed(2)+"%")}else Te.css("width",r);xe.show(),t.popups.hideAll(),le()}function p(n){if(!t.core.sameInstance($e))return!0;if(Se&&Te){if(n.preventDefault(),t.$el.find("img.fr-error").left)return!1;var r=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null);if(!r)return!1;var i=Se.data("start-x"),o=r-i,a=Se.data("start-width");if((Se.hasClass("fr-hnw")||Se.hasClass("fr-hsw"))&&(o=0-o),t.opts.imageResizeWithPercent){var s=Te.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;a=((a+o)/e(s).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(a=Math.round(a)),Te.css("width",a+"%"),Te.css("height","").removeAttr("height")}else a+o>=t.opts.imageMinWidth&&Te.css("width",a+o),Te.css("height",Se.data("start-height")*Te.width()/Se.data("start-width"));u(),t.events.trigger("image.resize",[we()])}}function h(e){if(!t.core.sameInstance($e))return!0;if(Se&&Te){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;Se=null,xe.hide(),u(),i(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[we()])}}function m(e,n){t.edit.on(),Te&&Te.addClass("fr-error"),E(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("image.error",[{code:e,message:Le[e]},n])}function g(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Te&&t.popups.isVisible("image.edit")&&(t.events.disableBlur(),C(Te))}),!0;var n="";if(t.opts.imageEditButtons.length>0){n+='<div class="fr-buttons">',n+=t.button.buildList(t.opts.imageEditButtons),n+="</div>";var r={buttons:n},i=t.popups.create("image.edit",r);return i}return!1}function v(e){var n=t.popups.get("image.insert");if(n||(n=P()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),Te){t.popups.setContainer("image.insert",t.$sc);var r=Te.offset().left+Te.width()/2,i=Te.offset().top+Te.height();t.popups.show("image.insert",r,i,Te.outerHeight())}"undefined"==typeof e&&y("Uploading",0)}function b(e){var n=t.popups.get("image.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&Te){var r=Te;ae(!0),t.selection.setAfter(r.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function y(e,n){var r=t.popups.get("image.insert");if(r){var i=r.find(".fr-image-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function E(e){v();var n=t.popups.get("image.insert"),r=n.find(".fr-image-progress-bar-layer");r.addClass("fr-error");var i=r.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function w(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val().length>0&&(v(),y("Loading image"),$(n.val(),!0,[],Te),n.val(""),n.blur())}function C(e){oe.call(e.get(0))}function T(){var n=e(this);t.popups.hide("image.insert"),n.removeClass("fr-uploading"),n.next().is("br")&&n.next().remove(),C(n),t.events.trigger("image.loaded",[n])}function $(e,n,r,i,o){t.edit.off(),y("Loading image"),n&&(e=t.helpers.sanitizeURL(e));var a=new Image;a.onload=function(){var n,a;if(i){t.undo.canDo()||i.hasClass("fr-uploading")||t.undo.saveStep();var s=i.data("fr-old-src");t.$wp?(n=i.clone().removeData("fr-old-src").removeClass("fr-uploading"),n.off("load"),s&&i.attr("src",s),i.replaceWith(n)):n=i;for(var l=n.get(0).attributes,u=0;u<l.length;u++){var d=l[u];0===d.nodeName.indexOf("data-")&&n.removeAttr(d.nodeName)}if("undefined"!=typeof r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&n.attr("data-"+a,r[a]);n.on("load",T),n.attr("src",e),t.edit.on(),c(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(s?"image.replaced":"image.inserted",[n,o])}else n=O(e,r,T),c(),t.undo.saveStep(),t.events.trigger("image.inserted",[n,o])},a.onerror=function(){m(_e)},v("Loading image"),a.src=e}function S(n){try{if(t.events.trigger("image.uploaded",[n],!0)===!1)return t.edit.on(),!1;var r=e.parseJSON(n);return r.link?r:(m(ke,n),!1)}catch(i){return m(Re,n),!1}}function x(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return t.events.trigger("image.uploadedToS3",[r,i,n],!0)===!1?(t.edit.on(),!1):r}catch(o){return m(Re,n),!1}}function A(e){y("Loading image");var n=this.status,r=this.response,i=this.responseXML,o=this.responseText;try{if(t.opts.imageUploadToS3)if(201==n){var a=x(i);a&&$(a,!1,[],e,r||i)}else m(Re,r||i);else if(n>=200&&n<300){var s=S(o);s&&$(s.link,!1,s,e,r||o)}else m(Oe,r||o)}catch(l){m(Re,r||o)}}function _(){m(Re,this.response||this.responseText||this.responseXML)}function k(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;y("Uploading",t)}}function O(n,r,i){var o,a="";if(r&&"undefined"!=typeof r)for(o in r)r.hasOwnProperty(o)&&"link"!=o&&(a+=" data-"+o+'="'+r[o]+'"');var s=t.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+n+'"'+a+(s?' style="width: '+s+';"':"")+">");ue(l,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),l.on("load",i),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert();var c=t.$el.find(".fr-marker");return c.replaceWith(l),t.html.wrap(),t.selection.clear(),l}function R(){t.edit.on(),b(!0)}function N(n,r,i){function o(){var i=e(this);i.off("load"),i.addClass("fr-uploading"),i.next().is("br")&&i.next().remove(),t.placeholder.refresh(),i.is(Te)||C(i),u(),v(),t.edit.off(),n.onload=function(){A.call(n,i)},n.onerror=_,n.upload.onprogress=k,n.onabort=R,i.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(r)}var a,s=new FileReader;s.addEventListener("load",function(){var e=s.result;if(s.result.indexOf("svg+xml")<0){for(var n=atob(s.result.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));e=window.URL.createObjectURL(new Blob([new Uint8Array(r)],{type:"image/jpeg"}))}Te?(Te.on("load",o),t.edit.on(),t.undo.saveStep(),Te.data("fr-old-src",Te.attr("src")),Te.attr("src",e)):a=O(e,null,o)},!1),s.readAsDataURL(i)}function D(e){if("undefined"!=typeof e&&e.length>0){if(t.events.trigger("image.beforeUpload",[e])===!1)return!1;var n=e[0];if(n.size>t.opts.imageMaxSize)return m(Ne),!1;if(t.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g,""))<0)return m(De),!1;var r;if(t.drag_support.formdata&&(r=t.drag_support.formdata?new FormData:null),r){var i;if(t.opts.imageUploadToS3!==!1){r.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",n.type);for(i in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(i)&&r.append(i,t.opts.imageUploadToS3.params[i])}for(i in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(i)&&r.append(i,t.opts.imageUploadParams[i]);r.append(t.opts.imageUploadParam,n);var o=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(o=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket);var a=t.core.getXHR(o,t.opts.imageUploadMethod);N(a,r,n)}}}function I(n){t.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-image-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var o=n.data("instance")||t;o.events.disableBlur(),o.image.upload(i.files),o.events.enableBlur()}}),t.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.image.upload(this.files)}e(this).val("")})}function L(n){var r=n.originalEvent.dataTransfer;if(r&&r.files&&r.files.length){var i=r.files[0];if(i&&i.type&&t.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))>=0){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var o=t.popups.get("image.insert");return o||(o=P()),t.popups.setContainer("image.insert",t.$sc),t.popups.show("image.insert",n.originalEvent.pageX,n.originalEvent.pageY),v(),D(r.files),n.preventDefault(),n.stopPropagation(),!1}}}function F(){var n,r,i=t.selection.ranges(0);i.collapsed&&i.startContainer.nodeType==Node.ELEMENT_NODE&&(i.startContainer.childNodes.length==i.startOffset?(n=i.startContainer.childNodes[i.startOffset-1],n&&"IMG"==n.tagName&&"block"==e(n).css("display")&&(r=t.node.blockParent(n),r&&t.html.defaultTag()?r.nextSibling||(["TD","TH"].indexOf(r.tagName)<0?e(r).after("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"):e(n).after("<br>"+e.FE.MARKERS),t.selection.restore()):r||(e(n).after("<br>"+e.FE.MARKERS),t.selection.restore()))):0===i.startOffset&&i.startContainer.childNodes.length>i.startOffset&&(n=i.startContainer.childNodes[i.startOffset],n&&"IMG"==n.tagName&&"block"==e(n).css("display")&&(r=t.node.blockParent(n),r&&t.html.defaultTag()?r.previousSibling||(["TD","TH"].indexOf(r.tagName)<0?e(r).before("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"):e(n).before("<br>"+e.FE.MARKERS),t.selection.restore()):r||(e(n).before(e.FE.MARKERS+"<br>"),t.selection.restore()))))}function M(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable")||(t.helpers.isMobile()||t.selection.clear(),Ae=!0,t.popups.areVisible()&&t.events.disableBlur(),t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||n.preventDefault(),void n.stopPropagation())}),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(n){return"false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable")||void(Ae&&(Ae=!1,n.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur())))}),t.events.on("keyup",function(n){if(n.shiftKey&&""===t.selection.text().replace(/\n/g,"")){var r=t.selection.element(),i=t.selection.endElement();r&&"IMG"==r.tagName?C(e(r)):i&&"IMG"==i.tagName&&C(e(i))}},!0),t.events.on("drop",L),t.events.on("mousedown window.mousedown",se),t.events.on("window.touchmove",le),t.events.on("mouseup window.mouseup",function(){return Te?(ae(),!1):void le()}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&ae()}),t.browser.edge||t.events.on("mouseup",F),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Ae=!1,ae(!0)})}function P(e){if(e)return t.popups.onRefresh("image.insert",n),t.popups.onHide("image.insert",o),!0;var r,i="";t.opts.imageInsertButtons.length>1&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var a=t.opts.imageInsertButtons.indexOf("imageUpload"),s=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";a>=0&&(r=" fr-active",s>=0&&a>s&&(r=""),l='<div class="fr-image-upload-layer'+r+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var c="";s>=0&&(r=" fr-active",a>=0&&s>a&&(r=""),c='<div class="fr-image-by-url-layer'+r+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var u='<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>',d={buttons:i,upload_layer:l,by_url_layer:c,progress_bar:u},f=t.popups.create("image.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Te&&t.popups.isVisible("image.insert")&&be()}),I(f),f}function B(){if(Te){var e=t.popups.get("image.alt");e.find("input").val(Te.attr("alt")||"").trigger("change")}}function U(){var e=t.popups.get("image.alt");e||(e=j()),b(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",t.$sc);var n=Te.offset().left+Te.width()/2,r=Te.offset().top+Te.height();t.popups.show("image.alt",n,r,Te.outerHeight())}function j(e){if(e)return t.popups.onRefresh("image.alt",B),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>";var r="";r='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var i={buttons:n,alt_layer:r},o=t.popups.create("image.alt",i);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){Te&&t.popups.isVisible("image.alt")&&U()}),o}function H(e){if(Te){var n=t.popups.get("image.alt");Te.attr("alt",e||n.find("input").val()||""),n.find("input:focus").blur(),C(Te)}}function K(){if(Te){var e=t.popups.get("image.size");e.find('input[name="width"]').val(Te.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Te.get(0).style.height).trigger("change")}}function W(){var e=t.popups.get("image.size");e||(e=z()),b(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",t.$sc);var n=Te.offset().left+Te.width()/2,r=Te.offset().top+Te.height();t.popups.show("image.size",n,r,Te.outerHeight())}function z(e){if(e)return t.popups.onRefresh("image.size",K),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>";var r="";r='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var i={buttons:n,size_layer:r},o=t.popups.create("image.size",i);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){Te&&t.popups.isVisible("image.size")&&W()}),o}function q(e,n){if(Te){var r=t.popups.get("image.size");e=e||r.find('input[name="width"]').val()||"",n=n||r.find('input[name="height"]').val()||"";var i=/^[\d]+((px)|%)*$/g;e.match(i)&&Te.css("width",e),n.match(i)&&Te.css("height",n),r.find("input:focus").blur(),C(Te)}}function Y(e){var n,r,i=t.popups.get("image.insert");if(Te||t.opts.toolbarInline)Te&&(r=Te.offset().top+Te.outerHeight());else{var o=t.$tb.find('.fr-command[data-cmd="insertImage"]');n=o.offset().left+o.outerWidth()/2,r=o.offset().top+(t.opts.toolbarBottom?10:o.outerHeight()-10)}!Te&&t.opts.toolbarInline&&(r=i.offset().top-t.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",n,r,Te?Te.outerHeight():0),t.accessibility.focusPopup(i)}function V(e){var n=t.popups.get("image.insert");n.find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function G(e){var n=t.popups.get("image.insert");n.find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function X(e,t,n,r){return e.pageX=t,f.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),
p.call(this,e),h.call(this,e),++r}function Q(){var n;if(t.shared.$image_resizer?($e=t.shared.$image_resizer,xe=t.shared.$img_overlay,t.events.on("destroy",function(){$e.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),$e=t.shared.$image_resizer,t.events.$on($e,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&($e.append(d("nw")+d("ne")+d("sw")+d("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),xe=t.shared.$img_overlay,n=$e.get(0).ownerDocument,e(n).find("body").append(xe))),t.events.on("shared.destroy",function(){$e.html("").removeData().remove(),$e=null,t.opts.imageResize&&(xe.remove(),xe=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){Te&&!Te.hasClass("fr-uploading")?ae(!0):Te&&(u(),be(),v(!1))}),t.opts.imageResize){n=$e.get(0).ownerDocument,t.events.$on($e,t._mousedown,".fr-handler",f),t.events.$on(e(n),t._mousemove,p),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,h),t.events.$on(xe,"mouseleave",h);var r=1,i=null,o=0;t.events.on("keydown",function(n){if(Te){var a=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,s=n.which;(s!==i||n.timeStamp-o>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?r=X.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey?r=X.call(this,n,2,-1,r):t.keys.ctrlKey(n)||s!=e.FE.KEYCODE.ENTER||(Te.before("<br>"),C(Te)),i=s,o=n.timeStamp}},!0),t.events.on("keyup",function(){r=1})}}function Z(n){n=n||Te,n&&t.events.trigger("image.beforeRemove",[n])!==!1&&(t.popups.hideAll(),ye(),ae(!0),t.undo.canDo()||t.undo.saveStep(),n.get(0)==t.el?n.removeAttr("src"):("A"==n.get(0).parentNode.tagName?(t.selection.setBefore(n.get(0).parentNode)||t.selection.setAfter(n.get(0).parentNode)||n.parent().after(e.FE.MARKERS),e(n.get(0).parentNode).remove()):(t.selection.setBefore(n.get(0))||t.selection.setAfter(n.get(0))||n.after(e.FE.MARKERS),n.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function J(n){var r=n.which;if(Te&&(r==e.FE.KEYCODE.BACKSPACE||r==e.FE.KEYCODE.DELETE))return n.preventDefault(),n.stopPropagation(),Z(),!1;if(Te&&r==e.FE.KEYCODE.ESC){var i=Te;return ae(!0),t.selection.setAfter(i.get(0)),t.selection.restore(),n.preventDefault(),!1}if(Te&&(r==e.FE.KEYCODE.ARROW_LEFT||r==e.FE.KEYCODE.ARROW_RIGHT)){var o=Te.get(0);return ae(!0),r==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(o):t.selection.setAfter(o),t.selection.restore(),n.preventDefault(),!1}return Te&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),n.stopPropagation(),!1):void 0}function ee(e){if(e&&"IMG"==e.tagName)t.node.hasClass(e,"fr-uploading")||t.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):t.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),r=0;r<n.length;r++)ee(n[r])}function te(){if(M(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',oe),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(){Me=!1}),t.events.$on(t.$el,"touchmove",function(){Me=!0})),t.$wp?(t.events.on("window.keydown keydown",J,!0),t.events.on("keyup",function(t){if(t.which==e.FE.KEYCODE.ENTER)return!1},!0)):t.events.$on(t.$win,"keydown",J),t.events.on("toolbar.esc",function(){if(Te){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=Te;ae(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}},!0),t.events.on("toolbar.focusEditor",function(){if(Te)return!1},!0),t.events.on("window.cut window.copy",function(n){Te&&t.popups.isVisible("image.edit")&&!t.popups.get("image.edit").find(":focus").length&&(ye(),e.FE.copied_text="\n",e.FE.copied_html=Te.get(0).outerHTML,"copy"==n.type?setTimeout(function(){C(Te)}):(ae(!0),t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)))},!0),t.events.$on(e(t.o_win),"keydown",function(t){var n=t.which;if(Te&&n==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),t.events.$on(t.$win,"keydown",function(t){var n=t.which;Te&&Te.hasClass("fr-uploading")&&n==e.FE.KEYCODE.ESC&&Te.trigger("abortUpload")}),t.events.on("destroy",function(){Te&&Te.hasClass("fr-uploading")&&Te.trigger("abortUpload")}),t.events.on("paste.before",re),t.events.on("paste.beforeCleanup",ie),t.events.on("paste.after",ne),t.events.on("html.set",l),t.events.on("html.inserted",l),l(),t.events.on("destroy",function(){Fe=[]}),t.events.on("html.processGet",ee),t.opts.imageOutputSize){var n;t.events.on("html.beforeGet",function(){n=t.el.querySelectorAll("img");for(var r=0;r<n.length;r++){var i=n[r].style.width||e(n[r]).width(),o=n[r].style.height||e(n[r]).height();i&&n[r].setAttribute("width",(""+i).replace(/px/,"")),o&&n[r].setAttribute("height",(""+o).replace(/px/,""))}}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].removeAttribute("width"),n[e].removeAttribute("height")})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(c(),t.events.on("contentChanged",c)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){Te&&C(Te)},100)}),g(!0),P(!0),z(!0),j(!0),t.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Z(e),!1})}function ne(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(n,r){if(t.opts.imagePasteProcess){var o=t.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=t.opts.imageResizeWithPercent?"%":"px"),e(r).css("width",o),e(r).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:""))}if(0===r.src.indexOf("data:")){if(t.events.trigger("image.beforePasteUpload",[r])===!1)return!1;Te=e(r),u(),i(),be(),v(),t.edit.off();for(var a=atob(e(r).attr("src").split(",")[1]),s=[],l=0;l<a.length;l++)s.push(a.charCodeAt(l));var c=new Blob([new Uint8Array(s)],{type:"image/jpeg"});D([c]),e(r).removeAttr("data-fr-image-pasted")}else 0!==r.src.indexOf("http")||0===r.src.indexOf("https://mail.google.com/mail")?(t.selection.save(),e(r).remove(),t.selection.restore()):e(r).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function re(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var n=e.clipboardData.items[0].getAsFile();if(n){var r=new FileReader;return r.onload=function(e){var n=e.target.result,r=t.opts.imageDefaultWidth;r&&"auto"!=r&&(r+=t.opts.imageResizeWithPercent?"%":"px"),t.html.insert('<img data-fr-image-pasted="true" class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+n+'"'+(r?' style="width: '+r+';"':"")+">"),t.events.trigger("paste.after")},r.readAsDataURL(n),!1}}}function ie(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function oe(n){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(n&&"touchend"==n.type&&Me)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=t&&e.FE.INSTANCES[r].events.trigger("image.hideResizer");t.toolbar.disable(),n&&(n.stopPropagation(),n.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),Te=e(this),ye(),u(),i(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function ae(e){Te&&(ce()||e===!0)&&(t.toolbar.enable(),$e.removeClass("fr-active"),t.popups.hide("image.edit"),Te=null,le())}function se(){Pe=!0}function le(){Pe=!1}function ce(){return Pe}function ue(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),e.addClass("fr-fi"+r[0]+" fr-di"+n[0])):"inline"==n?(e.css({display:"inline-block",verticalAlign:"bottom",margin:t.opts.imageDefaultMargin}),"center"==r?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*t.opts.imageDefaultMargin+"px)"}):"left"==r?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"})):"block"==n&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:t.opts.imageDefaultMargin+"px auto"}),"left"==r?e.css({marginLeft:0}):"right"==r&&e.css({marginRight:0}))}function de(e){Te.removeClass("fr-fir fr-fil"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?Te.addClass("fr-fil"):"right"==e&&Te.addClass("fr-fir"):ue(Te,pe(),e),u(),i()}function fe(e){if("undefined"==typeof e&&(e=Te),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function pe(e){"undefined"==typeof e&&(e=Te);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function he(e){Te&&e.find("> *:first").replaceWith(t.icon.create("image-align-"+fe()))}function me(e,t){Te&&t.find('.fr-command[data-param1="'+fe()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ge(e){Te.removeClass("fr-dii fr-dib"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?Te.addClass("fr-dii"):"block"==e&&Te.addClass("fr-dib"):ue(Te,e,fe()),u(),i()}function ve(e,t){Te&&t.find('.fr-command[data-param1="'+pe()+'"]').addClass("fr-active").attr("aria-selected",!0)}function be(){var e=t.popups.get("image.insert");e||(e=P()),t.popups.isVisible("image.insert")||(b(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$sc));var n=Te.offset().left+Te.width()/2,r=Te.offset().top+Te.height();t.popups.show("image.insert",n,r,Te.outerHeight())}function ye(){if(Te){t.selection.clear();var e=t.doc.createRange();e.selectNode(Te.get(0));var n=t.selection.get();n.addRange(e)}}function Ee(){Te?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),C(Te)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function we(){return Te}function Ce(e,n,r){if("undefined"==typeof n&&(n=t.opts.imageStyles),"undefined"==typeof r&&(r=t.opts.imageMultipleStyles),!Te)return!1;if(!r){var i=Object.keys(n);i.splice(i.indexOf(e),1),Te.removeClass(i.join(" "))}"object"==typeof n[e]?(Te.removeAttr("style"),Te.css(n[e].style)):Te.toggleClass(e),C(Te)}var Te,$e,Se,xe,Ae=!1,_e=1,ke=2,Oe=3,Re=4,Ne=5,De=6,Ie=7,Le={};Le[_e]="Image cannot be loaded from the passed link.",Le[ke]="No link in upload response.",Le[Oe]="Error during file upload.",Le[Re]="Parsing response failed.",Le[Ne]="File is too large.",Le[De]="Image file type is invalid.",Le[Ie]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Fe,Me,Pe=!1;return{_init:te,showInsertPopup:r,showLayer:Y,refreshUploadButton:V,refreshByURLButton:G,upload:D,insertByURL:w,align:de,refreshAlign:he,refreshAlignOnShow:me,display:ge,refreshDisplayOnShow:ve,replace:be,back:Ee,get:we,insert:$,showProgressBar:v,remove:Z,hideProgressBar:b,applyStyle:Ce,showAltPopup:U,showSizePopup:W,setAlt:H,setSize:q,exitEdit:ae,edit:C}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){var t=this.image.get();t?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.imageAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("image-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){var t=this.image.get();t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==typeof r&&(r=r.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(r)+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,n){var r=this.image.get();r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){if(e.extend(e.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),e.FE.PLUGINS.imageManager=function(t){function n(){if(!$){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+t.sid+'" title="'+t.language.translate("Tags")+'"></i><h4 data-text="true">'+t.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var n='<img class="fr-preloader" id="fr-preloader" alt="'+t.language.translate("Loading")+'.." src="'+t.opts.imageManagerPreloader+'" style="display: none;">';n+='<div class="fr-image-list" id="fr-image-list"></div>';var r=t.modals.create(L,e,n);$=r.$modal,S=r.$head,x=r.$body}$.data("current-image",t.image.get()),t.modals.show(L),A||C(),a()}function r(){t.modals.hide(L)}function i(){var t=e(window).outerWidth();return t<768?2:t<1200?3:4}function o(){_.empty();for(var e=0;e<I;e++)_.append('<div class="fr-list-column"></div>')}function a(){A.show(),_.find(".fr-list-column").empty(),t.opts.imageManagerLoadURL?e.ajax({url:t.opts.imageManagerLoadURL,method:t.opts.imageManagerLoadMethod,data:t.opts.imageManagerLoadParams,dataType:"json",crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e,n,r){t.events.trigger("imageManager.imagesLoaded",[e]),s(e,r.response),A.hide()}).fail(function(){var e=this.xhr();v(M,e.response||e.responseText)}):v(P)}function s(e,t){try{_.find(".fr-list-column").empty(),R=0,N=0,D=0,O=e,l()}catch(n){v(B,t)}}function l(){if(N<O.length&&(_.outerHeight()<=x.outerHeight()+t.opts.imageManagerScrollOffset||x.scrollTop()+t.opts.imageManagerScrollOffset>_.outerHeight()-x.outerHeight())){R++;for(var e=t.opts.imageManagerPageSize*(R-1);e<Math.min(O.length,t.opts.imageManagerPageSize*R);e++)c(O[e])}}function c(n){var r=new Image,i=e('<div class="fr-image-container fr-empty fr-image-'+D++ +'" data-loading="'+t.language.translate("Loading")+'.." data-deleting="'+t.language.translate("Deleting")+'..">');p(!1),r.onload=function(){i.height(Math.floor(i.width()/r.width*r.height));var o=e("<img/>");if(n.thumb)o.attr("src",n.thumb);else{if(v(U,n),!n.url)return v(j,n),!1;o.attr("src",n.url)}if(n.url&&o.attr("data-url",n.url),n.tag)if(S.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),S.find(".fr-modal-tags").show(),n.tag.indexOf(",")>=0){for(var a=n.tag.split(","),s=0;s<a.length;s++)a[s]=a[s].trim(),0===k.find('a[title="'+a[s]+'"]').length&&k.append('<a role="button" title="'+a[s]+'">'+a[s]+"</a>");o.attr("data-tag",a.join())}else 0===k.find('a[title="'+n.tag.trim()+'"]').length&&k.append('<a role="button" title="'+n.tag.trim()+'">'+n.tag.trim()+"</a>"),o.attr("data-tag",n.tag.trim());n.name&&o.attr("alt",n.name);for(var c in n)n.hasOwnProperty(c)&&"thumb"!=c&&"url"!=c&&"tag"!=c&&o.attr("data-"+c,n[c]);i.append(o).append(e(t.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",t.language.translate("Delete"))).append(e(t.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",t.language.translate("Insert"))),k.find(".fr-selected-tag").each(function(e,t){w(o,t.text)||i.hide()}),o.on("load",function(){i.removeClass("fr-empty"),i.height("auto"),N++;var e=d(parseInt(o.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);f(e),p(!1),N%t.opts.imageManagerPageSize===0&&l()}),t.events.trigger("imageManager.imageLoaded",[o])},r.onerror=function(){N++,i.remove();var e=d(parseInt(i.attr("class").match(/fr-image-(\d+)/)[1],10)+1);f(e),v(F,n),N%t.opts.imageManagerPageSize===0&&l()},r.src=n.thumb||n.url,u().append(i)}function u(){var t,n;return _.find(".fr-list-column").each(function(r,i){var o=e(i);0===r?(n=o.outerHeight(),t=o):o.outerHeight()<n&&(n=o.outerHeight(),t=o)}),t}function d(t){void 0===t&&(t=0);for(var n=[],r=D-1;r>=t;r--){var i=_.find(".fr-image-"+r);i.length&&(n.push(i),e('<div id="fr-image-hidden-container">').append(i),_.find(".fr-image-"+r).remove())}return n}function f(e){for(var t=e.length-1;t>=0;t--)u().append(e[t])}function p(e){if(void 0===e&&(e=!0),!$.is(":visible"))return!0;var n=i();if(n!=I){I=n;var r=d();o(),f(r)}t.modals.resize(L),e&&l()}function h(e){var t={},n=e.data();for(var r in n)n.hasOwnProperty(r)&&"url"!=r&&"tag"!=r&&(t[r]=n[r]);return t}function m(n){var r=e(n.currentTarget).siblings("img"),i=$.data("instance")||t,o=$.data("current-image");if(t.modals.hide(L),i.image.showProgressBar(),o)o.data("fr-old-src",o.attr("src")),o.trigger("click");else{i.events.focus(!0),i.selection.restore();var a=i.position.getBoundingRect(),s=a.left+a.width/2+e(t.doc).scrollLeft(),l=a.top+a.height+e(t.doc).scrollTop();i.popups.setContainer("image.insert",t.$sc),i.popups.show("image.insert",s,l)}i.image.insert(r.data("url"),!1,h(r),o)}function g(n){var r=e(n.currentTarget).siblings("img"),i=t.language.translate("Are you sure? Image will be deleted.");confirm(i)&&(t.opts.imageManagerDeleteURL?t.events.trigger("imageManager.beforeDeleteImage",[r])!==!1&&(r.parent().addClass("fr-image-deleting"),e.ajax({method:t.opts.imageManagerDeleteMethod,url:t.opts.imageManagerDeleteURL,data:e.extend(e.extend({src:r.attr("src")},h(r)),t.opts.imageManagerDeleteParams),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){t.events.trigger("imageManager.imageDeleted",[e]);var n=d(parseInt(r.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);r.parent().remove(),f(n),p(!0)}).fail(function(){var e=this.xhr();v(H,e.response||e.responseText)})):v(K))}function v(n,r){10<=n&&n<20?A.hide():20<=n&&n<30&&e(".fr-image-deleting").removeClass("fr-image-deleting"),t.events.trigger("imageManager.error",[{code:n,message:W[n]},r])}function b(){var e=S.find(".fr-modal-head-line").outerHeight(),t=k.outerHeight();S.toggleClass(".fr-show-tags"),S.hasClass(".fr-show-tags")?(S.css("height",e+t),k.find("a").css("opacity",1)):(S.css("height",e),k.find("a").css("opacity",0))}function y(){var t=k.find(".fr-selected-tag");t.length>0?(_.find("img").parent().show(),t.each(function(t,n){_.find("img").each(function(t,r){var i=e(r);w(i,n.text)||i.parent().hide()})})):_.find("img").parent().show();var n=d();f(n),l()}function E(n){n.preventDefault();var r=e(n.currentTarget);r.toggleClass("fr-selected-tag"),t.opts.imageManagerToggleTags&&r.siblings("a").removeClass("fr-selected-tag"),y()}function w(e,t){for(var n=e.attr("data-tag").split(","),r=0;r<n.length;r++)if(n[r]==t)return!0;return!1}function C(){A=$.find("#fr-preloader"),_=$.find("#fr-image-list"),k=$.find("#fr-modal-tags"),I=i(),o(),S.css("height",S.find(".fr-modal-head-line").outerHeight()),t.events.$on(e(t.o_win),"resize",function(){p(!!O)}),t.helpers.isMobile()&&(t.events.bindClick(_,"div.fr-image-container",function(t){$.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),e(t.currentTarget).addClass("fr-mobile-selected")}),$.on(t._mousedown,function(){$.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),t.events.bindClick(_,".fr-insert-img",m),t.events.bindClick(_,".fr-delete-img",g),$.on(t._mousedown+" "+t._mouseup,function(e){e.stopPropagation()}),$.on(t._mousedown,"*",function(){t.events.disableBlur()}),x.on("scroll",l),t.events.bindClick($,"i#fr-modal-more-"+t.sid,b),t.events.bindClick(k,"a",E)}function T(){if(!t.$wp&&"IMG"!=t.el.tagName)return!1}var $,S,x,A,_,k,O,R,N,D,I,L="image_manager",F=10,M=11,P=12,B=13,U=14,j=15,H=21,K=22,W={};return W[F]="Image cannot be loaded from the passed link.",W[M]="Error during load images request.",W[P]="Missing imageManagerLoadURL option.",W[B]="Parsing load response failed.",W[U]="Missing image thumb.",W[j]="Missing image URL.",W[H]="Error during delete image request.",W[K]="Missing imageManagerDeleteURL option.",{require:["image"],_init:T,show:n,hide:r}},!e.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");e.FE.DEFAULTS.imageInsertButtons.push("imageManager"),e.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),e.FE.DefineIcon("imageManager",{NAME:"folder"}),e.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),e.FE.DefineIcon("imageManagerDelete",{NAME:"trash"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.FE.PLUGINS.inlineStyle=function(t){function n(n){""!==t.selection.text()?t.html.insert(e.FE.START_MARKER+'<span style="'+n+'">'+t.selection.text()+"</span>"+e.FE.END_MARKER):t.html.insert('<span style="'+n+'">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}return{apply:n}},e.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><span style="'+t[n]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[n]+'" title="'+this.language.translate(n)+'">'+this.language.translate(n)+"</a></span></li>");return e+="</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),e.FE.PLUGINS.lineBreaker=function(t){function n(e,n){var r,i,o,a,s,l,c,u;if(null==e)a=n.parent(),s=a.offset().top,c=n.offset().top,r=c-Math.min((c-s)/2,t.opts.lineBreakerOffset),o=a.outerWidth(),i=a.offset().left;else if(null==n)a=e.parent(),l=a.offset().top+a.outerHeight(),u=e.offset().top+e.outerHeight(),r=u+Math.min((l-u)/2,t.opts.lineBreakerOffset),o=a.outerWidth(),i=a.offset().left;else{a=e.parent();var d=e.offset().top+e.height(),f=n.offset().top;if(d>f)return!1;r=(d+f)/2,o=a.outerWidth(),i=a.offset().left}t.opts.iframe&&(i+=t.$iframe.offset().left-t.helpers.scrollLeft(),r+=t.$iframe.offset().top-t.helpers.scrollTop()),t.$box.append(g),g.css("top",r-t.win.pageYOffset),g.css("left",i-t.win.pageXOffset),g.css("width",o),g.data("tag1",e),g.data("tag2",n),g.addClass("fr-visible").data("instance",t)}function r(e,r){var o,a,s=e.offset().top,l=e.offset().top+e.outerHeight();if(Math.abs(l-r)<=t.opts.lineBreakerOffset||Math.abs(r-s)<=t.opts.lineBreakerOffset)if(Math.abs(l-r)<Math.abs(r-s)){a=e.get(0);for(var c=a.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;)c=c.nextSibling;if(!c)return n(e,null),!0;if(o=i(c))return n(e,o),!0}else{if(a=e.get(0),!a.previousSibling)return n(null,e),!0;if(o=i(a.previousSibling))return n(o,e),!0}g.removeClass("fr-visible").removeData("instance")}function i(n){if(n){var r=e(n);if(0===t.$el.find(r).length)return null;if(n.nodeType!=Node.TEXT_NODE&&r.is(t.opts.lineBreakerTags.join(",")))return r;if(r.parents(t.opts.lineBreakerTags.join(",")).length>0)return n=r.parents(t.opts.lineBreakerTags.join(",")).get(0),e(n)}return null}function o(n,r){var i=t.doc.elementFromPoint(n,r);return i&&!e(i).closest(".fr-line-breaker").length&&!t.node.isElement(i)&&i!=t.$wp.get(0)&&e(i).closest(t.$wp).length?i:null}function a(e,n,r){for(var i=r,a=null;i<=t.opts.lineBreakerOffset&&!a;)a=o(e,n-i),a||(a=o(e,n+i)),i+=r;return a}function s(e,n,r){for(var i=null;!i&&e>t.$box.offset().left&&e<t.$box.offset().left+t.$box.outerWidth();)i=o(e,n),i||(i=a(e,n,5)),"left"==r?e-=t.opts.lineBreakerHorizontalOffset:e+=t.opts.lineBreakerHorizontalOffset;return i}function l(e){b=null;var n=null,o=null,l=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);l&&("HTML"==l.tagName||"BODY"==l.tagName||t.node.isElement(l)||l.classList.contains(".fr-line-breaker"))?(o=a(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset,1),o||(o=s(e.pageX-t.win.pageXOffset-t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"left")),o||(o=s(e.pageX-t.win.pageXOffset+t.opts.lineBreakerHorizontalOffset,e.pageY-t.win.pageYOffset,"right")),n=i(o)):n=i(l),n?r(n,e.pageY):t.core.sameInstance(g)&&g.removeClass("fr-visible").removeData("instance")}function c(e){return!(g.hasClass("fr-visible")&&!t.core.sameInstance(g))&&(t.popups.areVisible()||t.el.querySelector(".fr-selected-cell")?(g.removeClass("fr-visible"),!0):void(v===!1&&(b&&clearTimeout(b),b=setTimeout(l,30,e))))}function u(){b&&clearTimeout(b),g.hasClass("fr-visible")&&g.removeClass("fr-visible").removeData("instance")}function d(){v=!0,u()}function f(){v=!1}function p(n){if(!t.core.sameInstance(g))return!0;n.preventDefault(),g.removeClass("fr-visible").removeData("instance");var r=g.data("tag1"),i=g.data("tag2"),o=t.html.defaultTag();null==r?o&&"TD"!=i.parent().get(0).tagName?i.before("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):i.before(e.FE.MARKERS+"<br>"):o&&"TD"!=r.parent().get(0).tagName&&0===r.parents(o).length?r.after("<"+o+">"+e.FE.MARKERS+"<br></"+o+">"):r.after(e.FE.MARKERS+"<br>"),t.selection.restore()}function h(){t.shared.$line_breaker||(t.shared.$line_breaker=e('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),g=t.shared.$line_breaker,t.events.on("shared.destroy",function(){g.html("").removeData().remove(),g=null},!0),t.events.on("destroy",function(){g.removeData("instance").removeClass("fr-visible").appendTo("body"),clearTimeout(b)},!0),t.events.$on(g,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(g,"mousedown","a",function(e){e.stopPropagation()},!0),t.events.$on(g,"click","a",p,!0)}function m(){return!!t.$wp&&(h(),v=!1,t.events.$on(t.$win,"mousemove",c),t.events.$on(e(t.win),"scroll",u),t.events.on("popups.show.table.edit",u),t.events.on("commands.after",u),t.events.$on(e(t.win),"mousedown",d),void t.events.$on(e(t.win),"mouseup",f))}var g,v,b;return{_init:m}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){
return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var r=t.selection.ranges(0).commonAncestorContainer;if(r&&(r.contains&&r.contains(t.el)||!t.el.contains(r)||t.el==r)&&(r=null),r&&"A"===r.tagName)return r;var i=t.selection.element(),o=t.selection.endElement();return"A"==i.tagName||t.node.isElement(i)||(i=e(i).parentsUntil(t.$el,"a:first").get(0)),"A"==o.tagName||t.node.isElement(o)||(o=e(o).parentsUntil(t.$el,"a:first").get(0)),o&&(o.contains&&o.contains(t.el)||!t.el.contains(o)||t.el==o)&&(o=null),i&&(i.contains&&i.contains(t.el)||!t.el.contains(i)||t.el==i)&&(i=null),o&&o==i&&"A"==o.tagName?i:null}return"A"==t.el.tagName?t.el:n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function r(){var e=t.image?t.image.get():null,n=[];if(e)"A"==e.get(0).parentNode.tagName&&n.push(e.get(0).parentNode);else{var r,i,o,a;if(t.win.getSelection){var s=t.win.getSelection();if(s.getRangeAt&&s.rangeCount){a=t.doc.createRange();for(var l=0;l<s.rangeCount;++l)if(r=s.getRangeAt(l),i=r.commonAncestorContainer,i&&1!=i.nodeType&&(i=i.parentNode),i&&"a"==i.nodeName.toLowerCase())n.push(i);else{o=i.getElementsByTagName("a");for(var c=0;c<o.length;++c)a.selectNodeContents(o[c]),a.compareBoundaryPoints(r.END_TO_START,r)<1&&a.compareBoundaryPoints(r.START_TO_END,r)>-1&&n.push(o[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if(r=t.doc.selection.createRange(),i=r.parentElement(),"a"==i.nodeName.toLowerCase())n.push(i);else{o=i.getElementsByTagName("a"),a=t.doc.body.createTextRange();for(var u=0;u<o.length;++u)a.moveToElementText(o[u]),a.compareEndPoints("StartToEnd",r)>-1&&a.compareEndPoints("EndToStart",r)<1&&n.push(o[u])}}return n}function i(r){a(),setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var i=n(),a=t.image?t.image.get():null;if(i&&!a){if(t.image){var s=t.node.contents(i);if(1==s.length&&"IMG"==s[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),t.selection.restore(),!1}}r&&r.stopPropagation(),o(i)}}},t.helpers.isIOS()?100:0)}function o(n){var r=t.popups.get("link.edit");r||(r=s());var i=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",t.$sc);var o=i.offset().left+e(n).outerWidth()/2,a=i.offset().top+i.outerHeight();t.popups.show("link.edit",o,a,i.outerHeight())}function a(){t.popups.hide("link.edit")}function s(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.el.tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var r={buttons:e},i=t.popups.create("link.edit",r);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&o(n())}),i}function l(){}function c(){var r=t.popups.get("link.insert"),i=n();if(i){var o,a,s=e(i),l=r.find('input.fr-link-attr[type="text"]'),c=r.find('input.fr-link-attr[type="checkbox"]');for(o=0;o<l.length;o++)a=e(l[o]),a.val(s.attr(a.attr("name")||""));for(c.prop("checked",!1),o=0;o<c.length;o++)a=e(c[o]),s.attr(a.attr("name"))==a.data("checked")&&a.prop("checked",!0);r.find('input.fr-link-attr[type="text"][name="text"]').val(s.text())}else r.find('input.fr-link-attr[type="text"]').val(""),r.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),r.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());r.find("input.fr-link-attr").trigger("change");var u=t.image?t.image.get():null;u?r.find('.fr-link-attr[name="text"]').parent().hide():r.find('.fr-link-attr[name="text"]').parent().show()}function u(){var e=t.$tb.find('.fr-command[data-cmd="insertLink"]'),n=t.popups.get("link.insert");if(n||(n=d()),!n.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||t.$sc),e.is(":visible")){var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("link.insert",r,i,e.outerHeight())}else t.position.forSelection(n),t.popups.show("link.insert")}function d(e){if(e)return t.popups.onRefresh("link.insert",c),t.popups.onHide("link.insert",l),!0;var r="";t.opts.linkInsertButtons.length>=1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',o="",a=0;o='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',o+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+t.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++a+'"></div>',t.opts.linkText&&(o+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+t.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++a+'"></div>');for(var s in t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(s)){var u=t.opts.linkAttributes[s];o+='<div class="fr-input-line"><input name="'+s+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(u)+'" tabIndex="'+ ++a+'"></div>'}t.opts.linkAlwaysBlank||(o+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++a+'"><span>'+i+'</span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>"),o+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++a+'" type="button">'+t.language.translate("Insert")+"</button></div></div>";var d={buttons:r,input_layer:o},f=t.popups.create("link.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){var e=t.image?t.image.get():null;e&&t.popups.isVisible("link.insert")&&E(),n&&t.popups.isVisible("link.insert")&&b()}),f}function f(){var r=n(),i=t.image?t.image.get():null;return t.events.trigger("link.beforeRemove",[r])!==!1&&void(i&&r?(i.unwrap(),t.image.edit(i)):r&&(t.selection.save(),e(r).replaceWith(e(r).html()),t.selection.restore(),a()))}function p(){t.events.on("keyup",function(t){t.which!=e.FE.KEYCODE.ESC&&i(t)}),t.events.on("window.mouseup",i),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",i),d(!0),"A"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.on("toolbar.esc",function(){if(t.popups.isVisible("link.edit"))return t.events.disableBlur(),t.events.focus(),!1},!0)}function h(n){var r,i,o=t.opts.linkList[n],a=t.popups.get("link.insert"),s=a.find('input.fr-link-attr[type="text"]'),l=a.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<s.length;i++)r=e(s[i]),o[r.attr("name")]?r.val(o[r.attr("name")]):"text"!=r.attr("name")&&r.val("");for(i=0;i<l.length;i++)r=e(l[i]),r.prop("checked",r.data("checked")==o[r.attr("name")]);t.accessibility.focusPopup(a)}function m(){var n,r,i=t.popups.get("link.insert"),o=i.find('input.fr-link-attr[type="text"]'),a=i.find('input.fr-link-attr[type="checkbox"]'),s=o.filter('[name="href"]').val(),l=o.filter('[name="text"]').val(),c={};for(r=0;r<o.length;r++)n=e(o[r]),["href","text"].indexOf(n.attr("name"))<0&&(c[n.attr("name")]=n.val());for(r=0;r<a.length;r++)n=e(a[r]),n.is(":checked")?c[n.attr("name")]=n.data("checked"):c[n.attr("name")]=n.data("unchecked")||null;var u=t.helpers.scrollTop();v(s,l,c),e(t.o_win).scrollTop(u)}function g(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var r=e(n.pop());r.removeClass("fr-unprocessed");var i=t.node.deepestParent(r.get(0));if(i){var o=r.get(0),a="",s="";do o=o.parentNode,t.node.isBlock(o)||(a+=t.node.closeTagString(o),s=t.node.openTagString(o)+s);while(o!=i);var l=t.node.openTagString(r.get(0))+r.html()+t.node.closeTagString(r.get(0));r.replaceWith('<span id="fr-break"></span>');var c=e(i).html();c=c.replace(/<span id="fr-break"><\/span>/g,a+l+s),e(i).html(c)}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.selection.restore()}}function v(o,a,s){if("undefined"==typeof s&&(s={}),t.events.trigger("link.beforeInsert",[o,a,s])===!1)return!1;var l=t.image?t.image.get():null;l||"A"==t.el.tagName?"A"==t.el.tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var c=o;if(t.opts.linkConvertEmailAddress){var u=/^[\w._]+@[a-z\u00a1-\uffff0-9_-]+?\.[a-z\u00a1-\uffff0-9]{2,}$/i;u.test(o)&&!/^mailto:.*/i.test(o)&&(o="mailto:"+o)}if(""===t.opts.linkAutoPrefix||/^(mailto|tel|sms|notes|data):.*/i.test(o)||/^data:image.*/i.test(o)||/^(https?:|ftps?:|file:|)\/\//i.test(o)||["/","{","[","#","("].indexOf((o||"")[0])<0&&(o=t.opts.linkAutoPrefix+o),o=t.helpers.sanitizeURL(o),t.opts.linkAlwaysBlank&&(s.target="_blank"),t.opts.linkAlwaysNoFollow&&(s.rel="nofollow"),"_blank"==s.target&&(s.rel?s.rel+=" noopener noreferrer":s.rel="noopener noreferrer"),a=a||"",o===t.opts.linkAutoPrefix){var d=t.popups.get("link.insert");return d.find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[c]),!1}var f,p=n();if(p)f=e(p),f.attr("href",o),a.length>0&&f.text()!=a&&!l&&f.text(a),l||f.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),f.attr(s),l||t.selection.restore();else{l?l.wrap('<a href="'+o+'"></a>'):(t.format.remove("a"),t.selection.isCollapsed()?(a=0===a.length?c:a,t.html.insert('<a href="'+o+'">'+e.FE.START_MARKER+a+e.FE.END_MARKER+"</a>"),t.selection.restore()):a.length>0&&a!=t.selection.text().replace(/\n/g,"")?(t.selection.remove(),t.html.insert('<a href="'+o+'">'+e.FE.START_MARKER+a+e.FE.END_MARKER+"</a>"),t.selection.restore()):(g(),t.format.apply("a",{href:o})));for(var h=r(),m=0;m<h.length;m++)f=e(h[m]),f.attr(s),f.removeAttr("_moz_dirty");1==h.length&&t.$wp&&!l&&(e(h[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}if(l){var v=t.popups.get("link.insert");v.find("input:focus").blur(),t.image.edit(l)}else i()}function b(){a();var r=n();if(r){var i=t.popups.get("link.insert");i||(i=d()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",t.$sc);var o=(t.image?t.image.get():null)||e(r),s=o.offset().left+o.outerWidth()/2,l=o.offset().top+o.outerHeight();t.popups.show("link.insert",s,l,o.outerHeight())}}function y(){var e=t.image?t.image.get():null;if(e)t.image.back();else{t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var r=n();r&&t.$wp?(t.selection.restore(),a(),i()):"A"==t.el.tagName?(t.$el.focus(),i()):(t.popups.hide("link.insert"),t.toolbar.showInline())}}function E(){var e=t.image?t.image.get():null;if(e){var n=t.popups.get("link.insert");n||(n=d()),c(!0),t.popups.setContainer("link.insert",t.$sc);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+e.outerHeight();t.popups.show("link.insert",r,i,e.outerHeight())}}function w(r,o,a){"undefined"==typeof a&&(a=t.opts.linkMultipleStyles),"undefined"==typeof o&&(o=t.opts.linkStyles);var s=n();if(!s)return!1;if(!a){var l=Object.keys(o);l.splice(l.indexOf(r),1),e(s).removeClass(l.join(" "))}e(s).toggleClass(r),i()}return{_init:p,remove:f,showInsertPopup:u,usePredefined:h,insertCallback:m,insert:v,update:b,get:n,allSelected:r,back:y,imageLink:E,applyStyle:w}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(e.FE.KEYCODE.K,"insertLink",null,"K"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)}}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus(),n=this.image?this.image.get():null;n||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)}}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){var t=this.link.get();t?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t,n=this.link.get();n?(t=e.prev(),t.hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):(t=e.prev(),t.hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var r=this.link.get();if(r){var i=e(r);n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=i.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.FE.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function r(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function i(t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i].parentNode;"LI"==t[i].tagName&&o.tagName!=n&&r.indexOf(o)<0&&r.push(o)}for(i=r.length-1;i>=0;i--){var a=e(r[i]);a.replaceWith("<"+n.toLowerCase()+">"+a.html()+"</"+n.toLowerCase()+">")}}function o(n,r){i(n,r);for(var o=t.html.defaultTag(),a=0;a<n.length;a++)"LI"!=n[a].tagName&&(o&&n[a].tagName.toLowerCase()==o?e(n[a]).replaceWith("<"+r+"><li"+t.node.attributes(n[a])+">"+e(n[a]).html()+"</li></"+r+">"):e(n[a]).wrap("<"+r+"><li></li></"+r+">"));t.clean.lists()}function a(i){var o,a;for(o=i.length-1;o>=0;o--)for(a=o-1;a>=0;a--)if(e(i[a]).find(i[o]).length||i[a]==i[o]){i.splice(o,1);break}var s=[];for(o=0;o<i.length;o++){var l=e(i[o]),c=i[o].parentNode;l.before(r(c.tagName)),"LI"==c.parentNode.tagName?(l.before(r("LI")),l.after(n("LI"))):(t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(r("LI"))),l.after(n(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),s.indexOf(c)<0&&s.push(c)}for(o=0;o<s.length;o++){var u=e(s[o]),d=u.html();d=d.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),d=d.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),u.replaceWith(t.node.openTagString(u.get(0))+d+t.node.closeTagString(u.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function s(e,t){for(var n=!0,r=0;r<e.length;r++){if("LI"!=e[r].tagName)return!1;e[r].parentNode.tagName!=t&&(n=!1)}return n}function l(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),r=0;r<n.length;r++)"LI"!=n[r].tagName&&"LI"==n[r].parentNode.tagName&&(n[r]=n[r].parentNode);t.selection.save(),s(n,e)?a(n):o(n,e),t.html.unwrap(),t.selection.restore()}function c(n,r){var i=e(t.selection.element());if(i.get(0)!=t.el){var o=i.get(0);"LI"!=o.tagName&&(o=i.parents("li").get(0)),o&&o.parentNode.tagName==r&&t.el.contains(o.parentNode)&&n.addClass("fr-active")}}function u(n){t.selection.save();for(var r=0;r<n.length;r++){var i=n[r].previousSibling;if(i){var o=e(n[r]).find("> ul, > ol").last().get(0);if(o){for(var a=e("<li>").prependTo(e(o)),s=t.node.contents(n[r])[0];s&&!t.node.isList(s);){var l=s.nextSibling;a.append(s),s=l}e(i).append(e(o)),e(n[r]).remove()}else{var c=e(i).find("> ul, > ol").last().get(0);if(c)e(c).append(e(n[r]));else{var u=e("<"+n[r].parentNode.tagName+">");e(i).append(u),u.append(e(n[r]))}}}}t.clean.lists(),t.selection.restore()}function d(e){t.selection.save(),a(e),t.selection.restore()}function f(e){if("indent"==e||"outdent"==e){for(var n=!1,r=t.selection.blocks(),i=[],o=0;o<r.length;o++)"LI"==r[o].tagName?(n=!0,i.push(r[o])):"LI"==r[o].parentNode.tagName&&(n=!0,i.push(r[o].parentNode));n&&("indent"==e?u(i):d(i))}}function p(){t.events.on("commands.after",f),t.events.on("keydown",function(n){if(n.which==e.FE.KEYCODE.TAB){for(var r=t.selection.blocks(),i=[],o=0;o<r.length;o++)"LI"==r[o].tagName?i.push(r[o]):"LI"==r[o].parentNode.tagName&&i.push(r[o].parentNode);if(i.length>1||i.length&&(t.selection.info(i[0]).atStart||t.node.isEmpty(i[0])))return n.preventDefault(),n.stopPropagation(),n.shiftKey?d(i):u(i),!1}},!0)}return{_init:p,format:l,refresh:c}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,r){var i=t.html.defaultTag();if(r&&r.toLowerCase()!=i)if(n.find("ul, ol").length>0){var o=e("<"+r+">");n.prepend(o);for(var a=t.node.contents(n.get(0))[0];a&&["UL","OL"].indexOf(a.tagName)<0;){var s=a.nextSibling;o.append(a),a=s}}else n.html("<"+r+">"+n.html()+"</"+r+">")}function r(n,r){var i=t.html.defaultTag();r||(r='div class="fr-temp-div" data-empty="true"'),r.toLowerCase()==i?n.replaceWith(n.html()):n.replaceWith(e("<"+r+">").html(n.html()))}function i(n,r){var i=t.html.defaultTag();r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),r.toLowerCase()==i?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+r+">").html(n.html()))}function o(n,r){r||(r='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+r+" "+t.node.attributes(n.get(0))+">").html(n.html()))}function a(a){"N"==a&&(a=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var s=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<s.length;l++)if(s[l].tagName!=a&&!t.node.isList(s[l])){var c=e(s[l]);"LI"==s[l].tagName?n(c,a):"LI"==s[l].parentNode.tagName&&s[l]?r(c,a):["TD","TH"].indexOf(s[l].parentNode.tagName)>=0?i(c,a):o(c,a)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function s(e,n){var r=t.selection.blocks();if(r.length){var i=r[0],o="N",a=t.html.defaultTag();i.tagName.toLowerCase()!=a&&i!=t.el&&(o=i.tagName),n.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active").attr("aria-selected",!0)}else n.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function l(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var r=n[0],i="N",o=t.html.defaultTag();r.tagName.toLowerCase()!=o&&r!=t.el&&(i=r.tagName),["LI","TD","TH"].indexOf(i)>=0&&(i="N"),e.find("> span").text(t.opts.paragraphFormat[i])}else e.find("> span").text(t.opts.paragraphFormat.N)}}return{apply:a,refreshOnShow:s,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var n in t)if(t.hasOwnProperty(n)){var r=this.shortcuts.get("paragraphFormat."+n);r=r?'<span class="fr-shortcut">'+r+"</span>":"",e+='<li role="presentation"><'+("N"==n?this.html.defaultTag()||"DIV":n)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+("N"==n?this.html.defaultTag()||"DIV":n)+"></li>"}return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.FE.PLUGINS.paragraphStyle=function(t){function n(n,r,i){"undefined"==typeof r&&(r=t.opts.paragraphStyles),"undefined"==typeof i&&(i=t.opts.paragraphMultipleStyles);var o="";i||(o=Object.keys(r),o.splice(o.indexOf(n),1),o=o.join(" ")),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var a=t.selection.blocks();t.selection.save();for(var s=e(a[0]).hasClass(n),l=0;l<a.length;l++)e(a[l]).removeClass(o).toggleClass(n,!s),e(a[l]).hasClass("fr-temp-div")&&e(a[l]).removeClass("fr-temp-div"),""===e(a[l]).attr("class")&&e(a[l]).removeAttr("class");t.html.unwrap(),t.selection.restore()}function r(n,r){var i=t.selection.blocks();if(i.length){var o=e(i[0]);r.find(".fr-command").each(function(){var t=e(this).data("param1"),n=o.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}function i(){}return{_init:i,apply:n,refreshOnShow:r}},e.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command '+n+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.FE.DefineIcon("paragraphStyle",{NAME:"magic"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{quickInsertButtons:["image","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),e.FE.QUICK_INSERT_BUTTONS={image:{icon:"insertImage",callback:function(){var t=this;t.shared.$qi_image_input||(t.shared.$qi_image_input=e('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),e("body").append(t.shared.$qi_image_input),t.events.$on(t.shared.$qi_image_input,"change",function(){var t=e(this).data("inst");this.files&&(t.quickInsert.hide(),t.image.upload(this.files)),e(this).val("")},!0)),t.$qi_image_input=t.shared.$qi_image_input,t.helpers.isMobile()&&t.selection.save(),t.$qi_image_input.data("inst",t).trigger("click")},requiredPlugin:"image",title:"Insert Image"},table:{icon:"insertTable",callback:function(){this.quickInsert.hide(),this.table.insert(2,2),this.undo.saveStep()},requiredPlugin:"table",title:"Insert Table"},ol:{icon:"formatOL",callback:function(){this.quickInsert.hide(),this.lists.format("OL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Ordered List"},ul:{icon:"formatUL",callback:function(){this.quickInsert.hide(),this.lists.format("UL"),this.undo.saveStep()},requiredPlugin:"lists",title:"Unordered List"},hr:{icon:"insertHR",callback:function(){this.quickInsert.hide(),this.commands.insertHR(),this.undo.saveStep()},title:"Insert Horizontal Line"}},e.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),e.FE.RegisterQuickInsertCommand=function(t,n){e.FE.QUICK_INSERT_BUTTONS[t]=n},e.FE.PLUGINS.quickInsert=function(t){function n(e){var n,r,i;n=e.offset().top-t.$box.offset().top,r=0-u.outerWidth(),i=(u.outerHeight()-e.outerHeight())/2,t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),u.hasClass("fr-on")&&n>=0&&d.css("top",n-i),n>=0&&n-i<=t.$box.outerHeight()-e.outerHeight()?(u.hasClass("fr-hidden")&&(u.hasClass("fr-on")&&a(),u.removeClass("fr-hidden")),u.css("top",n-i)):u.hasClass("fr-visible")&&(u.addClass("fr-hidden"),s()),u.css("left",r)}function r(e){u||l(),u.hasClass("fr-on")&&s(),t.$box.append(u),n(e),u.data("tag",e),u.addClass("fr-visible")}function i(){if(t.core.hasFocus()){var n=t.selection.element();t.node.isBlock(n)||(n=t.node.blockParent(n)),n&&t.node.isEmpty(n)&&t.node.isElement(n.parentNode)?u&&u.data("tag").is(e(n))&&u.hasClass("fr-on")?s():t.selection.isCollapsed()&&r(e(n)):o()}}function o(){u&&(t.html.checkIfEmpty(),u.hasClass("fr-on")&&s(),u.removeClass("fr-visible fr-on"),u.css("left",-9999).css("top",-9999))}function a(n){if(n&&n.preventDefault(),u.hasClass("fr-on")&&!u.hasClass("fr-hidden"))s();else{if(!t.shared.$qi_helper){for(var r=t.opts.quickInsertButtons,i='<div class="fr-qi-helper">',o=0,a=0;a<r.length;a++){var l=e.FE.QUICK_INSERT_BUTTONS[r[a]];l&&(!l.requiredPlugin||e.FE.PLUGINS[l.requiredPlugin]&&t.opts.pluginsEnabled.indexOf(l.requiredPlugin)>=0)&&(i+='<a class="fr-btn fr-floating-btn" role="button" title="'+t.language.translate(l.title)+'" tabIndex="-1" data-cmd="'+r[a]+'" style="transition-delay: '+.025*o++ +'s;">'+t.icon.create(l.icon)+"</a>")}i+="</div>",t.shared.$qi_helper=e(i),t.tooltip.bind(t.shared.$qi_helper,".fr-qi-helper > a.fr-btn")}d=t.shared.$qi_helper,d.appendTo(t.$box),setTimeout(function(){d.css("top",parseFloat(u.css("top"))),d.css("left",parseFloat(u.css("left"))+u.outerWidth()),d.find("a").addClass("fr-size-1"),u.addClass("fr-on")},10)}}function s(){var e=t.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),u.hasClass("fr-hidden")||u.removeClass("fr-on"))}function l(){t.shared.$quick_insert||(t.shared.$quick_insert=e('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Quick Insert")+'">'+t.icon.create("quickInsert")+"</a></div>")),u=t.shared.$quick_insert,t.tooltip.bind(t.$box,".fr-quick-insert > a.fr-floating-btn"),t.events.on("destroy",function(){u.removeClass("fr-on").appendTo(e("body")).css("left",-9999).css("top",-9999),d&&(s(),d.appendTo(e("body")))},!0),t.events.on("shared.destroy",function(){u.html("").removeData().remove(),u=null,d&&(d.html("").removeData().remove(),d=null)},!0),t.events.on("commands.before",o),t.events.on("commands.after",function(){t.popups.areVisible()||i()}),t.events.bindClick(t.$box,".fr-quick-insert > a",a),t.events.bindClick(t.$box,".fr-qi-helper > a.fr-btn",function(n){var r=e(n.currentTarget).data("cmd");e.FE.QUICK_INSERT_BUTTONS[r].callback.apply(t,[n.currentTarget])}),t.events.$on(t.$wp,"scroll",function(){u.hasClass("fr-visible")&&n(u.data("tag"))})}function c(){return!!t.$wp&&(t.opts.iframe&&t.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),t.popups.onShow("image.edit",o),t.events.on("mouseup",i),t.helpers.isMobile()&&t.events.$on(e(t.o_doc),"selectionchange",i),t.events.on("blur",o),t.events.on("keyup",i),void t.events.on("keydown",function(){setTimeout(function(){i()},0)}))}var u,d;return{_init:c,hide:o}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.FE.PLUGINS.quote=function(t){function n(e){for(;e.parentNode&&e.parentNode!=t.el;)e=e.parentNode;return e}function r(){var r,i=t.selection.blocks();for(r=0;r<i.length;r++)i[r]=n(i[r]);t.selection.save();var o=e("<blockquote>");for(o.insertBefore(i[0]),r=0;r<i.length;r++)o.append(i[r]);t.html.unwrap(),t.selection.restore()}function i(){var n,r=t.selection.blocks();for(n=0;n<r.length;n++)"BLOCKQUOTE"!=r[n].tagName&&(r[n]=e(r[n]).parentsUntil(t.$el,"BLOCKQUOTE").get(0));for(t.selection.save(),n=0;n<r.length;n++)r[n]&&e(r[n]).replaceWith(r[n].innerHTML);t.html.unwrap(),t.selection.restore()}function o(e){t.selection.save(),
t.html.wrap(!0,!0,!0,!0),t.selection.restore(),"increase"==e?r():"decrease"==e&&i()}return{apply:o}},e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),e.FE.RegisterShortcut(e.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),e.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.FE.DefineIcon("quote",{NAME:"quote-left"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.FE.PLUGINS.save=function(t){function n(e,n){t.events.trigger("save.error",[{code:e,message:p[e]},n])}function r(r){if("undefined"==typeof r&&(r=t.html.get()),t.events.trigger("save.before")===!1)return!1;if(t.opts.saveURL){var i={};for(var o in t.opts.saveParams)if(t.opts.saveParams.hasOwnProperty(o)){var a=t.opts.saveParams[o];"function"==typeof a?i[o]=a.call(this):i[o]=a}var s={};s[t.opts.saveParam]=r,e.ajax({type:t.opts.saveMethod,url:t.opts.saveURL,data:e.extend(s,i),crossDomain:t.opts.requestWithCORS,xhrFields:{withCredentials:t.opts.requestWithCredentials},headers:t.opts.requestHeaders}).done(function(e){c=r,t.events.trigger("save.after",[e])}).fail(function(e){n(f,e.response||e.responseText)})}else n(d)}function i(){clearTimeout(l),l=setTimeout(function(){var e=t.html.get();(c!=e||u)&&(c=e,u=!1,r(e))},t.opts.saveInterval)}function o(){i(),u=!1}function a(){u=!0}function s(){t.opts.saveInterval&&(c=t.html.get(),t.events.on("contentChanged",i),t.events.on("keydown destroy",function(){clearTimeout(l)}))}var l=null,c=null,u=!1,d=1,f=2,p={};return p[d]="Missing saveURL option.",p[f]="Something went wrong during save.",{_init:s,save:r,reset:o,force:a}},e.FE.DefineIcon("save",{NAME:"floppy-o"}),e.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=a()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",r,i,e.outerHeight())}}function r(){var e=I();if(e){var n=t.popups.get("table.edit");n||(n=u()),t.popups.setContainer("table.edit",t.$sc);var r=j(e),i=(r.left+r.right)/2,o=r.bottom;t.popups.show("table.edit",i,o,r.bottom-r.top),t.edit.isDisabled()&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.button.bulkRefresh(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.$el.focus(),t.selection.restore())}}function i(){var e=I();if(e){var n=t.popups.get("table.colors");n||(n=d()),t.popups.setContainer("table.colors",t.$sc);var r=j(e),i=(r.left+r.right)/2,o=r.bottom;h(),t.popups.show("table.colors",i,o,r.bottom-r.top)}}function o(){0===ve().length&&t.toolbar.enable()}function a(n){if(n)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var r="";t.opts.tableInsertButtons.length>0&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var i={buttons:r,rows_columns:l()},o=t.popups.create("table.insert",i);return t.events.$on(o,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(t){s(e(t.currentTarget))},!0),c(o),o}function s(e){var n=e.data("row"),r=e.data("col"),i=e.parent();i.siblings(".fr-table-size-info").html(n+" &times; "+r),i.find("> span").removeClass("hover fr-active-item");for(var o=1;o<=t.opts.tableInsertMaxSize;o++)for(var a=0;a<=t.opts.tableInsertMaxSize;a++){var s=i.find('> span[data-row="'+o+'"][data-col="'+a+'"]');o<=n&&a<=r?s.addClass("hover"):o<=n+1||o<=2&&!t.helpers.isMobile()?s.css("display","inline-block"):o>2&&!t.helpers.isMobile()&&s.css("display","none")}e.addClass("fr-active-item")}function l(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var r=1;r<=t.opts.tableInsertMaxSize;r++){var i="inline-block";n>2&&!t.helpers.isMobile()&&(i="none");var o="fr-table-cell ";1==n&&1==r&&(o+=" hover"),e+='<span class="fr-command '+o+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+n+'" data-col="'+r+'" data-param1="'+n+'" data-param2="'+r+'" style="display: '+i+';" role="button"><span></span><span class="fr-sr-only">'+n+" &times; "+r+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+="</div></div>"}function c(n){t.events.$on(n,"focus","[tabIndex]",function(t){var n=e(t.currentTarget);s(n)}),t.events.on("popup.tab",function(n){var r=e(n.currentTarget);if(!t.popups.isVisible("table.insert")||!r.is("span, a"))return!0;var i,o=n.which;if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){if(r.is("span.fr-table-cell")){var a=r.parent().find("span.fr-table-cell"),l=a.index(r),c=t.opts.tableInsertMaxSize,u=l%c,d=Math.floor(l/c);e.FE.KEYCODE.ARROW_UP==o?d=Math.max(0,d-1):e.FE.KEYCODE.ARROW_DOWN==o?d=Math.min(t.opts.tableInsertMaxSize-1,d+1):e.FE.KEYCODE.ARROW_LEFT==o?u=Math.max(0,u-1):e.FE.KEYCODE.ARROW_RIGHT==o&&(u=Math.min(t.opts.tableInsertMaxSize-1,u+1));var f=d*c+u,p=e(a.get(f));s(p),t.events.disableBlur(),p.focus(),i=!1}}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(r),i=!1);return i===!1&&(n.preventDefault(),n.stopPropagation()),i},!0)}function u(e){if(e)return t.popups.onHide("table.edit",o),!0;var n="";t.opts.tableEditButtons.length>0&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var i={buttons:n},a=t.popups.create("table.edit",i);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&r()}),a}function d(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n={buttons:e,colors:f()},r=t.popups.create("table.colors",n);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&i()}),p(r),r}function f(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep===0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[n]?'<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"><span class="fr-sr-only">'+t.language.translate("Color")+" "+t.opts.tableColors[n]+"&nbsp;&nbsp;&nbsp;</span></span>":'<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i><span class="fr-sr-only">'+t.language.translate("Clear Formatting")+"</span></span>";return e+="</div>"}function p(n){t.events.on("popup.tab",function(r){var i=e(r.currentTarget);if(!t.popups.isVisible("table.colors")||!i.is("span"))return!0;var o=r.which,a=!0;if(e.FE.KEYCODE.TAB==o){var s=n.find(".fr-buttons");a=!t.accessibility.focusToolbar(s,!!r.shiftKey)}else if(e.FE.KEYCODE.ARROW_UP==o||e.FE.KEYCODE.ARROW_DOWN==o||e.FE.KEYCODE.ARROW_LEFT==o||e.FE.KEYCODE.ARROW_RIGHT==o){var l=i.parent().find("span.fr-command"),c=l.index(i),u=t.opts.colorsStep,d=Math.floor(l.length/u),f=c%u,p=Math.floor(c/u),h=p*u+f,m=d*u;e.FE.KEYCODE.ARROW_UP==o?h=((h-u)%m+m)%m:e.FE.KEYCODE.ARROW_DOWN==o?h=(h+u)%m:e.FE.KEYCODE.ARROW_LEFT==o?h=((h-1)%m+m)%m:e.FE.KEYCODE.ARROW_RIGHT==o&&(h=(h+1)%m);var g=e(l.get(h));t.events.disableBlur(),g.focus(),a=!1}else e.FE.KEYCODE.ENTER==o&&(t.button.exec(i),a=!1);return a===!1&&(r.preventDefault(),r.stopPropagation()),a},!0)}function h(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+t.helpers.RGBToHex(n.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function m(n,r){var i,o,a='<table style="width: 100%;"><tbody>',s=100/r;for(i=0;i<n;i++){for(a+="<tr>",o=0;o<r;o++)a+='<td style="width: '+s.toFixed(4)+'%;">',0===i&&0===o&&(a+=e.FE.MARKERS),a+="<br></td>";a+="</tr>"}a+="</tbody></table>",t.html.insert(a),t.selection.restore()}function g(){if(ve().length>0){var e=be();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove(),t.toolbar.enable()}}function v(){var t=be();if(t.length>0&&0===t.find("th").length){var n,i="<thead><tr>",o=0;for(t.find("tr:first > td").each(function(){var t=e(this);o+=parseInt(t.attr("colspan"),10)||1}),n=0;n<o;n++)i+="<th><br></th>";i+="</tr></thead>",t.prepend(i),r()}}function b(){var e=be(),n=e.find("thead");if(n.length>0)if(0===e.find("tbody tr").length)g();else if(n.remove(),ve().length>0)r();else{t.popups.hide("table.edit");var i=e.find("tbody tr:first td:first").get(0);i&&(t.selection.setAtEnd(i),t.selection.restore())}}function y(n){var i=be();if(i.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==n)return;var o,a,s=I(),l=B(s);a="above"==n?l.min_i:l.max_i;var c="<tr>";for(o=0;o<s[a].length;o++)if("below"==n&&a<s.length-1&&s[a][o]==s[a+1][o]||"above"==n&&a>0&&s[a][o]==s[a-1][o]){if(0===o||o>0&&s[a][o]!=s[a][o-1]){var u=e(s[a][o]);u.attr("rowspan",parseInt(u.attr("rowspan"),10)+1)}}else c+="<td><br></td>";c+="</tr>";var d=e(i.find("tr").not(i.find("table tr")).get(a));"below"==n?d.after(c):"above"==n&&(d.before(c),t.popups.isVisible("table.edit")&&r())}}function E(){var n=be();if(n.length>0){var r,i,o,a=I(),s=B(a);if(0===s.min_i&&s.max_i==a.length-1)g();else{for(r=s.max_i;r>=s.min_i;r--){for(o=e(n.find("tr").not(n.find("table tr")).get(r)),i=0;i<a[r].length;i++)if(0===i||a[r][i]!=a[r][i-1]){var l=e(a[r][i]);if(parseInt(l.attr("rowspan"),10)>1){var c=parseInt(l.attr("rowspan"),10)-1;1==c?l.removeAttr("rowspan"):l.attr("rowspan",c)}if(r<a.length-1&&a[r][i]==a[r+1][i]&&(0===r||a[r][i]!=a[r-1][i])){for(var u=a[r][i],d=i;d>0&&a[r][d]==a[r][d-1];)d--;0===d?e(n.find("tr").not(n.find("table tr")).get(r+1)).prepend(u):e(a[r+1][d-1]).after(u)}}var f=o.parent();o.remove(),0===f.find("tr").length&&f.remove(),a=I(n)}x(0,a.length-1,0,a[0].length-1,n),s.min_i>0?t.selection.setAtEnd(a[s.min_i-1][0]):t.selection.setAtEnd(a[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function w(n){var i=be();if(i.length>0){var o,a=I(),s=B(a);o="before"==n?s.min_j:s.max_j;var l,c=100/a[0].length,u=100/(a[0].length+1);i.find("th, td").each(function(){l=e(this),l.data("old-width",l.outerWidth()/i.outerWidth()*100)}),i.find("tr").not(i.find("table tr")).each(function(t){for(var r,i=e(this),s=0,l=0;s-1<o;){if(r=i.find("> th, > td").get(l),!r){r=null;break}r==a[t][s]?(s+=parseInt(e(r).attr("colspan"),10)||1,l++):(s+=parseInt(e(a[t][s]).attr("colspan"),10)||1,"after"==n&&(r=0===l?-1:i.find("> th, > td").get(l-1)))}var d=e(r);if("after"==n&&s-1>o||"before"==n&&o>0&&a[t][o]==a[t][o-1]){if(0===t||t>0&&a[t][o]!=a[t-1][o]){var f=parseInt(d.attr("colspan"),10)+1;d.attr("colspan",f),d.css("width",(d.data("old-width")*u/c+u).toFixed(4)+"%"),d.removeData("old-width")}}else{var p;p=i.find("th").length>0?'<th style="width: '+u.toFixed(4)+'%;"><br></th>':'<td style="width: '+u.toFixed(4)+'%;"><br></td>',r==-1?i.prepend(p):null==r?i.append(p):"before"==n?d.before(p):"after"==n&&d.after(p)}}),i.find("th, td").each(function(){l=e(this),l.data("old-width")&&(l.css("width",(l.data("old-width")*u/c).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&r()}}function C(){var n=be();if(n.length>0){var r,i,o,a=I(),s=B(a);if(0===s.min_j&&s.max_j==a[0].length-1)g();else{var l=100/a[0].length,c=100/(a[0].length-s.max_j+s.min_j-1);for(n.find("th, td").each(function(){o=e(this),o.hasClass("fr-selected-cell")||o.data("old-width",o.outerWidth()/n.outerWidth()*100)}),i=s.max_j;i>=s.min_j;i--)for(r=0;r<a.length;r++)if(0===r||a[r][i]!=a[r-1][i])if(o=e(a[r][i]),(parseInt(o.attr("colspan"),10)||1)>1){var u=parseInt(o.attr("colspan"),10)-1;1==u?o.removeAttr("colspan"):o.attr("colspan",u),o.css("width",((o.data("old-width")-ce(i,a))*c/l).toFixed(4)+"%"),o.removeData("old-width")}else{var d=e(o.parent().get(0));o.remove(),0===d.find("> th, > td").length&&(0===d.prev().length||0===d.next().length||d.prev().find("> th[rowspan], > td[rowspan]").length<d.prev().find("> th, > td").length)&&d.remove()}x(0,a.length-1,0,a[0].length-1,n),s.min_j>0?t.selection.setAtEnd(a[s.min_i][s.min_j-1]):t.selection.setAtEnd(a[s.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each(function(){o=e(this),o.data("old-width")&&(o.css("width",(o.data("old-width")*c/l).toFixed(4)+"%"),o.removeData("old-width"))})}}}function T(e,t,n){var r,i,o,a,s,l=0,c=I(n);for(t=Math.min(t,c[0].length-1),i=e;i<=t;i++)if(!(i>e&&c[0][i]==c[0][i-1])&&(a=parseInt(c[0][i].getAttribute("colspan"),10)||1,a>1&&c[0][i]==c[0][i+1]))for(l=a-1,r=1;r<c.length;r++)if(c[r][i]!=c[r-1][i]){for(o=i;o<i+a;o++)if(s=parseInt(c[r][o].getAttribute("colspan"),10)||1,s>1&&c[r][o]==c[r][o+1])l=Math.min(l,s-1),o+=l;else if(l=Math.max(0,l-1),!l)break;if(!l)break}l&&S(c,l,"colspan",0,c.length-1,e,t)}function $(e,t,n){var r,i,o,a,s,l=0,c=I(n);for(t=Math.min(t,c.length-1),r=e;r<=t;r++)if(!(r>e&&c[r][0]==c[r-1][0])&&(a=parseInt(c[r][0].getAttribute("rowspan"),10)||1,a>1&&c[r][0]==c[r+1][0]))for(l=a-1,i=1;i<c[0].length;i++)if(c[r][i]!=c[r][i-1]){for(o=r;o<r+a;o++)if(s=parseInt(c[o][i].getAttribute("rowspan"),10)||1,s>1&&c[o][i]==c[o+1][i])l=Math.min(l,s-1),o+=l;else if(l=Math.max(0,l-1),!l)break;if(!l)break}l&&S(c,l,"rowspan",e,t,0,c[0].length-1)}function S(e,t,n,r,i,o,a){var s,l,c;for(s=r;s<=i;s++)for(l=o;l<=a;l++)s>r&&e[s][l]==e[s-1][l]||l>o&&e[s][l]==e[s][l-1]||(c=parseInt(e[s][l].getAttribute(n),10)||1,c>1&&(c-t>1?e[s][l].setAttribute(n,c-t):e[s][l].removeAttribute(n)))}function x(e,t,n,r,i){$(e,t,i),T(n,r,i)}function A(){if(ve().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){var n,i,o=I(),a=B(o),s=t.$el.find(".fr-selected-cell"),l=e(s[0]),c=l.parent(),u=c.find(".fr-selected-cell"),d=l.closest("table"),f=l.html(),p=0;for(n=0;n<u.length;n++)p+=e(u[n]).outerWidth();for(l.css("width",(p/d.outerWidth()*100).toFixed(4)+"%"),a.min_j<a.max_j&&l.attr("colspan",a.max_j-a.min_j+1),a.min_i<a.max_i&&l.attr("rowspan",a.max_i-a.min_i+1),n=1;n<s.length;n++)i=e(s[n]),"<br>"!=i.html()&&""!==i.html()&&(f+="<br>"+i.html()),i.remove();l.html(f),t.selection.setAtEnd(l.get(0)),t.selection.restore(),t.toolbar.enable(),$(a.min_i,a.max_i,d);var h=d.find("tr:empty");for(n=h.length-1;n>=0;n--)e(h[n]).remove();T(a.min_j,a.max_j,d),r()}}function _(){if(1==ve().length){var n=t.$el.find(".fr-selected-cell"),r=n.parent(),i=n.closest("table"),o=parseInt(n.attr("rowspan"),10),a=I(),s=L(n.get(0),a),l=n.clone().html("<br>");if(o>1){var c=Math.ceil(o/2);c>1?n.attr("rowspan",c):n.removeAttr("rowspan"),o-c>1?l.attr("rowspan",o-c):l.removeAttr("rowspan");for(var u=s.row+c,d=0===s.col?s.col:s.col-1;d>=0&&(a[u][d]==a[u][d-1]||u>0&&a[u][d]==a[u-1][d]);)d--;d==-1?e(i.find("tr").not(i.find("table tr")).get(u)).prepend(l):e(a[u][d]).after(l)}else{var f,p=e("<tr>").append(l);for(f=0;f<a[0].length;f++)if(0===f||a[s.row][f]!=a[s.row][f-1]){var h=e(a[s.row][f]);h.is(n)||h.attr("rowspan",(parseInt(h.attr("rowspan"),10)||1)+1)}r.after(p)}M(),t.popups.hide("table.edit")}}function k(){if(1==ve().length){var n=t.$el.find(".fr-selected-cell"),r=parseInt(n.attr("colspan"),10)||1,i=n.parent().outerWidth(),o=n.outerWidth(),a=n.clone().html("<br>"),s=I(),l=L(n.get(0),s);if(r>1){var c=Math.ceil(r/2);o=ue(l.col,l.col+c-1,s)/i*100;var u=ue(l.col+c,l.col+r-1,s)/i*100;c>1?n.attr("colspan",c):n.removeAttr("colspan"),r-c>1?a.attr("colspan",r-c):a.removeAttr("colspan"),n.css("width",o.toFixed(4)+"%"),a.css("width",u.toFixed(4)+"%")}else{var d;for(d=0;d<s.length;d++)if(0===d||s[d][l.col]!=s[d-1][l.col]){var f=e(s[d][l.col]);if(!f.is(n)){var p=(parseInt(f.attr("colspan"),10)||1)+1;f.attr("colspan",p)}}o=o/i*100/2,n.css("width",o.toFixed(4)+"%"),a.css("width",o.toFixed(4)+"%")}n.after(a),M(),t.popups.hide("table.edit")}}function O(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function R(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function N(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function D(e,t,n,r){if(t.length>0){if(!n){var i=Object.keys(r);i.splice(i.indexOf(e),1),t.removeClass(i.join(" "))}t.toggleClass(e)}}function I(t){t=t||null;var n=[];if(null==t&&ve().length>0&&(t=be()),t)return t.find("tr").not(t.find("table tr")).each(function(t,r){var i=e(r),o=0;i.find("> th, > td").each(function(r,i){for(var a=e(i),s=parseInt(a.attr("colspan"),10)||1,l=parseInt(a.attr("rowspan"),10)||1,c=t;c<t+l;c++)for(var u=o;u<o+s;u++)n[c]||(n[c]=[]),n[c][u]?o++:n[c][u]=i;o+=s})}),n}function L(e,t){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)if(t[n][r]==e)return{row:n,col:r}}function F(e,t,n){for(var r=e+1,i=t+1;r<n.length;){if(n[r][t]!=n[e][t]){r--;break}r++}for(r==n.length&&r--;i<n[e].length;){if(n[e][i]!=n[e][t]){i--;break}i++}return i==n[e].length&&i--,{row:r,col:i}}function M(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")}),t.el.querySelector(".fr-cell-fixed")&&(t.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),t.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler"))}function P(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.$el.blur()},0)}function B(e){var n=t.$el.find(".fr-selected-cell");if(n.length>0){var r,i=e.length,o=0,a=e[0].length,s=0;for(r=0;r<n.length;r++){var l=L(n[r],e),c=F(l.row,l.col,e);i=Math.min(l.row,i),o=Math.max(c.row,o),a=Math.min(l.col,a),s=Math.max(c.col,s)}return{min_i:i,max_i:o,min_j:a,max_j:s}}return null}function U(t,n,r,i,o){var a,s,l,c,u=t,d=n,f=r,p=i;for(a=u;a<=d;a++)((parseInt(e(o[a][f]).attr("rowspan"),10)||1)>1||(parseInt(e(o[a][f]).attr("colspan"),10)||1)>1)&&(l=L(o[a][f],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p)),((parseInt(e(o[a][p]).attr("rowspan"),10)||1)>1||(parseInt(e(o[a][p]).attr("colspan"),10)||1)>1)&&(l=L(o[a][p],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p));for(s=f;s<=p;s++)((parseInt(e(o[u][s]).attr("rowspan"),10)||1)>1||(parseInt(e(o[u][s]).attr("colspan"),10)||1)>1)&&(l=L(o[u][s],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p)),((parseInt(e(o[d][s]).attr("rowspan"),10)||1)>1||(parseInt(e(o[d][s]).attr("colspan"),10)||1)>1)&&(l=L(o[d][s],o),c=F(l.row,l.col,o),u=Math.min(l.row,u),d=Math.max(c.row,d),f=Math.min(l.col,f),p=Math.max(c.col,p));return u==t&&d==n&&f==r&&p==i?{min_i:t,max_i:n,min_j:r,max_j:i}:U(u,d,f,p,o)}function j(t){var n=B(t),r=e(t[n.min_i][n.min_j]),i=e(t[n.min_i][n.max_j]),o=e(t[n.max_i][n.min_j]),a=r.offset().left,s=i.offset().left+i.outerWidth(),l=r.offset().top,c=o.offset().top+o.outerHeight();return{left:a,right:s,top:l,bottom:c}}function H(n,r){if(e(n).is(r))M(),t.edit.on(),e(n).addClass("fr-selected-cell");else{P(),t.edit.off();var i=I(),o=L(n,i),a=L(r,i),s=U(Math.min(o.row,a.row),Math.max(o.row,a.row),Math.min(o.col,a.col),Math.max(o.col,a.col),i);M(),n.classList.add("fr-cell-fixed"),r.classList.add("fr-cell-handler");for(var l=s.min_i;l<=s.max_i;l++)for(var c=s.min_j;c<=s.max_j;c++)e(i[l][c]).addClass("fr-selected-cell")}}function K(n){var r=null,i=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?r=n.target:i.closest("td").length>0?r=i.closest("td").get(0):i.closest("th").length>0&&(r=i.closest("th").get(0)),0===t.$el.find(r).length?null:r}function W(){M(),t.popups.hide("table.edit")}function z(n){var r=K(n);if(ve().length>0&&!r&&W(),!t.edit.isDisabled()||t.popups.isVisible("table.edit"))if(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)(3==n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)&&r&&W();else if(Se=!0,r){ve().length>0&&!n.shiftKey&&W(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),$e=!0;var i=r.tagName.toLowerCase();n.shiftKey&&t.$el.find(i+".fr-selected-cell").length>0?e(t.$el.find(i+".fr-selected-cell").closest("table")).is(e(r).closest("table"))?H(xe,r):P():((t.keys.ctrlKey(n)||n.shiftKey)&&(ve().length>1||0===e(r).find(t.selection.element()).length&&!e(r).is(t.selection.element()))&&P(),xe=r,H(xe,xe))}}function q(n){if($e||t.$tb.is(n.target)||t.$tb.is(e(n.target).closest(t.$tb.get(0)))||(ve().length>0&&t.toolbar.enable(),M()),!(1!=n.which||1==n.which&&t.helpers.isMac()&&n.ctrlKey)){if(Se=!1,$e){$e=!1;var i=K(n);i||1!=ve().length?ve().length>0&&(t.selection.isCollapsed()?r():M()):M()}if(_e){_e=!1,Ce.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var o=parseFloat(Ce.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(o-=t.$iframe.offset().left),Ce.data("release-position",o),Ce.removeData("max-left"),Ce.removeData("max-right"),le(n),ee()}}}function Y(n){if($e===!0){var r=e(n.currentTarget);if(r.closest("table").is(be())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void H(xe,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void H(xe,n.currentTarget)}P()}}function V(n,r){for(var i=n;i&&"TABLE"!=i.tagName&&i.parentNode!=t.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName){var o=I(e(i));"up"==r?X(L(n,o),i,o):"down"==r&&Q(L(n,o),i,o)}}function G(e,n,r,i){for(var o,a=n;a!=t.el&&"TD"!=a.tagName&&"TH"!=a.tagName&&("up"==i?o=a.previousElementSibling:"down"==i&&(o=a.nextElementSibling),!o);)a=a.parentNode;"TD"==a.tagName||"TH"==a.tagName?V(a,i):o&&("up"==i&&t.selection.setAtEnd(o),"down"==i&&t.selection.setAtStart(o))}function X(e,n,r){e.row>0?t.selection.setAtEnd(r[e.row-1][e.col]):G(e,n,r,"up")}function Q(e,n,r){var i=parseInt(r[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<r.length-i?t.selection.setAtStart(r[e.row+i][e.col]):G(e,n,r,"down")}function Z(n){var r=n.which,i=t.selection.blocks();if(i.length&&(i=i[0],"TD"==i.tagName||"TH"==i.tagName)){for(var o=i;o&&"TABLE"!=o.tagName&&o.parentNode!=t.el;)o=o.parentNode;if(o&&"TABLE"==o.tagName&&(e.FE.KEYCODE.ARROW_LEFT==r||e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_RIGHT==r||e.FE.KEYCODE.ARROW_DOWN==r)&&(ve().length>0&&W(),t.browser.webkit&&(e.FE.KEYCODE.ARROW_UP==r||e.FE.KEYCODE.ARROW_DOWN==r))){var a=t.selection.ranges(0).startContainer;if(a.nodeType==Node.TEXT_NODE&&(e.FE.KEYCODE.ARROW_UP==r&&a.previousSibling||e.FE.KEYCODE.ARROW_DOWN==r&&a.nextSibling))return;n.preventDefault(),n.stopPropagation();var s=I(e(o)),l=L(i,s);return e.FE.KEYCODE.ARROW_UP==r?X(l,o,s):e.FE.KEYCODE.ARROW_DOWN==r&&Q(l,o,s),t.selection.restore(),!1}}}function J(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),Ce=t.shared.$table_resizer,t.events.$on(Ce,"mousedown",function(e){return!t.core.sameInstance(Ce)||(ve().length>0&&W(),1==e.which?(t.selection.save(),_e=!0,Ce.addClass("fr-moving"),P(),t.edit.off(),Ce.find("div").css("opacity",1),!1):void 0)}),t.events.$on(Ce,"mousemove",function(e){return!t.core.sameInstance(Ce)||void(_e&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),de(e)))}),t.events.on("shared.destroy",function(){Ce.html("").removeData().remove(),Ce=null},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Ce.hide().appendTo(e("body"))},!0)}function ee(){Ce&&(Ce.find("div").css("opacity",0),Ce.css("top",0),Ce.css("left",0),Ce.css("height",0),Ce.find("div").css("height",0),Ce.hide())}function te(){Te&&Te.removeClass("fr-visible").css("left","-9999px")}function ne(n,r){var i=e(r),o=i.closest("table"),a=o.parent();if(r&&"TD"!=r.tagName&&"TH"!=r.tagName&&(i.closest("td").length>0?r=i.closest("td"):i.closest("th").length>0&&(r=i.closest("th"))),!r||"TD"!=r.tagName&&"TH"!=r.tagName)Ce&&i.get(0)!=Ce.get(0)&&i.parent().get(0)!=Ce.get(0)&&t.core.sameInstance(Ce)&&ee();else{if(i=e(r),0===t.$el.find(i).length)return!1;var s=i.offset().left-1,l=s+i.outerWidth();if(Math.abs(n.pageX-s)<=t.opts.tableResizerOffset||Math.abs(l-n.pageX)<=t.opts.tableResizerOffset){var c,u,d,f,p,h=I(o),m=L(r,h),g=F(m.row,m.col,h),v=o.offset().top,b=o.outerHeight()-1;"rtl"!=t.opts.direction?n.pageX-s<=t.opts.tableResizerOffset?(d=s,m.col>0?(f=s-ce(m.col-1,h)+t.opts.tableResizingLimit,p=s+ce(m.col,h)-t.opts.tableResizingLimit,c=m.col-1,u=m.col):(c=null,u=0,f=o.offset().left-1-parseInt(o.css("margin-left"),10),p=o.offset().left-1+o.width()-h[0].length*t.opts.tableResizingLimit)):l-n.pageX<=t.opts.tableResizerOffset&&(d=l,g.col<h[g.row].length&&h[g.row][g.col+1]?(f=l-ce(g.col,h)+t.opts.tableResizingLimit,p=l+ce(g.col+1,h)-t.opts.tableResizingLimit,c=g.col,u=g.col+1):(c=g.col,u=null,f=o.offset().left-1+h[0].length*t.opts.tableResizingLimit,p=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):l-n.pageX<=t.opts.tableResizerOffset?(d=l,m.col>0?(f=l-ce(m.col,h)+t.opts.tableResizingLimit,p=l+ce(m.col-1,h)-t.opts.tableResizingLimit,c=m.col,u=m.col-1):(c=null,u=0,f=o.offset().left+h[0].length*t.opts.tableResizingLimit,p=a.offset().left-1+a.width()+parseFloat(a.css("padding-left")))):n.pageX-s<=t.opts.tableResizerOffset&&(d=s,g.col<h[g.row].length&&h[g.row][g.col+1]?(f=s-ce(g.col+1,h)+t.opts.tableResizingLimit,p=s+ce(g.col,h)-t.opts.tableResizingLimit,c=g.col+1,u=g.col):(c=g.col,u=null,f=a.offset().left+parseFloat(a.css("padding-left")),p=o.offset().left-1+o.width()-h[0].length*t.opts.tableResizingLimit)),Ce||J(),Ce.data("table",o),Ce.data("first",c),Ce.data("second",u),Ce.data("instance",t),t.$wp.append(Ce);var y=d-t.win.pageXOffset-t.opts.tableResizerOffset,E=v-t.win.pageYOffset;t.opts.iframe&&(y+=t.$iframe.offset().left-t.helpers.scrollLeft(),E+=t.$iframe.offset().top-t.helpers.scrollTop(),f+=t.$iframe.offset().left,p+=t.$iframe.offset().left),Ce.data("max-left",f),Ce.data("max-right",p),Ce.data("origin",d-t.win.pageXOffset),Ce.css("top",E),Ce.css("left",y),Ce.css("height",b),Ce.find("div").css("height",b),Ce.css("padding-left",t.opts.tableResizerOffset),Ce.css("padding-right",t.opts.tableResizerOffset),Ce.show()}else t.core.sameInstance(Ce)&&ee()}}function re(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Te||he(),t.$box.append(Te),Te.data("instance",t);var i=e(r),o=i.find("tr:first"),a=n.pageX,s=0,l=0;t.opts.iframe&&(s+=t.$iframe.offset().left-t.helpers.scrollLeft(),l+=t.$iframe.offset().top-t.helpers.scrollTop());var c;o.find("th, td").each(function(){var n=e(this);return n.offset().left<=a&&a<n.offset().left+n.outerWidth()/2?(c=parseInt(Te.find("a").css("width"),10),Te.css("top",l+n.offset().top-t.win.pageYOffset-c-5),Te.css("left",s+n.offset().left-t.win.pageXOffset-c/2),Te.data("selected-cell",n),Te.data("position","before"),Te.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=a&&a<n.offset().left+n.outerWidth()?(c=parseInt(Te.find("a").css("width"),10),Te.css("top",l+n.offset().top-t.win.pageYOffset-c-5),Te.css("left",s+n.offset().left+n.outerWidth()-t.win.pageXOffset-c/2),Te.data("selected-cell",n),Te.data("position","after"),Te.addClass("fr-visible"),!1):void 0})}function ie(n,r){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;Te||he(),t.$box.append(Te),Te.data("instance",t);var i=e(r),o=n.pageY,a=0,s=0;t.opts.iframe&&(a+=t.$iframe.offset().left-t.helpers.scrollLeft(),s+=t.$iframe.offset().top-t.helpers.scrollTop());var l;i.find("tr").each(function(){var n=e(this);return n.offset().top<=o&&o<n.offset().top+n.outerHeight()/2?(l=parseInt(Te.find("a").css("width"),10),Te.css("top",s+n.offset().top-t.win.pageYOffset-l/2),Te.css("left",a+n.offset().left-t.win.pageXOffset-l-5),Te.data("selected-cell",n.find("td:first")),Te.data("position","above"),Te.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=o&&o<n.offset().top+n.outerHeight()?(l=parseInt(Te.find("a").css("width"),10),Te.css("top",s+n.offset().top+n.outerHeight()-t.win.pageYOffset-l/2),Te.css("left",a+n.offset().left-t.win.pageXOffset-l-5),Te.data("selected-cell",n.find("td:first")),Te.data("position","below"),Te.addClass("fr-visible"),!1):void 0})}function oe(n,r){if(0===ve().length){var i,o,a;if(r&&("HTML"==r.tagName||"BODY"==r.tagName||t.node.isElement(r)))for(i=1;i<=t.opts.tableInsertHelperOffset;i++){if(o=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+i),e(o).hasClass("fr-tooltip"))return!0;if(o&&("TH"==o.tagName||"TD"==o.tagName||"TABLE"==o.tagName)&&(e(o).parents(".fr-wrapper").length||t.opts.iframe))return re(n,e(o).closest("table")),!0;if(a=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+i,n.pageY-t.win.pageYOffset),e(a).hasClass("fr-tooltip"))return!0;if(a&&("TH"==a.tagName||"TD"==a.tagName||"TABLE"==a.tagName)&&(e(a).parents(".fr-wrapper").length||t.opts.iframe))return ie(n,e(a).closest("table")),!0}t.core.sameInstance(Te)&&te()}}function ae(e){Ae=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);t.opts.tableResizer&&(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&ne(e,n),!t.opts.tableInsertHelper||t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||oe(e,n)}function se(){if(_e){var e=Ce.data("table"),n=e.offset().top-t.win.pageYOffset;t.opts.iframe&&(n+=t.$iframe.offset().top-t.helpers.scrollTop()),Ce.css("top",n)}}function le(){var n=Ce.data("origin"),r=Ce.data("release-position");if(n!==r){var i=Ce.data("first"),o=Ce.data("second"),a=Ce.data("table"),s=a.outerWidth();if(null!==i&&null!==o){var l,c,u,d=I(a),f=[],p=[],h=[],m=[];for(l=0;l<d.length;l++)c=e(d[l][i]),u=e(d[l][o]),f[l]=c.outerWidth(),h[l]=u.outerWidth(),p[l]=f[l]/s*100,m[l]=h[l]/s*100;for(l=0;l<d.length;l++){c=e(d[l][i]),u=e(d[l][o]);var g=(p[l]*(f[l]+r-n)/f[l]).toFixed(4);c.css("width",g+"%"),u.css("width",(p[l]+m[l]-g).toFixed(4)+"%")}}else{var v,b=a.parent(),y=s/b.width()*100,E=(parseInt(a.css("margin-left"),10)||0)/b.width()*100,w=(parseInt(a.css("margin-right"),10)||0)/b.width()*100;
"rtl"==t.opts.direction&&0===o||"rtl"!=t.opts.direction&&0!==o?(v=(s+r-n)/s*y,a.css("margin-right","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(E).toFixed(4)+"%)")):("rtl"==t.opts.direction&&0!==o||"rtl"!=t.opts.direction&&0===o)&&(v=(s-r+n)/s*y,a.css("margin-left","calc(100% - "+Math.round(v).toFixed(4)+"% - "+Math.round(w).toFixed(4)+"%)")),a.css("width",Math.round(v).toFixed(4)+"%")}t.selection.restore(),t.undo.saveStep()}Ce.removeData("origin"),Ce.removeData("release-position"),Ce.removeData("first"),Ce.removeData("second"),Ce.removeData("table")}function ce(t,n){var r,i=e(n[0][t]).outerWidth();for(r=1;r<n.length;r++)i=Math.min(i,e(n[r][t]).outerWidth());return i}function ue(e,t,n){var r,i=0;for(r=e;r<=t;r++)i+=ce(r,n);return i}function de(e){if(ve().length>1&&Se&&P(),Se===!1&&$e===!1&&_e===!1)Ae&&clearTimeout(Ae),t.edit.isDisabled()&&!t.popups.isVisible("table.edit")||(Ae=setTimeout(ae,30,e));else if(_e){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var r=Ce.data("max-left"),i=Ce.data("max-right");n>=r&&n<=i?Ce.css("left",n-t.opts.tableResizerOffset):n<r&&parseFloat(Ce.css("left"),10)>r-t.opts.tableResizerOffset?Ce.css("left",r-t.opts.tableResizerOffset):n>i&&parseFloat(Ce.css("left"),10)<i-t.opts.tableResizerOffset&&Ce.css("left",i-t.opts.tableResizerOffset)}else Se&&te()}function fe(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function pe(n){var r=n.which;if(r==e.FE.KEYCODE.TAB){var i;if(ve().length>0)i=t.$el.find(".fr-selected-cell:last");else{var o=t.selection.element();"TD"==o.tagName||"TH"==o.tagName?i=e(o):e(o).closest("td").length>0?i=e(o).closest("td"):e(o).closest("th").length>0&&(i=e(o).closest("th"))}if(i)return n.preventDefault(),W(),n.shiftKey?i.prev().length>0?fe(i.prev()):i.closest("tr").length>0&&i.closest("tr").prev().length>0?fe(i.closest("tr").prev().find("td:last")):i.closest("tbody").length>0&&i.closest("table").find("thead tr").length>0&&fe(i.closest("table").find("thead tr th:last")):i.next().length>0?fe(i.next()):i.closest("tr").length>0&&i.closest("tr").next().length>0?fe(i.closest("tr").next().find("td:first")):i.closest("thead").length>0&&i.closest("table").find("tbody tr").length>0?fe(i.closest("table").find("tbody tr td:first")):(i.addClass("fr-selected-cell"),y("below"),M(),fe(i.closest("tr").next().find("td:first"))),t.selection.restore(),!1}}function he(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=Te.data("selected-cell"),n=Te.data("position"),r=Te.data("instance")||t;"before"==n?(e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell")):"after"==n?(e.addClass("fr-selected-cell"),r.table.insertColumn(n),e.removeClass("fr-selected-cell")):"above"==n?(e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell")):"below"==n&&(e.addClass("fr-selected-cell"),r.table.insertRow(n),e.removeClass("fr-selected-cell")),te()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove(),t.shared.$ti_helper=null},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){te()},!0),t.events.$on(t.$wp,"scroll",function(){te()},!0)),Te=t.shared.$ti_helper,t.events.on("destroy",function(){Te=null}),t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function me(){xe=null,clearTimeout(Ae)}function ge(){ve().length>0?r():(t.popups.hide("table.insert"),t.toolbar.showInline())}function ve(){return t.el.querySelectorAll(".fr-selected-cell")}function be(){var n=ve();if(n.length){for(var r=n[0];r&&"TABLE"!=r.tagName&&r.parentNode!=t.el;)r=r.parentNode;return e(r&&"TABLE"==r.tagName?r:[])}return e([])}function ye(n){if(n.altKey&&n.which==e.FE.KEYCODE.SPACE){var i,o=t.selection.element();if("TD"==o.tagName||"TH"==o.tagName?i=o:e(o).closest("td").length>0?i=e(o).closest("td").get(0):e(o).closest("th").length>0&&(i=e(o).closest("th").get(0)),i)return n.preventDefault(),H(i,i),r(),!1}}function Ee(n){var r=ve();if(r.length>0){var i,o,a=I(),s=n.which;1==r.length?(i=r[0],o=i):(i=t.el.querySelector(".fr-cell-fixed"),o=t.el.querySelector(".fr-cell-handler"));var l=L(o,a);if(e.FE.KEYCODE.ARROW_RIGHT==s){if(l.col<a[0].length-1)return H(i,a[l.row][l.col+1]),!1}else if(e.FE.KEYCODE.ARROW_DOWN==s){if(l.row<a.length-1)return H(i,a[l.row+1][l.col]),!1}else if(e.FE.KEYCODE.ARROW_LEFT==s){if(l.col>0)return H(i,a[l.row][l.col-1]),!1}else if(e.FE.KEYCODE.ARROW_UP==s&&l.row>0)return H(i,a[l.row-1][l.col]),!1}}function we(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){Se=!1,$e=!1,_e=!1,t.events.$on(t.$el,"mousedown",z),t.popups.onShow("image.edit",function(){M(),Se=!1,$e=!1}),t.popups.onShow("link.edit",function(){M(),Se=!1,$e=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&M()}),t.events.$on(t.$el,"mouseenter","th, td",Y),t.events.$on(t.$win,"mouseup",q),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",q),t.events.$on(t.$win,"mousemove",de),t.events.$on(e(t.o_win),"scroll",se),t.events.on("contentChanged",function(){ve().length>0&&(r(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),ve().length>0&&r()}))}),t.events.$on(e(t.o_win),"resize",function(){M()}),t.events.on("toolbar.esc",function(){if(ve().length>0)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.$on(t.$el,"keydown",function(e){e.shiftKey?Ee(e)===!1&&setTimeout(function(){r()},0):Z(e)}),t.events.on("keydown",function(n){if(pe(n)===!1)return!1;var r=ve();if(r.length>0){if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return M(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),r=[],!1;if(r.length>1&&n.which==e.FE.KEYCODE.BACKSPACE){t.undo.saveStep();for(var i=0;i<r.length;i++)e(r[i]).html("<br>"),i==r.length-1&&e(r[i]).prepend(e.FE.MARKERS);return t.selection.restore(),t.undo.saveStep(),r=[],!1}if(r.length>1&&n.which!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n))return n.preventDefault(),r=[],!1}else if(r=[],ye(n)===!1)return!1},!0);var n=[];t.events.on("html.beforeGet",function(){n=ve();for(var e=0;e<n.length;e++)n[e].className=(n[e].className||"").replace(/fr-selected-cell/g,"")}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].className=(n[e].className?n[e].className.trim()+" ":"")+"fr-selected-cell";n=[]}),a(!0),u(!0)}t.events.on("destroy",me)}var Ce,Te,$e,Se,xe,Ae,_e;return{_init:we,insert:m,remove:g,insertRow:y,deleteRow:E,insertColumn:w,deleteColumn:C,mergeCells:A,splitCellVertically:k,splitCellHorizontally:_,addHeader:v,removeHeader:b,setBackground:O,showInsertPopup:n,showEditPopup:r,showColorsPopup:i,back:ge,verticalAlign:R,horizontalAlign:N,applyStyle:D,selectedTable:be,selectedCells:ve}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){var e=this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]');e.hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableRows.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableColumns.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCells.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(n[r])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell").closest("table");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+r.toLowerCase()+'" title="'+this.language.translate(n[r])+'">'+this.language.translate(r)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var r=this.$el.find(".fr-selected-cell:first");r&&n.find(".fr-command").each(function(){var t=e(this).data("param1"),n=r.hasClass(t);e(this).toggleClass("fr-active",n).attr("aria-selected",n)})}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{}),e.FE.URLRegEx=/(\s|^|>)((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+(\.[a-zA-Z]{2,3})?(:\d*)?(\/[^\s<]*)?)(\s|$|<)/gi,e.FE.PLUGINS.url=function(t){function n(e){for(;e.parentNode;)if(e=e.parentNode,["A","BUTTON","TEXTAREA"].indexOf(e.tagName)>=0)return!0;return!1}function r(){for(var r=t.doc.createTreeWalker(t.el,NodeFilter.SHOW_TEXT,t.node.filter(function(t){return e.FE.URLRegEx.test(t.textContent.replace(/&nbsp;/gi,""))&&!n(t)}),!1);r.nextNode();){var i=r.currentNode,o=null;t.opts.linkAlwaysNoFollow&&(o="nofollow"),t.opts.linkAlwaysBlank&&(o?o+=" noopener noreferrer":o="noopener noreferrer"),e(i).before(i.textContent.replace(e.FE.URLRegEx,"$1<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(o?' rel="'+o+'"':"")+' href="$2">$2</a>$7')),i.parentNode.removeChild(i)}}function i(){t.events.on("paste.afterCleanup",function(n){if(e.FE.URLRegEx.test(n))return n.replace(e.FE.URLRegEx,"$1<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(t.opts.linkAlwaysNoFollow?' rel="nofollow"':"")+' href="$2">$2</a>$7')}),t.events.on("keyup",function(n){var i=n.which;i!=e.FE.KEYCODE.ENTER&&i!=e.FE.KEYCODE.SPACE||r(t.node.contents(t.el))}),t.events.on("keydown",function(n){var r=n.which;if(r==e.FE.KEYCODE.ENTER){var i=t.selection.element();if(("A"==i.tagName||e(i).parents("a").length)&&t.selection.info(i).atEnd)return n.stopImmediatePropagation(),"A"!==i.tagName&&(i=e(i).parents("a")[0]),e(i).after("&nbsp;"+e.FE.MARKERS),t.selection.restore(),!1}})}return{_init:i}}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/(?:channels\/[A-z]+\/|groups\/[A-z]+\/videos\/)?(.+)/g,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function n(){var e=t.popups.get("video.insert"),n=e.find(".fr-video-by-url-layer input");n.val("").trigger("change");var r=e.find(".fr-video-embed-layer textarea");r.val("").trigger("change"),r=e.find(".fr-video-upload-layer input"),r.val("").trigger("change")}function r(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),n=t.popups.get("video.insert");if(n||(n=o()),h(),!n.hasClass("fr-active")){t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb);var r=e.offset().left+e.outerWidth()/2,i=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",r,i,e.outerHeight())}}function i(){var e=t.popups.get("video.edit");if(e||(e=z()),e){t.popups.setContainer("video.edit",t.$sc),t.popups.refresh("video.edit");var n=ve.find("iframe, embed, video"),r=n.offset().left+n.outerWidth()/2,i=n.offset().top+n.outerHeight();t.popups.show("video.edit",r,i,n.outerHeight())}}function o(e){if(e)return t.popups.onRefresh("video.insert",n),t.popups.onHide("image.insert",ie),!0;var r="";t.opts.videoInsertButtons.length>1&&(r='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var i="";t.opts.videoInsertButtons.indexOf("videoByURL")>=0&&(i='<div class="fr-video-by-url-layer fr-layer fr-active" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var o="";t.opts.videoInsertButtons.indexOf("videoEmbed")>=0&&(o='<div class="fr-video-embed-layer fr-layer" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+t.id+'" type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var a="";t.opts.videoInsertButtons.indexOf("videoUpload")>=0&&(a='<div class="fr-video-upload-layer fr-layer" id="fr-video-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop video")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+t.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+t.id+'" role="button"></div></div>');var s='<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>',l={buttons:r,by_url_layer:i,embed_layer:o,upload_layer:a,progress_bar:s},c=t.popups.create("video.insert",l);return H(c),c}function a(e){var n,r,i=t.popups.get("video.insert");if(!ve&&!t.opts.toolbarInline){var o=t.$tb.find('.fr-command[data-cmd="insertVideo"]');n=o.offset().left+o.outerWidth()/2,r=o.offset().top+(t.opts.toolbarBottom?10:o.outerHeight()-10)}t.opts.toolbarInline&&(r=i.offset().top-t.helpers.getPX(i.css("margin-top")),i.hasClass("fr-above")&&(r+=i.outerHeight())),i.find(".fr-layer").removeClass("fr-active"),i.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",n,r,0),t.accessibility.focusPopup(i)}function s(e){var n=t.popups.get("video.insert");n.find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function l(e){var n=t.popups.get("video.insert");n.find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function c(e){var n=t.popups.get("video.insert");n.find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function u(e){t.events.focus(!0),t.selection.restore();var n=!1;ve&&(re(),n=!0),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var r=t.$el.find(".fr-jiv");r.removeClass("fr-jiv"),oe(r,t.opts.videoDefaultDisplay,t.opts.videoDefaultAlign),r.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger(n?"video.replaced":"video.inserted",[r])}function d(){var n=e(this);t.popups.hide("video.insert"),n.removeClass("fr-uploading"),n.parent().next().is("br")&&n.parent().next().remove(),y(n.parent()),t.events.trigger("video.loaded",[n.parent()])}function f(e,n,r,i,o){t.edit.off(),m("Loading video"),n&&(e=t.helpers.sanitizeURL(e));var a=document.createElement("video");a.oncanplay=function(){var n,a;if(i){t.undo.canDo()||i.find("video").hasClass("fr-uploading")||t.undo.saveStep();var s=i.find("video").data("fr-old-src"),l=i.data("fr-replaced");i.data("fr-replaced",!1),t.$wp?(n=i.clone(),n.find("video").removeData("fr-old-src").removeClass("fr-uploading"),n.find("video").off("canplay"),s&&i.find("video").attr("src",s),i.replaceWith(n)):n=i;for(var c=n.find("video").get(0).attributes,u=0;u<c.length;u++){var f=c[u];0===f.nodeName.indexOf("data-")&&n.find("video").removeAttr(f.nodeName)}if("undefined"!=typeof r)for(a in r)r.hasOwnProperty(a)&&"link"!=a&&n.find("video").attr("data-"+a,r[a]);n.find("video").on("canplay",d),n.find("video").attr("src",e),t.edit.on(),D(),t.undo.saveStep(),t.$el.blur(),t.events.trigger(l?"video.replaced":"video.inserted",[n,o])}},a.onerror=function(){W(be)},p("Loading video"),a.src=e}function p(e){var n=t.popups.get("video.insert");if(n||(n=o()),n.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").addClass("fr-active"),n.find(".fr-buttons").hide(),ve){var r=ve.find("video");t.popups.setContainer("video.insert",t.$sc);var i=r.offset().left+r.width()/2,a=r.offset().top+r.height();t.popups.show("video.insert",i,a,r.outerHeight())}"undefined"==typeof e&&m("Uploading",0)}function h(e){var n=t.popups.get("video.insert");if(n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-video-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),e||t.$el.find("video.fr-error").length)){if(t.events.focus(),t.$el.find("video.fr-error").length&&(t.$el.find("video.fr-error").parent().remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&ve){var r=ve;F(!0),t.selection.setAfter(r.find("video").get(0)),t.selection.restore()}t.popups.hide("video.insert")}}function m(e,n){var r=t.popups.get("video.insert");if(r){var i=r.find(".fr-video-progress-bar-layer");i.find("h3").text(e+(n?" "+n+"%":"")),i.removeClass("fr-error"),n?(i.find("div").removeClass("fr-indeterminate"),i.find("div > span").css("width",n+"%")):i.find("div").addClass("fr-indeterminate")}}function g(e){p();var n=t.popups.get("video.insert"),r=n.find(".fr-video-progress-bar-layer");r.addClass("fr-error");var i=r.find("h3");i.text(e),t.events.disableBlur(),i.focus()}function v(n){if("undefined"==typeof n){var r=t.popups.get("video.insert");n=r.find('.fr-video-by-url-layer input[type="text"]').val()||""}var i=null;if(t.helpers.isURL(n))for(var o=0;o<e.FE.VIDEO_PROVIDERS.length;o++){var a=e.FE.VIDEO_PROVIDERS[o];if(a.test_regex.test(n)){i=n.replace(a.url_regex,a.url_text),i=a.html.replace(/\{url\}/,i);break}}i?u(i):t.events.trigger("video.linkError",[n])}function b(n){if("undefined"==typeof n){var r=t.popups.get("video.insert");n=r.find(".fr-video-embed-layer textarea").val()||""}0!==n.length&&e.FE.VIDEO_EMBED_REGEX.test(n)?u(n):t.events.trigger("video.codeError",[n])}function y(e){L.call(e.get(0))}function E(n){try{if(t.events.trigger("video.uploaded",[n],!0)===!1)return t.edit.on(),!1;var r=e.parseJSON(n);return r.link?r:(W(ye,n),!1)}catch(i){return W(we,n),!1}}function w(n){try{var r=e(n).find("Location").text(),i=e(n).find("Key").text();return t.events.trigger("video.uploadedToS3",[r,i,n],!0)===!1?(t.edit.on(),!1):r}catch(o){return W(we,n),!1}}function C(e){m("Loading video");var n=this.status,r=this.response,i=this.responseXML,o=this.responseText;try{if(t.opts.videoUploadToS3)if(201==n){var a=w(i);a&&f(a,!1,[],e,r||i)}else W(we,r||i);else if(n>=200&&n<300){var s=E(o);s&&f(s.link,!1,s,e,r||o)}else W(Ee,r||o)}catch(l){W(we,r||o)}}function T(){W(we,this.response||this.responseText||this.responseXML)}function $(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;m("Uploading",t)}}function S(){t.edit.on(),h(!0)}function x(n,r,i){var o,a="";if(r&&"undefined"!=typeof r)for(o in r)r.hasOwnProperty(o)&&"link"!=o&&(a+=" data-"+o+'="'+r[o]+'"');var s=t.opts.videoDefaultWidth;s&&"auto"!=s&&(s+="px");var l=e('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'"><video src="'+n+'" '+a+(s?' style="width: '+s+';"':"")+'" controls>'+t.language.translate("Your browser does not support HTML5 video.")+"</video></span>");l.toggleClass("fr-draggable",t.opts.videoMove),l.find("video").on("canplay",i),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.videoSplitHTML?t.markers.split():t.markers.insert();var c=t.$el.find(".fr-marker");return c.replaceWith(l),t.html.wrap(),t.selection.clear(),l}function A(n){if(!t.core.sameInstance(ge))return!0;n.preventDefault(),n.stopPropagation();var r=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null),i=n.pageY||(n.originalEvent.touches?n.originalEvent.touches[0].pageY:null);return!(!r||!i)&&(t.undo.canDo()||t.undo.saveStep(),me=e(this),me.data("start-x",r),me.data("start-y",i),he.show(),t.popups.hideAll(),void P())}function _(e){if(!t.core.sameInstance(ge))return!0;if(me){e.preventDefault();var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),r=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!n||!r)return!1;var i=me.data("start-x"),o=me.data("start-y");me.data("start-x",n),me.data("start-y",r);var a=n-i,s=r-o,l=ve.find("iframe, embed, video"),c=l.width(),u=l.height();(me.hasClass("fr-hnw")||me.hasClass("fr-hsw"))&&(a=0-a),(me.hasClass("fr-hnw")||me.hasClass("fr-hne"))&&(s=0-s),l.css("width",c+a),l.css("height",u+s),l.removeAttr("width"),l.removeAttr("height"),I()}}function k(e){return!t.core.sameInstance(ge)||void(me&&ve&&(e&&e.stopPropagation(),me=null,he.hide(),I(),i(),t.undo.saveStep()))}function O(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function R(e,t,n,r){return e.pageX=t,e.pageY=t,A.call(this,e),e.pageX=e.pageX+n*Math.floor(Math.pow(1.1,r)),e.pageY=e.pageY+n*Math.floor(Math.pow(1.1,r)),_.call(this,e),k.call(this,e),++r}function N(){var n;if(t.shared.$video_resizer?(ge=t.shared.$video_resizer,he=t.shared.$vid_overlay,t.events.on("destroy",function(){ge.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),ge=t.shared.$video_resizer,t.events.$on(ge,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(ge.append(O("nw")+O("ne")+O("sw")+O("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),he=t.shared.$vid_overlay,n=ge.get(0).ownerDocument,e(n).find("body").append(he))),t.events.on("shared.destroy",function(){ge.html("").removeData().remove(),ge=null,t.opts.videoResize&&(he.remove(),he=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",function(){F(!0)}),t.opts.videoResize){n=ge.get(0).ownerDocument,t.events.$on(ge,t._mousedown,".fr-handler",A),
t.events.$on(e(n),t._mousemove,_),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,k),t.events.$on(he,"mouseleave",k);var r=1,i=null,o=0;t.events.on("keydown",function(n){if(ve){var a=navigator.userAgent.indexOf("Mac OS X")!=-1?n.metaKey:n.ctrlKey,s=n.which;(s!==i||n.timeStamp-o>200)&&(r=1),(s==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&s==e.FE.KEYCODE.FF_EQUALS)&&a&&!n.altKey?r=R.call(this,n,1,1,r):(s==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&s==e.FE.KEYCODE.FF_HYPHEN)&&a&&!n.altKey&&(r=R.call(this,n,2,-1,r)),i=s,o=n.timeStamp}}),t.events.on("keyup",function(){r=1})}}function D(){var n,r=Array.prototype.slice.call(t.el.querySelectorAll("video")),i=[];for(n=0;n<r.length;n++)i.push(r[n].getAttribute("src")),e(r[n]).toggleClass("fr-draggable",t.opts.videoMove),""===r[n].getAttribute("class")&&r[n].removeAttribute("class"),""===r[n].getAttribute("style")&&r[n].removeAttribute("style");if(xe)for(n=0;n<xe.length;n++)i.indexOf(xe[n].getAttribute("src"))<0&&t.events.trigger("video.removed",[e(xe[n])]);xe=r}function I(){ge||N(),(t.$wp||t.$sc).append(ge),ge.data("instance",t);var e=ve.find("iframe, embed, video");ge.css("top",(t.opts.iframe?e.offset().top-1:e.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?e.offset().left-1:e.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",e.outerWidth()).css("height",e.height()).addClass("fr-active")}function L(n){if(n&&"touchend"==n.type&&Ae)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;if(t.edit.isDisabled())return!1;for(var r=0;r<e.FE.INSTANCES.length;r++)e.FE.INSTANCES[r]!=t&&e.FE.INSTANCES[r].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),ve=e(this),e(this).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),ue(),I(),i(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function F(e){ve&&(B()||e===!0)&&(ge.removeClass("fr-active"),t.toolbar.enable(),ve.removeClass("fr-active"),ve=null,P())}function M(){t.shared.vid_exit_flag=!0}function P(){t.shared.vid_exit_flag=!1}function B(){return t.shared.vid_exit_flag}function U(n,r,i){function o(){var i=e(this);i.off("canplay"),i.addClass("fr-uploading"),i.parent().next().is("br")&&i.parent().next().remove(),t.placeholder.refresh(),i.parent().is(ve)||y(i.parent()),I(),p(),t.edit.off(),n.onload=function(){C.call(n,i.parent())},n.onerror=T,n.upload.onprogress=$,n.onabort=S,i.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(r)}var a,s=new FileReader;s.addEventListener("load",function(){for(var e=s.result,n=atob(s.result.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));if(e=window.URL.createObjectURL(new Blob([new Uint8Array(r)],{type:"video/mp4"})),ve){ve.data("fr-replaced",!0);var l=ve.find("video");l.length?(l.on("canplay",o),t.edit.on(),t.undo.saveStep(),l.data("fr-old-src",l.attr("src")),l.attr("src",e)):(re(),a=x(e,null,o))}else a=x(e,null,o)},!1),s.readAsDataURL(i)}function j(e){if("undefined"!=typeof e&&e.length>0){if(t.events.trigger("video.beforeUpload",[e])===!1)return!1;var n=e[0];if(n.size>t.opts.videoMaxSize)return W(Ce),!1;if(t.opts.videoAllowedTypes.indexOf(n.type.replace(/video\//g,""))<0)return W(Te),!1;var r;if(t.drag_support.formdata&&(r=t.drag_support.formdata?new FormData:null),r){var i;if(t.opts.videoUploadToS3!==!1){r.append("key",t.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),r.append("success_action_status","201"),r.append("X-Requested-With","xhr"),r.append("Content-Type",n.type);for(i in t.opts.videoUploadToS3.params)t.opts.videoUploadToS3.params.hasOwnProperty(i)&&r.append(i,t.opts.videoUploadToS3.params[i])}for(i in t.opts.videoUploadParams)t.opts.videoUploadParams.hasOwnProperty(i)&&r.append(i,t.opts.videoUploadParams[i]);r.append(t.opts.videoUploadParam,n);var o=t.opts.videoUploadURL;t.opts.videoUploadToS3&&(o=t.opts.videoUploadToS3.uploadURL?t.opts.videoUploadToS3.uploadURL:"https://"+t.opts.videoUploadToS3.region+".amazonaws.com/"+t.opts.videoUploadToS3.bucket);var a=t.core.getXHR(o,t.opts.videoUploadMethod);U(a,r,n)}}}function H(n){t.events.$on(n,"dragover dragenter",".fr-video-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-video-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-upload-upload-layer",function(r){r.preventDefault(),r.stopPropagation(),e(this).removeClass("fr-drop");var i=r.originalEvent.dataTransfer;if(i&&i.files){var o=n.data("instance")||t;o.events.disableBlur(),o.video.upload(i.files),o.events.enableBlur()}}),t.events.$on(n,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var r=n.data("instance")||t;r.events.disableBlur(),n.find("input:focus").blur(),r.events.enableBlur(),r.video.upload(this.files)}e(this).val("")})}function K(){t.events.on("mousedown window.mousedown",M),t.events.on("window.touchmove",P),t.events.on("mouseup window.mouseup",F),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&F()}),t.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){F(!0)})}function W(e,n){t.edit.on(),ve&&ve.find("video").addClass("fr-error"),g(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("video.error",[{code:e,message:Se[e]},n])}function z(){var e="";if(t.opts.videoEditButtons.length>0){e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons),e+="</div>";var n={buttons:e},r=t.popups.create("video.edit",n);return t.events.$on(t.$wp,"scroll.video-edit",function(){ve&&t.popups.isVisible("video.edit")&&(t.events.disableBlur(),y(ve))}),r}return!1}function q(){if(ve){var e=t.popups.get("video.size"),n=ve.find("iframe, embed, video");e.find('input[name="width"]').val(n.get(0).style.width||n.attr("width")).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height||n.attr("height")).trigger("change")}}function Y(){var e=t.popups.get("video.size");e||(e=V()),h(),t.popups.refresh("video.size"),t.popups.setContainer("video.size",t.$sc);var n=ve.find("iframe, embed, video"),r=n.offset().left+n.width()/2,i=n.offset().top+n.height();t.popups.show("video.size",r,i,n.height())}function V(e){if(e)return t.popups.onRefresh("video.size",q),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>";var r="";r='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var i={buttons:n,size_layer:r},o=t.popups.create("video.size",i);return t.events.$on(t.$wp,"scroll",function(){ve&&t.popups.isVisible("video.size")&&(t.events.disableBlur(),y(ve))}),o}function G(e){if("undefined"==typeof e&&(e=ve),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function X(e){ve.removeClass("fr-fvr fr-fvl"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?ve.addClass("fr-fvl"):"right"==e&&ve.addClass("fr-fvr"):oe(ve,J(),e),I(),i()}function Q(e){return!!ve&&void e.find("> *:first").replaceWith(t.icon.create("video-align-"+G()))}function Z(e,t){ve&&t.find('.fr-command[data-param1="'+G()+'"]').addClass("fr-active").attr("aria-selected",!0)}function J(e){"undefined"==typeof e&&(e=ve);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ee(e){ve.removeClass("fr-dvi fr-dvb"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?ve.addClass("fr-dvi"):"block"==e&&ve.addClass("fr-dvb"):oe(ve,e,G()),I(),i()}function te(e,t){ve&&t.find('.fr-command[data-param1="'+J()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ne(){var e=t.popups.get("video.insert");e||(e=o()),t.popups.isVisible("video.insert")||(h(),t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$sc));var n=ve.offset().left+ve.width()/2,r=ve.offset().top+ve.height();t.popups.show("video.insert",n,r,ve.outerHeight())}function re(){if(ve&&t.events.trigger("video.beforeRemove",[ve])!==!1){var e=ve;t.popups.hideAll(),F(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function ie(){h()}function oe(e,n,r){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+r[0]+" fr-dv"+n[0])):"inline"==n?(e.css({display:"inline-block"}),"center"==r?e.css({"float":"none"}):"left"==r?e.css({"float":"left"}):e.css({"float":"right"})):(e.css({display:"block",clear:"both"}),"left"==r?e.css({textAlign:"left"}):"right"==r?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function ae(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fi"+G(e)[0]),e.addClass("fr-di"+J(e)[0]))}function se(e){var t=e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,n=e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":G(e);oe(e,t,n),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function le(){t.$el.find("video").filter(function(){return 0===e(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var n=e(this).attr("src"),r=0;r<e.FE.VIDEO_PROVIDERS.length;r++){var i=e.FE.VIDEO_PROVIDERS[r];if(i.test_regex.test(n))return!0}return!1}).map(function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var n=t.$el.find("span.fr-video, video"),r=0;r<n.length;r++){var i=e(n[r]);!t.opts.htmlUntouched&&t.opts.useClasses?(ae(i),t.opts.videoTextNear||i.removeClass("fr-dvi").addClass("fr-dvb")):t.opts.htmlUntouched||t.opts.useClasses||se(i)}n.toggleClass("fr-draggable",t.opts.videoMove)}function ce(){K(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){Ae=!1}),t.events.$on(t.$el,"touchmove",function(){Ae=!0})),t.events.on("html.set",le),le(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),t.events.$on(t.$el,"click touchend","span.fr-video",L),t.events.on("keydown",function(n){var r=n.which;return!ve||r!=e.FE.KEYCODE.BACKSPACE&&r!=e.FE.KEYCODE.DELETE?ve&&r==e.FE.KEYCODE.ESC?(F(!0),n.preventDefault(),!1):ve&&r!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),re(),!1)},!0),t.events.on("toolbar.esc",function(){if(ve)return t.events.disableBlur(),t.events.focus(),!1},!0),t.events.on("toolbar.focusEditor",function(){if(ve)return!1},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),o(!0),V(!0)}function ue(){if(ve){t.selection.clear();var e=t.doc.createRange();e.selectNode(ve.get(0));var n=t.selection.get();n.addRange(e)}}function de(){ve?(t.events.disableBlur(),ve.trigger("click")):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())}function fe(e,n){if(ve){var r=t.popups.get("video.size"),i=ve.find("iframe, embed, video");i.css("width",e||r.find('input[name="width"]').val()),i.css("height",n||r.find('input[name="height"]').val()),i.get(0).style.width&&i.removeAttr("width"),i.get(0).style.height&&i.removeAttr("height"),r.find("input:focus").blur(),setTimeout(function(){ve.trigger("click")},t.helpers.isAndroid()?50:0)}}function pe(){return ve}var he,me,ge,ve,be=1,ye=2,Ee=3,we=4,Ce=5,Te=6,$e=7,Se={};Se[be]="Video cannot be loaded from the passed link.",Se[ye]="No link in upload response.",Se[Ee]="Error during file upload.",Se[we]="Parsing response failed.",Se[Ce]="File is too large.",Se[Te]="Video file type is invalid.",Se[$e]="Files can be uploaded only to same domain in IE 8 and IE 9.";var xe,Ae;return t.shared.vid_exit_flag=!1,{_init:ce,showInsertPopup:r,showLayer:a,refreshByURLButton:s,refreshEmbedButton:l,refreshUploadButton:c,upload:j,insertByURL:v,insertEmbed:b,insert:u,align:X,refreshAlign:Q,refreshAlignOnShow:Z,display:ee,refreshDisplayOnShow:te,remove:re,hideProgressBar:h,showSizePopup:Y,replace:ne,back:de,setSize:fe,get:pe}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.DefineIcon("videoUpload",{NAME:"upload"}),e.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("video-align",{NAME:"align-left"}),e.FE.DefineIcon("video-align-left",{NAME:"align-left"}),e.FE.DefineIcon("video-align-right",{NAME:"align-right"}),e.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',n=e.FE.COMMANDS.videoAlign.options;for(var r in n)n.hasOwnProperty(r)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+r+'" title="'+this.language.translate(n[r])+'">'+this.icon.create("video-align-"+r)+'<span class="fr-sr-only">'+this.language.translate(n[r])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoReplace",{NAME:"exchange"}),e.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){var t=this.video.get();t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})}),angular.module("froala",[]).value("froalaConfig",{}).directive("froala",["froalaConfig",function(e){"use strict";var t=0,n={immediateAngularModelUpdate:!1,angularIgnoreAttrs:null},r="innerHTML",i={froalaOptions:"=froala",initFunction:"&froalaInit"};e=e||{};var o="manual",a="automatic",s=["img","button","input","a"];return{restrict:"A",require:"ngModel",scope:i,link:function(i,l,c,u){var d=!1;s.indexOf(l.prop("tagName").toLowerCase())!=-1&&(d=!0);var f={editorInitialized:!1};if(i.initMode=c.froalaInit?o:a,f.init=function(){c.id||c.$set("id","froala-"+t++),i.initMode===a&&f.createEditor(),u.$render=function(){if(f.editorInitialized)if(d){var e=u.$modelValue;if(e){for(var t in e)e.hasOwnProperty(t)&&t!=r&&l.attr(t,e[t]);e.hasOwnProperty(r)&&(l[0].innerHTML=e[r])}}else l.froalaEditor("html.set",u.$viewValue||"",!0),l.froalaEditor("undo.reset"),l.froalaEditor("undo.saveStep")},u.$isEmpty=function(e){if(!e)return!0;var t=l.froalaEditor("node.isEmpty",jQuery("<div>"+e+"</div>").get(0));return t}},f.createEditor=function(t){if(f.listeningEvents=["froalaEditor"],!f.editorInitialized){t=t||{},f.options=angular.extend({},n,e,i.froalaOptions,t),f.options.immediateAngularModelUpdate&&f.listeningEvents.push("keyup");var r=function(){f.editorInitialized=!0,u.$render()};d?r():f.registerEventsWithCallbacks("froalaEditor.initialized",function(){r()});for(var o in f.options.events)f.options.events.hasOwnProperty(o)&&f.registerEventsWithCallbacks(o,f.options.events[o]);f.froalaElement=l.froalaEditor(f.options).data("froala.editor").$el,f.froalaEditor=angular.bind(l,l.froalaEditor),f.initListeners(),i.froalaOptions&&(i.froalaOptions.froalaEditor=f.froalaEditor)}},f.initListeners=function(){f.options.immediateAngularModelUpdate&&f.froalaElement.on("keyup",function(){i.$evalAsync(f.updateModelView)}),l.on("froalaEditor.contentChanged",function(){i.$evalAsync(f.updateModelView)}),l.bind("$destroy",function(){l.off(f.listeningEvents.join(" ")),l.froalaEditor("destroy"),l=null})},f.updateModelView=function(){var e=null;if(d){for(var t=l[0].attributes,n={},o=0;o<t.length;o++){var a=t[o].name;f.options.angularIgnoreAttrs&&f.options.angularIgnoreAttrs.indexOf(a)!=-1||(n[a]=t[o].value)}l[0].innerHTML&&(n[r]=l[0].innerHTML),e=n}else{var s=l.froalaEditor("html.get");angular.isString(s)&&(e=s)}u.$setViewValue(e),i.$root.$$phase||i.$apply()},f.registerEventsWithCallbacks=function(e,t){e&&t&&(f.listeningEvents.push(e),l.on(e,t))},i.initMode===o){var p=f,h={initialize:f.createEditor,destroy:function(){p.froalaEditor&&(p.froalaEditor("destroy"),p.editorInitialized=!1)},getEditor:function(){return p.froalaEditor?p.froalaEditor:null}};i.initFunction({initControls:h})}f.init()}}}]).directive("froalaView",["$sce",function(e){return{restrict:"ACM",scope:!1,link:function(t,n,r){n.addClass("fr-view"),t.$watch(r.froalaView,function(t){if(t||""===t){var r=e.trustAsHtml(t);n.html(r.toString())}})}}}]);